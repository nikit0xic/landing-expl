"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[47497],{670158:(_,e,o)=>{function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 3.9c-1.06 0-2.07.2-3 .57a.9.9 0 1 1-.66-1.67A9.88 9.88 0 0 1 12 2.1a9.9 9.9 0 0 1 9.9 9.9 9.88 9.88 0 0 1-.7 3.66.9.9 0 1 1-1.67-.66A8.1 8.1 0 0 0 12 3.9Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M11.13 7a.9.9 0 0 1 .9-.9 5.9 5.9 0 0 1 5.87 5.85.9.9 0 0 1-1.8.02 4.1 4.1 0 0 0-4.07-4.07.9.9 0 0 1-.9-.9ZM5 19a9.87 9.87 0 0 0 7 2.9c2.41 0 4.62-.86 6.33-2.3l1.13 1.14a.9.9 0 0 0 1.28-1.28L4.54 3.26a.9.9 0 1 0-1.28 1.28L4.4 5.66A9.86 9.86 0 0 0 2.1 12 9.87 9.87 0 0 0 5 19Zm-1.1-7c0 2.24.9 4.26 2.37 5.73A8.07 8.07 0 0 0 12 20.1c1.91 0 3.67-.66 5.06-1.77l-1.57-1.57A5.88 5.88 0 0 1 12 17.9a5.88 5.88 0 0 1-4.17-1.73A5.88 5.88 0 0 1 6.1 12a5.88 5.88 0 0 1 1.14-3.49L5.67 6.94A8.06 8.06 0 0 0 3.9 12Zm4 0a4.1 4.1 0 0 0 1.2 2.9 4.08 4.08 0 0 0 2.9 1.2c.8 0 1.56-.23 2.2-.64l-1.65-1.64c-.66.2-1.4.01-1.9-.48a1.92 1.92 0 0 1-.47-1.89L8.54 9.81A4.08 4.08 0 0 0 7.9 12Z" clip-rule="evenodd"/></svg>',name:"live_disable_outline_24"}}o.d(e,{getIcon24LiveDisableOutline:()=>t})},383450:(_,e,o)=>{function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M5 5a9.87 9.87 0 0 1 7-2.9A9.87 9.87 0 0 1 19 5a9.87 9.87 0 0 1 2.9 7 9.87 9.87 0 0 1-2.9 7 9.87 9.87 0 0 1-7 2.9A9.87 9.87 0 0 1 5 19a9.87 9.87 0 0 1-2.9-7A9.87 9.87 0 0 1 5 5Zm7-1.1c-2.24 0-4.26.9-5.73 2.37A8.07 8.07 0 0 0 3.9 12c0 2.24.9 4.26 2.37 5.73A8.07 8.07 0 0 0 12 20.1a8.07 8.07 0 0 0 5.73-2.37A8.07 8.07 0 0 0 20.1 12c0-2.24-.9-4.26-2.37-5.73A8.07 8.07 0 0 0 12 3.9Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M7.83 7.83A5.88 5.88 0 0 1 12 6.1c1.63 0 3.1.66 4.17 1.73A5.88 5.88 0 0 1 17.9 12a5.88 5.88 0 0 1-1.73 4.17A5.88 5.88 0 0 1 12 17.9a5.88 5.88 0 0 1-4.17-1.73A5.88 5.88 0 0 1 6.1 12c0-1.63.66-3.1 1.73-4.17ZM12 7.9a4.08 4.08 0 0 0-2.9 1.2A4.08 4.08 0 0 0 7.9 12a4.1 4.1 0 0 0 1.2 2.9 4.08 4.08 0 0 0 2.9 1.2 4.08 4.08 0 0 0 2.9-1.2 4.08 4.08 0 0 0 1.2-2.9 4.08 4.08 0 0 0-1.2-2.9A4.08 4.08 0 0 0 12 7.9Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M13.34 10.66a1.9 1.9 0 0 0-2.68 0 1.9 1.9 0 0 0 0 2.68 1.9 1.9 0 0 0 2.68 0 1.9 1.9 0 0 0 0-2.68Z" clip-rule="evenodd"/></svg>',name:"live_outline_24"}}o.d(e,{getIcon24LiveOutline:()=>t})},483634:(_,e,o)=>{function t(){return{icon:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 2.1c.68 0 1.33.1 1.95.27a.9.9 0 0 1-.5 1.73A5.1 5.1 0 0 0 12 3.9c-2.9 0-5 2.31-5.1 5.5v1.83c0 .8-.34 1.38-1.06 2.15l-.72.75c-.54.57-.72.88-.72 1.2 0 .19.01.29.06.38.1.2.38.37 1.1.39h12.7c.82 0 1.16-.17 1.28-.4.04-.1.06-.2.06-.37 0-.32-.18-.63-.72-1.2l-.55-.57-.26-.27a6.8 6.8 0 0 1-.22-.25.9.9 0 1 1 1.4-1.15c.07.1.15.19.26.3l.38.4c1.08 1.09 1.51 1.72 1.51 2.74 0 .44-.05.79-.27 1.2-.43.83-1.3 1.31-2.62 1.36l-.25.01h-1.88v.03c-.63 2.38-2.14 3.67-4.38 3.67-2.24 0-3.75-1.3-4.37-3.67v-.03h-1.9c-1.48 0-2.46-.5-2.9-1.41-.19-.4-.23-.72-.23-1.16 0-.96.38-1.57 1.31-2.55l.47-.47.24-.26c.31-.35.45-.58.48-.76V9.63C5.1 5.38 7.99 2.1 12 2.1zm2.5 15.8h-5c.45 1.32 1.24 1.9 2.5 1.9s2.05-.58 2.5-1.9zm4.96-13.64a.9.9 0 1 1 1.28 1.28l-4.2 4.2a.9.9 0 0 1-1.28 0l-2-2a.9.9 0 1 1 1.28-1.28l1.36 1.37z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"notification_check_outline_24"}}o.d(e,{getIcon24NotificationCheckOutline:()=>t})},423382:(_,e,o)=>{function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.1c4.02 0 6.9 3.28 6.9 7.53v1.6c0 .23.2.53.72 1.08l.27.27c1.08 1.1 1.51 1.73 1.51 2.75 0 .44-.05.79-.27 1.2-.45.88-1.42 1.37-2.87 1.37h-1.9c-.64 2.33-2.14 3.6-4.36 3.6-2.25 0-3.75-1.3-4.37-3.67l.02.07H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.02.43-1.65 1.51-2.75l.27-.27c.53-.55.72-.85.72-1.08v-1.6C5.1 5.38 7.99 2.1 12 2.1Zm2.47 15.8H9.53c.46 1.25 1.25 1.8 2.47 1.8 1.22 0 2.01-.55 2.47-1.8ZM12 3.9c-2.96 0-5.1 2.43-5.1 5.73v1.6c0 .85-.39 1.46-1.23 2.33l-.28.29c-.75.75-.99 1.11-.99 1.48 0 .19.01.29.06.38.1.22.43.39 1.28.39h12.52c.82 0 1.16-.17 1.28-.4.05-.1.06-.2.06-.37 0-.37-.24-.73-.99-1.48l-.28-.29c-.84-.87-1.23-1.48-1.23-2.33v-1.6c0-3.3-2.13-5.73-5.1-5.73Z"/></svg>',name:"notification_outline_24"}}o.d(e,{getIcon24NotificationOutline:()=>t})},623005:(_,e,o)=>{function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2.1c4.17 0 6.9 3.45 6.9 7.53v1.6c0 .25.15.54.58 1 .47.49 1.01.93 1.4 1.5.32.48.53 1.04.52 1.7a.9.9 0 1 1-1.8-.05c.02-.81-.93-1.4-1.43-1.92-.47-.5-1.07-1.23-1.07-2.23v-1.6c0-3.31-2.13-5.73-5.1-5.73-1 0-1.88.27-2.62.73a.9.9 0 0 1-.96-1.52A6.67 6.67 0 0 1 12 2.1Zm4.35 15.8c-.63 2.33-2.13 3.6-4.35 3.6s-3.72-1.27-4.35-3.6H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.3.94-2.16 1.78-3.02.53-.55.72-.85.72-1.08 0-1.5-.04-2.97.46-4.4l-2.3-2.3a.9.9 0 1 1 1.28-1.27l16.2 16.2a.9.9 0 1 1-1.28 1.28l-2.83-2.84h-.28Zm-6.82 0h4.94c-.46 1.25-1.25 1.8-2.47 1.8-1.22 0-2.01-.55-2.47-1.8ZM6.9 11.23c0-.97-.06-1.97.12-2.93l7.8 7.8H5.75c-.85 0-1.18-.17-1.28-.39-.34-.7.52-1.44.93-1.86.72-.73 1.51-1.52 1.51-2.62Z" clip-rule="evenodd"/></svg>',name:"notification_slash_outline_24"}}o.d(e,{getIcon24NotificationSlashOutline:()=>t})},916978:(_,e,o)=>{function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 28 28"><path d="M14 3.5h.12a1 1 0 0 1-.12 2h-.22C10.5 5.63 8 8.45 8 12.08v1.83c0 .93-.38 1.61-1.21 2.59l-.28.33c-.76.88-1.01 1.3-1.01 1.76 0 .22.02.35.07.46.12.26.49.45 1.43.45h14c.91 0 1.29-.2 1.42-.46a.94.94 0 0 0 .08-.45v-.21a1 1 0 0 1 2 .12v.09c0 .5-.06.89-.3 1.36-.5.99-1.58 1.55-3.2 1.55h-2.6C17.73 23.77 16.2 25 14 25s-3.73-1.24-4.4-3.5H7c-1.67 0-2.76-.57-3.24-1.6-.21-.45-.26-.81-.26-1.31 0-1.11.42-1.83 1.5-3.07l.26-.31c.54-.64.74-1 .74-1.3v-1.83C6 7.3 9.47 3.5 14 3.5Zm2.28 18h-4.56C12.17 22.54 12.9 23 14 23s1.83-.46 2.28-1.5Z"/><path fill-rule="evenodd" d="M22 3a6 6 0 1 0 0 12 6 6 0 0 0 0-12Zm2.78 4.22a.75.75 0 0 0-1.06 0l-2.47 2.47-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l3-3a.75.75 0 0 0 0-1.06Z" clip-rule="evenodd"/></svg>',name:"notification_check_outline_28"}}o.d(e,{getIcon28NotificationCheckOutline:()=>t})},251098:(_,e,o)=>{function t(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="notifications_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="notifications_28__notification_outline_28"><path d="M0 0h28v28H0z"/><path d="M14 3.5c4.54 0 8 3.8 8 8.58v1.83c0 .3.2.66.73 1.3l.27.3c1.07 1.25 1.5 1.96 1.5 3.08 0 .5-.06.89-.3 1.36-.5 1-1.58 1.55-3.2 1.55h-2.6C17.73 23.76 16.2 25 14 25c-2.21 0-3.73-1.24-4.4-3.5H7c-1.67 0-2.76-.57-3.24-1.6-.21-.45-.26-.81-.26-1.31 0-1.12.42-1.83 1.5-3.07l.26-.31c.54-.64.74-1 .74-1.3v-1.83C6 7.3 9.47 3.5 14 3.5Zm2.28 18h-4.56A2.25 2.25 0 0 0 14 23c1.1 0 1.83-.46 2.28-1.5ZM14 5.5c-3.38 0-6 2.86-6 6.58v1.83c0 .92-.38 1.61-1.21 2.59l-.28.33c-.76.88-1.01 1.3-1.01 1.76 0 .22.02.34.07.46.12.26.49.45 1.43.45h14c.91 0 1.29-.2 1.42-.46a.94.94 0 0 0 .08-.45c0-.46-.25-.88-1-1.76l-.3-.33c-.82-.98-1.2-1.66-1.2-2.6v-1.82c0-3.72-2.61-6.58-6-6.58Z" id="notifications_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"notifications_28"}}o.d(e,{getIcon28Notifications:()=>t})},402153:(_,e,o)=>{o.d(e,{memoizeFirstTruthy:()=>t});const t=_=>((_,e)=>{let o,t=!1;return(...i)=>(!0===t||(o=_(...i),t=e(o)),o)})(_,(_=>!!_))},448301:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(434788),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(954314),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15042),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(93367),_shared_lib_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(902947),_web_lib_feature_boxes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(128907),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(636322),_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(70689),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(800921),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(30655),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(585703),_lib_message_box__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(159663),_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(488844),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(180937),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(379440),_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(251087),_lib_stats__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(762003),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(198448),_lib_scroll__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(255693),_lib_video__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(45398),_lib_fx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(97875),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(471828),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(821121),_icons_desktop__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(423382),_icons_desktop__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(483634),_icons_desktop__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(251098),_icons_desktop__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(916978),_icons_desktop__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(623005),_icons_desktop__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(383450),_icons_desktop__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(670158),_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(671033),_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(940461),_web_photos_photo_restriction_blur_global_state__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(10698),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(977053),_web_page_promo_owner_buttons__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(709498),_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(618418),_web_components_ui_gallery__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(612291),_shared_groups_constants__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(193805),_web_feed_feed_stats__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(199777),_shared_post_stats_tmr_feed_view__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(570599),_web_video_constants__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(985403);const LS_KEY={posts_seen:"posts_seen",posts_seen_modules:"posts_seen_modules",posts_sent:"posts_sent",posts_extras:"posts_extras"},Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function(txtEl,addMedia,blob){window.stManager.add([window.jsc("web/upload.js")],(function(){addMedia.menu&&addMedia.menu.activate();const uploadEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domInsertBefore)(uploadEl,txtEl);const uploadData=window.wkcur?wkcur.wallUploadOpts:cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{const composer=txtEl&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.data)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(_,e){const o=void 0!==_.ind?_.ind:_,t=Upload.options[o];"form"==Upload.types[o]&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("file",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[o]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),t.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function(info,res){let params;const i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(_){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_7__.fromQueryString)(res)}params.photos?ajax.post("al_photos.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)({act:"choose_uploaded"},params),{onDone:function(_,e){e.uploadNum=i,addMedia.chooseMedia("photo",_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(e,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(_,e,o){const t=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[t]){const i=(cur.attachMediaIndexes||{})[t];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){const i={loaded:e,total:o};_.fileName&&(i.fileName=_.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",t,i)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onCheckComplete:function(_){Upload.types[_]="fileApi",Upload.onFileApiSend(_,[blob])},customShowProgress:function(){},multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}}))},buildMediaLinkEl:function(_,e){return'<div class="page_media_link_url '+(e?"page_market_owner_link":"")+'">'+(e?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+_+"</div></div>"},showManyPhoto:function(_,e,o,t){const i=[];return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_).childNodes,(function(_,e){const o=(e&&e.getAttribute&&e.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);o&&i.push(o[1]+"/"+o[2])})),t.additional={draft_photos:i.join(";")},(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_8__.showPhoto)(e,o,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(t,{queue:1}))},inviteToGroupByMessage:function(_,e,o,t,i){const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(e));return(0,_web_lib_feature_boxes__WEBPACK_IMPORTED_MODULE_4__.showWriteMessageBox)(_,t,{params:{onMessageSend:function(_){ajax.post("/al_page.php",{act:"a_invite_by_message",mid:_,gid:o,hash:i},{onDone:function(_,o,t){if(0===o){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geById)("page_block_group_invite_friends");if(_)return _.remove(),void(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)().hide()}t&&(e.outerHTML=t),_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(n,"group_box_row_collapsable")&&n.remove()}})}}}),!1},inviteToGroup:function(_,e,o,t,i){const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_)),a=function(_){const t=_?1:0,s=_?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("friends_cancel_event_invite"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("friends_send_event_invite");n.innerHTML='<a onclick="return page.inviteToGroup(this, '+e+", "+o+", "+t+", '"+i+"')\">"+s+"</a>",n.invited_value=t};return t?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:o,gid:e,hash:i}),a(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:o,gid:e,hash:i},{onDone:function(_,e){if(!_){a(0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(n);const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("error",s),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.se)('<div class="page_members_box_error msg"><div class="msg_text">'+e+"</div></div>");_?s.replaceChild(o,_):s.insertBefore(o,s.firstChild)}_&&1===n.invited_value&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(s,"group_box_row_collapsable")&&s.remove()}}),a(1)),!1},moneyTransferBox:function(_,e){let o={to_id:cur.oid,from:e};"own_profile"!==e&&"own_profile_tt"!==e||(o.to_id=0,o.tab="link"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_20__.MoneyTransfer.showMoneyTransferBox(o,{},(_=>(setTimeout((0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_error"),_).hide,2e3),!0))),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(_)},showMoreActions:function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("page_actions_more",_.parentElement);e&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(e))},onSubscriptionItemOnClick:function(_,e,o,t,i){const n=!Number(_.dataset.act),s=_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.isPageActionCell(_),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"redesigned-group-main-action");o&&Page.toggleSubscription(_,o,e,0,"page",(function(e,o){if(s&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.update(_,{icon:n?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_31__.getIcon24NotificationOutline)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_32__.getIcon24NotificationCheckOutline)().icon,label:n?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_notifications_on"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_notifications_set_up")}),a){const e=_.querySelector(".redesigned-group-main-action__icon");e&&(e.innerHTML=n?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_33__.getIcon28Notifications)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_34__.getIcon28NotificationCheckOutline)().icon)}_.dataset.act=String(o)})),t&&Page.toggleLiveSubscription(_,t,n?0:1,e,(function(){}),!0),i&&Page.togglePodcastsSubscription(_,i,n?0:1,e,(function(){}),!0)},toggleSubscription:function(_,e,o,t,i,n,s){const a=parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"act"))?1:0,l={onDone:e=>{if(n)n(e,a?0:1,_);else{const o=_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.isPageActionCell(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"ui_actions_menu_item");if(o)_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.update(_,{icon:a?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_35__.getIcon24NotificationSlashOutline)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_31__.getIcon24NotificationOutline)().icon,label:e});else if(t){const e=_.querySelector(".redesigned-group-main-action__icon");e&&(e.innerHTML=a?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_33__.getIcon28Notifications)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_34__.getIcon28NotificationCheckOutline)().icon)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByTag1)("span",_),e);_.setAttribute("data-act",a?0:1)}}};s||(l.showProgress=()=>Page.actionsDropdownLock(_),l.hideProgress=()=>Page.actionsDropdownUnlock(_)),ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:a?1:0,oid:t||cur.oid,hash:e,source:i},l),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(o)},toggleLiveSubscription:function(_,e,o,t,i,n){void 0!==cur.toggleLiveSubscriptionAct&&(o=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:o?1:0,owner_id:cur.oid,hash:e},{onDone:e=>{cur.toggleLiveSubscriptionAct=!o,i?i(e):_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.update(_,{icon:cur.toggleLiveSubscriptionAct?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_36__.getIcon24LiveOutline)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_37__.getIcon24LiveDisableOutline)().icon,label:e}):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByTag1)("span",_),e)},showProgress:()=>Page.actionsDropdownLock(_),hideProgress:()=>Page.actionsDropdownUnlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(t)},togglePodcastsSubscription:function(_,e,o,t,i,n){void 0!==cur.togglePodcastsSubscriptionAct&&(o=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:o?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.togglePodcastsSubscriptionAct=!o,i?i(e):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_,e)},showProgress:()=>!n&&Page.actionsDropdownLock(_),hideProgress:()=>!n&&Page.actionsDropdownUnlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(t)},showMessagesFromCommunityTooltip:function(_){const e=Number(_.getAttribute("data-tooltip-state")),o=_.getAttribute("data-tooltip-text");void 0===cur.toggleMessagesFromCommunityAct&&0===e&&(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(_,{text:o,dir:"auto",shift:[4,-3]})},toggleMessagesFromCommunity:function(_,e,o,t){const i=_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.isPageActionCell(_),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"ui_actions_menu_item");void 0!==cur.toggleMessagesFromCommunityAct&&(o=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:o?1:0,oid:cur.oid,hash:e},{onDone:function(e,t){if(cur.toggleMessagesFromCommunityAct=!o,i&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.update(_,{label:e,icon:t}),n){const o=_.querySelector(".ui_actions_menu_item_icon");o.innerHTML=t,_.innerText="",_.append(o),_.append(e)}},showProgress:function(){if(i)return _&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.lock(_)},hideProgress:function(){if(i)return _&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.unlock(_)}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(t)},showPageMembers:function(_,e,o){return(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.showPageMembersBox)(e,o,_)},showHiddenMembersBoxInfo:()=>(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_hidden_members_message_box_title"),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_hidden_members_message_box_content")),showPageVideos:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(_)):!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_video.php?act=a_choose_video_box",{review:1,to_id:e},{cache:1,grey:1})},showPageAudios:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(_)):!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("/al_audio.php?act=audios_box",{oid:e},{cache:1,params:{width:638}},_)},ownerPhoto:function(_,e,o={}){e||(e={});const t=(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_38__._)({stat:["owner_photo.css",window.jsc("web/owner_photo.js")]},o);(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,gid:e.gid},t)},openAvatarForm:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.openAvatarForm,ownerAvatarUpload:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.ownerAvatarUpload,ownerAvatarEdit:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.ownerAvatarEdit,ownerAvatarSelect:function(_){Page.openAvatarForm({act:"owner_avatar_select",list:cur.pvListId||"",photo:_})},ownerCrop:function(_,e,o={}){const t=(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_38__._)({stat:["owner_photo.css",window.jsc("web/owner_photo.js")]},o);(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_page.php",{hash:e,act:"owner_photo_crop",oid:_||cur.oid},t)},ownerPhotoEffects:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.ownerPhotoEffects,uploadOwnerCover:function(_){return!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,cover:1},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},editOwnerCover:function(_){(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_page.php",{act:"owner_cover_crop",oid:_||cur.oid},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},deleteOwnerCover:function(_,e,o,t=_shared_groups_constants__WEBPACK_IMPORTED_MODULE_27__.ANALYTICS_SCREEN_OTHER){o||(o=cur.shareSetOwnPhoto);const i=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_24__.partConfigEnabled)("redesign_web_group_feature")?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_delete_cover_confirm_new"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_delete_cover_confirm");(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("groups_delete_cover_title")},i,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_delete"),(function(i){ajax.post("al_page.php",{act:"owner_cover_remove",oid:_,hash:e,from:cur.module,"x-source":t},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.lockButton)(i),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.unlockButton)(i),onDone:o})}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_cancel"))},editPhoto:function(_){cur.hideOther(),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_page.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(_||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:[window.jsc("web/tagger.js"),"tagger.css"]})},deletePhoto:function(_,e){cur.hideOther();const o=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_warning")},_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("sure_delete_photo"),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_delete"),(function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:e,oid:_},{showProgress:o.showProgress,hideProgress:o.hideProgress})}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_cancel"))},shareCurrent:function(){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("current_audio",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("page_current_info"));return _||nav.reload(),_=_.getAttribute("data-audio"),_||nav.reload(),_=_.split("_"),(_.length<3||"s"!=_[2].substr(0,1))&&nav.reload(),!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("like.php",{act:"publish_box",object:"audio"+_[0]+"_"+_[1],list:_[2]+(_[3]&&"h"==_[3].charAt(0)?"_"+_[3]:"")},{stat:[window.jsc("web/page.js"),"page.css",window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]})},playCurrent:function(_,e){const o=_.parentNode;return Page.playLive(e,{showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.showProgress)(o)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.hideProgress)(o)}})},playLive:function(_,e){(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_8__.getAudioPlayer)().playLive(_,e)},audioStatusUpdate:function(_){const e=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.isChecked)("currinfo_audio"),o=(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_8__.getAudioPlayer)();let t=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_0__.AudioUtils.audioTupleToAudioObject(o.getCurrentAudioLs());ajax.post("al_audio.php",{act:"toggle_status",hash:_,exp:e,id:t?t.fullId:"",oid:vk.id},{onDone:function(_,e){vk.id==cur.oid&&_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("current_info",_),o.setStatusExportInfo(e,!0))},onFail:()=>!0})},audioListenersOver:function(_,e){(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(_,{url:"al_audio.php",params:{act:"listeners_tt",oid:e},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(_,e){function o(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("listeners_more_link"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("listeners_more_link_trigger");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)(e)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(e),_.click())}return e.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window.boxLayerWrap,"scroll",o)},onDone:function(_,e){window.audioListenersOffset=0,e?(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window.boxLayerWrap,"scroll",o):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.re)("listeners_more_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.re)("listeners_more_link_trigger"))}},!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("/al_audio.php",{act:"listeners_box",oid:_},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(_){window.audioListenersOffset+=50;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("fans_rows"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:_,offset:window.audioListenersOffset},{onDone:function(_,t){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("div",{innerHTML:_});for(let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(i);_;_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(i))e.appendChild(_);if(t){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("listeners_more_link_trigger");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(_)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.re)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.re)("listeners_more_link_trigger")},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.lockButton.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.unlockButton.pbind(o)})},postsUnseen:function(_){window._postsExtras||(window._postsExtras={});const e=Date.now();let o=!1;for(const t in _)for(const i in _[t]){if("module"==i||"index"==i||"q"==i||"block"==i||"trackCode"===i||"hash"===i)continue;const _=window._postsExtras[i];_&&-1==_.diff&&(_.diff=e-_.start,o=!0)}o&&Page.postsClearTimeouts()},postsSeen:function(_){if(!vk.id||!_.length)return;window._postsSeenModules||(window._postsSeenModules={}),window._postsExtras||(window._postsExtras={});const e=Date.now(),o=Page._adBlockSeenStorage;let t;for(const s in _){const a=Page.getPostModuleCode(_[s].module?_[s].module:""),l=_[s].index,r=_[s].q,d=_[s].block,c=_[s].trackCode;_[s].hash&&!window._postsViewHash&&(window._postsViewHash=_[s].hash);const E=["module","index","q","hash","block","trackCode"];for(const u in _[s]){var i;if(E.includes(u))continue;window._postsSeenModules[u]=a;const P=_[s][u],b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("post"+u);if(u in o||(o[u]=!(!b||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.attr)(b,"data-ad-view"))),!o[u]){const _=window._postsSeen[u],e=window._postsSaved[u];if(-1==e||-1==_||1==P&&(e||_))continue}var n;const p=null!=(n=null==(i=b)?void 0:i.querySelector("._post_content"))?n:void 0,{width:M,height:D}=(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.calculateWallPostSize)(p);window._postsSeen[u]=P,t=P,window._postsExtras[u]={start:e,diff:-1,index:l,q:r,block:d,postHeight:D,postWidth:M,viewportHeight:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.clientHeight)(),session_id:cur.feed_session_id?cur.feed_session_id:"na",trackCode:c},Wall.triggerAdStat(u,_[s].long?"impression_long":"impression"),(0,_shared_post_stats_tmr_feed_view__WEBPACK_IMPORTED_MODULE_29__.trackTmrFeedPostView)()}}t&&Page.postsClearTimeouts()},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(window._postsSaveTimer=setTimeout(Page.postsSave,2500),window._postsSendTimer=setTimeout(Page.postsSend,5e3)):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.checkVersion()||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(window._postsSeen))return window._postsSeen;const _=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_sent)||{},e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen)||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen_modules)||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_extras)||{},i=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),n=Page._adBlockSeenStorage;let s;window._postsExtras||(window._postsExtras={});const a={};for(const r in window._postsSeen){const d=window._postsSeen[r];if(window._postsExtras[r]){if((0,_web_feed_feed_stats__WEBPACK_IMPORTED_MODULE_28__.isFeedPostDurationStatsFixEnabled)()&&-1===window._postsExtras[r].diff)continue;t[r]={diff:window._postsExtras[r].diff,index:window._postsExtras[r].index,q:window._postsExtras[r].q,session_id:window._postsExtras[r].session_id?window._postsExtras[r].session_id:"na",postHeight:window._postsExtras[r].postHeight,postWidth:window._postsExtras[r].postWidth,viewportHeight:window._postsExtras[r].viewportHeight,block:window._postsExtras[r].block,trackCode:window._postsExtras[r].trackCode},delete window._postsExtras[r],a[r]=r}const c=r.split("_");"ad"!==c[0]&&"adsite"!==c[0]&&"posthashtag"!==c[0]&&"block"!==c[0]&&(c[0]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(c[0]),c[1]&&"postId"==c[1].substr(0,1)||(c[1]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(c[1])));const E=(_[c[0]]||{})[c[1]],u=c&&"block"===c[0]&&4===(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(c[1]);var l;if(c[0]!=vk.id&&(u||n[r]||!E||-1==d&&E>0))if(e[c[0]]||(e[c[0]]={},delete o[r]),!e[c[0]][c[1]]||-1==d&&e[c[0]][c[1]]>0)s=e[c[0]][c[1]]=null!=(l=i*d)?l:0,o[r]=window._postsSeenModules[r];window._postsSaved[r]=d}return(0,_web_feed_feed_stats__WEBPACK_IMPORTED_MODULE_28__.isFeedPostDurationStatsFixEnabled)()?(Page.cleanUpPostsSeen(window._postsSeen,a),Page.cleanUpPostsSeen(window._postsSeenModules,a)):(window._postsSeen={},window._postsSeenModules={}),s&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_seen,e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_seen_modules,o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_extras,t)),window._postsSeen},cleanUpPostsSeen(_,e){for(let o of Object.keys(_))e[o]&&delete _[o]},getPostModuleCode:function(_){switch(_){case"feed":return"f";case"public":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){let _={},e={},o={};if(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.checkVersion())_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen)||{},e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen_modules)||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_extras)||{};else{const e=Page.postsSave();for(const o in e){const t=e[o],i=o.split("_");"ad"!==i[0]&&"posthashtag"!==i[0]&&(i[0]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(i[0]),"p"!=i[1].substr(0,1)&&(i[1]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(i[1]))),_[i[0]]||(_[i[0]]={}),(!_[i[0]][i[1]]||-1==t&&_[i[0]][i[1]]>0)&&(_[i[0]][i[1]]=t)}}let t=[],i=[];for(const s in _){const a=[];for(const t in _[s]){const l=s+"_"+t,r=e[l]||"",d=o[l];let c="s"==r&&d&&d.q?d.q:"";c=c.replace(/[,;:]/g,"");const E=d&&d.session_id?d.session_id:"na";let u="";var n;if(d&&"ad"!==s&&"posthashtag"!==s&&(u=":"+[d.diff,d.index,E,c||"",d.block||"",d.trackCode||"",l||""].join(":"),u=u.replace(/:+$/,"")),d&&d.postHeight)i.push([l,d.postHeight,d.viewportHeight,null!=(n=d.postWidth)?n:0].join(":"));a.push(r+(_[s][t]>0?t:-t)+u)}a.length&&t.push(s+"_"+a.join(","))}if(!t.length)return;if(!vk.id)return Page.postsClear();const s={act:"seen",data:t.join(";"),meta:i.join(";")};window._postsViewHash&&(s.hash=window._postsViewHash),ajax.post("al_page.php",s,{onDone:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.checkVersion())return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(window._postsSaved,window._postsSeen);const e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen)||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_sent)||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen_modules)||{};for(const i in _){let n;for(n in _[i])o[i]||(o[i]={}),-1!=o[i][n]&&(o[i][n]=_[i][n]),(e[i]||{})[n]&&(delete e[i][n],delete t[i+"_"+n]);e[i]&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(e[i])&&(delete e[i],delete t[i+"_"+n])}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_seen,e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_sent,o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_seen_modules,t),clearTimeout(window._postsCleanTimer),window._postsCleanTimer=setTimeout(Page.postsClean,1e4)}})},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_13__.debugLog)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void(window._postsCleanTimer=setTimeout(Page.postsClean,1e4));(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_13__.debugLog)("cleaning ls..");const _=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.get(LS_KEY.posts_seen)||{};for(const o in e){for(const t in e[o]){const i=e[o][t];_-(i>0?i:-i)>24&&delete e[o][t]}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(e[o])&&delete e[o]}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_sent,e),Wall.cleanAdsEvents()},postsClear:function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_seen,{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_extras,{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_12__.multiAccountLs.set(LS_KEY.posts_sent,{}),window._postsSaved={},window._postsSeen={},window._postsSeenModules={},window._postsExtras={},Wall.setAdsEvents({})},showContacts:function(_,e,o){(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("/al_page.php",{act:"a_get_contacts",oid:_,edit:e},{noEval:!0}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(o?o():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(_,e){(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(_,{text:()=>e,slideX:15,className:"pedit_tt",hasover:1,shift:[-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getSize)(_)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){_.tt&&setTimeout(_.tt.hide,3e3)}})},editContact:function(_,e,o,t){const i=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_page.php",{act:"a_edit_contact_box",mid:e,oid:_});return i.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_save"),(function(n){function s(){const s={act:"a_add_contact",mid:e,oid:_,boxhash:i.boxhash};s.hash=o,o||(s.hash=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_hash").value),s.title=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("group_contact_position"),s.phone=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("group_contact_phone"),s.email=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("group_contact_email"),e||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_memlink")||(s.page=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("group_contact_memlink"),s.page||s.phone||s.email)?ajax.post("al_page.php",s,{onDone:function(e,o){i.hide();const n=(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)();n?(n.content(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list").sorter&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list").sorter.destroy(),n.execInline(i.boxhash),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.toggle)("group_add_contact",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list").childNodes.length<30)):Page.showContacts(_,1,t)},onFail:function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_error"))return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_error").innerHTML=_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("group_contact_error_wrap"),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.lockButton)(n),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.unlockButton)(n)}):i.hide()}cur.reloadAfterClose=!0,e||cur.lastContact==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("group_contact_memlink")?s():Page.searchContact(_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)("group_contact_memlink"),s)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_cancel")),!1},searchContact:function(_,e,o){if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(e))return cur.lastContact="",void(o&&o());e!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:_,page:e},{onDone:function(_,t,i,n){cur.lastContact=e,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_name").innerHTML=i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_image").innerHTML=t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("group_contact_hash").value=n,_?o?o():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("group_contact_error_wrap"):((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.notaBene)("group_contact_memlink","",!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("group_contact_error_wrap"))}})},deleteContact:function(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid,mid,hash},{onDone:function(res,script){const box=(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)();if(box.content(res),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list").sorter&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_13__.logEvalError)(_,script)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.toggle)("group_add_contact",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(_,e,o,t,i){const n=o.id.replace("group_contact_cell",""),s=(t&&t.id||"").replace("group_contact_cell",""),a=(i&&i.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:_,mid:n,before:s,after:a,hash:e})},initStatusEditable:function(_){if(_.emojiInited)return!1;_.emojiInited=!0,window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(_,{ttDiff:-48,rPointer:!0,controlsCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){const e=Emoji.editableVal(_);e.length>140&&(Emoji.val(_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.clean)(e.substr(0,140))),Emoji.editableFocus(_,!1,!0))}})}))},infoEdit:function(_){if(cur.viewAsBox)return cur.viewAsBox();const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("current_info").tt;e&&e.hide&&e.hide({fasthide:!0}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("currinfo_editor","currinfo_fake"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("currinfo_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.isVisible)("currinfo_app")&&!cur.ciApp?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("currinfo_audio"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("currinfo_app")):cur.ciApp&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("currinfo_audio"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("currinfo_app"));const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("current_info").firstChild,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("currinfo_input"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByTag1)("a",o);if(Page.initStatusEditable(t,cur.infoOld),cur.infoEditing="my_current_info"==o.className,cur.infoEditing){let _=i?i.innerHTML:o.innerHTML;_=_.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.stripHTML)(_)))}else cur.infoOld="";return window.Emoji?(Emoji.val(t,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.winToUtf)(cur.infoOld)),Emoji.editableFocus(t,!1,!0,!0)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(t,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.winToUtf)(cur.infoOld)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.elfocus)(t)),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"keydown",Page.infoKeydown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(document,"mousedown",Page.infoMousedown),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("currinfo_editor","currinfo_fake"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("currinfo_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.cleanElems)("currinfo_save","currinfo_cancel"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window,"keydown",Page.infoKeydown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("current_info"),e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("share_current_info");(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(_,{content:'<div class="content"><div class="checkbox">'+e+"</div></div>",className:"share_tt",init:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("checkbox",_.tt.container),"click",(function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.checkbox)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.isChecked)(this)},{onDone:Wall.receive})}))},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.cleanElems)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("checkbox",_.tt.container))}})},infoKeydown:function(_){_.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.KEY.ESC&&Page.infoCancel()},infoMousedown:function(_){let e=_.target;for(;e.parentNode;){if("currinfo_editor"==e.id)return;e=e.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("currinfo_input");let e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_)).replace(/\n/g," ");if(e==cur.infoOld||e==(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.winToUtf)(cur.infoOld))return Page.infoCancel();e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(e).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:e,hash:cur.options.info_hash},{onDone:function(){const _=e?"my":"no",o=e?'<span class="current_text">'+Emoji.emojiToHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("change_current_info");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("current_info").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("currinfo_fake").innerHTML='<span class="'+_+'_current_info">'+o+"</span>",Page.infoCancel();const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("current_info"),i=t.tt;i&&i.el&&(i.destroy(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(t,"mouseover")),e&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(t,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(_){if(!_)return!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.lockButton.pbind("currinfo_save"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.unlockButton.pbind("currinfo_save"),stat:[window.jsc("web/tooltips.js"),"tooltips.css",window.jsc("web/emoji.js")]})},showGifBox:function(_,e,o,t,i,n,s={}){var a;n&&(n.ctrlKey||n.metaKey||n.shiftKey)||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(n),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("docs.php",{act:"show_box",access_key:null==(a=s)?void 0:a.accessKey,doc_id:_,doc_owner_id:e,post_id:o,post_owner_id:t,hash:i},{stat:[window.jsc("web/docs.js"),"docs.css"],params:{white:!0,hideButtons:!0},onDone:function(_,e){if(!vk.widget){if((0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)().setOptions({width:e.width+50}),cur.gifAdded&&cur.gifAdded[e.doc]){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("docs_gif_box_add_"+e.doc);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.replaceClass)(_,"button_action_light_add","button_action_light_done"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("wall_doc_added_short"))}const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("page_doc_photo_href",(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.curBox)().bodyNode);Page.showGif(_)}}}))},showGif:function(_,e,o){if(e&&(e.ctrlKey||e.metaKey))return!0;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(t),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(_);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(cur.activeGif))===i||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(cur.activeGif),"page_gif_large")&&!o)&&Page.hideGif(cur.activeGif,!1);const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"doc"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"hash"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"add-txt")||"",r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"add-hash"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"share-txt")||"",c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"post"),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"reply"),u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"preview"),P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"width"),b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"height"),p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"thumb"),M=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(t,"page_gif_large"),D=!e;let O,w=!0;u||(w=!1);const m=_.href+"&wnd=1&module="+cur.module;w?(O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("video",{autoplay:!0,muted:!0,loop:"loop",poster:p,src:m+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:P?P+"px":void 0,height:b?b+"px":void 0,background:M?"transparent url("+p+") no-repeat 0 0":"",backgroundSize:"cover"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.attr)(O,"webkit-playsinline",""),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.ipad&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.attr)(O,"controls","")):O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("img",{src:m,className:"pages_gif_img"},{visibility:"hidden"});const g=a?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+d+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+s+"', '"+a+'\', event)"><div class="page_gif_share_icon"></div></div>':"",h=r?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+l+"', '"+s+"', event);\" onclick=\"return Page.addGif(this, '"+s+"', '"+a+"', '"+r+'\', event);"><div class="page_gif_add_icon"></div></div>':"",f=g||h?'<div class="page_gif_actions">'+g+h+"</div>":"",C='<div class="page_gif_progress_icon" style="display:none;">'+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.rs)(vk.pr_tpl,{id:"",cls:""})+"</div>",A=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("a",{href:_.href,className:"page_gif_preview"+(cur.gifAdded[s]?" page_gif_added":""),innerHTML:C+f,onclick:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent},{backgroundImage:w?"":((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getStyle)(n,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:w?"":((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getStyle)(n,"backgroundSize")||"").replace(/"/g,"'"),width:P?P+"px":void 0,height:b?b+"px":void 0}),L=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(A);A.appendChild(O),cur.activeGif=A,t.insertBefore(A,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(_);let T,B=!1;const I=function(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getSize)(O);(_[0]||_[1])&&(clearInterval(T),delete O.onload,delete O.onloadeddata,B=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(L),A.style.background="",A.setAttribute("onclick","return Page.hideGif(this, event);"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.addClass)(O,"page_gif_big"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.addClass)(A,"page_gif_loaded"),P&&(O.style.width=P+"px"),b&&(O.style.height=b+"px"),O.style.visibility="",(0,_lib_stats__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("gif_play",0,w?"mp4":"gif",D?1:0))};e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(L):setTimeout((function(){B||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(L)}),300),w?O.onloadeddata=I:(T=setInterval(I,10),O.onload=I),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(t,"playing",1);const v=D?"autoplay":"manual",R=cur.module||"other",U=c?"post":E?"reply":"";if((0,_lib_stats__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("gif_show",v,R,U),c){const _=c.split("_"),e=_[0],o=_[1];(0,_lib_stats__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("show_post_gif",1,e,o)}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(e)},hideGif:function(_,e){if(e&&(e.ctrlKey||e.metaKey))return!0;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domNS)(_);return o.removeAttribute("data-playing"),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(o,"page_gif_autoplay"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.re)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(t),delete cur.activeGif,!1},overGifAdd:function(_,e,o,t){return cur.gifAdded=cur.gifAdded||{},cur.gifAdded[o]&&!(e=cur.gifAdded[o].tooltip)||(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(_,{text:e,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1},addGif:function(_,e,o,t,i){if(cur.viewAsBox)return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.stopEvent)(i),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_3__.isObject)(_.tt)&&_.tt.hide();const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"button_action_light");return cur.gifAdded[e]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[e].did,hash:cur.gifAdded[e].hash},{onDone:function(){if(n)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.replaceClass)(_,"button_action_light_done","button_action_light_add"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("wall_doc_add_short"));else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.gpeByClass)("page_gif_large",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(e,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}delete cur.gifAdded[e]}}):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.addClass)(_,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:e,hash:o,add_hash:t},{onDone:function(o,t,i,s){if((0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_14__.showDoneBox)(o),n)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.replaceClass)(_,"button_action_light_add","button_action_light_done"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(_,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("wall_doc_added_short"));else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.gpeByClass)("page_gif_large",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.addClass)(e,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}cur.gifAdded[e]={tooltip:t,did:i[0],hash:s}}})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(i)},shareGif:function(_,e,o,t){return cur.viewAsBox?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.stopEvent)(t),cur.viewAsBox()):((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_3__.isObject)(_.tt)&&_.tt.hide(),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("like.php",{act:"publish_box",object:"doc"+e,list:o},{stat:[window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(t))},initGifAutoplay:function(){if(cur.gifAutoplayScrollHandler||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile||cur.viewAsBox)return;const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getSize)("page_header")[1];let e=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_39__.debounce)((function(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass)("page_gif_autoplay");if(!e.length)return;const o=(window.innerHeight||document.documentElement.clientHeight)-_,t=_+o/2,i=Math.min(o,800),n=t-i/2,s=t+i/2;let a,l,r,d=e.length-1,c=-1;if(cur.activeGif){const _=cur.activeGif.getBoundingClientRect();if(_.top>n&&_.bottom<s){if(_.top<t&&_.bottom>t)return;const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.indexOf)(e,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(cur.activeGif)),n=Math.min(Math.abs(o/2-_.top),Math.abs(o/2-_.bottom));a={el:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(cur.activeGif),distanceToMiddle:n},i>-1&&(d=i,c=Math.abs(o/2-_.top)<Math.abs(o/2-_.bottom)?-1:1)}else(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.inArray)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(cur.activeGif),e)&&Page.hideGif(cur.activeGif)}for(;l=e[d];){const _=l.getBoundingClientRect(),e=_.width&&_.height&&_.top>n&&_.bottom<s;if(e&&0==d&&(0,_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)()<300){a={el:l,distanceToMiddle:r};break}if(e){if(r=Math.min(Math.abs(o/2-_.top),Math.abs(o/2-_.bottom)),a&&r>a.distanceToMiddle)break;a={el:l,distanceToMiddle:r}}d+=c}if(a&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(a.el)!==cur.activeGif){Page.showGif((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(a.el));let _,o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.indexOf)(e,a.el)+1;for(;_=e[o++];){const e=_.getBoundingClientRect();if(e.width&&e.height){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("video",{src:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domFC)(_).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}),50);cur.gifAutoplayScrollHandler=e,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"scroll",e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"resize",e),e(),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_40__.pushNavDestroy)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window,"scroll",e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window,"resize",e),e=null,delete cur.gifAutoplayScrollHandler}))},initVideoAutoplay:function(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile||cur.videoAutoplayScrollHandler)return void("feed"===cur.module&&(0,_lib_stats__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser"));const isMessagePage="im"===cur.module;let chatHeader,chatWrapperUiScroll,chatHeaderHeight,chatInputBox,lastScroll,directionUp,lastAutoPlayVideo,chatHeaderBottom,chatInputBoxTop;if("feed"===cur.module)(0,_lib_stats__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("feed_init_video_autoplay","good_browser");else if(isMessagePage){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("_im_chat_body_abs");chatHeader=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("im-page--chat-header"),chatWrapperUiScroll=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.data)(_,"ui-scroll"),chatHeaderHeight=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getSize)(chatHeader)[1],chatInputBox=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass1)("im-chat-input"),lastScroll=0,directionUp=!0,lastAutoPlayVideo=null}const canPlayHls=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),noHlsMaxDuration=300,fixedHeaderHeight=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getSize)("page_header")[1],isVideosForYouRedesignEnabled=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_24__.partConfigEnabled)("video_feed_videos_for_you_move_to_client");let scrollHandler=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_39__.debounce)((function(_,e){if(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||_getFullscreenElement()||window.Calls&&window.Calls.isInActiveCall)return;let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.geByClass)("page_video_autoplayable");const t=o.length;if(!t&&!isVideosForYouRedesignEnabled)return;if(e&&cur.videoInlinePlayer&&!cur.videoInlinePlayer.isAutoplay())return;const i=document.body.scrollHeight-fixedHeaderHeight,n=(window.innerHeight||document.documentElement.clientHeight)-fixedHeaderHeight,s=fixedHeaderHeight+n/2,a=Math.min(n,800);let l,r,d;isMessagePage?(d=cur.imClassicInterface?i-(n+(0,_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)()):chatWrapperUiScroll.api.data.scrollBottom,directionUp=d>=lastScroll,lastScroll=d,(e||d&&directionUp)&&(o=o.reverse()),l=s-a/2,r=d<100?n:l+a,cur.imClassicInterface?(chatHeaderBottom=chatHeader.getBoundingClientRect().top+chatHeaderHeight,chatInputBoxTop=chatInputBox.getBoundingClientRect().top):(chatHeaderBottom=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getXY)(chatHeader)[1]+chatHeaderHeight,chatInputBoxTop=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.getXY)(chatInputBox)[1]),l<chatHeaderBottom&&(l=chatHeaderBottom),r>chatInputBoxTop&&(r=chatInputBoxTop)):(d=(0,_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)(),l=d<300?fixedHeaderHeight:s-a/2,r=l+a);const c=document.querySelector(".BlockVideosForYou");if(c&&isVideosForYouRedesignEnabled){const _=c.getBoundingClientRect(),e=_.top>l&&_.bottom<r;window.dispatchEvent(new CustomEvent(_web_video_constants__WEBPACK_IMPORTED_MODULE_30__.VideoForYouEvents.VIEW_BLOCK,{detail:{viewed:e}}))}if(!t)return;const E=cur.videoInlinePlayer;if(E){const _=E.isAutoplay(),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domClosest)("post",E.el),"ad-view"),o=E.el.getBoundingClientRect();let t=o.top>l&&o.bottom<r;if(!e&&_||(t=o.bottom>l&&o.bottom<r||o.top>l&&o.top<r),E.el.closest(`.${_web_components_ui_gallery__WEBPACK_IMPORTED_MODULE_26__.UI_GALLERY_CONTENT_CLASSNAME}`)&&(t=t&&(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.isGalleryVideoInViewport)(E.el,o)),_&&E.onViewport(t),t){if(_&&"paused"==E.getState()&&E.play(),"ended"!=E.getState())return}else _&&!E.isActiveLive()&&E.pause()}let u=t;for(e&&lastAutoPlayVideo&&(u=o.indexOf(lastAutoPlayVideo));u--;){const _=o[u],e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"VideoRestriction");if(!canPlayHls&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"duration"))>noHlsMaxDuration||e)continue;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"loading"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"playing"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domClosest)("post",_),"ad-view"),s=(i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domNS)(_):_).getBoundingClientRect();if(!s.width||!s.height)continue;let a=s.top>l&&s.bottom<r;if(n&&!E&&(a=s.bottom>l&&s.bottom<r||s.top>l&&s.top<r),_.closest(`.${_web_components_ui_gallery__WEBPACK_IMPORTED_MODULE_26__.UI_GALLERY_CONTENT_CLASSNAME}`)&&(a=a&&(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_22__.isGalleryVideoInViewport)(_,s)),a){if(!i&&!t){const e=_getVideoParams(_),o=Date.now();lastAutoPlayVideo=_,(0,_lib_video__WEBPACK_IMPORTED_MODULE_17__.showInlineVideo)(e.video,e.list,{autoplay:1,no_progress:1,cache:1,addParams:e},!1,_),(0,_lib_stats__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("page_show_inline_video",Date.now()-o),_sendLoadEvent(e),cur.videoAutoplayStat={video:e.video,launched:Date.now(),preloaded:_isPreloaded(e.video)}}break}if(!isMessagePage&&s.top<=l)break}let P=u+1;if(isMessagePage){if(!d)return;P=u-1}do{const _=o[P];if(_&&(canPlayHls||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"duration"))<=noHlsMaxDuration)){const e=_getVideoParams(_);_isPreloaded(e.video)||(0,_lib_video__WEBPACK_IMPORTED_MODULE_17__.loadInlineVideo)(e,_onVideoDataLoaded,!0);break}}while(++P<t&&!isMessagePage)}),50);function _getVideoParams(thumb){var _options_addParams;let videoRawId,listId,options;const showInlineParamsMatch=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.attr)(thumb,"onclick").match(/show(?:Inline)?Video\((.+)\)/);if(showInlineParamsMatch){const paramsStr=showInlineParamsMatch[1];try{[videoRawId,listId,options]=eval("["+paramsStr+"]")}catch(_){}}return videoRawId||(videoRawId=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(thumb,"video"),listId=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(thumb,"list")),options=options||{},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(options.addParams,{mt:thumb.dataset.mtId,video:videoRawId,list:listId,ad_data:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(thumb,"ad-data"),ad_block_id:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(thumb,"ad-block-id"),post_id:(null==(_options_addParams=options.addParams)?void 0:_options_addParams.post_id)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domClosest)("post",thumb),"post-id"),stretch_vertical:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(thumb,"stretch-vertical")),autoplay_sound:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(thumb,"autoplay-sound")),autoplay:1,from_autoplay:1,module:options.module||currentModule()})}function _isPreloaded(_){let e=!1;return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.each)(window.ajaxCache,(function(o,t){if(0===o.indexOf("/al_video.php?act=video_box")&&o.indexOf("&video="+_)>0)return e=!0,!1})),e}function _sendLoadEvent(_){ajax.post("al_video.php?act=autoplay_stat",{event:"load",video:_.video,post_id:_.post_id,module:cur.module||""},{})}function _onVideoDataLoaded(_,e){}function _getFullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}cur.videoAutoplayScrollHandler=scrollHandler,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"scroll",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"resize",scrollHandler),isMessagePage&&!cur.imClassicInterface&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"imScroll",scrollHandler),scrollHandler(),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_40__.pushNavDestroy)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window,"scroll",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window,"resize",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(window,"imScroll",scrollHandler),scrollHandler=null,delete cur.videoAutoplayScrollHandler}))},actionsDropdown:function(_,e){_||!e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)(_):e()},actionsDropdownHide:function(_,e,o){if(1===e)return o&&o(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)(_);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout((function(){(0,_lib_fx__WEBPACK_IMPORTED_MODULE_18__.fadeOut)(_,200,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide.pbind("page_actions_sublist")),o&&o()}),150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(_){if(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(_))return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(_){(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(_))&&(_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.lock(_):(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(_))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"page_actions_item")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout((function(){if(!Page.resetLockTimeout){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.data)(_,"inner",_.innerHTML),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.addClass)(_,"page_actions_item_lock");const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ce)("div",{className:"page_actions_item_lock_text"});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.val)(e,_.innerHTML),_.appendChild(e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.showProgress)(_)}}),500)))},actionsDropdownUnlock:function(_){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(_),_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_21__.PageActionCell.unlock(_):(Page.resetLockTimeout=!0,(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)(_))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"page_actions_item")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(_,"page_actions_item_lock"),_.innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.data)(_,"inner")))},actionsPreloadFeedLists:function(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function(html,js){if(sh&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("page_actions_wrap")){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(el).appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.se)(html),el);try{eval(js)}catch(_){(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_13__.logEvalError)(_,js)}}},cache:1})},feedListsDDShow:function(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("page_actions_item_lists");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.addClass)(_,"page_actions_item_unfolded"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.show)("page_actions_sublist");let e=[];for(const _ in cur.options.feedLists){let o=cur.options.feedLists[_];o.length>20&&(o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(o.substr(0,18))+"..."),e.push('<a id="page_feed_item'+_+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[_]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+_+');">'+o+"</a>")}e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.se)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+e.join("")+"</div>"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domPN)(_).appendChild(e)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hide)("page_actions_sublist"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)("page_actions_item_lists","page_actions_item_unfolded")}),150)},feedListsCheck:function(_,e){const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.hasClass)(_,"checked");o?(cur.options.feedListsSet[e]=0,cur.options.feedListsChanges[e]=-1):(cur.options.feedListsSet[e]=1,cur.options.feedListsChanges[e]=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.toggleClass)(_,"checked",!o),cur.feedListsTO&&clearTimeout(cur.feedListsTO);const t=[];for(const _ in cur.options.feedListsChanges)t.push(cur.options.feedListsChanges[_]*_);t.length&&(cur.feedListsTO=setTimeout((function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:t.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})})))},addAudioPreview:function(_,e){return e[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_0__.AudioUtils.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_0__.AudioUtils.drawAudio(e,"inlined")},ownerButtonClick:function(_,e,o,t){return(0,_web_page_promo_owner_buttons__WEBPACK_IMPORTED_MODULE_25__.ownerButtonClick)(_,e,o,t)},showLoginBox:()=>((0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showBox)("al_login.php",{act:"box"}),!1),showUnblurBox(_,e,o,t,i){let n=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)({title:_},e,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("photos_restriction_button_watch"),(function(_){Page.unblurPhoto(o,t,_,(function(){n.hide(),i&&i()}))}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_19__.getLang("global_cancel"))},unblurPhoto(_,e,o,t){ajax.post("al_photos.php",{act:"unblur",photo_raw:_,hash:e},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.lockButton)(o),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_11__.unlockButton)(o),onDone:function(e,o){let i=[];if(i=e?document.querySelectorAll(".PhotosRestriction--blur, .PostPhotoRestriction--blur, .PostPhotoRestriction--blurWithText"):document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blurWithText[data-photo-id='${_}']`),i.forEach((function(e){const t=e.getAttribute("data-photo-id"),i=parseInt(e.getAttribute("data-restriction-type"));if(t===_||Array.isArray(o)&&o.includes(i)){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(e,"PhotosRestriction--blur"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(e,"PostPhotoRestriction--blur"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(e,"PostPhotoRestriction--blurWithText");const _=e.querySelector(".PostPhotoRestriction__blurTitle"),o=e.querySelector(".PostPhotoRestriction__blurButton");_&&_.parentNode.removeChild(_),o&&o.parentNode.removeChild(o)}})),(0,_web_photos_photo_restriction_blur_global_state__WEBPACK_IMPORTED_MODULE_23__.addPhotoUnblurred)(_),cur.pvPhoto&&cur.pvCurData&&cur.pvCurData.photoRaw===_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.removeClass)(cur.pvPhoto,"ZPhotosRestriction--blur");const _=cur.pvPhoto.querySelector(".ZPhotosRestriction__title"),e=cur.pvPhoto.querySelector(".ZPhotosRestriction__text"),o=cur.pvPhoto.querySelector(".ZPhotosRestriction__button");_&&_.parentNode.removeChild(_),e&&e.parentNode.removeChild(e),o&&o.parentNode.removeChild(o),cur.pvCurData.restrictionBlur=!1,window.Photoview&&window.Photoview.doShow()}t&&t()}})},playVkFestBanner(){window.onDomReady((function(){setTimeout((function(){!function(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.ge)("vk_fest_2020_banner_video");if(!_)return;const e={video:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_6__.domData)(_,"video"),module:currentModule()};(0,_lib_video__WEBPACK_IMPORTED_MODULE_17__.showInlineVideo)(e.video,"",{autoplay:1,no_progress:1,cache:1,addParams:e},!1,_)}()}))}))}},__WEBPACK_DEFAULT_EXPORT__=Page},885067:(_,e,o)=>{o.d(e,{calculateElementSize:()=>t});const t=_=>{if(!_)return{width:0,height:0};const e=_.getBoundingClientRect();return{width:e.width,height:e.height}}},233227:(_,e,o)=>{o.d(e,{convertWebFeedRefToStatsScreen:()=>l,sendCarouselClickEvent:()=>s,sendFeedOpenAudioStats:()=>a});var t=o(19040),i=o(324153),n=o(977053);function s(_,e,o){if(!(0,n.partConfigEnabled)("feed_content_events_next_prev_click_web")||!e||!o)return;let s=null;1===_?s=i.EventItemType.CLICK_NEXT:-1===_?s=i.EventItemType.CLICK_PREVIOUS:0===_&&(s=i.EventItemType.CLICK_PRETTY_CARD),s&&t.feedInteractionItemStatCollector.logEvent({track_code:e,ref:o,item:i.FeedInteractionItemType.WALL_ITEM},s)}function a(_,e){_&&e&&t.feedInteractionItemStatCollector.logEvent({track_code:_,ref:e,item:i.FeedInteractionItemType.WALL_ITEM},i.EventItemType.OPEN_AUDIO)}function l(_){return["feed_news_top","feed_top"].includes(_)?"feed_top":["feed_news_recent","feed_recent","feed"].includes(_)?"feed_recent":["feed_recommended_top","feed_recommended_recent","feed_recommendations","feed_suggestions","recommended"].includes(_)?"feed_recommended":"other"}},570599:(_,e,o)=>{o.d(e,{trackTmrFeedPostView:()=>a});var t=o(963526),i=o(977053);const n=6,s="tmrPostViewEnabledAllPosts";function a(){(0,i.partConfigEnabled)("web_mytracker_collect_post_stats")&&function(){var _;const e=window.cur;if(null==(_=e)?void 0:_[s])return!0;return!1}()&&(0,t.tmrSendTimespentEvent)(n)}},427641:(_,e,o)=>{o.d(e,{recognizeBlockState:()=>t});const t=(0,o(288824).makeSharedState)("photo_recognize_block",(()=>({block:null})),{version:0})},794423:(_,e,o)=>{o.d(e,{FEED_RECOGNIZE_PHOTO_DEFAULT_BLOCK_TYPE:()=>c,FEED_RECOGNIZE_PHOTO_POST_ID:()=>d,NUMBER_INITIALIZED_PHOTO:()=>E,PHOTO_CAROUSEL_AVATAR_CLASS:()=>l,PHOTO_CAROUSEL_CLASS:()=>t,PHOTO_CAROUSEL_HIDE_BTN_CLASS:()=>r,PHOTO_CAROUSEL_ITEM_CLASS:()=>i,PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS:()=>n,PHOTO_ELEMENT_CLASS:()=>s,PHOTO_NO_SIZE_ELEMENT_CLASS:()=>a});const t="PhotoCarousel",i="PhotoCarouselItem",n="PhotoCarouselItem--noSize",s="PhotoCarouselImage",a="PhotoCarouselItem__stub",l="PhotoCarouselBlockItem__avatar",r="PhotoCarousel__hidePost",d="tags_suggestions",c="tags_suggestions",E=4},199777:(_,e,o)=>{o.d(e,{attachPlayerEventHandler:()=>w,checkIfLinkIsValid:()=>g,feedShowMoreButtonLoadedCount:()=>h,handleViewingFeedBlocks:()=>C,handleViewingPosts:()=>f,isFeedPostDurationStatsFixEnabled:()=>O,sendCaptionLinkClickEvent:()=>A,sendCarouselClickEventWeb:()=>m});var t=o(977053),i=o(105940),n=o(233227),s=o(907035),a=o(979294),l=o(585688),r=o(902947),d=o(612291),c=o(288207),E=o(794423),u=o(427641),P=o(488844),b=o(802130),p=o(447836),M=o(324153),D=o(19040);o(180937);function O(){return(0,t.partConfigEnabled)("feed_posts_duration_stats_fix")}function w({isAudioChanged:_,attachElement:e}){if(!_||!e)return;const o=(0,i.getTrackCodeFromPost)(e),t=(0,i.resolveRefFromCur)();(0,n.sendFeedOpenAudioStats)(o,t)}function m(_,e,o){(0,t.partConfigEnabled)("feed_content_events_next_prev_click_web")&&(0,n.sendCarouselClickEvent)(_,e,o)}function g(_){var e,o;return"Post/ownerLinkClick"!==(null==(e=_)?void 0:e.getAttribute("data-task-click"))&&!(null==(o=_)?void 0:o.closest(".PostActivityCaption, .PostActivityBar"))}const h=(_,e,o)=>{var t;let i=document.getElementById("show_more_link");var n;let s=null!=(n=null==(t=i)?void 0:t.offsetTop)?n:0;i&&!i.seen&&s>=e&&s<e+o&&(i.seen=Date.now(),(0,b.statlogsValueEvent)("feed_load_more_seen",(0,P.isButtonLocked)(i),_))},f=({posts:_=[],postRaws:e,el:o})=>{if(!o)return null!=_?_:[];if((0,p.isAdWithLongImpressionOnly)(o)||(0,p.isAutoplayAd)(o))window.Wall.triggerAdStat(o.firstElementChild,"impression");else if(e){var t;null==(t=_)||t.push(e)}return null!=_?_:[]},C=({el:_,index:e,ref:o,onView:t})=>{var i,n;if(_)if(_.querySelector(".VideosForYouGallery"))null==(i=window.FeedVideosForYou)||i.viewBlock(),null==(n=t)||n();else if(_.querySelector(".FeedVideoPostcard")){var P,b;null==(P=window.FeedVideoPostcard)||P.viewBlock(),null==(b=t)||b()}else if(_.querySelector(".UxpollsBlock")){var p;const e=null==(p=_.querySelector(".UxpollsBlock"))?void 0:p.dataset.trackCode;var M;if(e)(0,s.viewUXPollsBlock)(e),null==(M=t)||M()}else if(_.querySelector(".feed_friends_recomm")){var D,O;let i=_.querySelector(`.${a.UI_GALLERY_CLASSNAME}`);const n=null==(D=i)?void 0:D.getAttribute("data-from");let s=null==(O=i)?void 0:O.getAttribute("data-code");var w;if(n&&s)(0,l.friendsRecommLogSave)(["view_block",n,String(e),(0,r.vkNow)(),String(null!=o?o:""),s],!0),null==(w=t)||w();if(i){var m,g,h;null==(g=(0,d.uiGetGallery)(i))||null==(m=g.setGalleryViewed)||m.call(g),null==(h=t)||h()}}else if(_.querySelector(".js-feed_groups_recomm")){var f;(0,c.feedInitialViewRecommendedGroupsTrigger)(_,e),null==(f=t)||f()}else if(_.querySelector("#feed_mini_apps_recomm")){var C;window.RecommendedMiniApps.viewBlock(),null==(C=t)||C()}else if(_.querySelector(`#${E.FEED_RECOGNIZE_PHOTO_POST_ID}`)){var A,L;null==(A=(0,u.recognizeBlockState)().block)||A.viewBlock(),null==(L=t)||L()}};function A(_,e){D.feedInteractionItemStatCollector.logEvent({track_code:null!=_?_:void 0,ref:e,item:M.FeedInteractionItemType.WALL_ITEM},M.EventItemType.CAPTION_LINK_CLICK)}},447836:(_,e,o)=>{o.d(e,{getFeedPosts:()=>P,isAdWithLongImpression:()=>r,isAdWithLongImpressionOnly:()=>d,isAdWithShowOff:()=>c,isAutoplayAd:()=>l,isElemViewable:()=>u,postsGetRaws:()=>a});var t=o(402153),i=o(70689),n=o(636322),s=o(105940);const a=_=>{if(!(_ instanceof HTMLElement))return{};let e=(0,n.indexOf)((0,i.domPN)(_).children,_),o=_.firstElementChild;if(!(o instanceof HTMLElement))return{};for(;o&&o.id.startsWith("moat");)o=(0,i.domNS)(o);if(!(o instanceof HTMLElement))return{};let t,a,l,r=/^post(-?\d+_\d+)$/,d={};if("ads_feed_placeholder"===o.id)return d;const c=window.cur;d={module:(0,s.resolveRef)(c.module,c.section,c.subsection),index:e},"feed"===c.module&&"search"===c.section&&(d.q=c.q);let E=o.getAttribute("data-ad-view");E&&(d["ad_"+E]=1);let u=o.getAttribute("post_view_hash");u&&(d.hash=u);let P=o.getAttribute("data-post-track-code");if(P&&!E&&(d.trackCode=P),"block_"===o.id.substr(0,6)){d[o.id]=1,d.block=o.id.substr(6);let _=(0,i.attr)(o,"data-contain");_&&_.split(",").forEach((function(_){const e=_.split(":");d[e[0]]=(0,n.intval)(e[1])||1}))}else if(a=o.id.match(r))d[a[1]]=1;else if(a=o.id.match(/^post(adsite.*)$/))d[a[1]]=1;else{var b;if(t=o.className,a=t.match(/feed_reposts_wrap(-?\d+_\d+)/)){if(l=(0,i.domFC)(o),(0,i.hasClass)((0,i.domFC)(l),"post_copy")&&(d[a[1]]=-1),(a=null==(b=(0,i.domFC)(l))?void 0:b.id.match(r))&&(d[a[1]]=1),(0,i.isVisible)(l=(0,i.domNS)(l)))for(l=(0,i.domFC)(l);l;l=(0,i.domNS)(l)){var p;(a=null==(p=l)?void 0:p.id.match(r))&&(d[a[1]]=1)}}else if(a=t.match(/feed_repost(-?\d+_\d+)/)){if(l=(0,i.domFC)(o),!l)return d;(0,i.hasClass)(l,"post_copy")&&(d[a[1]]=-1),(a=l.id.match(r))&&(d[a[1]]=1)}else{let _=o.id;if((0,i.hasClass)(o,"post_photos")){var M,D,O;l=(0,i.geByClass1)("post_image",o,"a");const e=null==(O=l)||null==(D=O.querySelector)||null==(M=D.call(O,"[data-post-id]"))?void 0:M.getAttribute("data-post-id");e&&(a=e.match(/^(-?\d+_p?\d+)$/),a&&(_=a[1]))}d[_]=1}}return d},l=_=>{const e=_&&(0,i.domFC)(_);return e&&e.hasAttribute("data-ad-video-autoplay")},r=_=>{const e=_&&(0,i.domFC)(_);return e&&(e.hasAttribute("data-ad-stat-impression_long")||e.hasAttribute("data-ad-disabled-stat-impression_long"))},d=_=>{let e=_&&(0,i.domFC)(_);return e&&e.hasAttribute("data-ad-views-long-only")},c=_=>{let e=_&&(0,i.domFC)(_);return e&&e.hasAttribute("data-ad-stat-show_off")},E=(0,t.memoizeFirstTruthy)((()=>(0,i.ge)("page_header").offsetHeight)),u=(_,e,o,t)=>{let i=E(),n=o+i,s=o+t,a=_.offsetHeight,l=_.offsetTop+i,r=l+a;return(r>n&&l<s?(Math.min(s,r)-Math.max(n,l))/a:0)>=e},P=_=>document.querySelectorAll(`${_} .feed_row`)},585688:(_,e,o)=>{o.d(e,{friendsRecommLogClear:()=>d,friendsRecommLogGet:()=>r,friendsRecommLogOnFail:()=>u,friendsRecommLogSave:()=>l,friendsRecommLogSend:()=>c,getRef:()=>a});var t,i=o(180937),n=o(636322),s=o(851782);!function(_){_.friends_recomm="friends_recomm"}(t||(t={}));const a=()=>{var _;return"feed"===window.cur.module&&window.Feed?null==(_=window.Feed)?void 0:_.getModuleRef():window.cur.module};function l(_,e=!1){const o=r();o.push(_),i.multiAccountLs.set("friends_recomm",o),c(e)}function r(_=!1,e,o=!1){const t=i.multiAccountLs.get("friends_recomm");let s=Array.isArray(t)?t:[];return e&&(s=s.filter((_=>(o?_[1]!==e:_[1]===e)&&(0,n.inArray)(_[0],["show_user_rec","open_user"])))),_&&(s=s.map((_=>_.join("|")))),s}function d(_){if(_){const e=r(!1,_,!0);e.length?i.multiAccountLs.set("friends_recomm",e):i.multiAccountLs.remove("friends_recomm")}else i.multiAccountLs.remove("friends_recomm")}function c(_=!1){var e,o,t;!(null==(e=window.cur)?void 0:e.friendsRecommLogIdle)&&(null==(t=window)||null==(o=t.curNotifier)?void 0:o.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=()=>{clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(c)),clearTimeout(window.cur.friendsRecommLog),_?E():window.cur.friendsRecommLog=window.setTimeout(E,1e4)}function E(){if(window.cur.friendsRecommProcess)return;const _=r(!0);_.length&&(window.cur.friendsRecommProcess=!0,d(),s.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:_},{onDone:()=>{delete window.cur.friendsRecommProcess},onFail:()=>(u(_),delete window.cur.friendsRecommProcess,!0)}))}function u(_){let e=r();e=_.map((_=>_.split("|"))).concat(e),i.multiAccountLs.set("friends_recomm",e)}},288207:(_,e,o)=>{o.d(e,{blockInstanceSetForFeedRowContent:()=>s,feedInitialViewRecommendedGroupsTrigger:()=>n});var t=o(612291);const i="__RecommendedGroups";function n(_,e){const o=_.querySelector(".js-feed_groups_recomm"),n=_.querySelector(".ui_gallery");if(!o||!n)return void console.error(new Error("RecommendedGroups: missing block container for view"),o,n);const s=n.getAttribute("data-code")||"",a=null!=(l=o[i])?l:void 0;var l;if(!a)return void console.error(new Error("RecommendedGroups: missing block instance"),o,n);const r="number"==typeof e?e:void 0;a.viewBlock(s,r);const d=(0,t.uiGetGallery)(n);d&&d.getVisibleItems().forEach((_=>{a.onViewGroup(_[0])})),n.visible=!0}function s(_,e){_[i]=e}},940461:(_,e,o)=>{o.d(e,{calculateWallPostSize:()=>g,isGalleryVideoInViewport:()=>m,openAvatarForm:()=>b,ownerAvatarEdit:()=>M,ownerAvatarUpload:()=>p,ownerPhotoEffects:()=>O,showLoginBox:()=>D,showPageMembersBox:()=>P,updateHeaderNavIcons:()=>w});var t=o(434788),i=o(93367),n=o(159663),s=o(70689),a=o(251087),l=o(471828),r=o(851782),d=o(30655),c=o(406686),E=o(885067),u=o(977053);function P(_,e,o,s={}){return window.cur.viewAsBox?(window.cur.viewAsBox(),(0,i.cancelEvent)(o)):!(0,n.showTabbedBox)("al_page.php",{act:"box",oid:_,tab:e},{cache:1,params:(0,t._)({},s)},o)}function b(_,e,o,t){const i=(0,u.partConfigEnabled)("avatar_cropper_fix")||o;(0,s.show)(window.boxLayerBG),(0,s.show)(window.boxLoader),(0,s.show)(window.boxLayerWrap),(0,a.boxRefreshCoords)(window.boxLoader),r.ajax.post("al_page.php",_,{onDone:function(_,o){(0,s.hide)(window.boxLayerBG),(0,s.hide)(window.boxLoader),(0,s.hide)(window.boxLayerWrap),o?(0,n.showFastBox)(l.getLang("global_error"),o):_.isNft?window.handleEditNftAvatar(_,e,i,t):window.initOwnerAvatarEditForm(_,e,i,t)},onFail:function(_){return"string"==typeof _&&(0,a.showDoneBox)(_),(0,s.hide)(window.boxLayerBG),(0,s.hide)(window.boxLoader),(0,s.hide)(window.boxLayerWrap),!0}})}function p(_,e,o,t){b({act:"owner_avatar_upload",oid:_},e,o,t)}function M(_,e,o){b({act:"owner_avatar_edit",oid:_,hash:e},o)}function D(){return(0,n.showBox)("al_login.php",{act:"box"}),!1}function O(_,e,o){const t="album"+e+"_0/rev",i=window.cur||{};!window.cur.pvData||window.cur.pvShown&&window.cur.pvListId==t||(0,c.deletePhotoOwnerAlbumCache)(e),(0,d.showPhoto)(_,t,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){i.pvEditorSaved&&(o?o():window.nav.reload())}})}const w=_=>{[document.querySelector("#top_profile_link img"),document.querySelector("#top_vkconnect_link img")].forEach((e=>{e&&(e.src=_)}))},m=(_,e)=>{const o=_.closest(".FeedVideosForYou")||_.closest(".PrimaryAttachmentCarousel"),t=_.closest(".ui_gallery_item");if(!o||!t)return!1;const i=o.querySelectorAll(".ui_gallery_item"),n=Array.from(i).indexOf(t),s=o.getBoundingClientRect(),a=s.x+(.3+.4*n/i.length)*s.width;return e.x<a&&a<e.x+e.width},g=(_,e=!0)=>{if(!_)return{width:0,height:0};var o;const t=null!=(o=_.querySelector(".post_replies_header"))?o:void 0;var i;const n=null!=(i=_.querySelector(".replies"))?i:void 0,s=(0,E.calculateElementSize)(_),a=(0,E.calculateElementSize)(t),l=(0,E.calculateElementSize)(n),r=s.height-a.height-l.height;return{width:e?Math.ceil(s.width):s.width,height:e?Math.ceil(r):r}}},709498:(_,e,o)=>{o.d(e,{INTERNAL_TARGETS:()=>s,URL_ACTION_TYPES:()=>a,ownerButtonClick:()=>l});var t=o(93367),i=o(802481),n=o(30655);const s=new Set(["internal","internal_hidden"]),a=new Set(["open_url","open_vkapp"]);function l(_,e,o,s){if((0,t.checkEvent)(o))return;s&&(0,i.saveStatlogEvents)({name:"owner_button_app_click",value:s});if("open_url"===_.type){if(_.is_internal&&_.open_in_layer){const e=window.nav.fromStr(_.url),o=e[0].replace("/","");return delete e[0],(0,n.showWiki)({w:o},null,null,{ads_params:e})}return window.nav.go(e,o)}return!1}},907035:(_,e,o)=>{o.d(e,{clickUXPollsBlock:()=>n,viewUXPollsBlock:()=>i});var t=o(802130);function i(_){(0,t.statlogsValueEvent)("uxpolls_view",_)}function n(_){(0,t.statlogsValueEvent)("uxpolls_click",_)}},13101:(_,e,o)=>{o.d(e,{VideoForYouEvents:()=>i,VideoPlayerSyncEvents:()=>t});const t={TOGGLE_FAVOURITE:"VideoPlayerSyncEvents/TOGGLE_FAVOURITE",TOGGLE_ADDING_TO_MY_VIDEOS:"VideoPlayerSyncEvents/TOGGLE_ADDING_TO_MY_VIDEOS"},i={VIEW_BLOCK:"VideoForYouEvents/VIEW_BLOCK"}},985403:(_,e,o)=>{o.d(e,{VideoForYouEvents:()=>t.VideoForYouEvents,VideoPlayerSyncEvents:()=>t.VideoPlayerSyncEvents});var t=o(13101)}}]);try{stManager.done("dist/web/chunks/ec38f152.a30cf48b.js")}catch(_){}