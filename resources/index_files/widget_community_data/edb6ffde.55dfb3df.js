/*! For license information please see edb6ffde.55dfb3df.js.LICENSE.txt */
(self.webpackChunkvkwidgets=self.webpackChunkvkwidgets||[]).push([[9101],{68963:(e,t,o)=>{"use strict";o.d(t,{APIErrorType:()=>l,api:()=>T,login:()=>U,removeLoginCache:()=>W,setApiConfig:()=>I,setLoginConfig:()=>R,upload:()=>C});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},i=function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=function(){var e=this;this.get=function(){return e.promise},this.resolve=function(t){return e.resolveHandler(t)},this.reject=function(t){return e.rejectHandler(t)},this.promise=new Promise((function(t,o){e.resolveHandler=t,e.rejectHandler=o}))};function s(e){return Object.keys(e).map((function(t){var o=e[t];return t=encodeURIComponent(t||""),o=encodeURIComponent(void 0===o?"":o),"".concat(t,"=").concat(o)})).join("&")}function a(e,t,o){void 0===o&&(o={});var n=s(t);return fetch(e,i({method:"POST",body:n,mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}},o)).then((function(e){return e.json()}))}var _,l,c=function(e){var t={v:e.version||"5.131"};return e.appId&&(t.client_id=e.appId),t},u=function(e){return{access_token:e.accessToken}},d=function(e,t){return void 0===t&&(t={}),"".concat(e,"-").concat(s(Object.assign({},t)))},p=function(e){return 29===e||9===e||6===e},h=function(e,t){if(e.apiConfig.throwFullErrors){var o=new Error("Api request failed",e.asyncBaseError?{cause:e.asyncBaseError}:void 0);Object.entries(t).forEach((function(e){var t=e[0],n=e[1];o[t]=n})),e.reject(o)}else e.reject(t)},m=function(){function e(e,t,o,n,i){void 0===o&&(o={}),void 0===n&&(n={}),void 0===i&&(i={});var r=this;this.method=e,this.methodParams=t,this.fetchOptions=i,this.overrideApiConfig=n,this.apiConfig=Object.assign({},o,n),this.grouping=this.apiConfig.grouping,this.queryParams=c(this.apiConfig),this.apiConfig.captureAsyncStacktrace&&(this.asyncBaseError=new Error("Async error"));var s=u(this.apiConfig);this.bodyParams=Object.assign({},t,s),this.promise=new Promise((function(e,t){r.resolve=e,r.reject=t}))}return e.prototype.setAccessToken=function(e){this.bodyParams.access_token=e},e.prototype.setGrouping=function(e){this.grouping=e},e.prototype.setParams=function(e){this.methodParams=e},e.prototype.canGroupInExecute=function(){return!this.method.includes("execute")&&!!this.apiConfig.accessToken&&!this.methodParams.v&&!1!==this.grouping&&void 0===this.fetchOptions.method&&void 0===this.fetchOptions.headers&&void 0===this.fetchOptions.signal},e.prototype.toString=function(){var e=this,t={};return Object.keys(this.methodParams).forEach((function(o){var n=e.methodParams[o];null!=n&&(t[o]="object"==typeof n?String(n):n)})),"API.".concat(this.method,"(").concat(JSON.stringify(t),")")},e}(),f=function(e){void 0===e&&(e=1/0);var t=this;this.tries=0,this.increment=function(){t.tries++},this.get=function(){return t.tries},this.isExceeded=function(){return t.tries>=t.maxTries},this.maxTries=e},g=function(){var e=this;this.retries=new Map,this.get=function(t){return e.retries.get(t)},this.create=function(t,o){return e.retries.set(t,new f(o)),e.retries.get(t)},this.delete=function(t){e.retries.delete(t)}},v=function(e){return 0===e?Promise.resolve():new Promise((function(t){var o=function(e){if(0===e)return 0;if(window.FORCED_API_WAIT_TIME)return window.FORCED_API_WAIT_TIME;var t=Math.random(),o=100*Math.pow(2,e)/2;return o+o*t}(e);setTimeout((function(){return t()}),o)}))};!function(e){e.INPUT="input",e.ALERT="alert",e.FULLSCREEN="fullscreen"}(_||(_={})),function(e){e.API_ERROR="api_error",e.NETWORK_ERROR="network_error"}(l||(l={}));var y={domain:"api.vk.com",maxRetries:10,grouping:!0},E=new g,w=new g,b=null,A=null,P=[];function I(e){e=Object.assign({},y,e),y=e}function T(e,t,o,n){void 0===o&&(o={}),void 0===n&&(n={});var i=new m(e,t,y,o,n);return i.canGroupInExecute()?(P.push(i),A&&window.clearTimeout(A),A=window.setTimeout((function(){!function e(t,o,n,i){if(void 0===n&&(n={}),1===t.length)O(u=t.shift()),u.setGrouping(!1);else{for(var r=[],s=[],a=[],_=0;_<t.length;_+=1)if(t[_].canGroupInExecute()){var c=t.splice(_,1)[0];if(_-=1,r.push(c),i&&0!==t.length&&(s.push("'".concat(c.method,"': fork(").concat(c,")")),a.push("wait(forks['".concat(c.method,"'])"))),r.length>=25)break}var u,d="return [".concat(r.join(","),"];");if(i){var p=r[r.length-1];d="\n        var forks = { ".concat(s.join(",")," };\n\n        return [").concat(a.join(","),",").concat(p,"];\n      ")}(u=new m("execute",{code:d},y,o,n)).setGrouping(!0),O(u),u.promise.then((function(e){var t=0;e.response.forEach((function(o,n){!1===o?(h(r[n],{type:l.API_ERROR,error:e.execute_errors[t]}),t+=1):r[n].resolve(o)}))}),(function(e){r.forEach((function(t){return h(t,e)}))}))}t.length>0&&window.setTimeout((function(){return e(t,o,n,i)}),1e3)}(P,o,n,i.apiConfig.enableForks)}),0)):(i.setGrouping(!1),O(i)),i.promise}function O(e){var t=e.methodParams.captcha_sid;b&&b.sid!==t&&h(e,{type:l.API_ERROR,error:{error_code:0,error_msg:"Ddos limit exceeded",error_text:"Ddos limit exceeded"}});var o=e.apiConfig,n=o.domain,_=o.formattedExecuteResponse,c=s(e.queryParams),u="https://".concat(n,"/method/").concat(e.method,"?").concat(c),m=Object.assign({},e.methodParams,e.bodyParams),f=d(u,e.methodParams),g=w.get(f)||w.create(f,e.apiConfig.maxRetries),y=E.get(f)||E.create(f,e.apiConfig.maxRetries);v(g.get()||y.get()).then((function(){return a(u,m,e.fetchOptions)})).then((function(o){var n,s,a,c,u,d,m;if(void 0!==o.response)return w.delete(f),E.delete(f),b&&b.sid===t&&(null===(n=b.task)||void 0===n||n.resolve(void 0),b=null,null===(a=(s=e.apiConfig).onCaptchaSuccess)||void 0===a||a.call(s)),o.execute_errors?_||e.grouping?e.resolve({response:o.response||[],execute_errors:o.execute_errors}):e.resolve(i(i({},o.response),{execute_errors:o.execute_errors})):e.grouping?e.resolve({response:o.response}):e.resolve(o.response);var v=o.error;if(!v)return h(e,{type:l.API_ERROR,error:{error_code:0,error_msg:"Unknown",error_text:"Unknown"}});if(e.apiConfig.onCaptcha&&14===(null==v?void 0:v.error_code)){var A=v,P=A.captcha_sid,T=A.captcha_img,C=A.captcha_height,M=A.captcha_width,D=A.captcha_attempt,S=A.captcha_ts,k=A.is_refresh_enabled,L=A.is_sound_captcha_available,R=A.captcha_track;if(b){if(b.sid!==t)return b.task.get().then((function(){return O(e)}));var x=new r;x.get().then(b.task.resolve).catch(b.task.reject),b={sid:P,task:x}}else b={sid:P,task:new r};return e.apiConfig.onCaptcha({captcha_sid:P,captcha_img:T,captcha_height:C,captcha_width:M,is_refresh_enabled:k,is_sound_captcha_available:L,captcha_track:R}).then((function(t){var o={captcha_ts:S,captcha_attempt:D},n=Object.assign({},e.methodParams,t,o);return e.setParams(n),O(e)})).catch((function(t){return b=null,e.reject({type:l.API_ERROR,error:t})}))}if(b&&b.sid===t&&(null===(c=b.task)||void 0===c||c.resolve(void 0),b=null,null===(d=(u=e.apiConfig).onCaptchaSuccess)||void 0===d||d.call(u)),0===e.apiConfig.maxRetries)return h(e,{type:l.API_ERROR,error:v});if(g.isExceeded()||y.isExceeded())return w.delete(f),E.delete(f),h(e,{type:l.API_ERROR,error:{error_code:0,error_msg:"Maximum of api retries exceeded",error_text:v.error_text}});if(p(v.error_code))return y.increment(),w.delete(f),O(e);E.delete(f);var B=!(null===(m=e.overrideApiConfig)||void 0===m?void 0:m.accessToken)&&(5===v.error_code||28===v.error_code);return e.apiConfig.onTokenExpired&&B?e.apiConfig.onTokenExpired().then((function(t){return g.increment(),I({accessToken:t}),e.setAccessToken(t),O(e)})):(w.delete(f),h(e,{type:l.API_ERROR,error:o.error}))}),(function(t){return e.reject({type:l.NETWORK_ERROR,error:t})}))}function C(e,t){return fetch(e,{method:"POST",body:t,mode:"cors"}).then((function(e){return e.json()}))}var M=function(){function e(){}return e.setItemToStorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){}},e.getItemFromStorage=function(e){try{return localStorage.getItem(e)}catch(e){}},e.removeItemFromStorage=function(e){try{localStorage.removeItem(e)}catch(e){}},e}(),D=/\d+:[a-zA-Z_]+:login:auth/,S=function(e){return new Promise((function(t){var o,n;null===M.getItemFromStorage(e)?(M.setItemToStorage(e,"1"),t()):setTimeout(t,(void 0===o&&(o=500),void 0===n&&(n=1500),window.FORCED_API_WAIT_TIME?window.FORCED_API_WAIT_TIME:~~(Math.random()*(n-o+1)+o)))}))},k=new g,L={domain:"login.vk.com",maxRetries:3};function R(e){e=Object.assign({},L,e),L=e}var x=new Map,B=new Map,N=!1;function U(e,t,o,n,s){void 0===o&&(o={}),void 0===n&&(n=!1),void 0===s&&(s={});var _=Object.assign({},L,o),l="".concat(_.appId,":").concat(e,":login:auth"),c="".concat(l,"--request"),u=x.get(c);if(u)return u.get();var d=k.get(c)||k.create(c,_.maxRetries);return u=new r,x.set(c,u),S(c).then((function(){return v(d.get())})).then((function(){var r,p=!B.get(c)||n;if(_.disableSaveToken||(r=function(e){var t=M.getItemFromStorage(e),o={};if(t)try{o=JSON.parse(t)}catch(e){}return o}(l)),!p&&(null==r?void 0:r.expires)&&1e3*Number(r.expires)-Date.now()>=6e4)return M.removeItemFromStorage(c),x.delete(c),u.resolve(r);var h={};(null==r?void 0:r.access_token)&&(h.access_token=r.access_token);var m=_.domain,f=_.onCaptcha,g="https://".concat(m,"/?act=").concat(e),v=function(e){return{version:e.version||"1",app_id:e.appId}}(_),y=Object.assign({},t,v,h);W(e,o),a(g,y,s).then((function(n){var r;if("error"in n&&(n=function(e){var t,o=e.error,n=o.error_code,i=o.error_msg;switch(n){case 14:var r=e.error,s=r.captcha_sid,a=r.captcha_img,_=r.captcha_width,l=r.captcha_height,c=r.captcha_attempt,u=r.captcha_ts,d=r.is_refresh_enabled,p=r.is_sound_captcha_available;t={type:"captcha",captcha_type:"regular",captcha_sid:s,captcha_img:a,captcha_track:r.captcha_track,captcha_height:l,captcha_width:_,captcha_attempt:c,captcha_ts:u,is_refresh_enabled:d,is_sound_captcha_available:p};break;case 6:t={type:"error",error_info:"check result failure",error_code:String(n)};break;default:t={type:"error",error_info:i,error_code:String(n)}}return t}(n)),"error"===n.type)return x.delete(c),"check result failure"===n.error_info?d.isExceeded()?(k.delete(c),u.reject({type:"login_error",error:{error_code:0,error_msg:"Maximum of login retries exceeded"}})):(d.increment(),U(e,t,o).then(u.resolve).catch(u.reject)):(k.delete(c),u.reject({type:"login_error",error:n.error_info,errorCode:null!==(r=n.error_code)&&void 0!==r?r:"unknown_error"}));if(k.delete(c),"captcha"===n.type){if(!f)return u.reject({type:"login_error",error:"captcha"});var s=n.captcha_sid,a=n.captcha_img,p=n.captcha_type,h=n.captcha_height,m=n.captcha_width,g=n.captcha_ts,v=n.captcha_attempt,y=n.is_refresh_enabled,E=n.is_sound_captcha_available,w=n.captcha_track;return N=!0,f({captcha_sid:s,captcha_img:a,captcha_type:p,captcha_height:h,captcha_width:m,is_refresh_enabled:y,is_sound_captcha_available:E,captcha_track:w}).then((function(n){var i={captcha_ts:g,captcha_attempt:v},r=Object.assign({},t,n,i);return x.delete(c),U(e,r,o).then(u.resolve).catch(u.reject).finally((function(){var e;N&&(N=!1,null===(e=_.onCaptchaSuccess)||void 0===e||e.call(_))}))})).catch((function(){x.delete(c),u.reject({type:"login_error",error:"captcha"})}))}var b=n.data.expires||1/0;_.disableSaveToken||M.setItemToStorage(l,JSON.stringify(i(i({},n.data),{expires:b}))),M.removeItemFromStorage(c),B.set(c,!0),x.delete(c),u.resolve(n.data)}),(function(e){k.delete(c),x.delete(c),u.reject({type:"network_error",error:e})}))})),u.get()}function W(e,t){if(e){var o=L;t&&(o=Object.assign({},L,t));var n="".concat(o.appId,":").concat(e,":login:auth");M.removeItemFromStorage(n)}else Object.keys(localStorage).forEach((function(e){D.test(e)&&M.removeItemFromStorage(e)}))}var F,K,j=function(){function e(e,t){this.config=i(i({},e),t)}return e.prototype.makeNativeError=function(e){var t=new Error("Api request failed.");return Object.entries(e).forEach((function(e){var o=e[0],n=e[1];t[o]=n})),t},e.prototype.applyInterceptors=function(e,t){var o=Promise.resolve(t);return e&&e.forEach((function(e){o=o.then((function(t){return e(t)}))})),o},e.prototype.rejectWithGeneralError=function(e,t){return this.applyInterceptors(this.config.errorInterceptors,t).then((function(t){e.reject(t)}))},e.prototype.rejectWithApiError=function(e,t){var o=this;return this.applyInterceptors(this.config.errorInterceptors,t).then((function(t){e.reject(o.makeNativeError(t))}))},e.prototype.getConfig=function(){return this.config},e.prototype.updateConfig=function(e){this.config=i(i({},this.config),e)},e}(),V=function(){function e(e,t,o,n,i){void 0===i&&(i={});var r=this;this.method=e,this.methodParams=t,this.fetchOptions=i,this.overrideApiConfig=n,this.apiConfig=Object.assign({},o,n),this.grouping=this.apiConfig.grouping,this.queryParams=c(this.apiConfig);var s=u(this.apiConfig);this.bodyParams=Object.assign({},t,s),this.promise=new Promise((function(e,t){r.resolve=e,r.reject=t}))}return e.prototype.setAccessToken=function(e){this.bodyParams.access_token=e},e.prototype.setGrouping=function(e){this.grouping=e},e.prototype.setParams=function(e){this.methodParams=e},e.prototype.canGroupInExecute=function(){return!this.method.includes("execute")&&!!this.apiConfig.accessToken&&!this.methodParams.v&&!1!==this.grouping&&void 0===this.fetchOptions.method&&void 0===this.fetchOptions.headers&&void 0===this.fetchOptions.signal},e.prototype.toString=function(){var e=this,t={};return Object.keys(this.methodParams).forEach((function(o){var n=e.methodParams[o];null!=n&&(t[o]="object"==typeof n?String(n):n)})),"API.".concat(this.method,"(").concat(JSON.stringify(t),")")},e}();!function(e){e.INPUT="input",e.ALERT="alert",e.FULLSCREEN="fullscreen"}(F||(F={})),function(e){e.OK="ok",e.CAPTCHA_ERROR="captcha error",e.API_ERROR="api error",e.UNKNOWN="unknown"}(K||(K={}));var H={domain:"api.vk.com",urlConstructor:function(e,t,o){var n="https://".concat(e,"/method/").concat(t);return o?"".concat(n,"?").concat(s(o)):n},maxRetries:10,grouping:!0};!function(e){function t(t){var o=e.call(this,H,t||{})||this;return o.queue=[],o.requestRetries=new g,o.loginRetries=new g,o.activeCaptchaRequest=null,o.timeoutId=null,o}(function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)})(t,e),t.prototype.processSingleItemQueue=function(){var e=this.queue.shift();this.makeRequest(e),e.setGrouping(!1)},t.prototype.getTasksToExecute=function(){for(var e=[],t=[],o=[],n=0;n<this.queue.length;n+=1)if(this.queue[n].canGroupInExecute()){var i=this.queue.splice(n,1)[0];if(n-=1,e.push(i),0!==this.queue.length&&(t.push("'".concat(i.method,"': fork(").concat(i,")")),o.push("wait(forks['".concat(i.method,"'])"))),e.length>=25)break}return{tasks:e,forks:t,results:o}},t.prototype.addExecuteTaskResponseHandler=function(e,t){var o=this;e.promise.then((function(e){var o=0;e.response.forEach((function(n,i){!1===n?(t[i].reject(e.execute_errors[o]),o+=1):t[i].resolve(n)}))}),(function(e){t.forEach((function(t){o.rejectWithGeneralError(t,e)}))}))},t.prototype.startProcessingQueue=function(e,t){var o=this;if(void 0===t&&(t={}),1===this.queue.length)return this.processSingleItemQueue();var n=this.getTasksToExecute(),i=n.tasks,r=n.forks,s=n.results,a=i[i.length-1],_="\n      var forks = { ".concat(r.join(",")," };\n\n      return [").concat(s.join(","),",").concat(a,"];\n    "),l=new V("execute",{code:_},this.config,e,t);l.setGrouping(!0),this.makeRequest(l),this.addExecuteTaskResponseHandler(l,i),this.queue.length>0&&window.setTimeout((function(){return o.startProcessingQueue(e,t)}),1e3)},t.prototype.getResponseType=function(e,t){var o=e.error;return void 0!==e.response?K.OK:o?t&&14===(null==o?void 0:o.error_code)?K.CAPTCHA_ERROR:K.API_ERROR:K.UNKNOWN},t.prototype.getDomain=function(e){return localStorage.getItem(t.FORCED_HOST_STORAGE_KEY)||e.apiConfig.domain},t.prototype.handleOkayResponse=function(e,t,o,n){var i,r,s;return this.loginRetries.delete(o),this.requestRetries.delete(o),this.activeCaptchaRequest&&this.activeCaptchaRequest.sid===n&&(null===(i=this.activeCaptchaRequest.task)||void 0===i||i.resolve(void 0),this.activeCaptchaRequest=null,null===(s=(r=t.apiConfig).onCaptchaSuccess)||void 0===s||s.call(r)),e.execute_errors?t.resolve({response:e.response||[],execute_errors:e.execute_errors}):t.grouping?t.resolve({response:e.response}):t.resolve(e.response)},t.prototype.handleUnknownResponse=function(e){return this.rejectWithApiError(e,{error_code:0,error_msg:"Unknown",error_text:"Unknown"})},t.prototype.handleCaptchaError=function(e,t,o,n){var i=this;if(o){var s=e.captcha_sid,a=e.captcha_img,_=e.captcha_height,l=e.captcha_width,c=e.captcha_ts,u=e.captcha_attempt,d=e.is_sound_captcha_available,p=e.is_refresh_enabled,h=e.captcha_track;if(this.activeCaptchaRequest){if(this.activeCaptchaRequest.sid!==n)return this.activeCaptchaRequest.task.get().then((function(){return i.makeRequest(t)}));var m=new r;m.get().then(this.activeCaptchaRequest.task.resolve).catch((function(e){if(i.activeCaptchaRequest)return i.rejectWithGeneralError(i.activeCaptchaRequest.task,e)})),this.activeCaptchaRequest={sid:s,task:m}}else this.activeCaptchaRequest={sid:s,task:new r};return o({captcha_sid:s,captcha_img:a,captcha_height:_,captcha_width:l,is_refresh_enabled:p,is_sound_captcha_available:d,captcha_track:h}).then((function(e){var o={captcha_ts:c,captcha_attempt:u},n=Object.assign({},t.methodParams,e,o);return t.setParams(n),i.makeRequest(t)})).catch((function(e){return i.activeCaptchaRequest=null,i.rejectWithGeneralError(t,e)}))}},t.prototype.handleApiError=function(e,t,o,n,i,r){var s,a,_,l,c=this;if(this.activeCaptchaRequest&&this.activeCaptchaRequest.sid===r&&(null===(s=this.activeCaptchaRequest.task)||void 0===s||s.resolve(void 0),this.activeCaptchaRequest=null,null===(_=(a=t.apiConfig).onCaptchaSuccess)||void 0===_||_.call(a)),0===t.apiConfig.maxRetries)return this.rejectWithApiError(t,e);if(o.isExceeded()||n.isExceeded())return this.loginRetries.delete(i),this.requestRetries.delete(i),this.rejectWithApiError(t,{error_code:0,error_msg:"Maximum of api retries exceeded",error_text:e.error_text});if(p(e.error_code))return this.handleFoodControlError(t,n,i);this.requestRetries.delete(i);var u=!(null===(l=t.overrideApiConfig)||void 0===l?void 0:l.accessToken)&&(5===e.error_code||28===e.error_code);return t.apiConfig.onTokenExpired&&u?t.apiConfig.onTokenExpired().then((function(e){return o.increment(),c.updateConfig({accessToken:e}),t.setAccessToken(e),c.makeRequest(t)})):(this.loginRetries.delete(i),this.rejectWithApiError(t,e))},t.prototype.processResponse=function(e,t,o,n,i,r){var s=this;return this.applyInterceptors(this.config.responseInterceptors,e).then((function(e){switch(s.getResponseType(e,!!t.apiConfig.onCaptcha)){case K.OK:return s.handleOkayResponse(e,t,i,r);case K.API_ERROR:return s.handleApiError(e.error,t,o,n,i,r);case K.CAPTCHA_ERROR:return s.handleCaptchaError(e.error,t,t.apiConfig.onCaptcha,r);case K.UNKNOWN:default:return s.handleUnknownResponse(t)}}))},t.prototype.makeRequest=function(e){var t=this,o=e.methodParams.captcha_sid;if(this.activeCaptchaRequest&&this.activeCaptchaRequest.sid!==o)this.rejectWithApiError(e,{error_code:0,error_msg:"Ddos limit exceeded",error_text:"Ddos limit exceeded"});else{var n=this.getDomain(e),i=this.config.urlConstructor(n,e.method,e.queryParams),r=Object.assign({},e.methodParams,e.bodyParams),s=d(i,e.methodParams),_=this.loginRetries.get(s)||this.loginRetries.create(s,e.apiConfig.maxRetries),l=this.requestRetries.get(s)||this.requestRetries.create(s,e.apiConfig.maxRetries);v(_.get()||l.get()).then((function(){return a(i,r,e.fetchOptions)})).then((function(n){return t.processResponse(n,e,_,l,s,o)})).catch((function(o){return t.rejectWithGeneralError(e,o)}))}},t.prototype.createRequestTak=function(e,t,o,n){var i=this;void 0===o&&(o={}),void 0===n&&(n={});var r=new V(e,t,this.config,o,n);return r.canGroupInExecute()?(this.queue.push(r),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((function(){i.startProcessingQueue(o,n)}),0)):(r.setGrouping(!1),this.makeRequest(r)),r.promise},t.prototype.handleFoodControlError=function(e,t,o){return t.increment(),this.loginRetries.delete(o),this.makeRequest(e)},t.prototype.request=function(e,t,o,n){var i=this;void 0===o&&(o={}),void 0===n&&(n={});var r={method:e,methodParams:t,overrideApiConfig:o,fetchOptions:n};return this.applyInterceptors(this.config.requestInterceptors,r).then((function(){return i.createRequestTak(e,t,o,n)}))},t.FORCED_HOST_STORAGE_KEY="@vk-ecosystem/api:api_host"}(j);Promise.prototype.finally||(Promise.prototype.finally=function(e){if("function"!=typeof e)return this.then(e,e);var t=this.constructor||Promise;return this.then((function(o){return t.resolve(e()).then((function(){return o}))}),(function(o){return t.resolve(e()).then((function(){throw o}))}))})},2848:(e,t,o)=>{"use strict";o.d(t,{IconIllustrationSoundWaveLeft36h:()=>n});var n=(0,o(28178).makeIcon)("IconIllustrationSoundWaveLeft36h","illustration_sound_wave_left_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_left_36h"><path d="M59.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0V5.25Zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0V11.696Zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25ZM42.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0v-7.737ZM23.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0V5.25Zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0V11.696Zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25ZM6.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0v-7.737Z" /></symbol>',72,36,!1,void 0)},55077:(e,t,o)=>{"use strict";o.d(t,{IconIllustrationSoundWaveRight36h:()=>n});var n=(0,o(28178).makeIcon)("IconIllustrationSoundWaveRight36h","illustration_sound_wave_right_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_right_36h"><path d="M12.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0V5.25Zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0V11.696ZM4.96 10.446c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25Zm24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0v-7.737ZM48.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0V5.25Zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0V11.696Zm-15.942-1.25c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25Zm24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0v-7.737Z" /></symbol>',72,36,!1,void 0)},5145:(e,t,o)=>{"use strict";o(67294)},76895:(e,t,o)=>{"use strict";o.d(t,{makeIcon:()=>u});var n=o(72253),i=o(14932),r=o(58339),s=o(67294),a=o(12461),_=o(41810),l=o(79860),c=function(e){var t=e.width,o=void 0===t?0:t,a=e.height,_=void 0===a?0:a,l=e.viewBox,c=e.id,u=e.className,d=void 0===u?"":u,p=e.fill,h=e.getRootRef,m=e.style,f=void 0===m?{}:m,g=e.title,v=e.children,y=(0,r._)(e,["width","height","viewBox","id","className","fill","getRootRef","style","title","children"]),E=Math.max(o,_),w=(0,n._)({width:o,height:_},f);return s.createElement("svg",(0,i._)((0,n._)({"aria-hidden":"true",display:"block"},y),{className:["vkuiIcon","vkuiIcon--".concat(E),"vkuiIcon--w-".concat(o),"vkuiIcon--h-".concat(_),"vkuiIcon--".concat(c),d].join(" ").trim(),viewBox:l,width:o,height:_,style:w,ref:h}),g&&s.createElement("title",null,g),s.createElement("use",{xlinkHref:"#".concat(c),style:{fill:"currentColor",color:p}},v))};function u(e,t,o,r,u,d,p,h){var m=function(){f||((0,_.addSpriteSymbol)(new a.BrowserSymbol({content:r})),f=!0)},f=!1,g=(0,l.warnOnce)(e),v=function(e){if((0,_.useIsomorphicLayoutEffect)(m,[]),p){var r=h?". Замените на ".concat(h):"";g("Иконка устарела"+r)}return s.createElement(c,(0,i._)((0,n._)({},e),{viewBox:o,id:t,width:void 0===e.width||isNaN(e.width)?u:+e.width,height:void 0===e.height||isNaN(e.height)?d:+e.height}))};return v.mountIcon=m,v.displayName=e,v}},59142:(e,t,o)=>{"use strict";o.d(t,{BrowserSprite:()=>_});var n=o(48564),i=o(2267),r=o(75766),s=o(12461),a="http://www.w3.org/2000/svg",_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n._)(this,e),(0,r._)(this,"symbols",new Map),(0,r._)(this,"config",{attrs:{xmlns:a,"xmlns:xlink":"http://www.w3.org/1999/xlink",style:"position:absolute;width:0;height:0","aria-hidden":"true"}}),(0,r._)(this,"node",null),Object.assign(this.config.attrs,t.attrs)}return(0,i._)(e,[{key:"push",value:function(e){var t=this.symbols,o=t.has(e.id);return t.set(e.id,e),!o}},{key:"add",value:function(e){var t=this.push(e);return this.node&&t&&e.mount(this.node),t}},{key:"attach",value:function(e){var t=this;this.node||(this.node=e,this.symbols.forEach((function(t){t.mount(e)})),e.querySelectorAll("symbol").forEach((function(e){var o=s.BrowserSymbol.createFromExistingNode(e);t.add(o)})))}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.node||(this.node=this.render(),t&&e.childNodes[0]?e.insertBefore(this.node,e.firstChild):e.appendChild(this.node)),this.node}},{key:"render",value:function(){var e=document.createElementNS(a,"svg");return Object.entries(this.config.attrs).forEach((function(t){return e.setAttribute(t[0],t[1])})),this.symbols.forEach((function(t){return e.appendChild(t.node)})),e}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)}}]),e}()},12461:(e,t,o)=>{"use strict";o.d(t,{BrowserSymbol:()=>a});var n=o(48564),i=o(2267),r=o(75766),s=o(10639),a=function(){function e(t){var o=t.content;(0,n._)(this,e),(0,r._)(this,"isMounted",!1),(0,r._)(this,"node",void 0),this.node=(0,s.parse)(o)}return(0,i._)(e,[{key:"id",get:function(){return this.node.id}},{key:"mount",value:function(e){return this.isMounted||(this.isMounted=!0,e.appendChild(this.node)),this.node}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&(this.node.parentNode.removeChild(this.node),this.isMounted=!1)}}],[{key:"createFromExistingNode",value:function(t){var o=new e({content:""});return o.node=t,o}}]),e}()},28178:(e,t,o)=>{"use strict";o.d(t,{makeIcon:()=>n.makeIcon});var n=o(76895);o(5145)},41810:(e,t,o)=>{"use strict";o.d(t,{addSpriteSymbol:()=>l,useIsomorphicLayoutEffect:()=>c});var n,i=o(59142),r=o(67294),s=!("undefined"==typeof window||!window.document||!window.document.createElement);if(s){var a="__SVG_SPRITE_NODE__";n=new i.BrowserSprite({attrs:{id:a}});var _=function(){var e=document.getElementById(a);e?n.attach(e):n.mount(document.body),document.removeEventListener("DOMContentLoaded",_)};document.querySelector("body")?_():document.addEventListener("DOMContentLoaded",_)}else n=null;function l(e){n&&n.add(e)}var c=s?r.useLayoutEffect:r.useEffect},10639:(e,t,o)=>{"use strict";function n(e){var t=!!document.importNode,o=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(o,!0):o}o.d(t,{parse:()=>n})},79860:(e,t,o)=>{"use strict";function n(e){var t={};return function(o){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[o]||(console[n]("[@vkontakte/icons][".concat(e,"] ").concat(o)),t[o]=!0)}}o.d(t,{warnOnce:()=>n})},83298:(e,t,o)=>{"use strict";o.d(t,{Icon12OnlineMobile:()=>n});var n=(0,o(28178).makeIcon)("Icon12OnlineMobile","online_mobile_12","0 0 8 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 12" id="online_mobile_12"><path fill="currentColor" d="M5.99 0C7.1 0 8 .9 8 2.01v7.98C8 11.1 7.1 12 5.99 12H2.01C.9 12 0 11.1 0 9.99V2.01C0 .9.9 0 2.01 0zm.008 3H2.003a.5.5 0 0 0-.503.502v4.996c0 .277.225.502.503.502h3.995a.5.5 0 0 0 .502-.502V3.503A.5.5 0 0 0 5.997 3" /></symbol>',8,12,!1,void 0)},19979:(e,t,o)=>{"use strict";o.d(t,{Icon16Done:()=>n});var n=(0,o(28178).makeIcon)("Icon16Done","done_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="done_16"><path fill="currentColor" d="M13.743 3.756a.87.87 0 0 1 0 1.237l-7.317 7.25a.88.88 0 0 1-1.242 0L2.257 9.366a.87.87 0 0 1 0-1.237.88.88 0 0 1 1.242 0l2.306 2.261L12.5 3.756a.88.88 0 0 1 1.242 0" /></symbol>',16,16,!1,void 0)},95146:(e,t,o)=>{"use strict";o.d(t,{Icon16Spinner:()=>n});var n=(0,o(28178).makeIcon)("Icon16Spinner","spinner_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="spinner_16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.149 7.065.75.75 0 1 1-1.31.732A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 .001-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},51815:(e,t,o)=>{"use strict";o.d(t,{Icon20CheckBoxIndetermanate:()=>n});var n=(0,o(28178).makeIcon)("Icon20CheckBoxIndetermanate","check_box_indetermanate_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_indetermanate_20"><path fill="currentColor" fill-rule="evenodd" d="M2 8.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C5.04 2 6.16 2 8.4 2h3.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C18 5.04 18 6.16 18 8.4v3.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C14.96 18 13.84 18 11.6 18H8.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C2 14.96 2 13.84 2 11.6zm4.4.7a.9.9 0 1 0 0 1.8h7.2a.9.9 0 1 0 0-1.8z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},99944:(e,t,o)=>{"use strict";o.d(t,{Icon20ChevronUp:()=>n});var n=(0,o(28178).makeIcon)("Icon20ChevronUp","chevron_up_20","0 0 20 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16" id="chevron_up_20"><path fill-rule="evenodd" d="M15.78 11.125a1 1 0 0 1-1.405.156L10 7.78l-4.375 3.5a1 1 0 0 1-1.25-1.562l5-4a1 1 0 0 1 1.25 0l5 4a1 1 0 0 1 .156 1.406Z" clip-rule="evenodd" /></symbol>',20,16,!1,void 0)},20140:(e,t,o)=>{"use strict";o.d(t,{Icon20PodcastOutline:()=>n});var n=(0,o(28178).makeIcon)("Icon20PodcastOutline","podcast_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="podcast_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" opacity=".4" /><path fill="currentColor" fill-rule="nonzero" d="M10 5a4 4 0 0 1 4 4v3c0 1.953-1.4 3.578-3.25 3.93v1.32a.75.75 0 1 1-1.5 0v-1.32A4 4 0 0 1 6 12V9a4 4 0 0 1 4-4m0 1.5A2.5 2.5 0 0 0 7.5 9v3a2.5 2.5 0 0 0 4.502 1.498l-.13.002H10.45a.75.75 0 1 1 0-1.5h2.05v-1.5h-2.05a.75.75 0 1 1 0-1.5h2.05A2.5 2.5 0 0 0 10 6.5M10 2a7 7 0 0 1 6.938 6.065A1.5 1.5 0 0 1 18 9.5v3a1.5 1.5 0 0 1-3 0v-3c0-.428.18-.815.468-1.088a5.5 5.5 0 0 0-5.247-4.908L10 3.5a5.5 5.5 0 0 0-5.469 4.912c.29.273.469.66.469 1.088v3a1.5 1.5 0 0 1-3 0v-3a1.5 1.5 0 0 1 1.062-1.435A7 7 0 0 1 10 2" /></g></symbol>',20,20,!1,void 0)},11930:(e,t,o)=>{"use strict";o.d(t,{Icon20ShareOutline:()=>n});var n=(0,o(28178).makeIcon)("Icon20ShareOutline","share_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="share_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M9.764 4.753a.25.25 0 0 1 .402-.198l6.742 5.247a.25.25 0 0 1 0 .395l-6.747 5.25a.25.25 0 0 1-.402-.198v-3.136a.75.75 0 0 0-.75-.75c-2.456 0-4.342.913-5.832 2.197.266-1.454.824-2.577 1.57-3.426 1.066-1.212 2.58-1.941 4.385-2.228a.75.75 0 0 0 .632-.741zm1.324-1.381c-1.15-.895-2.824-.075-2.824 1.38v1.791c-1.81.394-3.434 1.225-4.643 2.6-1.352 1.538-2.117 3.68-2.117 6.445a.75.75 0 0 0 1.329.477c1.362-1.655 3.059-2.942 5.426-3.167v2.35c0 1.456 1.674 2.277 2.823 1.382l6.747-5.25c.9-.7.9-2.061 0-2.762z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},39743:(e,t,o)=>{"use strict";o.d(t,{Icon20ThumbsDown:()=>n});var n=(0,o(28178).makeIcon)("Icon20ThumbsDown","thumbs_down_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_20"><path fill-rule="evenodd" d="m14.725 12.63-1.944 4.52a2.232 2.232 0 0 1-4.283-.883v-2.326a.285.285 0 0 0-.285-.285H4.498c-2.105 0-3.556-2.111-2.8-4.076l2.076-5.4A3.4 3.4 0 0 1 6.947 2h4.849a3.2 3.2 0 0 1 3.2 3.2v6.114c0 .453-.092.9-.271 1.316M16.745 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},32184:(e,t,o)=>{"use strict";o.d(t,{Icon20ThumbsDownOutline:()=>n});var n=(0,o(28178).makeIcon)("Icon20ThumbsDownOutline","thumbs_down_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_outline_20"><path fill-rule="evenodd" d="M10.762 18.503c.898 0 1.711-.532 2.07-1.355l1.77-4.057c.058-.134.097-.224.132-.317.152-.4.24-.823.261-1.251.005-.1.005-.198.005-.345v-4.46c0-.673 0-1.223-.037-1.671-.037-.463-.118-.882-.317-1.272a3.25 3.25 0 0 0-1.42-1.42c-.391-.2-.81-.28-1.273-.318C11.506 2 10.955 2 10.282 2h-2.47c-.829 0-1.433 0-1.974.197a3.25 3.25 0 0 0-1.254.826c-.395.42-.633.975-.96 1.736l-.994 2.32c-.387.902-.698 1.626-.89 2.218-.196.6-.306 1.166-.2 1.726a3.25 3.25 0 0 0 1.378 2.09c.473.319 1.036.441 1.665.498.62.057 1.408.057 2.389.057h1.531v2.578a2.26 2.26 0 0 0 2.26 2.258Zm.695-1.955a.759.759 0 0 1-1.454-.303V13.2c0-.571-.463-1.034-1.034-1.034h-1.96c-1.027 0-1.747-.001-2.29-.05-.543-.05-.803-.141-.963-.249a1.75 1.75 0 0 1-.742-1.125c-.036-.19-.017-.465.152-.983.169-.52.452-1.18.857-2.125l.93-2.167c.399-.93.534-1.215.724-1.417a1.75 1.75 0 0 1 .675-.445c.26-.095.576-.106 1.587-.106h2.311c.713 0 1.202 0 1.581.032.37.03.57.085.713.159.33.168.598.435.765.765.074.144.13.343.16.713.03.38.031.869.031 1.581v4.411c0 .17 0 .23-.003.29-.013.27-.069.537-.165.79-.02.055-.045.11-.113.267l-1.761 4.04ZM16.75 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" /></symbol>',20,20,!1,void 0)},61539:(e,t,o)=>{"use strict";o.d(t,{Icon20VinylOutline:()=>n});var n=(0,o(28178).makeIcon)("Icon20VinylOutline","vinyl_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="vinyl_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 7.5a2.5 2.5 0 0 0-1.768.732A2.5 2.5 0 0 0 7.5 10c0 .69.28 1.315.732 1.768A2.5 2.5 0 0 0 10 12.5a2.5 2.5 0 0 0 1.768-.732A2.5 2.5 0 0 0 12.5 10a2.5 2.5 0 0 0-.732-1.768A2.5 2.5 0 0 0 10 7.5m-.707 1.793A1 1 0 0 1 10 9a1 1 0 0 1 .707.293A1 1 0 0 1 11 10a1 1 0 0 1-.293.707A1 1 0 0 1 10 11a1 1 0 0 1-.707-.293A1 1 0 0 1 9 10a1 1 0 0 1 .293-.707" clip-rule="evenodd" /><path fill="currentColor" d="M10.21 6.006a4 4 0 0 0-4.205 4.2.75.75 0 0 1-.71.787.75.75 0 0 1-.788-.71 5.5 5.5 0 0 1 5.78-5.775.75.75 0 0 1-.078 1.497m5.283 3.712a.75.75 0 0 0-1.498.077 4 4 0 0 1-4.204 4.2.75.75 0 0 0-.079 1.498 5.5 5.5 0 0 0 4.175-1.602 5.5 5.5 0 0 0 1.606-4.173" /><path fill="currentColor" fill-rule="evenodd" d="M10 1.5a8.47 8.47 0 0 0-6.01 2.49C2.45 5.528 1.5 7.653 1.5 10s.951 4.472 2.49 6.01C5.528 17.55 7.653 18.5 10 18.5s4.472-.951 6.01-2.49c1.539-1.538 2.49-3.663 2.49-6.01s-.951-4.472-2.49-6.01A8.47 8.47 0 0 0 10 1.5M5.05 5.05A6.97 6.97 0 0 1 10 3c1.933 0 3.681.782 4.95 2.05A6.97 6.97 0 0 1 17 10a6.97 6.97 0 0 1-2.05 4.95A6.97 6.97 0 0 1 10 17a6.97 6.97 0 0 1-4.95-2.05A6.97 6.97 0 0 1 3 10c0-1.933.782-3.681 2.05-4.95" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},50053:(e,t,o)=>{"use strict";o.d(t,{Icon24CheckBoxOff:()=>n});var n=(0,o(28178).makeIcon)("Icon24CheckBoxOff","check_box_off_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="check_box_off_24"><path fill="currentColor" d="M16.872 2c1.783 0 2.43.186 3.082.534s1.163.86 1.512 1.512S22 5.345 22 7.128v9.744c0 1.783-.186 2.43-.534 3.082a3.64 3.64 0 0 1-1.512 1.512c-.652.348-1.299.534-3.082.534H7.128c-1.783 0-2.43-.186-3.082-.534s-1.163-.86-1.512-1.512C2.186 19.302 2 18.655 2 16.872V7.128c0-1.783.186-2.43.534-3.082a3.64 3.64 0 0 1 1.512-1.512C4.698 2.186 5.345 2 7.128 2zm.564 2H6.564c-.892 0-1.215.093-1.54.267-.327.174-.583.43-.757.756S4 5.673 4 6.563v10.873c0 .892.093 1.215.267 1.54.174.327.43.583.756.757s.65.267 1.54.267h10.873c.892 0 1.215-.093 1.54-.267.327-.174.583-.43.757-.756s.267-.65.267-1.54V6.563c0-.892-.093-1.215-.267-1.54a1.8 1.8 0 0 0-.756-.757c-.326-.174-.65-.267-1.54-.267" /></symbol>',24,24,!1,void 0)},83260:(e,t,o)=>{"use strict";o.d(t,{Icon24CheckBoxOn:()=>n});var n=(0,o(28178).makeIcon)("Icon24CheckBoxOn","check_box_on_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="check_box_on_24"><path fill="currentColor" fill-rule="evenodd" d="M2.436 4.184C2 5.04 2 6.16 2 8.4v7.2c0 2.24 0 3.36.436 4.216a4 4 0 0 0 1.748 1.748C5.04 22 6.16 22 8.4 22h7.2c2.24 0 3.36 0 4.216-.436a4 4 0 0 0 1.748-1.748C22 18.96 22 17.84 22 15.6V8.4c0-2.24 0-3.36-.436-4.216a4 4 0 0 0-1.748-1.748C18.96 2 17.84 2 15.6 2H8.4c-2.24 0-3.36 0-4.216.436a4 4 0 0 0-1.748 1.748m15.771 5.023a1 1 0 0 0-1.414-1.414L10 14.586l-2.793-2.793a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.414 0z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},6281:(e,t,o)=>{"use strict";o.d(t,{Icon24Chevron:()=>n});var n=(0,o(28178).makeIcon)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24,!1,void 0)},57561:(e,t,o)=>{"use strict";o.d(t,{Icon24ChevronUp:()=>n});var n=(0,o(28178).makeIcon)("Icon24ChevronUp","chevron_up_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="chevron_up_24"><path d="m12 10.302-5.36 4.466a1 1 0 1 1-1.28-1.536l6-5a1 1 0 0 1 1.28 0l6 5a1 1 0 1 1-1.28 1.536z" /></symbol>',24,24,!1,void 0)},27210:(e,t,o)=>{"use strict";o.d(t,{Icon24Dismiss:()=>n});var n=(0,o(28178).makeIcon)("Icon24Dismiss","dismiss_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dismiss_24"><g fill="currentColor"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12" opacity=".12" /><path d="M16.736 7.264a.9.9 0 0 1 0 1.272L13.273 12l3.463 3.464a.9.9 0 0 1 .081 1.18l-.08.092a.9.9 0 0 1-1.273 0L12 13.273l-3.464 3.463a.9.9 0 1 1-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 0 1-.08-1.18l.08-.092a.9.9 0 0 1 1.272 0L12 10.727l3.464-3.463a.9.9 0 0 1 1.272 0" /></g></symbol>',24,24,!1,void 0)},91140:(e,t,o)=>{"use strict";o.d(t,{Icon24Headphones:()=>n});var n=(0,o(28178).makeIcon)("Icon24Headphones","headphones_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="headphones_24"><path d="M12 2.25a9 9 0 0 0-9 9V18a3 3 0 0 0 3 3h1.5A1.5 1.5 0 0 0 9 19.5v-5A1.5 1.5 0 0 0 7.5 13H5v-1.75c0-3.87 3.13-7 7-7s7 3.13 7 7V13h-2.5a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5H18a3 3 0 0 0 3-3v-6.75a9 9 0 0 0-9-9" /></symbol>',24,24,!1,void 0)},60293:(e,t,o)=>{"use strict";o.d(t,{Icon24Refresh:()=>n});var n=(0,o(28178).makeIcon)("Icon24Refresh","refresh_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="refresh_24"><path d="M12 9.096a.4.4 0 0 0 .67.296l4.287-3.899a.667.667 0 0 0 0-.987L12.67.609a.4.4 0 0 0-.67.295V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6z" /></symbol>',24,24,!1,void 0)},9466:(e,t,o)=>{"use strict";o.d(t,{Icon24Reorder:()=>n});var n=(0,o(28178).makeIcon)("Icon24Reorder","reorder_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M21 18a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1M3 6a1 1 0 0 1 1-1h16a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1" /></g></symbol>',24,24,!1,void 0)},19229:(e,t,o)=>{"use strict";o.d(t,{Icon24ReorderIos:()=>n});var n=(0,o(28178).makeIcon)("Icon24ReorderIos","reorder_ios_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_ios_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" opacity=".1" /><path fill="currentColor" fill-rule="nonzero" d="M2.75 7h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5" /></g></symbol>',24,24,!1,void 0)},72848:(e,t,o)=>{"use strict";o.d(t,{Icon24Spinner:()=>n});var n=(0,o(28178).makeIcon)("Icon24Spinner","spinner_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="spinner_24"><path fill="currentColor" fill-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 0 0 4.58 15.49a.9.9 0 0 1-1.628.767A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.394-15.123" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},94003:(e,t,o)=>{"use strict";o.d(t,{Icon32Spinner:()=>n});var n=(0,o(28178).makeIcon)("Icon32Spinner","spinner_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path fill="currentColor" d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 16 16 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16" /></symbol>',32,32,!1,void 0)},42420:(e,t,o)=>{"use strict";o.d(t,{Icon40PlayCircle:()=>n});var n=(0,o(28178).makeIcon)("Icon40PlayCircle","play_circle_40","0 0 40 40",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 40 40" id="play_circle_40"><path fill-rule="evenodd" d="M40 20c0 11.046-8.954 20-20 20S0 31.046 0 20 8.954 0 20 0s20 8.954 20 20m-14.329 1.077a1.25 1.25 0 0 0 0-2.154l-8.787-5.175A1.25 1.25 0 0 0 15 14.826v10.348a1.25 1.25 0 0 0 1.884 1.078z" clip-rule="evenodd" /></symbol>',40,40,!1,void 0)},7943:(e,t,o)=>{"use strict";o.d(t,{Icon44Spinner:()=>n});var n=(0,o(28178).makeIcon)("Icon44Spinner","spinner_44","0 0 44 44",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path fill="currentColor" d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A22 22 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22" /></symbol>',44,44,!1,void 0)},63476:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};function o(e,t,o){if(o||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function n(e,o,n){var i=function(e){var t={current:0,next:function(){return++this.current}},o={};return{add:function(n,i){var r=null!=i?i:"".concat(t.next(),"_").concat(e);return o[r]=n,r},resolve:function(e,t,n){var i=o[e];i&&(n(t)?i.resolve(t):i.reject(t),o[e]=null)}}}(n);return o((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,o=t.request_id,n=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o}(t,["request_id"]);o&&i.resolve(o,n,(function(e){return!("error_type"in e)}))}})),function(o,n){return void 0===n&&(n={}),new Promise((function(r,s){var a=i.add({resolve:r,reject:s},n.request_id);e(o,t(t({},n),{request_id:a}))}))}}var i,r,s,a,_,l,c,u="undefined"!=typeof window,d=Boolean(u&&window.AndroidBridge),p=Boolean(u&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),h=Boolean(u&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),m=u&&!d&&!p,f=m&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),g=m?"message":"VKWebAppEvent",v=o(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile"],m&&!f?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppGetFriends","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),y=u?window.AndroidBridge:void 0,E=p?window.webkit.messageHandlers:void 0,w=m?parent:void 0;e.EAdsFormats=void 0,(i=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",i.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(r=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",r.OVERLAY="overlay",e.BannerAdLocation=void 0,(s=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",s.BOTTOM="bottom",e.EGrantedPermission=void 0,(a=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",a.LOCATION="location",a.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(_=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",_.UK="uk",_.UA="ua",_.EN="en",_.BE="be",_.KZ="kz",_.PT="pt",_.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(l=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",l.EDITOR="editor",l.MEMBER="member",l.MODER="moder",l.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(c=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",c.DESKTOP_WEB_MESSENGER="desktop_web_messenger",c.DESKTOP_APP_MESSENGER="desktop_app_messenger",c.MOBILE_WEB="mobile_web",c.MOBILE_ANDROID="mobile_android",c.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",c.MOBILE_IPHONE="mobile_iphone",c.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",c.MOBILE_IPAD="mobile_ipad";var b=function(e){var t=void 0,i=[],r=Math.random().toString(36).substring(2,5);function s(e){i.push(e)}function a(){return p||d}function _(){return m&&window.parent!==window}function l(){return a()||_()}function c(e){if(p||d)return o([],i,!0).map((function(t){return t.call(null,e)}));var n=null==e?void 0:e.data;if(m&&n){if(h&&"string"==typeof n)try{n=JSON.parse(n)}catch(e){}var r=n.type,s=n.data,a=n.frameId;r&&("VKWebAppSettings"!==r?o([],i,!0).map((function(e){return e({detail:{type:r,data:s}})})):t=a)}}h&&/(android)/i.test(navigator.userAgent)?document.addEventListener(g,c):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(g,c);var u=n((function(o,n){y&&y[o]?y[o](JSON.stringify(n)):E&&E[o]&&"function"==typeof E[o].postMessage?E[o].postMessage(n):h?window.ReactNativeWebView.postMessage(JSON.stringify({handler:o,params:n})):w&&"function"==typeof w.postMessage&&w.postMessage({handler:o,params:n,type:"vk-connect",webFrameId:t,connectVersion:e},"*")}),s,r);return{send:u,sendPromise:u,subscribe:s,unsubscribe:function(e){var t=i.indexOf(e);t>-1&&i.splice(t,1)},supports:function(e){return d?!(!y||"function"!=typeof y[e]):p?!(!E||!E[e]||"function"!=typeof E[e].postMessage):!!m&&v.includes(e)},isWebView:a,isIframe:_,isEmbedded:l,isStandalone:function(){return!l()}}}("2.12.2");e.applyMiddleware=function e(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return o.includes(void 0)||o.includes(null)?e.apply(void 0,o.filter((function(e){return"function"==typeof e}))):function(e){if(0===o.length)return e;var n,i={subscribe:e.subscribe,send:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e.send.apply(e,t)}},r=o.filter((function(e){return"function"==typeof e})).map((function(e){return e(i)})).reduce((function(e,t){return function(o){return e(t(o))}}));return n=r(e.send),t(t({},e),{send:n})}},e.default=b,e.parseURLSearchParamsForGetLaunchParams=function(t){var o={};try{new URLSearchParams(t).forEach((function(t,n){switch(n){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":o[n]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":o[n]=t;break;case"odr_enabled":o.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":o[n]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":o.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":o.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":o.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return o},Object.defineProperty(e,"__esModule",{value:!0})}(t)},76624:function(e){e.exports=function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)},t=1,o=7,n=96*t,i=96*t,r=25,s=function(e,t,n,i,s){if(e<o&&t<o)return!1;if(e>=n-o&&t<o)return!1;if(e<o&&t>=n-o)return!1;if(s){var a=o+2;n<=r&&a--;var _=(n-2*o-a)/2-1;return n<=r&&_++,!(e>o+_&&e<n-o-_-1&&t>o+_&&t<n-o-_-1)&&0<=e&&e<n&&0<=t&&t<n&&i[t][e]}return i[t]&&i[t][e]},a=function(e,t,o,n,i){return void 0===i&&(i=!0),{l:s(e-1,t,o,n,i),r:s(e+1,t,o,n,i),t:s(e,t-1,o,n,i),b:s(e,t+1,o,n,i),current:s(e,t,o,n,i)}},_=function(e,i){if("number"!=typeof i.qrSize)throw new Error("Size should be a number");if("string"!=typeof i.className)throw new Error("Classname should be a string");for(var _=2*t,l=12.7*t,c=12.8*t,u=14.7*t,d=14.8*t,p=15.9*t,h=28.6*t,m=30.5*t,f=84.7776815*t,g=87.3*t,v=71.4*t,y=42.9*t,E=87.2*t,w=85.2*t,b=85.3*t,A=69.5*t,P=98*t,I=100*t,T=[],O=0,C=0,M=0,D=0,S=0;S<e.size;S++){O=0;for(var k=0;k<e.size;k++){M=k+O,O+=n,D=S+C;var L=a(k,S,e.size,e.modules,i.isShowLogo),R="",x="";L.current?(x=!(x=x||L.l||L.r||L.t||L.b?"":"empty")&&L.l&&L.r||L.t&&L.b?"rect":"")||(x+=L.l?"l":L.r?"r":"",(x+=L.t?"t":L.b?"b":"")||(x="empty")):x=!(x=!(x=!(x=!x&&L.l&&L.t&&s(k-1,S-1,e.size,e.modules,i.isShowLogo)?"n_lt":"")&&L.l&&L.b&&s(k-1,S+1,e.size,e.modules,i.isShowLogo)?"n_lb":"")&&L.r&&L.t&&s(k+1,S-1,e.size,e.modules,i.isShowLogo)?"n_rt":"")&&L.r&&L.b&&s(k+1,S+1,e.size,e.modules,i.isShowLogo)?"n_rb":"",x&&(R='<use xlink:href="#'+x+"-"+i.suffix+'"/>',T.push('<g transform="translate('+M+","+D+')">'+R+"</g>"))}C+=n}var B="",N=(e.size-3*o)/2*n+n*o-10;e.size<=r&&(B="scale(0.85)",N+=50);var U=(e.size-o)*i.incTileSize;T.push('<use fill-rule="evenodd" transform="translate(0,0)" xlink:href="#point-'+i.suffix+'"/>'),T.push('<use fill-rule="evenodd" transform="translate('+U+',0)" xlink:href="#point-'+i.suffix+'"/>'),T.push('<use fill-rule="evenodd" transform="translate(0,'+U+')" xlink:href="#point-'+i.suffix+'"/>'),i.isShowLogo&&(i.logoData?T.push('\n        <image\n          preserveAspectRatio="xMidYMid slice" clip-path="url(#logo-mask-'+i.suffix+')"\n          style="width: 750px; height: 750px;" width="750" height="750"\n          transform="translate('+N+","+N+") "+B+'"\n          xlink:href="'+i.logoData+'"\n        />\n      '):T.push('\n        <use style="width: 750px; height: 750px;" width="750" height="750"\n          fill="none"\n          fill-rule="evenodd"\n          transform="translate('+N+","+N+") "+B+'" xlink:href="#vk_logo-'+i.suffix+'"\n        />\n      '));var W=99*e.size,F="",K="translate(0,0)";if(i.isShowBackground){var j=(i.qrSize-40)/i.qrSize,V=W/i.qrSize*21;F='\n      <rect\n        x="0"\n        width="'+W+'"\n        height="'+W+'"\n        rx="'+Math.ceil(W/(i.qrSize/36))+'"\n        fill="'+i.backgroundColor+'"\n      />',K="translate("+V+", "+V+") scale("+j+")"}var H="M0,0 L66,0 C"+f+",-3.44940413e-15 "+I+",15.2223185 "+I+",34 L"+I+",66 C"+I+","+f+" "+f+","+I+" 66,"+I+" L0,"+I+" L0,0 Z",q="M0,0 L"+I+",0 L"+I+",66 C"+I+","+f+" "+f+","+I+" 66,"+I+" L0,"+I+" L0,0 Z";return'\n  <svg\n    version="1.1"\n    viewBox="0 0 '+W+" "+W+'"\n    width="'+i.qrSize+'px"\n    height="'+i.qrSize+'px"\n    '+(i.className?'class="'+i.className+'"':"")+'\n    xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <defs>\n      <rect id="rect-'+i.suffix+'" width="100" height="100" fill="'+i.foregroundColor+'"/>\n      <path\n        id="empty-'+i.suffix+'"\n        d="M0,'+h+"v"+y+"C0,"+g+","+c+","+I+","+h+","+I+"h"+y+"c"+p+",0,"+h+"-"+c+","+h+"-"+h+"V"+h+"C"+I+","+l+","+E+",0,"+v+",0H"+h+" C"+c+",0,0,"+c+",0,"+h+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path id="b-'+i.suffix+'" d="'+H+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="r-'+i.suffix+'" d="'+H+'" transform="rotate(-180 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="l-'+i.suffix+'" d="'+H+'" fill="'+i.foregroundColor+'"/>\n      <path id="t-'+i.suffix+'" d="'+H+'" transform="rotate(90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="l-'+i.suffix+'" d="'+q+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="lt-'+i.suffix+'" d="'+q+'" fill="'+i.foregroundColor+'"/>\n      <path id="lb-'+i.suffix+'" d="'+q+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="rb-'+i.suffix+'" d="'+q+'" transform="rotate(-180 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="rt-'+i.suffix+'" d="'+q+'" transform="rotate(90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path\n        id="n_lt-'+i.suffix+'"\n        d="M'+m+","+_+"V0H0v"+m+"h"+_+"C"+_+","+u+","+d+","+_+","+m+","+_+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path\n        id="n_lb-'+i.suffix+'"\n        d="M'+_+","+A+"H0V"+I+"h"+m+"v-"+_+"C"+u+","+P+","+_+","+w+","+_+","+A+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path\n        id="n_rt-'+i.suffix+'"\n        d="M'+P+","+m+"h"+_+"V0H"+A+"v"+_+"C"+b+","+_+","+P+","+d+","+P+","+m+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path id="n_rb-'+i.suffix+'"\n        d="M'+A+","+P+"v"+_+"H"+I+"V"+A+"h-"+_+"C"+P+","+b+","+w+","+P+","+A+","+P+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path\n        id="point-'+i.suffix+'"\n        fill="'+i.foregroundColor+'"\n        d="M600.001786,457.329333 L600.001786,242.658167 C600.001786,147.372368 587.039517,124.122784 581.464617,118.535383 C575.877216,112.960483 552.627632,99.9982143 457.329333,99.9982143 L242.670667,99.9982143 C147.372368,99.9982143 124.122784,112.960483 118.547883,118.535383 C112.972983,124.122784 99.9982143,147.372368 99.9982143,242.658167 L99.9982143,457.329333 C99.9982143,552.627632 112.972983,575.877216 118.547883,581.464617 C124.122784,587.027017 147.372368,600.001786 242.670667,600.001786 L457.329333,600.001786 C552.627632,600.001786 575.877216,587.027017 581.464617,581.464617 C587.039517,575.877216 600.001786,552.627632 600.001786,457.329333 Z M457.329333,0 C653.338333,0 700,46.6616668 700,242.658167 C700,438.667167 700,261.332833 700,457.329333 C700,653.338333 653.338333,700 457.329333,700 C261.332833,700 438.667167,700 242.670667,700 C46.6616668,700 0,653.338333 0,457.329333 C0,261.332833 0,352.118712 0,242.658167 C0,46.6616668 46.6616668,0 242.670667,0 C438.667167,0 261.332833,0 457.329333,0 Z M395.996667,200 C480.004166,200 500,220.008332 500,303.990835 C500,387.998334 500,312.001666 500,395.996667 C500,479.991668 480.004166,500 395.996667,500 C312.001666,500 387.998334,500 304.003333,500 C220.008332,500 200,479.991668 200,395.996667 C200,312.001666 200,350.906061 200,303.990835 C200,220.008332 220.008332,200 304.003333,200 C387.998334,200 312.001666,200 395.996667,200 Z"\n      />\n      <g id="vk_logo-'+i.suffix+'">\n        <path\n          fill="'+i.logoColor+'"\n          d="M83.3334 363.333C83.3334 231.34 83.3334 165.343 124.338 124.338C165.343 83.3333 231.34              83.3333 363.333 83.3333H386.667C518.66 83.3333 584.657 83.3333 625.662 124.338C666.667 165.343              666.667 231.34 666.667 363.333V386.667C666.667 518.66 666.667 584.657 625.662 625.662C584.657              666.667 518.66 666.667 386.667 666.667H363.333C231.34 666.667 165.343 666.667 124.338 625.662C83.3334              584.657 83.3334 518.66 83.3334 386.667V363.333Z"\n        />\n        <path\n          fill="#FFF"\n          d="M394.907 508.681C263.293 508.681 183.442 417.365 180.313 265.625H246.972C249.05 377.09              299.763 424.323 338.638 434.036V265.625H402.519V361.82C440.016 357.664 479.264 313.909              492.456 265.625H555.333C545.27 325 502.543 368.754 472.353 386.803C502.566 401.395 551.177              439.593 569.926 508.681H500.815C486.222 462.498 450.476 426.728 402.542 421.872V508.681H394.907Z"\n        />\n      </g>\n      <clipPath id="logo-mask-'+i.suffix+'">\n        <rect x="0" y="0" width="750" height="750" />\n      </clipPath>\n    </defs>\n\n    '+F+'\n\n    <g transform="'+K+'">\n      '+T.join("\n")+"\n    </g>\n  </svg>"},l=function(){function e(t,o,n,i){if(this.version=t,this.errorCorrectionLevel=o,this.mask=i,this.modules=[],this.isFunction=[],t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version value out of range";if(i<-1||i>7)throw"Mask value out of range";this.size=4*t+17;for(var r=[],s=0;s<this.size;s++)r.push(!1);for(s=0;s<this.size;s++)this.modules.push(r.slice()),this.isFunction.push(r.slice());this.drawFunctionPatterns();var a=this.addEccAndInterleave(n);if(this.drawCodewords(a),-1==i){var _=1e9;for(s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var l=this.getPenaltyScore();l<_&&(i=s,_=l),this.applyMask(s)}}if(i<0||i>7)throw"Assertion error";this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}return e.encodeText=function(t,o){var n=u.makeSegments(t);return e.encodeSegments(n,o)},e.encodeBinary=function(t,o){var n=u.makeBytes(t);return e.encodeSegments([n],o)},e.encodeSegments=function(t,o,n,i,r,s){if(void 0===n&&(n=1),void 0===i&&(i=40),void 0===r&&(r=-1),void 0===s&&(s=!0),!(e.MIN_VERSION<=n&&n<=i&&i<=e.MAX_VERSION)||r<-1||r>7)throw"Invalid value";var a,_;for(a=n;;a++){var l=8*e.getNumDataCodewords(a,o),c=u.getTotalBits(t,a);if(c<=l){_=c;break}if(a>=i)throw"Data too long"}for(var d=0,h=[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH];d<h.length;d++){var m=h[d];s&&_<=8*e.getNumDataCodewords(a,m)&&(o=m)}for(var f=new p,g=0,v=t;g<v.length;g++){var y=v[g];f.appendBits(y.mode.modeBits,4),f.appendBits(y.numChars,y.mode.numCharCountBits(a));for(var E=0,w=y.getData();E<w.length;E++){var b=w[E];f.array.push(b)}}if(f.array.length!=_)throw"Assertion error";var A=8*e.getNumDataCodewords(a,o);if(f.array.length>A)throw"Assertion error";if(f.appendBits(0,Math.min(4,A-f.array.length)),f.appendBits(0,(8-f.array.length%8)%8),f.array.length%8!=0)throw"Assertion error";for(var P=236;f.array.length<A;P^=253)f.appendBits(P,8);for(var I=[];8*I.length<f.array.length;)I.push(0);return f.array.forEach((function(e,t){return I[t>>>3]|=e<<7-(7&t)})),new e(a,o,I,r)},e.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},e.prototype.drawCanvas=function(e,t,o){if(e<=0||t<0)throw"Value out of range";var n=(this.size+2*t)*e;o.width=n,o.height=n;for(var i=o.getContext("2d"),r=-t;r<this.size+t;r++)for(var s=-t;s<this.size+t;s++)i.fillStyle=this.getModule(s,r)?"#000000":"#FFFFFF",i.fillRect((s+t)*e,(r+t)*e,e,e)},e.prototype.toSvgString=function(e){if(e<0)throw"Border must be non-negative";for(var t=[],o=0;o<this.size;o++)for(var n=0;n<this.size;n++)this.getModule(n,o)&&t.push("M"+(n+e)+","+(o+e)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(this.size+2*e)+" "+(this.size+2*e)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+t.join(" ")+'" fill="#000000"/>\n</svg>\n'},e.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);var t=this.getAlignmentPatternPositions(),o=t.length;for(e=0;e<o;e++)for(var n=0;n<o;n++)0==e&&0==n||0==e&&n==o-1||e==o-1&&0==n||this.drawAlignmentPattern(t[e],t[n]);this.drawFormatBits(0),this.drawVersion()},e.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,o=t,n=0;n<10;n++)o=o<<1^1335*(o>>>9);var i=21522^(t<<10|o);if(i>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)this.setFunctionModule(8,n,c(i,n));for(this.setFunctionModule(8,7,c(i,6)),this.setFunctionModule(8,8,c(i,7)),this.setFunctionModule(7,8,c(i,8)),n=9;n<15;n++)this.setFunctionModule(14-n,8,c(i,n));for(n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,c(i,n));for(n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,c(i,n));this.setFunctionModule(8,this.size-8,!0)},e.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var o=this.version<<12|e;if(o>>>18!=0)throw"Assertion error";for(t=0;t<18;t++){var n=c(o,t),i=this.size-11+t%3,r=Math.floor(t/3);this.setFunctionModule(i,r,n),this.setFunctionModule(r,i,n)}}},e.prototype.drawFinderPattern=function(e,t){for(var o=-4;o<=4;o++)for(var n=-4;n<=4;n++){var i=Math.max(Math.abs(n),Math.abs(o)),r=e+n,s=t+o;0<=r&&r<this.size&&0<=s&&s<this.size&&this.setFunctionModule(r,s,2!=i&&4!=i)}},e.prototype.drawAlignmentPattern=function(e,t){for(var o=-2;o<=2;o++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+o,1!=Math.max(Math.abs(n),Math.abs(o)))},e.prototype.setFunctionModule=function(e,t,o){this.modules[t][e]=o,this.isFunction[t][e]=!0},e.prototype.addEccAndInterleave=function(t){var o=this.version,n=this.errorCorrectionLevel;if(t.length!=e.getNumDataCodewords(o,n))throw"Invalid argument";for(var i=e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][o],r=e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][o],s=Math.floor(e.getNumRawDataModules(o)/8),a=i-s%i,_=Math.floor(s/i),l=[],c=new d(r),u=0,p=0;u<i;u++){var h=t.slice(p,p+_-r+(u<a?0:1));p+=h.length;var m=c.getRemainder(h);u<a&&h.push(0),l.push(h.concat(m))}var f=[];for(u=0;u<l[0].length;u++)for(var g=0;g<l.length;g++)(u!=_-r||g>=a)&&f.push(l[g][u]);if(f.length!=s)throw"Assertion error";return f},e.prototype.drawCodewords=function(t){if(t.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var o=0,n=this.size-1;n>=1;n-=2){6==n&&(n=5);for(var i=0;i<this.size;i++)for(var r=0;r<2;r++){var s=n-r,a=0==(n+1&2)?this.size-1-i:i;!this.isFunction[a][s]&&o<8*t.length&&(this.modules[a][s]=c(t[o>>>3],7-(7&o)),o++)}}if(o!=8*t.length)throw"Assertion error"},e.prototype.applyMask=function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var o=0;o<this.size;o++){var n=void 0;switch(e){case 0:n=(o+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=o%3==0;break;case 3:n=(o+t)%3==0;break;case 4:n=(Math.floor(o/3)+Math.floor(t/2))%2==0;break;case 5:n=o*t%2+o*t%3==0;break;case 6:n=(o*t%2+o*t%3)%2==0;break;case 7:n=((o+t)%2+o*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][o]&&n&&(this.modules[t][o]=!this.modules[t][o])}},e.prototype.getPenaltyScore=function(){for(var t=0,o=0;o<this.size;o++){for(var n=[0,0,0,0,0,0,0],i=!1,r=0,s=0;s<this.size;s++)this.modules[o][s]==i?5==++r?t+=e.PENALTY_N1:r>5&&t++:(e.addRunToHistory(r,n),!i&&e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3),i=this.modules[o][s],r=1);e.addRunToHistory(r,n),i&&e.addRunToHistory(0,n),e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3)}for(s=0;s<this.size;s++){n=[0,0,0,0,0,0,0],i=!1;var a=0;for(o=0;o<this.size;o++)this.modules[o][s]==i?5==++a?t+=e.PENALTY_N1:a>5&&t++:(e.addRunToHistory(a,n),!i&&e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3),i=this.modules[o][s],a=1);e.addRunToHistory(a,n),i&&e.addRunToHistory(0,n),e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3)}for(o=0;o<this.size-1;o++)for(s=0;s<this.size-1;s++)(i=this.modules[o][s])==this.modules[o][s+1]&&i==this.modules[o+1][s]&&i==this.modules[o+1][s+1]&&(t+=e.PENALTY_N2);for(var _=0,l=0,c=this.modules;l<c.length;l++)for(var u=0,d=c[l];u<d.length;u++)(i=d[u])&&_++;var p=this.size*this.size;return t+=(Math.ceil(Math.abs(20*_-10*p)/p)-1)*e.PENALTY_N4},e.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),o=[6],n=this.size-7;o.length<e;n-=t)o.splice(1,0,n);return o},e.getNumRawDataModules=function(t){if(t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version number out of range";var o=(16*t+128)*t+64;if(t>=2){var n=Math.floor(t/7)+2;o-=(25*n-10)*n-55,t>=7&&(o-=36)}return o},e.getNumDataCodewords=function(t,o){return Math.floor(e.getNumRawDataModules(t)/8)-e.ECC_CODEWORDS_PER_BLOCK[o.ordinal][t]*e.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][t]},e.addRunToHistory=function(e,t){t.pop(),t.unshift(e)},e.hasFinderLikePattern=function(e){var t=e[1];return t>0&&e[2]==t&&e[4]==t&&e[5]==t&&e[3]==3*t&&Math.max(e[0],e[6])>=4*t},e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e}();function c(e,t){return 0!=(e>>>t&1)}var u=function(){function e(e,t,o){if(this.mode=e,this.numChars=t,this.bitData=o,t<0)throw"Invalid argument";this.bitData=o.slice()}return e.makeBytes=function(t){for(var o=new p,n=0,i=t;n<i.length;n++){var r=i[n];o.appendBits(r,8)}return new e(e.Mode.BYTE,t.length,o.array)},e.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var o=new p,n=0;n<t.length;){var i=Math.min(t.length-n,3);o.appendBits(parseInt(t.substr(n,i),10),3*i+1),n+=i}return new e(e.Mode.NUMERIC,t.length,o.array)},e.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var o,n=new p;for(o=0;o+2<=t.length;o+=2){var i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o));i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o+1)),n.appendBits(i,11)}return o<t.length&&n.appendBits(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o)),6),new e(e.Mode.ALPHANUMERIC,t.length,n.array)},e.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var o=new p;if(t<0)throw"ECI assignment value out of range";if(t<128)o.appendBits(t,8);else if(t<16384)o.appendBits(2,2),o.appendBits(t,14);else{if(!(t<1e6))throw"ECI assignment value out of range";o.appendBits(6,3),o.appendBits(t,21)}return new e(e.Mode.ECI,0,o.array)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var o=0,n=0,i=e;n<i.length;n++){var r=i[n],s=r.mode.numCharCountBits(t);if(r.numChars>=1<<s)return 1/0;o+=4+s+r.bitData.length}return o},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],o=0;o<e.length;o++)"%"!=e.charAt(o)?t.push(e.charCodeAt(o)):(t.push(parseInt(e.substr(o+1,2),16)),o+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}(),d=function(){function e(t){if(this.coefficients=[],t<1||t>255)throw"Degree out of range";for(var o=this.coefficients,n=0;n<t-1;n++)o.push(0);o.push(1);var i=1;for(n=0;n<t;n++){for(var r=0;r<o.length;r++)o[r]=e.multiply(o[r],i),r+1<o.length&&(o[r]^=o[r+1]);i=e.multiply(i,2)}}return e.prototype.getRemainder=function(t){for(var o=this.coefficients.map((function(e){return 0})),n=function(t){var n=t^o.shift();o.push(0),i.coefficients.forEach((function(t,i){return o[i]^=e.multiply(t,n)}))},i=this,r=0,s=t;r<s.length;r++)n(s[r]);return o},e.multiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var o=0,n=7;n>=0;n--)o=o<<1^285*(o>>>7),o^=(t>>>n&1)*e;if(o>>>8!=0)throw"Assertion error";return o},e}(),p=function(){function e(){this.array=[]}return e.prototype.appendBits=function(e,t){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var o=t-1;o>=0;o--)this.array.push(e>>>o&1)},e}();(function(e){var t=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}();e.Ecc=t})(l||(l={})),function(e){var t=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}();e.Mode=t}(u||(u={}));var h=128,m="#ffffff",f="#000000",g="#07f";function v(t,o,n,r){if("string"!=typeof t)throw new TypeError("Enter text for encoding");var s=e(e(e({},"object"==typeof o&&null!==o?o:{}),"object"==typeof r&&null!==r?r:{}),{qrSize:"object"==typeof o&&null!==o&&"number"==typeof o.qrSize?o.qrSize:o,className:"object"==typeof o&&null!==o&&"string"==typeof o.className?o.className:n}),a=[l.Ecc.LOW,l.Ecc.MEDIUM,l.Ecc.QUARTILE,l.Ecc.HIGH],c={qrSize:"number"==typeof s.qrSize?s.qrSize:h,className:"string"==typeof s.className?s.className:n||"",isShowLogo:!!s.isShowLogo||!1,isShowBackground:!!s.isShowBackground||!1,foregroundColor:"string"==typeof s.foregroundColor?s.foregroundColor:f,backgroundColor:"string"==typeof s.backgroundColor?s.backgroundColor:m,logoColor:"string"==typeof s.logoColor?s.logoColor:g,suffix:s.suffix?s.suffix.toString():"0",logoData:"string"==typeof s.logoData?s.logoData:null,ecc:"number"==typeof s.ecc&&a[s.ecc]?s.ecc:3,incTileSize:"number"==typeof s.incTileSize?s.incTileSize:i},d=u.makeSegments(t),p=l.encodeSegments(d,a[c.ecc],1,40,-1,!0);return _(p,c)}return{createQR:v}}()},11099:(e,t,o)=>{"use strict";Object.defineProperty(t,"classNames",{enumerable:!0,get:function(){return i}});var n=o(74185);function i(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=[];return t.forEach((function(e){if(e)switch(void 0===e?"undefined":n._(e)){case"string":i.push(e);break;case"object":Object.keys(e).forEach((function(t){e[t]&&i.push(t)}));break;default:i.push("".concat(e))}})),i.join(" ")}},12263:(e,t)=>{"use strict";function o(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,o){var n=document.createElement("textarea"),i=document.createRange();n.value=e,n.style.position="fixed",n.contentEditable="true",document.body.appendChild(n),n.focus(),n.select(),i.selectNodeContents(n);var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(i)),n.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):o(new Error("copy failed"))}catch(e){o(e)}r&&r.removeAllRanges(),document.body.removeChild(n)}))}(e)}Object.defineProperty(t,"copyTextToClipboard",{enumerable:!0,get:function(){return o}})},20569:(e,t,o)=>{"use strict";o.d(t,{arrow:()=>f,autoPlacement:()=>g,computePosition:()=>p,flip:()=>v,hide:()=>w,offset:()=>P,shift:()=>I,size:()=>T});var n=o(11010),i=o(75766),r=o(72253),s=o(14932),a=o(58339),_=o(62039),l=o(97582),c=o(24248);function u(e,t,o){var n,i=e.reference,r=e.floating,s=(0,c.getSideAxis)(t),a=(0,c.getAlignmentAxis)(t),_=(0,c.getAxisLength)(a),l=(0,c.getSide)(t),u="y"===s,d=i.x+i.width/2-r.width/2,p=i.y+i.height/2-r.height/2,h=i[_]/2-r[_]/2;switch(l){case"top":n={x:d,y:i.y-r.height};break;case"bottom":n={x:d,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:p};break;case"left":n={x:i.x-r.width,y:p};break;default:n={x:i.x,y:i.y}}switch((0,c.getAlignment)(t)){case"start":n[a]-=h*(o&&u?-1:1);break;case"end":n[a]+=h*(o&&u?-1:1)}return n}var d,p=(d=(0,n._)((function(e,t,o){var n,a,_,c,d,p,h,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=o.placement,a=void 0===n?"bottom":n,_=o.strategy,c=void 0===_?"absolute":_,d=o.middleware,p=void 0===d?[]:d,h=o.platform,m=p.filter(Boolean),[4,null==h.isRTL?void 0:h.isRTL(t)];case 1:return f=l.sent(),[4,h.getElementRects({reference:e,floating:t,strategy:c})];case 2:g=l.sent(),v=u(g,a,f),y=v.x,E=v.y,w=a,b={},A=0,P=0,l.label=3;case 3:return P<m.length?(I=m[P],T=I.name,[4,(0,I.fn)({x:y,y:E,initialPlacement:a,placement:w,strategy:c,middlewareData:b,rects:g,platform:h,elements:{reference:e,floating:t}})]):[3,11];case 4:return O=l.sent(),C=O.x,M=O.y,D=O.data,S=O.reset,y=null!=C?C:y,E=null!=M?M:E,b=(0,s._)((0,r._)({},b),(0,i._)({},T,(0,r._)({},b[T],D))),S&&A<=50?(A++,"object"!=typeof S?[3,9]:(S.placement&&(w=S.placement),S.rects?!0!==S.rects?[3,6]:[4,h.getElementRects({reference:e,floating:t,strategy:c})]:[3,8])):[3,10];case 5:return k=l.sent(),[3,7];case 6:k=S.rects,l.label=7;case 7:g=k,l.label=8;case 8:L=u(g,w,f),y=L.x,E=L.y,l.label=9;case 9:return P=-1,[3,10];case 10:return P++,[3,3];case 11:return[2,{x:y,y:E,placement:w,strategy:c,middlewareData:b}]}}))})),function(e,t,o){return d.apply(this,arguments)});function h(e,t){return m.apply(this,arguments)}function m(){return(m=(0,n._)((function(e,t){var o,n,i,a,_,u,d,p,h,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L,R,x,B,N;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return void 0===t&&(t={}),n=e.x,i=e.y,a=e.platform,_=e.rects,u=e.elements,d=e.strategy,p=(0,c.evaluate)(t,e),h=p.boundary,m=void 0===h?"clippingAncestors":h,f=p.rootBoundary,g=void 0===f?"viewport":f,v=p.elementContext,y=void 0===v?"floating":v,E=p.altBoundary,w=void 0!==E&&E,b=p.padding,A=void 0===b?0:b,P=(0,c.getPaddingObject)(A),I="floating"===y?"reference":"floating",T=u[w?I:y],C=a.getClippingRect,M={},[4,null==a.isElement?void 0:a.isElement(T)];case 1:return null==(o=l.sent())||o?(D=T,[3,5]):[3,2];case 2:return(S=T.contextElement)?[3,4]:[4,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating)];case 3:S=l.sent(),l.label=4;case 4:D=S,l.label=5;case 5:return[4,C.apply(a,[(M.element=D,M.boundary=m,M.rootBoundary=g,M.strategy=d,M)])];case 6:return O=c.rectToClientRect.apply(void 0,[l.sent()]),k="floating"===y?(0,s._)((0,r._)({},_.floating),{x:n,y:i}):_.reference,[4,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating)];case 7:return L=l.sent(),[4,null==a.isElement?void 0:a.isElement(L)];case 8:return l.sent()?[4,null==a.getScale?void 0:a.getScale(L)]:[3,10];case 9:return x=l.sent()||{x:1,y:1},[3,11];case 10:x={x:1,y:1},l.label=11;case 11:return R=x,a.convertOffsetParentRelativeRectToViewportRelativeRect?[4,a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:k,offsetParent:L,strategy:d})]:[3,13];case 12:return N=l.sent(),[3,14];case 13:N=k,l.label=14;case 14:return B=c.rectToClientRect.apply(void 0,[N]),[2,{top:(O.top-B.top+P.top)/R.y,bottom:(B.bottom-O.bottom+P.bottom)/R.y,left:(O.left-B.left+P.left)/R.x,right:(B.right-O.right+P.right)/R.x}]}}))}))).apply(this,arguments)}var f=function(e){return{name:"arrow",options:e,fn:function(t){return(0,n._)((function(){var o,n,s,a,_,u,d,p,h,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L,R,x,B,N,U,W,F,K,j;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return o=t.x,n=t.y,s=t.placement,a=t.rects,_=t.platform,u=t.elements,d=t.middlewareData,p=(0,c.evaluate)(e,t)||{},h=p.element,m=p.padding,f=void 0===m?0:m,null==h?[2,{}]:(g=(0,c.getPaddingObject)(f),v={x:o,y:n},y=(0,c.getAlignmentAxis)(s),E=(0,c.getAxisLength)(y),[4,_.getDimensions(h)]);case 1:return w=l.sent(),A=(b="y"===y)?"top":"left",P=b?"bottom":"right",I=b?"clientHeight":"clientWidth",T=a.reference[E]+a.reference[y]-v[y]-a.floating[E],O=v[y]-a.reference[y],[4,null==_.getOffsetParent?void 0:_.getOffsetParent(h)];case 2:return C=l.sent(),M=C?C[I]:0,(D=!M)?[3,4]:[4,null==_.isElement?void 0:_.isElement(C)];case 3:D=!l.sent(),l.label=4;case 4:return D&&(M=u.floating[I]||a.floating[E]),S=T/2-O/2,k=M/2-w[E]/2-1,L=(0,c.min)(g[A],k),R=(0,c.min)(g[P],k),x=L,B=M-w[E]-R,N=M/2-w[E]/2+S,U=(0,c.clamp)(x,N,B),W=!d.arrow&&null!=(0,c.getAlignment)(s)&&N!=U&&a.reference[E]/2-(N<x?L:R)-w[E]/2<0,F=W?N<x?N-x:N-B:0,[2,(j={},(0,i._)(j,y,v[y]+F),(0,i._)(j,"data",(0,r._)((K={},(0,i._)(K,y,U),(0,i._)(K,"centerOffset",N-U-F),K),W&&{alignmentOffset:F})),(0,i._)(j,"reset",W),j)]}}))}))()}}};var g=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,fn:function(t){return(0,n._)((function(){var o,n,i,r,s,u,d,p,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L,R,x;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=t.rects,s=t.middlewareData,u=t.placement,d=t.platform,p=t.elements,m=(0,c.evaluate)(e,t),f=m.crossAxis,g=void 0!==f&&f,v=m.alignment,y=m.allowedPlacements,E=void 0===y?c.placements:y,w=m.autoAlignment,b=void 0===w||w,A=(0,a._)(m,["crossAxis","alignment","allowedPlacements","autoAlignment"]),P=void 0!==v||E===c.placements?function(e,t,o){return(e?(0,_._)(o.filter((function(t){return(0,c.getAlignment)(t)===e}))).concat((0,_._)(o.filter((function(t){return(0,c.getAlignment)(t)!==e})))):o.filter((function(e){return(0,c.getSide)(e)===e}))).filter((function(o){return!e||(0,c.getAlignment)(o)===e||!!t&&(0,c.getOppositeAlignmentPlacement)(o)!==o}))}(v||null,b,E):E,[4,h(t,A)];case 1:return I=l.sent(),T=(null==(o=s.autoPlacement)?void 0:o.index)||0,null==(O=P[T])?[2,{}]:(M=[O,r],[4,null==d.isRTL?void 0:d.isRTL(p.floating)]);case 2:return C=c.getAlignmentSides.apply(void 0,M.concat([l.sent()])),u!==O?[2,{reset:{placement:P[0]}}]:(D=[I[(0,c.getSide)(O)],I[C[0]],I[C[1]]],S=(0,_._)((null==(n=s.autoPlacement)?void 0:n.overflows)||[]).concat([{placement:O,overflows:D}]),(k=P[T+1])?[2,{data:{index:T+1,overflows:S},reset:{placement:k}}]:(L=S.map((function(e){var t=(0,c.getAlignment)(e.placement);return[e.placement,t&&g?e.overflows.slice(0,2).reduce((function(e,t){return e+t}),0):e.overflows[0],e.overflows]})).sort((function(e,t){return e[1]-t[1]})),R=L.filter((function(e){return e[2].slice(0,(0,c.getAlignment)(e[0])?2:3).every((function(e){return e<=0}))})),(x=(null==(i=R[0])?void 0:i[0])||L[0][0])!==u?[2,{data:{index:T+1,overflows:S},reset:{placement:x}}]:[2,{}]))}}))}))()}}},v=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return(0,n._)((function(){var o,n,i,r,s,u,d,p,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L,R,x,B,N,U,W,F,K,j,V,H;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i=t.placement,r=t.middlewareData,s=t.rects,u=t.initialPlacement,d=t.platform,p=t.elements,m=(0,c.evaluate)(e,t),f=m.mainAxis,g=void 0===f||f,v=m.crossAxis,y=void 0===v||v,E=m.fallbackPlacements,w=m.fallbackStrategy,b=void 0===w?"bestFit":w,A=m.fallbackAxisSideDirection,P=void 0===A?"none":A,I=m.flipAlignment,T=void 0===I||I,O=(0,a._)(m,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]),null!=(o=r.arrow)&&o.alignmentOffset?[2,{}]:(C=(0,c.getSide)(i),M=(0,c.getSide)(u)===u,[4,null==d.isRTL?void 0:d.isRTL(p.floating)]);case 1:return D=l.sent(),S=E||(M||!T?[(0,c.getOppositePlacement)(u)]:(0,c.getExpandedPlacements)(u)),E||"none"===P||(k=S).push.apply(k,(0,_._)((0,c.getOppositeAxisPlacements)(u,T,P,D))),L=[u].concat((0,_._)(S)),[4,h(t,O)];case 2:if(R=l.sent(),x=[],B=(null==(n=r.flip)?void 0:n.overflows)||[],g&&x.push(R[C]),y&&(N=(0,c.getAlignmentSides)(i,s,D),x.push(R[N[0]],R[N[1]])),B=(0,_._)(B).concat([{placement:i,overflows:x}]),!x.every((function(e){return e<=0}))){if(F=((null==(U=r.flip)?void 0:U.index)||0)+1,K=L[F])return[2,{data:{index:F,overflows:B},reset:{placement:K}}];if(!(j=null==(W=B.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:W.placement))switch(b){case"bestFit":H=null==(V=B.map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:V[0],H&&(j=H);break;case"initialPlacement":j=u}if(i!==j)return[2,{reset:{placement:j}}]}return[2,{}]}}))}))()}}};function y(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function E(e){return c.sides.some((function(t){return e[t]>=0}))}var w=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return(0,n._)((function(){var o,n,i,_,u,d,p,m,f;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:switch(o=t.rects,n=(0,c.evaluate)(e,t),i=n.strategy,_=void 0===i?"referenceHidden":i,u=(0,a._)(n,["strategy"]),_){case"referenceHidden":return[3,1];case"escaped":return[3,3]}return[3,5];case 1:return[4,h(t,(0,s._)((0,r._)({},u),{elementContext:"reference"}))];case 2:return d=l.sent(),[2,{data:{referenceHiddenOffsets:p=y(d,o.reference),referenceHidden:E(p)}}];case 3:return[4,h(t,(0,s._)((0,r._)({},u),{altBoundary:!0}))];case 4:return m=l.sent(),[2,{data:{escapedOffsets:f=y(m,o.floating),escaped:E(f)}}];case 5:return[2,{}];case 6:return[2]}}))}))()}}};function b(e,t){return A.apply(this,arguments)}function A(){return A=(0,n._)((function(e,t){var o,n,i,s,a,_,u,d,p,h,m,f,g,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return o=e.placement,n=e.platform,i=e.elements,[4,null==n.isRTL?void 0:n.isRTL(i.floating)];case 1:return s=l.sent(),a=(0,c.getSide)(o),_=(0,c.getAlignment)(o),u="y"===(0,c.getSideAxis)(o),d=["left","top"].includes(a)?-1:1,p=s&&u?-1:1,h=(0,c.evaluate)(t,e),m="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:(0,r._)({mainAxis:0,crossAxis:0,alignmentAxis:null},h),f=m.mainAxis,g=m.crossAxis,v=m.alignmentAxis,_&&"number"==typeof v&&(g="end"===_?-1*v:v),[2,u?{x:g*p,y:f*d}:{x:f*d,y:g*p}]}}))})),A.apply(this,arguments)}var P=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return(0,n._)((function(){var o,n,i;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return o=t.x,n=t.y,[4,b(t,e)];case 1:return i=r.sent(),[2,{x:o+i.x,y:n+i.y,data:i}]}}))}))()}}},I=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return(0,n._)((function(){var o,n,_,u,d,p,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return o=t.x,n=t.y,_=t.placement,u=(0,c.evaluate)(e,t),d=u.mainAxis,p=void 0===d||d,m=u.crossAxis,f=void 0!==m&&m,g=u.limiter,v=void 0===g?{fn:function(e){return{x:e.x,y:e.y}}}:g,y=(0,a._)(u,["mainAxis","crossAxis","limiter"]),E={x:o,y:n},[4,h(t,y)];case 1:return w=l.sent(),b=(0,c.getSideAxis)((0,c.getSide)(_)),A=(0,c.getOppositeAxis)(b),P=E[A],I=E[b],p&&(T="y"===A?"bottom":"right",O=P+w["y"===A?"top":"left"],C=P-w[T],P=(0,c.clamp)(O,P,C)),f&&(M="y"===b?"bottom":"right",D=I+w["y"===b?"top":"left"],S=I-w[M],I=(0,c.clamp)(D,I,S)),L=v.fn((0,s._)((0,r._)({},t),(k={},(0,i._)(k,A,P),(0,i._)(k,b,I),k))),[2,(0,s._)((0,r._)({},L),{data:{x:L.x-o,y:L.y-n}})]}}))}))()}}},T=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return(0,n._)((function(){var o,n,i,_,u,d,p,m,f,g,v,y,E,w,b,A,P,I,T,O,C,M,D,S,k,L,R,x,B;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return o=t.placement,n=t.rects,i=t.platform,_=t.elements,u=(0,c.evaluate)(e,t),d=u.apply,p=void 0===d?function(){}:d,m=(0,a._)(u,["apply"]),[4,h(t,m)];case 1:return f=l.sent(),g=(0,c.getSide)(o),v=(0,c.getAlignment)(o),y="y"===(0,c.getSideAxis)(o),E=n.floating,w=E.width,b=E.height,"top"!==g&&"bottom"!==g?[3,3]:(A=g,[4,null==i.isRTL?void 0:i.isRTL(_.floating)]);case 2:return P=v===(l.sent()?"start":"end")?"left":"right",[3,4];case 3:P=g,A="end"===v?"top":"bottom",l.label=4;case 4:return I=b-f[A],T=w-f[P],O=!t.middlewareData.shift,C=I,M=T,y?(D=w-f.left-f.right,M=v||O?(0,c.min)(T,D):D):(S=b-f.top-f.bottom,C=v||O?(0,c.min)(I,S):S),O&&!v&&(k=(0,c.max)(f.left,0),L=(0,c.max)(f.right,0),R=(0,c.max)(f.top,0),x=(0,c.max)(f.bottom,0),y?M=w-2*(0!==k||0!==L?k+L:(0,c.max)(f.left,f.right)):C=b-2*(0!==R||0!==x?R+x:(0,c.max)(f.top,f.bottom))),[4,p((0,s._)((0,r._)({},t),{availableWidth:M,availableHeight:C}))];case 5:return l.sent(),[4,i.getDimensions(_.floating)];case 6:return B=l.sent(),w!==B.width||b!==B.height?[2,{reset:{rects:!0}}]:[2,{}]}}))}))()}}}},16413:(e,t,o)=>{"use strict";o.d(t,{autoUpdate:()=>O,computePosition:()=>C});var n=o(11010),i=o(72253),r=o(14932),s=o(91963),a=o(62039),_=o(97582),l=o(24248),c=o(20569),u=o(34684);function d(e){var t=(0,u.getComputedStyle)(e),o=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=(0,u.isHTMLElement)(e),r=i?e.offsetWidth:o,s=i?e.offsetHeight:n,a=(0,l.round)(o)!==r||(0,l.round)(n)!==s;return a&&(o=r,n=s),{width:o,height:n,$:a}}function p(e){return(0,u.isElement)(e)?e:e.contextElement}function h(e){var t=p(e);if(!(0,u.isHTMLElement)(t))return(0,l.createCoords)(1);var o=t.getBoundingClientRect(),n=d(t),i=n.width,r=n.height,s=n.$,a=(s?(0,l.round)(o.width):o.width)/i,_=(s?(0,l.round)(o.height):o.height)/r;return a&&Number.isFinite(a)||(a=1),_&&Number.isFinite(_)||(_=1),{x:a,y:_}}var m=(0,l.createCoords)(0);function f(e){var t=(0,u.getWindow)(e);return(0,u.isWebKit)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:m}function g(e,t,o,n){void 0===t&&(t=!1),void 0===o&&(o=!1);var i=e.getBoundingClientRect(),r=p(e),s=(0,l.createCoords)(1);t&&(n?(0,u.isElement)(n)&&(s=h(n)):s=h(e));var a=function(e,t,o){return void 0===t&&(t=!1),!(!o||t&&o!==(0,u.getWindow)(e))&&t}(r,o,n)?f(r):(0,l.createCoords)(0),_=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,d=i.width/s.x,m=i.height/s.y;if(r)for(var g=(0,u.getWindow)(r),v=n&&(0,u.isElement)(n)?(0,u.getWindow)(n):n,y=g.frameElement;y&&n&&v!==g;){var E=h(y),w=y.getBoundingClientRect(),b=(0,u.getComputedStyle)(y),A=w.left+(y.clientLeft+parseFloat(b.paddingLeft))*E.x,P=w.top+(y.clientTop+parseFloat(b.paddingTop))*E.y;_*=E.x,c*=E.y,d*=E.x,m*=E.y,_+=A,c+=P,y=(0,u.getWindow)(y).frameElement}return(0,l.rectToClientRect)({width:d,height:m,x:_,y:c})}function v(e){return g((0,u.getDocumentElement)(e)).left+(0,u.getNodeScroll)(e).scrollLeft}function y(e,t,o){var n;if("viewport"===t)n=function(e,t){var o=(0,u.getWindow)(e),n=(0,u.getDocumentElement)(e),i=o.visualViewport,r=n.clientWidth,s=n.clientHeight,a=0,_=0;if(i){r=i.width,s=i.height;var l=(0,u.isWebKit)();(!l||l&&"fixed"===t)&&(a=i.offsetLeft,_=i.offsetTop)}return{width:r,height:s,x:a,y:_}}(e,o);else if("document"===t)n=function(e){var t=(0,u.getDocumentElement)(e),o=(0,u.getNodeScroll)(e),n=e.ownerDocument.body,i=(0,l.max)(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=(0,l.max)(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),s=-o.scrollLeft+v(e),a=-o.scrollTop;return"rtl"===(0,u.getComputedStyle)(n).direction&&(s+=(0,l.max)(t.clientWidth,n.clientWidth)-i),{width:i,height:r,x:s,y:a}}((0,u.getDocumentElement)(e));else if((0,u.isElement)(t))n=function(e,t){var o=g(e,!0,"fixed"===t),n=o.top+e.clientTop,i=o.left+e.clientLeft,r=(0,u.isHTMLElement)(e)?h(e):(0,l.createCoords)(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:i*r.x,y:n*r.y}}(t,o);else{var s=f(e);n=(0,r._)((0,i._)({},t),{x:t.x-s.x,y:t.y-s.y})}return(0,l.rectToClientRect)(n)}function E(e,t){var o=(0,u.getParentNode)(e);return!(o===t||!(0,u.isElement)(o)||(0,u.isLastTraversableNode)(o))&&("fixed"===(0,u.getComputedStyle)(o).position||E(o,t))}function w(e,t,o){var n=(0,u.isHTMLElement)(t),i=(0,u.getDocumentElement)(t),r="fixed"===o,s=g(e,!0,r,t),a={scrollLeft:0,scrollTop:0},_=(0,l.createCoords)(0);if(n||!n&&!r)if(("body"!==(0,u.getNodeName)(t)||(0,u.isOverflowElement)(i))&&(a=(0,u.getNodeScroll)(t)),n){var c=g(t,!0,r,t);_.x=c.x+t.clientLeft,_.y=c.y+t.clientTop}else i&&(_.x=v(i));return{x:s.left+a.scrollLeft-_.x,y:s.top+a.scrollTop-_.y,width:s.width,height:s.height}}function b(e,t){return(0,u.isHTMLElement)(e)&&"fixed"!==(0,u.getComputedStyle)(e).position?t?t(e):e.offsetParent:null}function A(e,t){var o=(0,u.getWindow)(e);if(!(0,u.isHTMLElement)(e))return o;for(var n=b(e,t);n&&(0,u.isTableElement)(n)&&"static"===(0,u.getComputedStyle)(n).position;)n=b(n,t);return n&&("html"===(0,u.getNodeName)(n)||"body"===(0,u.getNodeName)(n)&&"static"===(0,u.getComputedStyle)(n).position&&!(0,u.isContainingBlock)(n))?o:n||(0,u.getContainingBlock)(e)||o}var P,I=(P=(0,n._)((function(e){var t,o,n,r,s,a,l,c;return(0,_.__generator)(this,(function(_){switch(_.label){case 0:return t=e.reference,o=e.floating,n=e.strategy,r=this.getOffsetParent||A,s=this.getDimensions,a={},l=[t],[4,r(o)];case 1:return a.reference=w.apply(void 0,l.concat([_.sent(),n])),c=[{x:0,y:0}],[4,s(o)];case 2:return[2,(a.floating=i._.apply(void 0,c.concat([_.sent()])),a)]}}))})),function(e){return P.apply(this,arguments)});var T={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,o=e.offsetParent,n=e.strategy,i=(0,u.isHTMLElement)(o),r=(0,u.getDocumentElement)(o);if(o===r)return t;var s={scrollLeft:0,scrollTop:0},a=(0,l.createCoords)(1),_=(0,l.createCoords)(0);if((i||!i&&"fixed"!==n)&&(("body"!==(0,u.getNodeName)(o)||(0,u.isOverflowElement)(r))&&(s=(0,u.getNodeScroll)(o)),(0,u.isHTMLElement)(o))){var c=g(o);a=h(o),_.x=c.x+o.clientLeft,_.y=c.y+o.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+_.x,y:t.y*a.y-s.scrollTop*a.y+_.y}},getDocumentElement:u.getDocumentElement,getClippingRect:function(e){var t=e.element,o=e.boundary,n=e.rootBoundary,i=e.strategy,r="clippingAncestors"===o?function(e,t){var o=t.get(e);if(o)return o;for(var n=(0,u.getOverflowAncestors)(e,[],!1).filter((function(e){return(0,u.isElement)(e)&&"body"!==(0,u.getNodeName)(e)})),i=null,r="fixed"===(0,u.getComputedStyle)(e).position,s=r?(0,u.getParentNode)(e):e;(0,u.isElement)(s)&&!(0,u.isLastTraversableNode)(s);){var a=(0,u.getComputedStyle)(s),_=(0,u.isContainingBlock)(s);_||"fixed"!==a.position||(i=null),(r?!_&&!i:!_&&"static"===a.position&&i&&["absolute","fixed"].includes(i.position)||(0,u.isOverflowElement)(s)&&!_&&E(e,s))?n=n.filter((function(e){return e!==s})):i=a,s=(0,u.getParentNode)(s)}return t.set(e,n),n}(t,this._c):[].concat(o),s=(0,a._)(r).concat([n]),_=s[0],c=s.reduce((function(e,o){var n=y(t,o,i);return e.top=(0,l.max)(n.top,e.top),e.right=(0,l.min)(n.right,e.right),e.bottom=(0,l.min)(n.bottom,e.bottom),e.left=(0,l.max)(n.left,e.left),e}),y(t,_,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:A,getElementRects:I,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return d(e)},getScale:h,isElement:u.isElement,isRTL:function(e){return"rtl"===(0,u.getComputedStyle)(e).direction}};function O(e,t,o,n){void 0===n&&(n={});var _=n.ancestorScroll,c=void 0===_||_,d=n.ancestorResize,h=void 0===d||d,m=n.elementResize,f=void 0===m?"function"==typeof ResizeObserver:m,v=n.layoutShift,y=void 0===v?"function"==typeof IntersectionObserver:v,E=n.animationFrame,w=void 0!==E&&E,b=p(e),A=c||h?(0,a._)(b?(0,u.getOverflowAncestors)(b):[]).concat((0,a._)((0,u.getOverflowAncestors)(t))):[];A.forEach((function(e){c&&e.addEventListener("scroll",o,{passive:!0}),h&&e.addEventListener("resize",o)}));var P,I=b&&y?function(e,t){var o,n=null,s=(0,u.getDocumentElement)(e);function a(){clearTimeout(o),n&&n.disconnect(),n=null}return function _(c,u){void 0===c&&(c=!1),void 0===u&&(u=1),a();var d=e.getBoundingClientRect(),p=d.left,h=d.top,m=d.width,f=d.height;if(c||t(),m&&f){var g={rootMargin:-(0,l.floor)(h)+"px "+-(0,l.floor)(s.clientWidth-(p+m))+"px "+-(0,l.floor)(s.clientHeight-(h+f))+"px "+-(0,l.floor)(p)+"px",threshold:(0,l.max)(0,(0,l.min)(1,u))||1},v=!0;try{n=new IntersectionObserver(y,(0,r._)((0,i._)({},g),{root:s.ownerDocument}))}catch(e){n=new IntersectionObserver(y,g)}n.observe(e)}function y(e){var t=e[0].intersectionRatio;if(t!==u){if(!v)return _();t?_(!1,t):o=setTimeout((function(){_(!1,1e-7)}),100)}v=!1}}(!0),a}(b,o):null,T=-1,O=null;f&&(O=new ResizeObserver((function(e){var n=(0,s._)(e,1)[0];n&&n.target===b&&O&&(O.unobserve(t),cancelAnimationFrame(T),T=requestAnimationFrame((function(){O&&O.observe(t)}))),o()})),b&&!w&&O.observe(b),O.observe(t));var C=w?g(e):null;return w&&function t(){var n=g(e);!C||n.x===C.x&&n.y===C.y&&n.width===C.width&&n.height===C.height||o();C=n,P=requestAnimationFrame(t)}(),o(),function(){A.forEach((function(e){c&&e.removeEventListener("scroll",o),h&&e.removeEventListener("resize",o)})),I&&I(),O&&O.disconnect(),O=null,w&&cancelAnimationFrame(P)}}var C=function(e,t,o){var n=new Map,s=(0,i._)({platform:T},o),a=(0,r._)((0,i._)({},s.platform),{_c:n});return(0,c.computePosition)(e,t,(0,r._)((0,i._)({},s),{platform:a}))}},38125:(e,t,o)=>{"use strict";o.d(t,{arrow:()=>u,useFloating:()=>g});var n=o(72253),i=o(14932),r=o(91963),s=o(88421),a=o(20569),_=o(16413),l=o(67294),c=o(73935),u=function(e){return{name:"arrow",options:e,fn:function(t){var o,n="function"==typeof e?e(t):e,i=n.element,r=n.padding;return i&&(o=i,{}.hasOwnProperty.call(o,"current"))?null!=i.current?(0,a.arrow)({element:i.current,padding:r}).fn(t):{}:i?(0,a.arrow)({element:i,padding:r}).fn(t):{}}}},d="undefined"!=typeof document?l.useLayoutEffect:l.useEffect;function p(e,t){if(e===t)return!0;if((void 0===e?"undefined":(0,s._)(e))!==(void 0===t?"undefined":(0,s._)(t)))return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;var o,n,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((o=e.length)!=t.length)return!1;for(n=o;0!=n--;)if(!p(e[n],t[n]))return!1;return!0}if((o=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=o;0!=n--;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=o;0!=n--;){var r=i[n];if(("_owner"!==r||!e.$$typeof)&&!p(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function h(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function m(e,t){var o=h(e);return Math.round(t*o)/o}function f(e){var t=l.useRef(e);return d((function(){t.current=e})),t}function g(e){void 0===e&&(e={});var t=e.placement,o=void 0===t?"bottom":t,s=e.strategy,a=void 0===s?"absolute":s,u=e.middleware,g=void 0===u?[]:u,v=e.platform,y=e.elements,E=void 0===y?{}:y,w=E.reference,b=E.floating,A=e.transform,P=void 0===A||A,I=e.whileElementsMounted,T=e.open,O=(0,r._)(l.useState({x:0,y:0,strategy:a,placement:o,middlewareData:{},isPositioned:!1}),2),C=O[0],M=O[1],D=(0,r._)(l.useState(g),2),S=D[0],k=D[1];p(S,g)||k(g);var L=(0,r._)(l.useState(null),2),R=L[0],x=L[1],B=(0,r._)(l.useState(null),2),N=B[0],U=B[1],W=l.useCallback((function(e){e!=V.current&&(V.current=e,x(e))}),[x]),F=l.useCallback((function(e){e!==H.current&&(H.current=e,U(e))}),[U]),K=w||R,j=b||N,V=l.useRef(null),H=l.useRef(null),q=l.useRef(C),G=f(I),$=f(v),z=l.useCallback((function(){if(V.current&&H.current){var e={placement:o,strategy:a,middleware:S};$.current&&(e.platform=$.current),(0,_.computePosition)(V.current,H.current,e).then((function(e){var t=(0,i._)((0,n._)({},e),{isPositioned:!0});Y.current&&!p(q.current,t)&&(q.current=t,c.flushSync((function(){M(t)})))}))}}),[S,o,a,$]);d((function(){!1===T&&q.current.isPositioned&&(q.current.isPositioned=!1,M((function(e){return(0,i._)((0,n._)({},e),{isPositioned:!1})})))}),[T]);var Y=l.useRef(!1);d((function(){return Y.current=!0,function(){Y.current=!1}}),[]),d((function(){if(K&&(V.current=K),j&&(H.current=j),K&&j){if(G.current)return G.current(K,j,z);z()}}),[K,j,z,G]);var Q=l.useMemo((function(){return{reference:V,floating:H,setReference:W,setFloating:F}}),[W,F]),X=l.useMemo((function(){return{reference:K,floating:j}}),[K,j]),J=l.useMemo((function(){var e={position:a,left:0,top:0};if(!X.floating)return e;var t=m(X.floating,C.x),o=m(X.floating,C.y);return P?(0,n._)((0,i._)((0,n._)({},e),{transform:"translate("+t+"px, "+o+"px)"}),h(X.floating)>=1.5&&{willChange:"transform"}):{position:a,left:t,top:o}}),[a,P,X.floating,C.x,C.y]);return l.useMemo((function(){return(0,i._)((0,n._)({},C),{update:z,refs:Q,elements:X,floatingStyles:J})}),[C,z,Q,X,J])}},24248:(e,t,o)=>{"use strict";o.d(t,{clamp:()=>m,createCoords:()=>d,evaluate:()=>f,floor:()=>u,getAlignment:()=>v,getAlignmentAxis:()=>b,getAlignmentSides:()=>A,getAxisLength:()=>E,getExpandedPlacements:()=>P,getOppositeAlignmentPlacement:()=>I,getOppositeAxis:()=>y,getOppositeAxisPlacements:()=>T,getOppositePlacement:()=>O,getPaddingObject:()=>C,getSide:()=>g,getSideAxis:()=>w,max:()=>l,min:()=>_,placements:()=>a,rectToClientRect:()=>M,round:()=>c,sides:()=>r});var n=o(72253),i=o(14932),r=["top","right","bottom","left"],s=["start","end"],a=r.reduce((function(e,t){return e.concat(t,t+"-"+s[0],t+"-"+s[1])}),[]),_=Math.min,l=Math.max,c=Math.round,u=Math.floor,d=function(e){return{x:e,y:e}},p={left:"right",right:"left",bottom:"top",top:"bottom"},h={start:"end",end:"start"};function m(e,t,o){return l(e,_(t,o))}function f(e,t){return"function"==typeof e?e(t):e}function g(e){return e.split("-")[0]}function v(e){return e.split("-")[1]}function y(e){return"x"===e?"y":"x"}function E(e){return"y"===e?"height":"width"}function w(e){return["top","bottom"].includes(g(e))?"y":"x"}function b(e){return y(w(e))}function A(e,t,o){void 0===o&&(o=!1);var n=v(e),i=b(e),r=E(i),s="x"===i?n===(o?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=O(s)),[s,O(s)]}function P(e){var t=O(e);return[I(e),t,I(t)]}function I(e){return e.replace(/start|end/g,(function(e){return h[e]}))}function T(e,t,o,n){var i=v(e),r=function(e,t,o){var n=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return o?t?i:n:t?n:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(g(e),"start"===o,n);return i&&(r=r.map((function(e){return e+"-"+i})),t&&(r=r.concat(r.map(I)))),r}function O(e){return e.replace(/left|right|bottom|top/g,(function(e){return p[e]}))}function C(e){return"number"!=typeof e?function(e){return(0,n._)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function M(e){return(0,i._)((0,n._)({},e),{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}},34684:(e,t,o)=>{"use strict";o.d(t,{getComputedStyle:()=>g,getContainingBlock:()=>h,getDocumentElement:()=>s,getNearestOverflowAncestor:()=>E,getNodeName:()=>i,getNodeScroll:()=>v,getOverflowAncestors:()=>w,getParentNode:()=>y,getWindow:()=>r,isContainingBlock:()=>p,isElement:()=>_,isHTMLElement:()=>l,isLastTraversableNode:()=>f,isOverflowElement:()=>u,isTableElement:()=>d,isWebKit:()=>m});var n=o(26372);function i(e){return a(e)?(e.nodeName||"").toLowerCase():"#document"}function r(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function s(e){var t;return null==(t=(a(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function a(e){return(0,n._)(e,Node)||(0,n._)(e,r(e).Node)}function _(e){return(0,n._)(e,Element)||(0,n._)(e,r(e).Element)}function l(e){return(0,n._)(e,HTMLElement)||(0,n._)(e,r(e).HTMLElement)}function c(e){return"undefined"!=typeof ShadowRoot&&((0,n._)(e,ShadowRoot)||(0,n._)(e,r(e).ShadowRoot))}function u(e){var t=g(e),o=t.overflow,n=t.overflowX,i=t.overflowY,r=t.display;return/auto|scroll|overlay|hidden|clip/.test(o+i+n)&&!["inline","contents"].includes(r)}function d(e){return["table","td","th"].includes(i(e))}function p(e){var t=m(),o=g(e);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!t&&!!o.backdropFilter&&"none"!==o.backdropFilter||!t&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some((function(e){return(o.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(o.contain||"").includes(e)}))}function h(e){for(var t=y(e);l(t)&&!f(t);){if(p(t))return t;t=y(t)}return null}function m(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function f(e){return["html","body","#document"].includes(i(e))}function g(e){return r(e).getComputedStyle(e)}function v(e){return _(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function y(e){if("html"===i(e))return e;var t=e.assignedSlot||e.parentNode||c(e)&&e.host||s(e);return c(t)?t.host:t}function E(e){var t=y(e);return f(t)?e.ownerDocument?e.ownerDocument.body:e.body:l(t)&&u(t)?t:E(t)}function w(e,t,o){var n;void 0===t&&(t=[]),void 0===o&&(o=!0);var i=E(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),a=r(i);return s?t.concat(a,a.visualViewport||[],u(i)?i:[],a.frameElement&&o?w(a.frameElement):[]):t.concat(i,w(i,[],o))}},22589:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={root:"SpecialProjectHeader-module__root--QbEJE",singleImage:"SpecialProjectHeader-module__singleImage--I5Wcs"}},3853:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={root:"renderAvatarToString-module__root--RBv3N"}},68949:(e,t,o)=>{"use strict";o.d(t,{Reaction:()=>bt,action:()=>Bt,configure:()=>Qt,getDependencyTree:()=>Jt,makeAutoObservable:()=>wo,makeObservable:()=>yo,observable:()=>Le,runInAction:()=>Ut});function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(o.length?" "+o.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var i={};function r(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:i}var s=Object.assign,a=Object.getOwnPropertyDescriptor,_=Object.defineProperty,l=Object.prototype,c=[];Object.freeze(c);var u={};Object.freeze(u);var d="undefined"!=typeof Proxy,p=Object.toString();function h(){d||n("Proxy not available")}function m(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var f=function(){};function g(e){return"function"==typeof e}function v(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function y(e){return null!==e&&"object"==typeof e}function E(e){if(!y(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var o=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o.toString()===p}function w(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function b(e,t,o){_(e,t,{enumerable:!1,writable:!0,configurable:!0,value:o})}function A(e,t,o){_(e,t,{enumerable:!1,writable:!1,configurable:!0,value:o})}function P(e,t){var o="isMobX"+e;return t.prototype[o]=!0,function(e){return y(e)&&!0===e[o]}}function I(e){return e instanceof Map}function T(e){return e instanceof Set}var O=void 0!==Object.getOwnPropertySymbols;var C="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:O?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function M(e){return null===e?null:"object"==typeof e?""+e:e}function D(e,t){return l.hasOwnProperty.call(e,t)}var S=Object.getOwnPropertyDescriptors||function(e){var t={};return C(e).forEach((function(o){t[o]=a(e,o)})),t};function k(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?r:String(r)),n)}var i,r}function L(e,t,o){return t&&k(e.prototype,t),o&&k(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},R.apply(this,arguments)}function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B(e,t)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function W(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return U(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?U(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F=Symbol("mobx-stored-annotations");function K(e){return Object.assign((function(t,o){if(V(o))return e.decorate_20223_(t,o);j(t,o,e)}),e)}function j(e,t,o){D(e,F)||b(e,F,R({},e[F])),function(e){return e.annotationType_===X}(o)||(e[F][t]=o)}function V(e){return"object"==typeof e&&"string"==typeof e.kind}var H=Symbol("mobx administration"),q=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ye.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Et(this)},t.reportChanged=function(){vt(),wt(this),yt()},t.toString=function(){return this.name_},e}(),G=P("Atom",q);function $(e,t,o){void 0===t&&(t=f),void 0===o&&(o=f);var n,i=new q(e);return t!==f&&Gt(Vt,i,t,n),o!==f&&qt(i,o),i}var z={identity:function(e,t){return e===t},structural:function(e,t){return vn(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return vn(e,t,1)}};function Y(e,t,o){return _o(e)?e:Array.isArray(e)?Le.array(e,{name:o}):E(e)?Le.object(e,void 0,{name:o}):I(e)?Le.map(e,{name:o}):T(e)?Le.set(e,{name:o}):"function"!=typeof e||Wt(e)||so(e)?e:w(e)?io(e):Nt(o,e)}function Q(e){return e}var X="override";function J(e,t){return{annotationType_:e,options_:t,make_:Z,extend_:ee,decorate_20223_:te}}function Z(e,t,o,n){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,o,!1)?0:1;if(n===e.target_)return null===this.extend_(e,t,o,!1)?0:2;if(Wt(o.value))return 1;var r=oe(e,this,t,o,!1);return _(n,t,r),2}function ee(e,t,o,n){var i=oe(e,this,t,o);return e.defineProperty_(t,i,n)}function te(e,t){var o=t.kind,i=t.name,r=t.addInitializer,s=this;if("field"!=o){var a,_,l,c,u,d;if("method"==o)return Wt(e)||(_=e,e=Ve(null!=(l=null==(c=s.options_)?void 0:c.name)?l:i.toString(),_,null!=(u=null==(d=s.options_)?void 0:d.autoAction)&&u)),null!=(a=this.options_)&&a.bound&&r((function(){var e=this,t=e[i].bind(e);t.isMobxAction=!0,e[i]=t})),e;n("Cannot apply '"+s.annotationType_+"' to '"+String(i)+"' (kind: "+o+"):\n'"+s.annotationType_+"' can only be used on properties with a function value.")}else r((function(){j(this,i,s)}))}function oe(e,t,o,n,i){var r,s,a,_,l,c,u,d;void 0===i&&(i=ht.safeDescriptors),d=n,t.annotationType_,d.value;var p,h=n.value;null!=(r=t.options_)&&r.bound&&(h=h.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Ve(null!=(s=null==(a=t.options_)?void 0:a.name)?s:o.toString(),h,null!=(_=null==(l=t.options_)?void 0:l.autoAction)&&_,null!=(c=t.options_)&&c.bound?null!=(u=e.proxy_)?u:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ne(e,t){return{annotationType_:e,options_:t,make_:ie,extend_:re,decorate_20223_:se}}function ie(e,t,o,n){var i;if(n===e.target_)return null===this.extend_(e,t,o,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!D(e.target_,t)||!so(e.target_[t]))&&null===this.extend_(e,t,o,!1))return 0;if(so(o.value))return 1;var r=ae(e,this,t,o,!1,!1);return _(n,t,r),2}function re(e,t,o,n){var i,r=ae(e,this,t,o,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,r,n)}function se(e,t){var o;var n=t.name,i=t.addInitializer;return so(e)||(e=io(e)),null!=(o=this.options_)&&o.bound&&i((function(){var e=this,t=e[n].bind(e);t.isMobXFlow=!0,e[n]=t})),e}function ae(e,t,o,n,i,r){var s;void 0===r&&(r=ht.safeDescriptors),s=n,t.annotationType_,s.value;var a,_=n.value;(so(_)||(_=io(_)),i)&&((_=_.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:_,configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function _e(e,t){return{annotationType_:e,options_:t,make_:le,extend_:ce,decorate_20223_:ue}}function le(e,t,o){return null===this.extend_(e,t,o,!1)?0:1}function ce(e,t,o,n){return function(e,t,o,n){t.annotationType_,n.get;0}(0,this,0,o),e.defineComputedProperty_(t,R({},this.options_,{get:o.get,set:o.set}),n)}function ue(e,t){var o=this,n=t.name;return(0,t.addInitializer)((function(){var t=Yo(this)[H],i=R({},o.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+n.toString()),t.values_.set(n,new Xe(i))})),function(){return this[H].getObservablePropValue_(n)}}function de(e,t){return{annotationType_:e,options_:t,make_:pe,extend_:he,decorate_20223_:me}}function pe(e,t,o){return null===this.extend_(e,t,o,!1)?0:1}function he(e,t,o,n){var i,r;return function(e,t,o,n){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,o.value,null!=(i=null==(r=this.options_)?void 0:r.enhancer)?i:Y,n)}function me(e,t){var o=this,n=t.kind,i=t.name,r=new WeakSet;function s(e,t){var n,s,a=Yo(e)[H],_=new ze(t,null!=(n=null==(s=o.options_)?void 0:s.enhancer)?n:Y,"ObservableObject."+i.toString(),!1);a.values_.set(i,_),r.add(e)}if("accessor"==n)return{get:function(){return r.has(this)||s(this,e.get.call(this)),this[H].getObservablePropValue_(i)},set:function(e){return r.has(this)||s(this,e),this[H].setObservablePropValue_(i,e)},init:function(e){return r.has(this)||s(this,e),e}}}var fe="true",ge=ve();function ve(e){return{annotationType_:fe,options_:e,make_:ye,extend_:Ee,decorate_20223_:we}}function ye(e,t,o,n){var i,r,s,a;if(o.get)return Ne.make_(e,t,o,n);if(o.set){var l=Ve(t.toString(),o.set);return n===e.target_?null===e.defineProperty_(t,{configurable:!ht.safeDescriptors||e.isPlainObject_,set:l})?0:2:(_(n,t,{configurable:!0,set:l}),2)}if(n!==e.target_&&"function"==typeof o.value)return w(o.value)?(null!=(a=this.options_)&&a.autoBind?io.bound:io).make_(e,t,o,n):(null!=(s=this.options_)&&s.autoBind?Nt.bound:Nt).make_(e,t,o,n);var c,u=!1===(null==(i=this.options_)?void 0:i.deep)?Le.ref:Le;"function"==typeof o.value&&null!=(r=this.options_)&&r.autoBind&&(o.value=o.value.bind(null!=(c=e.proxy_)?c:e.target_));return u.make_(e,t,o,n)}function Ee(e,t,o,n){var i,r,s;if(o.get)return Ne.extend_(e,t,o,n);if(o.set)return e.defineProperty_(t,{configurable:!ht.safeDescriptors||e.isPlainObject_,set:Ve(t.toString(),o.set)},n);"function"==typeof o.value&&null!=(i=this.options_)&&i.autoBind&&(o.value=o.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(r=this.options_)?void 0:r.deep)?Le.ref:Le).extend_(e,t,o,n)}function we(e,t){n("'"+this.annotationType_+"' cannot be used as a decorator")}var be={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ae(e){return e||be}Object.freeze(be);var Pe=de("observable"),Ie=de("observable.ref",{enhancer:Q}),Te=de("observable.shallow",{enhancer:function(e,t,o){return null==e||Jo(e)||xo(e)||jo(e)||qo(e)?e:Array.isArray(e)?Le.array(e,{name:o,deep:!1}):E(e)?Le.object(e,void 0,{name:o,deep:!1}):I(e)?Le.map(e,{name:o,deep:!1}):T(e)?Le.set(e,{name:o,deep:!1}):void 0}}),Oe=de("observable.struct",{enhancer:function(e,t){return vn(e,t)?t:e}}),Ce=K(Pe);function Me(e){return!0===e.deep?Y:!1===e.deep?Q:(t=e.defaultDecorator)&&null!=(o=null==(n=t.options_)?void 0:n.enhancer)?o:Y;var t,o,n}function De(e,t,o){return V(t)?Pe.decorate_20223_(e,t):v(t)?void j(e,t,Pe):_o(e)?e:E(e)?Le.object(e,t,o):Array.isArray(e)?Le.array(e,t):I(e)?Le.map(e,t):T(e)?Le.set(e,t):"object"==typeof e&&null!==e?e:Le.box(e,t)}s(De,Ce);var Se,ke,Le=s(De,{box:function(e,t){var o=Ae(t);return new ze(e,Me(o),o.name,!0,o.equals)},array:function(e,t){var o=Ae(t);return(!1===ht.useProxies||!1===o.proxy?dn:To)(e,Me(o),o.name)},map:function(e,t){var o=Ae(t);return new Ko(e,Me(o),o.name)},set:function(e,t){var o=Ae(t);return new Ho(e,Me(o),o.name)},object:function(e,t,o){return fn((function(){return Xt(!1===ht.useProxies||!1===(null==o?void 0:o.proxy)?Yo({},o):function(e,t){var o,n;return h(),e=Yo(e,t),null!=(n=(o=e[H]).proxy_)?n:o.proxy_=new Proxy(e,uo)}({},o),e,t)}))},ref:K(Ie),shallow:K(Te),deep:Ce,struct:K(Oe)}),Re="computed",xe=_e(Re),Be=_e("computed.struct",{equals:z.structural}),Ne=function(e,t){if(V(t))return xe.decorate_20223_(e,t);if(v(t))return j(e,t,xe);if(E(e))return K(_e(Re,e));var o=E(t)?t:{};return o.get=e,o.name||(o.name=e.name||""),new Xe(o)};Object.assign(Ne,xe),Ne.struct=K(Be);var Ue,We=0,Fe=1,Ke=null!=(Se=null==(ke=a((function(){}),"name"))?void 0:ke.configurable)&&Se,je={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ve(e,t,o,n){function i(){return He(e,o,t,n||this,arguments)}return void 0===o&&(o=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},Ke&&(je.value=e,_(i,"name",je)),i}function He(e,t,o,i,r){var s=function(e,t,o,n){var i=!1,r=0;0;var s=ht.trackingDerivation,a=!t||!s;vt();var _=ht.allowStateChanges;a&&(st(),_=qe(!0));var l=_t(!0),c={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:_,prevAllowStateReads_:l,notifySpy_:i,startTime_:r,actionId_:Fe++,parentActionId_:We};return We=c.actionId_,c}(0,t);try{return o.apply(i,r)}catch(e){throw s.error_=e,e}finally{!function(e){We!==e.actionId_&&n(30);We=e.parentActionId_,void 0!==e.error_&&(ht.suppressReactionErrors=!0);Ge(e.prevAllowStateChanges_),lt(e.prevAllowStateReads_),yt(),e.runAsAction_&&at(e.prevDerivation_);0;ht.suppressReactionErrors=!1}(s)}}function qe(e){var t=ht.allowStateChanges;return ht.allowStateChanges=e,t}function Ge(e){ht.allowStateChanges=e}Ue=Symbol.toPrimitive;var $e,ze=function(e){function t(t,o,n,i,r){var s;return void 0===n&&(n="ObservableValue"),void 0===i&&(i=!0),void 0===r&&(r=z.default),(s=e.call(this,n)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=o,s.name_=n,s.equals=r,s.value_=o(t,void 0,n),s}x(t,e);var o=t.prototype;return o.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},o.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==ht.UNCHANGED){0,this.setNewValue_(e)}},o.prepareNewValue_=function(e){if(ot(this),po(this)){var t=mo(this,{object:this,type:Ao,newValue:e});if(!t)return ht.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?ht.UNCHANGED:e},o.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),fo(this)&&vo(this,{type:Ao,object:this,newValue:e,oldValue:t})},o.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},o.intercept_=function(e){return ho(this,e)},o.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Ao,newValue:this.value_,oldValue:void 0}),go(this,e)},o.raw=function(){return this.value_},o.toJSON=function(){return this.get()},o.toString=function(){return this.name_+"["+this.value_+"]"},o.valueOf=function(){return M(this.get())},o[Ue]=function(){return this.valueOf()},t}(q);$e=Symbol.toPrimitive;var Ye,Qe,Xe=function(){function e(e){this.dependenciesState_=Ye.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ye.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ze(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Qe.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||n(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Ve("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?z.structural:z.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Ye.UP_TO_DATE_)return;e.lowestObserverState_=Ye.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ye.UP_TO_DATE_&&(e.dependenciesState_=Ye.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&n(32,this.name_,this.derivation),0!==ht.inBatch||0!==this.observers_.size||this.keepAlive_){if(Et(this),tt(this)){var e=ht.trackingContext;this.keepAlive_&&!e&&(ht.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Ye.STALE_)return;e.lowestObserverState_=Ye.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ye.POSSIBLY_STALE_?t.dependenciesState_=Ye.STALE_:t.dependenciesState_===Ye.UP_TO_DATE_&&(e.lowestObserverState_=Ye.UP_TO_DATE_)}))}(this),ht.trackingContext=e}}else tt(this)&&(this.warnAboutUntrackedRead_(),vt(),this.value_=this.computeValue_(!1),yt());var t=this.value_;if(et(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&n(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else n(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ye.NOT_TRACKING_,o=this.computeValue_(!0),n=t||et(e)||et(o)||!this.equals_(e,o);return n&&(this.value_=o),n},t.computeValue_=function(e){this.isComputing_=!0;var t,o=qe(!1);if(e)t=nt(this,this.derivation,this.scope_);else if(!0===ht.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Ze(e)}return Ge(o),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(it(this),this.value_=void 0)},t.observe_=function(e,t){var o=this,n=!0,i=void 0;return Ft((function(){var r=o.get();if(!n||t){var s=st();e({observableKind:"computed",debugObjectName:o.name_,type:Ao,object:o,newValue:r,oldValue:i}),at(s)}n=!1,i=r}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return M(this.get())},t[$e]=function(){return this.valueOf()},e}(),Je=P("ComputedValue",Xe);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Ye||(Ye={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Qe||(Qe={}));var Ze=function(e){this.cause=void 0,this.cause=e};function et(e){return e instanceof Ze}function tt(e){switch(e.dependenciesState_){case Ye.UP_TO_DATE_:return!1;case Ye.NOT_TRACKING_:case Ye.STALE_:return!0;case Ye.POSSIBLY_STALE_:for(var t=_t(!0),o=st(),n=e.observing_,i=n.length,r=0;r<i;r++){var s=n[r];if(Je(s)){if(ht.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return at(o),lt(t),!0}if(e.dependenciesState_===Ye.STALE_)return at(o),lt(t),!0}}return ct(e),at(o),lt(t),!1}}function ot(e){}function nt(e,t,o){var n=_t(!0);ct(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++ht.runId;var i,r=ht.trackingDerivation;if(ht.trackingDerivation=e,ht.inBatch++,!0===ht.disableErrorBoundaries)i=t.call(o);else try{i=t.call(o)}catch(e){i=new Ze(e)}return ht.inBatch--,ht.trackingDerivation=r,function(e){for(var t=e.observing_,o=e.observing_=e.newObserving_,n=Ye.UP_TO_DATE_,i=0,r=e.unboundDepsCount_,s=0;s<r;s++){var a=o[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(o[i]=a),i++),a.dependenciesState_>n&&(n=a.dependenciesState_)}o.length=i,e.newObserving_=null,r=t.length;for(;r--;){var _=t[r];0===_.diffValue_&&ft(_,e),_.diffValue_=0}for(;i--;){var l=o[i];1===l.diffValue_&&(l.diffValue_=0,mt(l,e))}n!==Ye.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}(e),lt(n),i}function it(e){var t=e.observing_;e.observing_=[];for(var o=t.length;o--;)ft(t[o],e);e.dependenciesState_=Ye.NOT_TRACKING_}function rt(e){var t=st();try{return e()}finally{at(t)}}function st(){var e=ht.trackingDerivation;return ht.trackingDerivation=null,e}function at(e){ht.trackingDerivation=e}function _t(e){var t=ht.allowStateReads;return ht.allowStateReads=e,t}function lt(e){ht.allowStateReads=e}function ct(e){if(e.dependenciesState_!==Ye.UP_TO_DATE_){e.dependenciesState_=Ye.UP_TO_DATE_;for(var t=e.observing_,o=t.length;o--;)t[o].lowestObserverState_=Ye.UP_TO_DATE_}}var ut=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},dt=!0,pt=!1,ht=function(){var e=r();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(dt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new ut).version&&(dt=!1),dt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ut):(setTimeout((function(){pt||n(35)}),1),new ut)}();function mt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function ft(e,t){e.observers_.delete(t),0===e.observers_.size&&gt(e)}function gt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,ht.pendingUnobservations.push(e))}function vt(){ht.inBatch++}function yt(){if(0==--ht.inBatch){It();for(var e=ht.pendingUnobservations,t=0;t<e.length;t++){var o=e[t];o.isPendingUnobservation_=!1,0===o.observers_.size&&(o.isBeingObserved_&&(o.isBeingObserved_=!1,o.onBUO()),o instanceof Xe&&o.suspend_())}ht.pendingUnobservations=[]}}function Et(e){var t=ht.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&ht.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&ht.inBatch>0&&gt(e),!1)}function wt(e){e.lowestObserverState_!==Ye.STALE_&&(e.lowestObserverState_=Ye.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ye.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ye.STALE_})))}var bt=function(){function e(e,t,o,n){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ye.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Qe.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=o,this.requiresObservable_=n}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ht.pendingReactions.push(this),It())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){vt(),this.isScheduled_=!1;var e=ht.trackingContext;if(ht.trackingContext=this,tt(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}ht.trackingContext=e,yt()}},t.track=function(e){if(!this.isDisposed_){vt();0,this.isRunning_=!0;var t=ht.trackingContext;ht.trackingContext=this;var o=nt(this,e,void 0);ht.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&it(this),et(o)&&this.reportExceptionInDerivation_(o.cause),yt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(ht.disableErrorBoundaries)throw e;var o="[mobx] uncaught error in '"+this+"'";ht.suppressReactionErrors||console.error(o,e),ht.globalReactionErrorHandlers.forEach((function(o){return o(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(vt(),it(this),yt()))},t.getDisposer_=function(e){var t=this,o=function o(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",o)};return null==e||null==e.addEventListener||e.addEventListener("abort",o),o[H]=this,o},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},e}();var At=100,Pt=function(e){return e()};function It(){ht.inBatch>0||ht.isRunningReactions||Pt(Tt)}function Tt(){ht.isRunningReactions=!0;for(var e=ht.pendingReactions,t=0;e.length>0;){++t===At&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var o=e.splice(0),n=0,i=o.length;n<i;n++)o[n].runReaction_()}ht.isRunningReactions=!1}var Ot=P("Reaction",bt);var Ct="action",Mt="autoAction",Dt="<unnamed action>",St=J(Ct),kt=J("action.bound",{bound:!0}),Lt=J(Mt,{autoAction:!0}),Rt=J("autoAction.bound",{autoAction:!0,bound:!0});function xt(e){return function(t,o){return g(t)?Ve(t.name||Dt,t,e):g(o)?Ve(t,o,e):V(o)?(e?Lt:St).decorate_20223_(t,o):v(o)?j(t,o,e?Lt:St):v(t)?K(J(e?Mt:Ct,{name:t,autoAction:e})):void 0}}var Bt=xt(!1);Object.assign(Bt,St);var Nt=xt(!0);function Ut(e){return He(e.name,!1,e,this,void 0)}function Wt(e){return g(e)&&!0===e.isMobxAction}function Ft(e,t){var o,n,i,r,s;void 0===t&&(t=u);var a,_=null!=(o=null==(n=t)?void 0:n.name)?o:"Autorun";if(!t.scheduler&&!t.delay)a=new bt(_,(function(){this.track(d)}),t.onError,t.requiresObservable);else{var l=jt(t),c=!1;a=new bt(_,(function(){c||(c=!0,l((function(){c=!1,a.isDisposed_||a.track(d)})))}),t.onError,t.requiresObservable)}function d(){e(a)}return null!=(i=t)&&null!=(r=i.signal)&&r.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(Nt,Lt),Bt.bound=K(kt),Nt.bound=K(Rt);var Kt=function(e){return e()};function jt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Kt}var Vt="onBO",Ht="onBUO";function qt(e,t,o){return Gt(Ht,e,t,o)}function Gt(e,t,o,n){var i="function"==typeof n?pn(t,o):pn(t),r=g(n)?n:o,s=e+"L";return i[s]?i[s].add(r):i[s]=new Set([r]),function(){var e=i[s];e&&(e.delete(r),0===e.size&&delete i[s])}}var $t="never",zt="always",Yt="observed";function Qt(e){!0===e.isolateGlobalState&&function(){if((ht.pendingReactions.length||ht.inBatch||ht.isRunningReactions)&&n(36),pt=!0,dt){var e=r();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),ht=new ut}}();var t,o,i=e.useProxies,s=e.enforceActions;if(void 0!==i&&(ht.useProxies=i===zt||i!==$t&&"undefined"!=typeof Proxy),"ifavailable"===i&&(ht.verifyProxies=!0),void 0!==s){var a=s===zt?zt:s===Yt;ht.enforceActions=a,ht.allowStateChanges=!0!==a&&a!==zt}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(ht[t]=!!e[t])})),ht.allowStateReads=!ht.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,o=Pt,Pt=function(e){return t((function(){return o(e)}))})}function Xt(e,t,o,n){var i=S(t);return fn((function(){var t=Yo(e,n)[H];C(i).forEach((function(e){t.extend_(e,i[e],!o||(!(e in o)||o[e]))}))})),e}function Jt(e,t){return Zt(pn(e,t))}function Zt(e){var t,o={name:e.name_};return e.observing_&&e.observing_.length>0&&(o.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Zt)),o}var eo=0;function to(){this.message="FLOW_CANCELLED"}to.prototype=Object.create(Error.prototype);var oo=ne("flow"),no=ne("flow.bound",{bound:!0}),io=Object.assign((function(e,t){if(V(t))return oo.decorate_20223_(e,t);if(v(t))return j(e,t,oo);var o=e,n=o.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++eo,r=Bt(n+" - runid: "+i+" - init",o).apply(this,t),s=void 0,a=new Promise((function(t,o){var a=0;function _(e){var t;s=void 0;try{t=Bt(n+" - runid: "+i+" - yield "+a++,r.next).call(r,e)}catch(e){return o(e)}c(t)}function l(e){var t;s=void 0;try{t=Bt(n+" - runid: "+i+" - yield "+a++,r.throw).call(r,e)}catch(e){return o(e)}c(t)}function c(e){if(!g(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(_,l);e.then(c,o)}e=o,_(void 0)}));return a.cancel=Bt(n+" - runid: "+i+" - cancel",(function(){try{s&&ro(s);var t=r.return(void 0),o=Promise.resolve(t.value);o.then(f,f),ro(o),e(new to)}catch(t){e(t)}})),a};return i.isMobXFlow=!0,i}),oo);function ro(e){g(e.cancel)&&e.cancel()}function so(e){return!0===(null==e?void 0:e.isMobXFlow)}function ao(e,t){return!!e&&(void 0!==t?!!Jo(e)&&e[H].values_.has(t):Jo(e)||!!e[H]||G(e)||Ot(e)||Je(e))}function _o(e){return ao(e)}function lo(e,t){void 0===t&&(t=void 0),vt();try{return e.apply(t)}finally{yt()}}function co(e){return e[H]}io.bound=K(no);var uo={has:function(e,t){return co(e).has_(t)},get:function(e,t){return co(e).get_(t)},set:function(e,t,o){var n;return!!v(t)&&(null==(n=co(e).set_(t,o,!0))||n)},deleteProperty:function(e,t){var o;return!!v(t)&&(null==(o=co(e).delete_(t,!0))||o)},defineProperty:function(e,t,o){var n;return null==(n=co(e).defineProperty_(t,o))||n},ownKeys:function(e){return co(e).ownKeys_()},preventExtensions:function(e){n(13)}};function po(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function ho(e,t){var o=e.interceptors_||(e.interceptors_=[]);return o.push(t),m((function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}))}function mo(e,t){var o=st();try{for(var i=[].concat(e.interceptors_||[]),r=0,s=i.length;r<s&&((t=i[r](t))&&!t.type&&n(14),t);r++);return t}finally{at(o)}}function fo(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function go(e,t){var o=e.changeListeners_||(e.changeListeners_=[]);return o.push(t),m((function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}))}function vo(e,t){var o=st(),n=e.changeListeners_;if(n){for(var i=0,r=(n=n.slice()).length;i<r;i++)n[i](t);at(o)}}function yo(e,t,o){return fn((function(){var n=Yo(e,o)[H];null!=t||(t=function(e){return D(e,F)||b(e,F,R({},e[F])),e[F]}(e)),C(t).forEach((function(e){return n.make_(e,t[e])}))})),e}var Eo=Symbol("mobx-keys");function wo(e,t,o){return E(e)?Xt(e,e,t,o):(fn((function(){var n=Yo(e,o)[H];if(!e[Eo]){var i=Object.getPrototypeOf(e),r=new Set([].concat(C(e),C(i)));r.delete("constructor"),r.delete(H),b(i,Eo,r)}e[Eo].forEach((function(e){return n.make_(e,!t||(!(e in t)||t[e]))}))})),e)}var bo="splice",Ao="update",Po={get:function(e,t){var o=e[H];return t===H?o:"length"===t?o.getArrayLength_():"string"!=typeof t||isNaN(t)?D(Oo,t)?Oo[t]:e[t]:o.get_(parseInt(t))},set:function(e,t,o){var n=e[H];return"length"===t&&n.setArrayLength_(o),"symbol"==typeof t||isNaN(t)?e[t]=o:n.set_(parseInt(t),o),!0},preventExtensions:function(){n(15)}},Io=function(){function e(e,t,o,n){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=o,this.legacyMode_=n,this.atom_=new q(e),this.enhancer_=function(e,o){return t(e,o,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return ho(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),go(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&n("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var o=new Array(e-t),i=0;i<e-t;i++)o[i]=void 0;this.spliceWithArray_(t,0,o)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&n(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&un(e+t+1)},t.spliceWithArray_=function(e,t,o){var n=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===o&&(o=c),po(this)){var r=mo(this,{object:this.proxy_,type:bo,index:e,removedCount:t,added:o});if(!r)return c;t=r.removedCount,o=r.added}if(o=0===o.length?o:o.map((function(e){return n.enhancer_(e,void 0)})),this.legacyMode_){var s=o.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,o);return 0===t&&0===o.length||this.notifyArraySplice_(e,o,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,o){var n;if(o.length<1e4)return(n=this.values_).splice.apply(n,[e,t].concat(o));var i=this.values_.slice(e,e+t),r=this.values_.slice(e+t);this.values_.length+=o.length-t;for(var s=0;s<o.length;s++)this.values_[e+s]=o[s];for(var a=0;a<r.length;a++)this.values_[e+o.length+a]=r[a];return i},t.notifyArrayChildUpdate_=function(e,t,o){var n=!this.owned_&&!1,i=fo(this),r=i||n?{observableKind:"array",object:this.proxy_,type:Ao,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:o}:null;this.atom_.reportChanged(),i&&vo(this,r)},t.notifyArraySplice_=function(e,t,o){var n=!this.owned_&&!1,i=fo(this),r=i||n?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:bo,index:e,removed:o,added:t,removedCount:o.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&vo(this,r)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var o=this.values_;if(this.legacyMode_&&e>o.length&&n(17,e,o.length),e<o.length){this.atom_;var i=o[e];if(po(this)){var r=mo(this,{type:Ao,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(o[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var s=new Array(e+1-o.length),a=0;a<s.length-1;a++)s[a]=void 0;s[s.length-1]=t,this.spliceWithArray_(o.length,0,s)}},e}();function To(e,t,o,n){return void 0===o&&(o="ObservableArray"),void 0===n&&(n=!1),h(),fn((function(){var i=new Io(o,t,n,!1);A(i.values_,H,i);var r=new Proxy(i.values_,Po);return i.proxy_=r,e&&e.length&&i.spliceWithArray_(0,0,e),r}))}var Oo={clear:function(){return this.splice(0)},replace:function(e){var t=this[H];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];var r=this[H];switch(arguments.length){case 0:return[];case 1:return r.spliceWithArray_(e);case 2:return r.spliceWithArray_(e,t)}return r.spliceWithArray_(e,t,n)},spliceWithArray:function(e,t,o){return this[H].spliceWithArray_(e,t,o)},push:function(){for(var e=this[H],t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return e.spliceWithArray_(e.values_.length,0,o),e.values_.length},pop:function(){return this.splice(Math.max(this[H].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[H],t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return e.spliceWithArray_(0,0,o),e.values_.length},reverse:function(){return ht.trackingDerivation&&n(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ht.trackingDerivation&&n(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[H],o=t.dehanceValues_(t.values_).indexOf(e);return o>-1&&(this.splice(o,1),!0)}};function Co(e,t){"function"==typeof Array.prototype[e]&&(Oo[e]=t(e))}function Mo(e){return function(){var t=this[H];t.atom_.reportObserved();var o=t.dehanceValues_(t.values_);return o[e].apply(o,arguments)}}function Do(e){return function(t,o){var n=this,i=this[H];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(o,e,i,n)}))}}function So(e){return function(){var t=this,o=this[H];o.atom_.reportObserved();var n=o.dehanceValues_(o.values_),i=arguments[0];return arguments[0]=function(e,o,n){return i(e,o,n,t)},n[e].apply(n,arguments)}}Co("at",Mo),Co("concat",Mo),Co("flat",Mo),Co("includes",Mo),Co("indexOf",Mo),Co("join",Mo),Co("lastIndexOf",Mo),Co("slice",Mo),Co("toString",Mo),Co("toLocaleString",Mo),Co("toSorted",Mo),Co("toSpliced",Mo),Co("with",Mo),Co("every",Do),Co("filter",Do),Co("find",Do),Co("findIndex",Do),Co("findLast",Do),Co("findLastIndex",Do),Co("flatMap",Do),Co("forEach",Do),Co("map",Do),Co("some",Do),Co("toReversed",Do),Co("reduce",So),Co("reduceRight",So);var ko,Lo,Ro=P("ObservableArrayAdministration",Io);function xo(e){return y(e)&&Ro(e[H])}var Bo={},No="add",Uo="delete";ko=Symbol.iterator,Lo=Symbol.toStringTag;var Wo,Fo,Ko=function(){function e(e,t,o){var i=this;void 0===t&&(t=Y),void 0===o&&(o="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[H]=Bo,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=o,g(Map)||n(18),fn((function(){i.keysAtom_=$("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,e&&i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!ht.trackingDerivation)return this.has_(e);var o=this.hasMap_.get(e);if(!o){var n=o=new ze(this.has_(e),Q,"ObservableMap.key?",!1);this.hasMap_.set(e,n),qt(n,(function(){return t.hasMap_.delete(e)}))}return o.get()},t.set=function(e,t){var o=this.has_(e);if(po(this)){var n=mo(this,{type:o?Ao:No,object:this,newValue:t,name:e});if(!n)return this;t=n.newValue}return o?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,po(this))&&!mo(this,{type:Uo,object:this,name:e}))return!1;if(this.has_(e)){var o=fo(this),n=o?{observableKind:"map",debugObjectName:this.name_,type:Uo,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return lo((function(){var o;t.keysAtom_.reportChanged(),null==(o=t.hasMap_.get(e))||o.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),o&&vo(this,n),!0}return!1},t.updateValue_=function(e,t){var o=this.data_.get(e);if((t=o.prepareNewValue_(t))!==ht.UNCHANGED){var n=fo(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:Ao,object:this,oldValue:o.value_,name:e,newValue:t}:null;0,o.setNewValue_(t),n&&vo(this,i)}},t.addValue_=function(e,t){var o=this;this.keysAtom_,lo((function(){var n,i=new ze(t,o.enhancer_,"ObservableMap.key",!1);o.data_.set(e,i),t=i.value_,null==(n=o.hasMap_.get(e))||n.setNewValue_(!0),o.keysAtom_.reportChanged()}));var n=fo(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:No,object:this,name:e,newValue:t}:null;n&&vo(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return wn({next:function(){var o=t.next(),n=o.done,i=o.value;return{done:n,value:n?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return wn({next:function(){var o=t.next(),n=o.done,i=o.value;return{done:n,value:n?void 0:[i,e.get(i)]}}})},t[ko]=function(){return this.entries()},t.forEach=function(e,t){for(var o,n=W(this);!(o=n()).done;){var i=o.value,r=i[0],s=i[1];e.call(t,s,r,this)}},t.merge=function(e){var t=this;return jo(e)&&(e=new Map(e)),lo((function(){E(e)?function(e){var t=Object.keys(e);if(!O)return t;var o=Object.getOwnPropertySymbols(e);return o.length?[].concat(t,o.filter((function(t){return l.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(o){return t.set(o,e[o])})):Array.isArray(e)?e.forEach((function(e){var o=e[0],n=e[1];return t.set(o,n)})):I(e)?(e.constructor!==Map&&n(19,e),e.forEach((function(e,o){return t.set(o,e)}))):null!=e&&n(20,e)})),this},t.clear=function(){var e=this;lo((function(){rt((function(){for(var t,o=W(e.keys());!(t=o()).done;){var n=t.value;e.delete(n)}}))}))},t.replace=function(e){var t=this;return lo((function(){for(var o,i=function(e){if(I(e)||jo(e))return e;if(Array.isArray(e))return new Map(e);if(E(e)){var t=new Map;for(var o in e)t.set(o,e[o]);return t}return n(21,e)}(e),r=new Map,s=!1,a=W(t.data_.keys());!(o=a()).done;){var _=o.value;if(!i.has(_))if(t.delete(_))s=!0;else{var l=t.data_.get(_);r.set(_,l)}}for(var c,u=W(i.entries());!(c=u()).done;){var d=c.value,p=d[0],h=d[1],m=t.data_.has(p);if(t.set(p,h),t.data_.has(p)){var f=t.data_.get(p);r.set(p,f),m||(s=!0)}}if(!s)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),v=r.keys(),y=g.next(),w=v.next();!y.done;){if(y.value!==w.value){t.keysAtom_.reportChanged();break}y=g.next(),w=v.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return go(this,e)},t.intercept_=function(e){return ho(this,e)},L(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Lo,get:function(){return"Map"}}]),e}(),jo=P("ObservableMap",Ko);var Vo={};Wo=Symbol.iterator,Fo=Symbol.toStringTag;var Ho=function(){function e(e,t,o){var i=this;void 0===t&&(t=Y),void 0===o&&(o="ObservableSet"),this.name_=void 0,this[H]=Vo,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=o,g(Set)||n(22),this.enhancer_=function(e,n){return t(e,n,o)},fn((function(){i.atom_=$(i.name_),e&&i.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;lo((function(){rt((function(){for(var t,o=W(e.data_.values());!(t=o()).done;){var n=t.value;e.delete(n)}}))}))},t.forEach=function(e,t){for(var o,n=W(this);!(o=n()).done;){var i=o.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,po(this))&&!mo(this,{type:No,object:this,newValue:e}))return this;if(!this.has(e)){lo((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var o=!1,n=fo(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:No,object:this,newValue:e}:null;o,n&&vo(this,i)}return this},t.delete=function(e){var t=this;if(po(this)&&!mo(this,{type:Uo,object:this,oldValue:e}))return!1;if(this.has(e)){var o=fo(this),n=o?{observableKind:"set",debugObjectName:this.name_,type:Uo,object:this,oldValue:e}:null;return lo((function(){t.atom_.reportChanged(),t.data_.delete(e)})),o&&vo(this,n),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),o=Array.from(this.values());return wn({next:function(){var n=e;return e+=1,n<o.length?{value:[t[n],o[n]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,o=Array.from(this.data_.values());return wn({next:function(){return t<o.length?{value:e.dehanceValue_(o[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return qo(e)&&(e=new Set(e)),lo((function(){Array.isArray(e)||T(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&n("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return go(this,e)},t.intercept_=function(e){return ho(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Wo]=function(){return this.values()},L(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Fo,get:function(){return"Set"}}]),e}(),qo=P("ObservableSet",Ho),Go=Object.create(null),$o="remove",zo=function(){function e(e,t,o,n){void 0===t&&(t=new Map),void 0===n&&(n=ge),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=o,this.defaultAnnotation_=n,this.keysAtom_=new q("ObservableObject.keys"),this.isPlainObject_=E(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var o=this.values_.get(e);if(o instanceof Xe)return o.set(t),!0;if(po(this)){var n=mo(this,{type:Ao,object:this.proxy_||this.target_,name:e,newValue:t});if(!n)return null;t=n.newValue}if((t=o.prepareNewValue_(t))!==ht.UNCHANGED){var i=fo(this),r=i?{type:Ao,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:e,newValue:t}:null;0,o.setNewValue_(t),i&&vo(this,r)}return!0},t.get_=function(e){return ht.trackingDerivation&&!D(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,o){return void 0===o&&(o=!1),D(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):o?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(e){if(!ht.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new ze(e in this.target_,Q,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(en(this,t,e),!(e in this.target_)){var o;if(null!=(o=this.target_[F])&&o[e])return;n(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==l;){var r=a(i,e);if(r){var s=t.make_(this,e,r,i);if(0===s)return;if(1===s)break}i=Object.getPrototypeOf(i)}Zo(this,t,e)}},t.extend_=function(e,t,o,n){if(void 0===n&&(n=!1),!0===o&&(o=this.defaultAnnotation_),!1===o)return this.defineProperty_(e,t,n);en(this,o,e);var i=o.extend_(this,e,t,n);return i&&Zo(this,o,e),i},t.defineProperty_=function(e,t,o){void 0===o&&(o=!1),this.keysAtom_;try{vt();var n=this.delete_(e);if(!n)return n;if(po(this)){var i=mo(this,{object:this.proxy_||this.target_,name:e,type:No,newValue:t.value});if(!i)return null;var r=i.newValue;t.value!==r&&(t=R({},t,{value:r}))}if(o){if(!Reflect.defineProperty(this.target_,e,t))return!1}else _(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{yt()}return!0},t.defineObservableProperty_=function(e,t,o,n){void 0===n&&(n=!1),this.keysAtom_;try{vt();var i=this.delete_(e);if(!i)return i;if(po(this)){var r=mo(this,{object:this.proxy_||this.target_,name:e,type:No,newValue:t});if(!r)return null;t=r.newValue}var s=Xo(e),a={configurable:!ht.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else _(this.target_,e,a);var l=new ze(t,o,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{yt()}return!0},t.defineComputedProperty_=function(e,t,o){void 0===o&&(o=!1),this.keysAtom_;try{vt();var n=this.delete_(e);if(!n)return n;if(po(this))if(!mo(this,{object:this.proxy_||this.target_,name:e,type:No,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=Xo(e),r={configurable:!ht.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(o){if(!Reflect.defineProperty(this.target_,e,r))return!1}else _(this.target_,e,r);this.values_.set(e,new Xe(t)),this.notifyPropertyAddition_(e,void 0)}finally{yt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!D(this.target_,e))return!0;if(po(this)&&!mo(this,{object:this.proxy_||this.target_,name:e,type:$o}))return null;try{var o,n;vt();var i,r=fo(this),s=this.values_.get(e),_=void 0;if(!s&&r)_=null==(i=a(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof ze&&(_=s.value_),wt(s)),this.keysAtom_.reportChanged(),null==(o=this.pendingKeys_)||null==(n=o.get(e))||n.set(e in this.target_),r){var l={type:$o,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:_,name:e};0,r&&vo(this,l)}}finally{yt()}return!0},t.observe_=function(e,t){return go(this,e)},t.intercept_=function(e){return ho(this,e)},t.notifyPropertyAddition_=function(e,t){var o,n,i=fo(this);if(i){var r=i?{type:No,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,i&&vo(this,r)}null==(o=this.pendingKeys_)||null==(n=o.get(e))||n.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),C(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Yo(e,t){var o;if(D(e,H))return e;var n=null!=(o=null==t?void 0:t.name)?o:"ObservableObject",i=new zo(e,new Map,String(n),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:ve(e):void 0}(t));return b(e,H,i),e}var Qo=P("ObservableObjectAdministration",zo);function Xo(e){return Go[e]||(Go[e]={get:function(){return this[H].getObservablePropValue_(e)},set:function(t){return this[H].setObservablePropValue_(e,t)}})}function Jo(e){return!!y(e)&&Qo(e[H])}function Zo(e,t,o){var n;null==(n=e.target_[F])||delete n[o]}function en(e,t,o){}var tn,on,nn=ln(0),rn=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),sn=0,an=function(){};tn=an,on=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(tn.prototype,on):void 0!==tn.prototype.__proto__?tn.prototype.__proto__=on:tn.prototype=on;var _n=function(e,t,o){function n(t,o,n,i){var r;return void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),r=e.call(this)||this,fn((function(){var e=new Io(n,o,i,!0);e.proxy_=N(r),A(N(r),H,e),t&&t.length&&r.spliceWithArray(0,0,t),rn&&Object.defineProperty(N(r),"0",nn)})),r}x(n,e);var i=n.prototype;return i.concat=function(){this[H].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return xo(e)?e.slice():e})))},i[o]=function(){var e=this,t=0;return wn({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},L(n,[{key:"length",get:function(){return this[H].getArrayLength_()},set:function(e){this[H].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),n}(an,Symbol.toStringTag,Symbol.iterator);function ln(e){return{enumerable:!1,configurable:!0,get:function(){return this[H].get_(e)},set:function(t){this[H].set_(e,t)}}}function cn(e){_(_n.prototype,""+e,ln(e))}function un(e){if(e>sn){for(var t=sn;t<e+100;t++)cn(t);sn=e}}function dn(e,t,o){return new _n(e,t,o)}function pn(e,t){if("object"==typeof e&&null!==e){if(xo(e))return void 0!==t&&n(23),e[H].atom_;if(qo(e))return e.atom_;if(jo(e)){if(void 0===t)return e.keysAtom_;var o=e.data_.get(t)||e.hasMap_.get(t);return o||n(25,t,mn(e)),o}if(Jo(e)){if(!t)return n(26);var i=e[H].values_.get(t);return i||n(27,t,mn(e)),i}if(G(e)||Je(e)||Ot(e))return e}else if(g(e)&&Ot(e[H]))return e[H];n(28)}function hn(e,t){return e||n(29),void 0!==t?hn(pn(e,t)):G(e)||Je(e)||Ot(e)||jo(e)||qo(e)?e:e[H]?e[H]:void n(24,e)}function mn(e,t){var o;if(void 0!==t)o=pn(e,t);else{if(Wt(e))return e.name;o=Jo(e)||jo(e)||qo(e)?hn(e):pn(e)}return o.name_}function fn(e){var t=st(),o=qe(!0);vt();try{return e()}finally{yt(),Ge(o),at(t)}}Object.entries(Oo).forEach((function(e){var t=e[0],o=e[1];"concat"!==t&&b(_n.prototype,t,o)})),un(1e3);var gn=l.toString;function vn(e,t,o){return void 0===o&&(o=-1),yn(e,t,o)}function yn(e,t,o,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;if("function"!==r&&"object"!==r&&"object"!=typeof t)return!1;var s=gn.call(e);if(s!==gn.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":o>=0&&o++}e=En(e),t=En(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var _=e.constructor,l=t.constructor;if(_!==l&&!(g(_)&&_ instanceof _&&g(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(0===o)return!1;o<0&&(o=-1),i=i||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!yn(e[c],t[c],o-1,n,i))return!1}else{var u,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!D(t,u=d[c])||!yn(e[u],t[u],o-1,n,i))return!1}return n.pop(),i.pop(),!0}function En(e){return xo(e)?e.slice():I(e)||jo(e)||T(e)||qo(e)?Array.from(e.entries()):e}function wn(e){return e[Symbol.iterator]=bn,e}function bn(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===r()[e]&&n("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:mn},$mobx:H})},7680:(e,t,o)=>{"use strict";o.d(t,{API_VERSION:()=>n});const n="5.226"},7610:(e,t,o)=>{"use strict";o.d(t,{AccountSecurityLevelEnumNames:()=>n});const n={NOTHING_TO_SAY:0,HAVE_ISSUES:1,HAVE_RECOMMENDATIONS:10,GOOD:20}},43533:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M10.48 1.07c.55.05 1.03.14 1.47.37a3.74 3.74 0 0 1 1.64 1.63c.23.44.32.92.37 1.47.04.53.04 1.18.04 2v5.48c0 .5 0 .92-.03 1.25-.03.33-.1.72-.35 1.03a1.8 1.8 0 0 1-1.35.7c-.4.01-.76-.15-1.04-.32-.3-.17-.64-.41-1.04-.7l-1.7-1.2a7.21 7.21 0 0 0-.43-.3.25.25 0 0 0-.12 0l-.08.05c-.08.04-.18.12-.35.24l-1.7 1.2c-.4.3-.75.54-1.04.71-.28.17-.64.33-1.04.32a1.8 1.8 0 0 1-1.35-.7c-.25-.32-.32-.7-.35-1.03C2 12.94 2 12.52 2 12.02V6.53c0-.7 0-1.3.03-1.79a9.01 9.01 0 0 1 .01-.2c.05-.55.14-1.03.37-1.47a3.75 3.75 0 0 1 1.64-1.63c.44-.23.92-.32 1.47-.37.23-.02.48-.03.76-.03 1.4-.03 2.82-.08 4.2.03Z"/></svg>',name:"bookmark_16"}}o.d(t,{getIcon16Bookmark:()=>n})},24793:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M6.72 1h2.56c.67 0 1.23 0 1.67.04.47.03.88.12 1.28.31a3.25 3.25 0 0 1 1.42 1.42c.2.4.28.81.31 1.28.04.44.04 1 .04 1.67v6.05c0 .56 0 1.02-.03 1.4-.04.36-.11.76-.37 1.1a1.9 1.9 0 0 1-1.45.73c-.42.01-.8-.17-1.11-.36-.32-.2-.7-.47-1.14-.8L8.5 12.8a7.25 7.25 0 0 0-.44-.3.25.25 0 0 0-.12 0s-.03 0-.08.04c-.08.05-.19.12-.37.26L6.1 13.84c-.45.33-.82.6-1.14.8-.31.19-.69.37-1.1.36a1.9 1.9 0 0 1-1.46-.73 2.06 2.06 0 0 1-.37-1.1C2 12.78 2 12.32 2 11.76V5.72c0-.67 0-1.23.04-1.67.03-.47.12-.88.31-1.28a3.25 3.25 0 0 1 1.42-1.42c.4-.2.81-.28 1.28-.31C5.49 1 6.05 1 6.72 1Zm1.22 11.5Zm.12 0Zm-2.9-9.97c-.36.03-.56.09-.7.16a1.75 1.75 0 0 0-.77.77c-.07.14-.13.34-.16.7-.03.39-.03.88-.03 1.59v5.98c0 .6 0 1 .03 1.3.02.24.05.31.06.32a.4.4 0 0 0 .3.15s.08-.02.3-.14l1.05-.75L6.6 11.6l.07-.05c.27-.2.56-.41.89-.5a1.75 1.75 0 0 1 .88 0c.33.09.62.3.89.5l.07.05 1.36 1c.49.37.8.6 1.06.76.2.12.29.14.3.14a.4.4 0 0 0 .3-.15s.03-.08.05-.32c.03-.3.03-.7.03-1.3V5.75c0-.71 0-1.2-.03-1.58a1.88 1.88 0 0 0-.16-.71 1.75 1.75 0 0 0-.77-.77 1.88 1.88 0 0 0-.7-.16c-.39-.03-.88-.03-1.59-.03h-2.5c-.71 0-1.2 0-1.58.03Z" clip-rule="evenodd"/></svg>',name:"bookmark_outline_16"}}o.d(t,{getIcon16BookmarkOutline:()=>n})},74701:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.74 3.26a.9.9 0 0 1 0 1.28L9.27 8l3.47 3.46a.9.9 0 0 1 .08 1.18l-.08.1a.9.9 0 0 1-1.28 0L8 9.27l-3.46 3.47a.9.9 0 0 1-1.28-1.28L6.73 8 3.26 4.54a.9.9 0 0 1-.08-1.18l.08-.1a.9.9 0 0 1 1.28 0L8 6.73l3.46-3.47a.9.9 0 0 1 1.28 0Z"/></svg>',name:"cancel_16"}}o.d(t,{getIcon16Cancel:()=>n})},48122:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" fill="none" viewBox="0 0 12 16"><path fill="currentColor" d="M7.23 8 3.86 4.64a.9.9 0 0 1 1.28-1.28l4 4a.9.9 0 0 1 0 1.28l-4 4a.9.9 0 0 1-1.28-1.28L7.23 8Z"/></svg>',name:"chevron_16"}}o.d(t,{getIcon16Chevron:()=>n})},86660:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M5.63 13.23c.74.23 1.55.36 2.38.36 3.77 0 6.99-2.62 6.99-6.04 0-3.43-3.22-6.05-6.99-6.05S1.02 4.12 1.02 7.55c0 1.13.36 2.18.98 3.08a7.35 7.35 0 0 1-.78 2.32 57.53 57.53 0 0 0-.14.33.87.87 0 0 0 .83 1.22c1.56-.06 2.84-.45 3.72-1.27Zm-.38-1.7.83.27c.6.19 1.25.3 1.93.3 3.18 0 5.49-2.18 5.49-4.55S11.2 3 8.01 3C4.83 3 2.52 5.17 2.52 7.55c0 .8.26 1.56.72 2.23l.3.43-.04.52a6.09 6.09 0 0 1-.44 1.77 13.08 13.08 0 0 1-.16.39 3.35 3.35 0 0 0 1.7-.76l.65-.6Z" clip-rule="evenodd"/></svg>',name:"message_outline_16"}}o.d(t,{getIcon16MessageOutline:()=>n})},97307:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3Z" clip-rule="evenodd"/></svg>',name:"add_20"}}o.d(t,{getIcon20Add:()=>n})},51783:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M17.53 5.22a.75.75 0 0 1 0 1.06l-9.5 9.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.97 3.97 8.97-8.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"/></svg>',name:"check_20"}}o.d(t,{getIcon20Check:()=>n})},57499:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="m12.75 4.04-.8 3.3 1.91.35c.96.17 1.82.62 2.07 1.53.26.92-.25 1.84-.82 2.52l-5.08 5.75c-.33.35-.66.64-.99.81-.3.16-.8.33-1.27.05-.46-.26-.58-.76-.6-1.1-.03-.38.03-.82.15-1.3l.84-3.35-1.81-.32c-.92-.16-1.84-.59-2.2-1.45-.39-.92 0-1.9.8-2.76l1.41-1.5c.84-.91 2.07-2.26 3.68-4.05.31-.35.64-.64.96-.82.31-.16.8-.32 1.26-.07.47.25.6.74.64 1.1.03.38-.02.83-.15 1.31Zm-1.37-.75a3.95 3.95 0 0 0-.22.22A330.83 330.83 0 0 1 6.05 9.1c-.63.69-.57 1.05-.52 1.15.16.38.73.5 1.08.56l2.33.41c.56.1.95.67.8 1.24l-.96 3.86a4.71 4.71 0 0 0-.08.4 4.42 4.42 0 0 0 .23-.24l5.04-5.7c.53-.65.55-1.02.52-1.15-.02-.07-.15-.32-.88-.45l-2.45-.44c-.56-.1-.94-.68-.8-1.24l.94-3.81a4.29 4.29 0 0 0 .08-.4Z" clip-rule="evenodd"/></svg>',name:"flash_outline_20"}}o.d(t,{getIcon20FlashOutline:()=>n})},94292:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h12.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75z"/><path clip-rule="evenodd" d="M19.28 12.22c.3.3.3.77 0 1.06l-4.5 4.5c-.29.29-.76.29-1.05 0l-2.5-2.5a.75.75 0 0 1 1.05-1.06l1.97 1.97 3.97-3.97c.3-.3.77-.3 1.06 0z" fill-rule="evenodd"/></g></svg>',name:"list_add_outline_20"}}o.d(t,{getIcon20ListAddOutline:()=>n})},94176:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><clipPath id="list_play_outline_20__a"><path d="M0 0h20v20H0z"/></clipPath><g clip-path="url(#list_play_outline_20__a)" fill="currentColor"><path d="M19.68 11.43c.43.25.43.89 0 1.14l-4.73 2.84c-.42.25-.95-.06-.95-.57V9.16c0-.5.53-.82.95-.57zM2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75z"/></g></svg>',name:"list_play_outline_20"}}o.d(t,{getIcon20ListPlayOutline:()=>n})},16889:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" fill="currentColor"/></svg>',name:"more_20"}}o.d(t,{getIcon20More:()=>n})},64725:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12 8.13a7.85 7.85 0 0 1-1.5 2.37A7.83 7.83 0 0 1 8.13 12c.83.37 1.72.86 2.37 1.51a7.83 7.83 0 0 1 1.5 2.37c.37-.84.86-1.72 1.51-2.37a7.83 7.83 0 0 1 2.37-1.5 7.85 7.85 0 0 1-2.37-1.51 7.83 7.83 0 0 1-1.5-2.37Zm-.78-2.18c-.42 1.32-1.02 2.72-1.78 3.49-.77.77-2.17 1.36-3.49 1.78a21.07 21.07 0 0 1-1.16.34c-.38.1-.38.79 0 .9a27.15 27.15 0 0 1 .91.25l.25.08c1.32.42 2.72 1.01 3.49 1.78.76.77 1.36 2.17 1.78 3.49a20.84 20.84 0 0 1 .27.9l.07.26c.1.38.79.38.9 0a27.49 27.49 0 0 1 .25-.91l.08-.25c.42-1.32 1.01-2.72 1.78-3.49s2.17-1.36 3.49-1.78a20.84 20.84 0 0 1 .9-.27l.26-.07c.38-.1.38-.8 0-.9a27.49 27.49 0 0 1-.91-.25 20.84 20.84 0 0 1-.25-.08c-1.32-.42-2.72-1.01-3.49-1.78s-1.36-2.17-1.78-3.49a21.13 21.13 0 0 1-.34-1.16c-.1-.38-.8-.38-.9 0a27.15 27.15 0 0 1-.25.91 21.13 21.13 0 0 1-.08.25ZM4.36.76a.39.39 0 0 0-.73 0L3.24 2A1.93 1.93 0 0 1 2 3.22l-1.24.41a.39.39 0 0 0 0 .74l1.24.4A1.93 1.93 0 0 1 3.22 6l.41 1.24a.39.39 0 0 0 .74 0L4.77 6A1.93 1.93 0 0 1 6 4.78l1.24-.42a.39.39 0 0 0 0-.73L6 3.24A1.93 1.93 0 0 1 4.78 2L4.36.76Z"/></svg>',name:"stars_20"}}o.d(t,{getIcon20Stars:()=>n})},39651:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M2.75 4a.75.75 0 0 0 0 1.5H6v9.75a.75.75 0 0 0 1.5 0V5.5h3.25a.75.75 0 0 0 0-1.5h-8Z"/><path d="M10.75 7.5a.75.75 0 0 0 0 1.5h2.5v6.25a.75.75 0 0 0 1.5 0V9h2.5a.75.75 0 0 0 0-1.5h-6.5Z"/></svg>',name:"text_tt_outline_20"}}o.d(t,{getIcon20TextTtOutline:()=>n})},19802:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.08 2.65A2.21 2.21 0 0 1 14.64 2c.57 0 1.14.22 1.57.65l1.14 1.14a2.21 2.21 0 0 1 0 3.13l-.94.94-9.17 9.18A3.3 3.3 0 0 1 4.9 18H3a1 1 0 0 1-1-1v-1.9a3.29 3.29 0 0 1 .96-2.33l8.13-8.13 1.99-2zm2.28 4.13.93-.92a.71.71 0 0 0 0-1.02l-1.14-1.13a.71.71 0 0 0-.5-.21.71.71 0 0 0-.51.2l-.93.93 2.15 2.15zm-3.22-1.07-8.11 8.12a1.79 1.79 0 0 0-.53 1.26v1.11a.3.3 0 0 0 .3.3h1.11c.47 0 .93-.19 1.27-.53l8.1-8.11-2.15-2.15z" fill="currentColor"/></svg>',name:"write_outline_20"}}o.d(t,{getIcon20WriteOutline:()=>n})},35921:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.58.06.7.05 1.32.17 1.88.46a4.79 4.79 0 0 1 2.1 2.1c.28.56.4 1.17.46 1.88.06.68.06 1.53.06 2.58v7.62c0 .77 0 1.41-.05 1.91-.04.5-.14 1.03-.48 1.46a2.46 2.46 0 0 1-1.9.93c-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.48-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.58.05-.7.18-1.32.46-1.88a4.79 4.79 0 0 1 2.1-2.1c.56-.28 1.17-.4 1.88-.46C9.18 3 10.03 3 11.08 3Z" clip-rule="evenodd"/></svg>',name:"bookmark_24"}}o.d(t,{getIcon24Bookmark:()=>n})},82196:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.59.06.7.05 1.31.17 1.88.46.9.46 1.63 1.2 2.09 2.1.29.56.4 1.17.46 1.87.06.69.06 1.54.06 2.6v7.6c0 .78 0 1.42-.05 1.92-.04.5-.14 1.03-.48 1.46-.46.58-1.15.92-1.9.93-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.47-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.59.05-.7.17-1.31.46-1.88.46-.9 1.2-1.63 2.1-2.09.56-.29 1.17-.4 1.87-.46C9.18 3 10.03 3 11.1 3zM8.64 4.85c-.6.05-.94.14-1.2.28-.57.28-1.03.74-1.31 1.3-.14.27-.23.62-.28 1.21-.05.6-.05 1.38-.05 2.48v7.53c0 .83 0 1.4.04 1.8.04.41.1.5.1.5.12.16.3.25.5.25 0 0 .12 0 .47-.22.34-.22.79-.56 1.45-1.07l1.58-1.2.1-.09c.44-.33.85-.65 1.32-.78.42-.1.86-.1 1.28 0 .47.13.88.45 1.32.78l.1.08 1.58 1.21c.66.5 1.1.85 1.45 1.07.35.22.46.22.46.22.2 0 .39-.1.5-.25 0 0 .07-.09.11-.5.04-.4.04-.97.04-1.8v-7.53c0-1.1 0-1.88-.05-2.48-.05-.6-.14-.94-.28-1.2a2.99 2.99 0 0 0-1.3-1.31 3.17 3.17 0 0 0-1.21-.28 33.8 33.8 0 0 0-2.48-.05h-1.76c-1.1 0-1.88 0-2.48.05z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"bookmark_outline_24"}}o.d(t,{getIcon24BookmarkOutline:()=>n})},84499:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M7.54 6.26a.9.9 0 0 0-1.28 1.28L10.73 12l-4.47 4.46a.9.9 0 0 0 1.28 1.28L12 13.27l4.46 4.47a.9.9 0 1 0 1.28-1.28L13.27 12l4.47-4.46a.9.9 0 1 0-1.28-1.28L12 10.73 7.54 6.26Z"/></svg>',name:"cancel_24"}}o.d(t,{getIcon24Cancel:()=>n})},97460:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21Z" fill="currentColor"/></svg>',name:"check_circle_off_24"}}o.d(t,{getIcon24CheckCircleOff:()=>n})},13744:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24a12 12 0 1 0 0-24 12 12 0 0 0 0 24Zm6.2-14.8a1 1 0 0 0-1.4-1.4L10 14.58l-2.8-2.8a1 1 0 0 0-1.4 1.42l3.5 3.5a1 1 0 0 0 1.4 0l7.5-7.5Z" fill="currentColor"/></svg>',name:"check_circle_on_24"}}o.d(t,{getIcon24CheckCircleOn:()=>n})},8567:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="favorite_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="favorite_24__favorite_24"><path id="favorite_24__Bounds" d="M0 0h24v24H0z"/><path d="m15.34 8.48 4.43.43c1.54.15 2.02 1.65.83 2.64l-3.47 2.88 1.29 4.7c.42 1.54-.9 2.48-2.2 1.55L12 17.7l-4.21 2.98c-1.31.92-2.63 0-2.2-1.55l1.28-4.7-3.47-2.88c-1.2-1-.72-2.5.83-2.64l4.43-.43 1.95-4.5c.6-1.4 2.17-1.4 2.78 0l1.95 4.5Z" id="favorite_24__Mask" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"favorite_24"}}o.d(t,{getIcon24Favorite:()=>n})},21159:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.55 4.7a.6.6 0 0 0-1.1 0L9.83 8.6a.9.9 0 0 1-.77.55l-4.13.26a.6.6 0 0 0-.35 1.05l3.26 2.86a.9.9 0 0 1 .29.9l-.94 3.84a.6.6 0 0 0 .89.66l3.47-2a.9.9 0 0 1 .9 0l3.47 2a.6.6 0 0 0 .88-.66l-.93-3.85a.9.9 0 0 1 .29-.89l3.26-2.86a.6.6 0 0 0-.35-1.05l-4.13-.26a.9.9 0 0 1-.77-.56l-1.62-3.9ZM9.78 4a2.4 2.4 0 0 1 4.44 0l1.4 3.39 3.56.23a2.4 2.4 0 0 1 1.43 4.2l-2.86 2.5.8 3.32a2.4 2.4 0 0 1-3.53 2.64L12 18.54l-3.02 1.74a2.4 2.4 0 0 1-3.54-2.64l.8-3.32-2.85-2.5a2.4 2.4 0 0 1 1.43-4.2l3.56-.23L9.78 4Z" clip-rule="evenodd"/></svg>',name:"favorite_outline_24"}}o.d(t,{getIcon24FavoriteOutline:()=>n})},20143:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="song_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="song_24__song_24"><path id="song_24__Bounds" d="M0 0h24v24H0z"/><path d="M13 11.48v5.65c0 4.52-.87 5.39-4.37 5.85C6.96 23.19 5 22.44 5 19.8c0-1.28.8-2.5 2.46-2.81 1.27-.25-.09.02 2.78-.52.7-.13.77-.37.77-.9V3.97c0-1.24.67-1.69 2.66-2.09l4.68-.87c.37-.07.65.07.65.49v4.05c0 .42-.17.6-.59.68l-4.86.86c-.38.1-.55.36-.55.74v3.64Z" id="song_24__Mask" fill="currentColor"/></g></g></svg>',name:"song_24"}}o.d(t,{getIcon24Song:()=>n})},23688:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28 52a24 24 0 1 0 0-48 24 24 0 0 0 0 48z" fill="#FC3"/><path fill-rule="evenodd" clip-rule="evenodd" d="M31.86 40.86a1.29 1.29 0 0 1 0 2.57h-7.72a1.29 1.29 0 0 1 0-2.57h7.72zm-1.29-12c.86-.86 1.72 1.71 6 1.71 3.43 0 6.43-1.71 6.86-.86.43.86-2.57 4.29-6.86 4.29-5.14 0-6.86-4.29-6-5.14zm-5.14 0c.86.85-.86 5.14-6 5.14-4.29 0-7.29-3.43-6.86-4.29.43-.85 3.43.86 6.86.86 4.28 0 5.14-2.57 6-1.71zm9.43-10.29c.85-.86 2.57 2.14 6 3.43s4.28 1.29 4.28 2.57c0 .86-.85 1.72-5.14 0-4.29-1.71-6-5.14-5.14-6zm-13.72 0c.86.86-.85 4.29-5.14 6-4.29 1.72-5.14.86-5.14 0 0-1.28.85-1.28 4.28-2.57 3.43-1.29 5.15-4.29 6-3.43z" fill="#805446"/></svg>',name:"pensive_face_56"}}o.d(t,{getIcon56PensiveFace:()=>n})},27482:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(85893),i=o(67294),r=o(45697),s=o.n(r);class a extends i.Component{static mapFilterOptionsToDropdownOptions(e){return e?e.map((e=>[e.constant,e.name])):[]}componentDidMount(){const e=this.props.config.placeholder||"",t=this.onChange.bind(this);this.state.input=new Dropdown(ge(this.state.filterElementId),a.mapFilterOptionsToDropdownOptions(this.props.config.options),{selectedItems:this.props.config.selected,onChange:t,placeholder:e,multiselect:!this.props.singleSelectCrutch,autocomplete:!0,width:this.props.width,big:!0,maxItems:this.props.maxItems})}componentDidUpdate(e,t,o){if(this.props.config.selected!==e.config.selected&&Array.isArray(this.props.config.selected)&&0===this.props.config.selected.length)this.state.input.clear();else if(this.props.singleSelectCrutch){const t=this.state.input.selectedItems(),o=t&&t[0]&&t[0][0]?t[0][0]:null;if(!o)return;this.props.config.selected!==e.config.selected&&o!=this.props.config.selected&&this.state.input.selectItem(this.props.config.selected[0])}}onChange(e){let t=a.convertOldValueToJson(e);this.props.onFilterChange(this.props.config.id,t)}static convertOldValueToJson(e){return e?e.split(","):null}render(){const e=this.props.config.header?(0,n.jsx)("div",{className:"search_filter_main",children:this.props.config.header}):"";return(0,n.jsxs)("div",{className:"filter",children:[e,(0,n.jsx)("div",{id:this.state.filterWrapElementId,className:"search_control",children:(0,n.jsx)("input",{id:this.state.filterElementId,type:"text",className:"dark"})})]})}constructor(e){super(e),this.state={filterWrapElementId:this.props.config.id+"_filter_wrap",filterElementId:this.props.config.id+"_filter"}}}a.propTypes={config:s().shape({id:s().string,header:s().string,options:s().arrayOf(s().shape({constant:s().any,name:s().string})),placeholder:s().string,selected:s().array}),onFilterChange:s().func.isRequired,width:s().number,maxItems:s().number,singleSelectCrutch:s().bool},a.defaultProps={width:200,maxItems:50,singleSelectCrutch:!1}},11894:(e,t,o)=>{"use strict";o.d(t,{SECOND:()=>n});const n=1e3},63517:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerHTML5:()=>a});var n=o(7659),i=o(32663),r=o(45701),s=o(41612);class a{destroy(){}getPlayedTime(){const e=this._currentAudioEl.played;let t=0;for(let o=0;o<e.length;o++)t+=e.end(o)-e.start(o);return t}getCurrentTime(){return this._currentAudioEl.currentTime}clearAudioNode(){this._currentAudioEl=this._createAudioNode(r.SILENCE)}isCurrent(e){return e===this._currentAudioEl}_createAudioNode(e){const t=new s.AudioHlsNode({onBufferUpdate:()=>{this.isCurrent(t)&&this.opts.onBufferUpdate(this.getCurrentBuffered())},onProgressUpdate:()=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onProgressUpdate(this.getCurrentProgress(),this.getPlayedTime(),this.getCurrentTime())},onEnd:()=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onEnd()},onSeeked:()=>{this.isCurrent(t)&&this.opts.onSeeked()},onSeek:()=>{this.isCurrent(t)&&this.opts.onSeek()},onFail:e=>{this._prefetchAudioEl===t?this._prefetchAudioEl=this._createAudioNode():this.isCurrent(t)&&t.src!==r.SILENCE&&(this._hlsError=e,this.opts.onFail&&this.opts.onFail())},onDurationChange:()=>{this.isCurrent(t)&&this._seekOnReady&&t.duration>0&&(this.seek(this._seekOnReady),this._seekOnReady=!1)},onCanPlay:()=>{this.isCurrent(t)&&this.opts.onCanPlay&&this.opts.onCanPlay()},onPause:(...e)=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onPause(...e)},onPlay:(...e)=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onPlay(...e)},volume:this.hasOwnProperty("_volume")?this._volume:this.opts.defaultVolume},e);return t}onReady(e){e()}prefetch(e){const t=(0,i.audioUnmaskSource)(e);this._prefetchAudioEl&&this._prefetchAudioEl.url===t||(this._prefetchAudioEl=this._createAudioNode(t))}seek(e){const t=this._currentAudioEl;t.duration>0&&t.src&&t.src!==r.SILENCE?t.currentTime=t.duration*e:this._seekOnReady=e}setVolume(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}setPlaybackRate(e){this._currentAudioEl.playbackRate=e}getCurrentProgress(){return this._currentAudioEl.currentProgress}getCurrentBuffered(){return this._currentAudioEl&&this._currentAudioEl.currentBuffered}getDuration(){return this._currentAudioEl&&this._currentAudioEl.duration}isFullyLoaded(){return this._currentAudioEl.isFullyLoaded}setUrl(e,t=(()=>{})){let o;if(!e)return t&&t(!1);const n=(0,i.audioUnmaskSource)(e);let s=this._currentAudioEl;if(this._currentAudioEl.src&&this._currentAudioEl.src!==r.SILENCE&&(this._seekOnReady=!1),this._currentAudioEl.src===n)return this.opts.onCanPlay&&this.opts.onCanPlay(),void(t&&t(!0));if(this._prefetchAudioEl){if(this._prefetchAudioEl.src===n)return this._currentAudioEl.pause(),this._currentAudioEl.setUrl(r.SILENCE),this._prefetchAudioEl.readyState>=3&&setTimeout((()=>this.opts.onCanPlay&&this.opts.onCanPlay())),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=null,void(t&&t(!0));n!==r.SILENCE&&this._prefetchAudioEl.setUrl(r.SILENCE)}s.src!==n&&(o=s.setUrl(n).then((()=>this._stopFrequencyAnalise()))),o?o.then((()=>t(!0))).catch((()=>t(!1))):t(!0)}play(){this._stopFrequencyAnalise();const e=this._currentAudioEl;if(e.src){const t=e.play();return this._startFrequencyAnalise(),t}return Promise.resolve()}preparePlay(){if(n.browser.safari)return this._currentAudioEl.setUrl(r.SILENCE).then((()=>this._currentAudioEl.play()))}_startFrequencyAnalise(){function e(e,t,o,n){return(o-t)*e/n+t}function t(e,t){return Math.random()*(t-e)+e}this._stopFrequencyAnalise();let o=999,n=null,i=null;this._freqUpdateInterval=setInterval((()=>{let r;this._currentAudioEl.paused?r=[0,0,0,0]:(o++,o>3&&(o=0,n=i,i=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)],n||(n=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)])),r=[e(o,n[0],i[0],3),e(o,n[1],i[1],3),e(o,n[2],i[2],3),e(o,n[3],i[3],3)]),this.opts.onFrequency&&this.opts.onFrequency(r)}),50)}_stopFrequencyAnalise(){clearInterval(this._freqUpdateInterval),this.opts.onFrequency&&this.opts.onFrequency([0,0,0,0])}pause(){this._currentAudioEl.pause(),this._stopFrequencyAnalise()}stop(){this._currentAudioEl.pause(),this.seek(0),this._stopFrequencyAnalise()}_setFadeVolumeInterval(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){const e=new Blob(["\n          var interval;\n          onmessage = function(e) {\n            clearInterval(interval);\n            if (e.data == 'start') {\n              interval = setInterval(function() { postMessage({}); }, 20);\n            }\n          }\n        "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(e))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}fadeVolume(e,t,o){e=Math.max(0,Math.min(1,e));const n=this._currentAudioEl;let i=0;if(t){const o=e-n.volume;i=o/(t/20||1)}else i=e<n.volume?-.06:.001;if(Math.abs(e-n.volume)<=.001)return this._setFadeVolumeInterval(),o&&o();let r=n.volume;this._setFadeVolumeInterval((()=>{!t&&i>0&&(i*=1.35),r+=i;let n=!1;if(n=i<0?r<=e:r>=e,n)return this.setVolume(e),this._setFadeVolumeInterval(),o&&o();this.setVolume(r)}))}getErrorData(){const e=this._currentAudioEl.error||{};return{is_hls:this._currentAudioEl.hls?1:0,url:this._currentAudioEl.src,error_code:e.code,error_message:e.message,hls_error:this._hlsError?JSON.stringify(this._hlsError):null}}constructor(e){this.type="html5",this.opts=e||{},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}}},59040:(e,t,o)=>{"use strict";o.d(t,{AudioAds:()=>u});var n=o(34892),i=o(84779),r=o(7659),s=o(92450),a=o(72278),_=o(57458),l=o(80143),c=o(14683);class u{get isActive(){return!!this._isActive}set isActive(e){this._isActive=e,this.player.notify(s.events.PLAYER_IS_AD_CHANGED,e)}isPlaying(){return this.isActive}getCurrentAd(){return this._currentAd}setAdsConfig(e){this._adsConfig=e}getCurrentProgress(){return this._adsCurrentProgress}getDuration(){return this._duration}loadAdman(e){const t=t=>e&&e(t);if(this._admanLoaded)return void t();let o=0;(0,i.loadScript)(u.ADMAN_SRC,{onLoad:()=>{this._admanLoaded=!0,t()},onError:()=>{window.abp?(this._admanLoaded=!0,t()):(o+=1,3===o&&(this._admanLoaded=!0),t("script_load_fail"))}})}_fetchAd(e,t,o,i,r){this.loadAdman((a=>{var _;if(!window.AdmanHTML)return this._sendEvent("no_adman",t,u.AD_TYPE,a),i&&i();this._adman=new AdmanHTML;const l=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig,c={_SITEID:276,ver:251116,vk_id:vk.id,puid1:554,duration:e.duration,content_id:d(e.ownerId,e.id),vk_catid:u.CAT_IDS[t]||u.CAT_IDS.other,sign:(null==(_=l)?void 0:_.sign)||""};Object.assign(c,e.ads||{}),nav.objLoc&&nav.objLoc.preview&&(c.preview=(0,n.intval)(nav.objLoc.preview)),cur.adsPreview&&(c.preview=1,c.vk_id=398724832),this._adman.setDebug(!!c.preview),this._adman.onError((()=>i&&i())),this._adman.onReady((()=>{if(!this._adman)return;const e=this._adman.getBannersForSection(u.AD_TYPE);if(e&&e.length){const[n]=e;"statistics"===n.type?(this._play(!0,t),i&&i()):(this._sendEvent("received",t),o?(this._sendEvent("rejected",t,u.AD_TYPE,r),this.deinit(),i&&i()):(this._sendEvent("ready",t),this.player.notify(s.events.AD_READY),this._play(!1,t,i,n)))}else o||this._sendEvent("not_received",t),i&&i()})),this._adman.init({slot:3514,wrapper:document.createElement("div"),params:c,browser:{adBlock:!!window.abp,mobile:!1}}),this._sendEvent("requested",t)}))}_sendEvent(e,t,o,i){const r=o?"/"+o:"",s=i?"/"+i:"";this._adEvents.push(e+"/"+t+r+s),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout((()=>{ajax.post(this.adsStatUrl,{act:"ad_event",events:this._adEvents.join(","),v:this.playerVersion,abp:(0,n.intval)(window.abp)},{onFail:()=>!0}),this._adEvents=[]}),500)}_play(e,t,o,i){this._adman.onCompleted((()=>{this.deinit(!0),e?this._sendEvent("statistics",t):(this.player.notify(s.events.PROGRESS,0),this.player.notify(s.events.AD_COMPLETED),this.isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._sendEvent("completed",t),window.setDocumentTitle&&window.setDocumentTitle(this._adsPrevTitle),o&&o())})),this._adman.onStarted((()=>{e||(this.player.setIsPlaying(!0),this.player.notify(s.events.PLAY),this.player.notify(s.events.PROGRESS,0),this.player.notify(s.events.AD_STARTED,(0,c.makeAudioAdFromAdman)(i)),this.updateVolume(),this._sendEvent("started",t),window.statlogsValueEvent&&(0,_.statlogsValueEvent)("audio_web_ad_link","show"))})),this._adman.onPaused((()=>{this.player.setIsPlaying(!1),this.player.notify(s.events.PAUSE)})),this._adman.onPlayed((()=>{this.player.setIsPlaying(!0),this.player.notify(s.events.PLAY)}));const r=[.25,.5,.75];if(this._adman.onTimeRemained((e=>{this._duration=isNaN(e.duration)?0:e.duration,this._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,this.player.notify(s.events.PROGRESS,this._adsCurrentProgress,this._duration),(0,n.each)(r,((e,o)=>{if(this._adsCurrentProgress>=o)return r.shift(),this._sendEvent("progress_"+(0,n.intval)(100*o),t),!1}))})),this._adman.start(u.AD_TYPE),e)return o&&o();this._currentAd=(0,c.makeAudioAdFromAdman)(i),this.isActive=!0,this._adsPrevTitle=document.title,this.isMvk||window.setDocumentTitle(getLang("global_audio_ad"))}updateVolume(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}deinit(e){this._adman=null,!e&&this.player.notify(s.events.AD_DEINITED)}pause(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause())}stop(){this._adman&&(this.player.setIsPlaying(!1),this._adman.stop())}resume(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(s.events.PLAY))}checkPlay(e,t){const o=this.player._getPlayingContextSection(),{type:n,reason:i}=this._isAllowed(e),r=()=>t&&t();switch(n){case u.ALLOW_ALLOWED:this._fetchAd(e,o,!1,r);break;case u.ALLOW_DISABLED:r();break;case u.ALLOW_REJECT:this._fetchAd(e,o,!0,!1,i),r()}}hasAdsSupport(){const e=(0,n.intval)(r.browser.version.split(".")[0]);return!(r.browser.ios||r.browser.safari&&this.isMvk||r.browser.chrome&&e<50)}_isAllowed(e){if(vk.widget||(0,a.isPodcast)(e)||(0,l.isExternalStream)(e))return{type:u.ALLOW_DISABLED};const t=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(t){if(!t.enabled||!this.hasAdsSupport())return{type:u.ALLOW_DISABLED};if(cur.adsPreview)return{type:u.ALLOW_ALLOWED};if(t.day_limit_reached)return{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_LIMIT};return"im"!==this.player._getPlayingContextSection()?{type:u.ALLOW_ALLOWED}:{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_SECTION}}return{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_UNKNOWN}}startPlay(e,t){this.checkPlay(e,t)}constructor(e,t,o){this._isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=e||{},this.playerVersion=t||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(o),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}}function d(e,t){const o=e.toString(16);let n=t.toString(16);for(;n.length<8;)n="0"+n;return o+n}u.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",u.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},u.AD_TYPE="preroll",u.ALLOW_DISABLED=1,u.ALLOW_ALLOWED=2,u.ALLOW_REJECT=3,u.REJECT_REASON_UNKNOWN="unknown",u.REJECT_REASON_LIMIT="track_limit_exceeded",u.REJECT_REASON_SECTION="section_not_allowed"},45701:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_VOLUME:()=>i,SILENCE:()=>n});const n="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",i=.4761515102104643},32663:(e,t,o)=>{"use strict";o.d(t,{audioUnmaskSource:()=>s});var n=o(34892);const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",r={v:function(e){return e.split("").reverse().join("")},r:function(e,t){let o;e=e.split("");const n=i+i;let r=e.length;for(;r--;)o=n.indexOf(e[r]),~o&&(e[r]=n.substr(o-t,1));return e.join("")},s:function(e,t){let o=e.length;if(o){const n=function(e,t){const o=e.length,n=[];if(o){let e=o;for(t=Math.abs(t);e--;)t=(o*(e+1)^t+e)%o,n[e]=t}return n}(e,t);let i=0;for(e=e.split("");++i<o;)e[i]=e.splice(n[o-1-i],1,e[i])[0];e=e.join("")}return e},i:function(e,t){return r.s(e,t^vk.id)},x:function(e,t){const o=[];return t=t.charCodeAt(0),(0,n.each)(e.split(""),(function(e,n){o.push(String.fromCharCode(n.charCodeAt(0)^t))})),o.join("")}};function s(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){let t,o,n=e.split("?extra=")[1].split("#"),i=""===n[1]?"":a(n[1]);if(n=a(n[0]),"string"!=typeof i||!n)return e;i=i?i.split(String.fromCharCode(9)):[];let s=i.length;for(;s--;){if(o=i[s].split(String.fromCharCode(11)),t=o.splice(0,1,n)[0],!r[t])return e;n=r[t].apply(null,o)}if(n&&"http"===n.substr(0,4))return n}return e}function a(e){if(!e||e.length%4==1)return!1;let t,o,n=0,r=0,s="";for(;o=e.charAt(r++);)o=i.indexOf(o),~o&&(t=n%4?64*t+o:o,n++%4)&&(s+=String.fromCharCode(255&t>>(-2*n&6)));return s}},28500:(e,t,o)=>{"use strict";function n(e,t){let o="";return e.forEach((function(n,i){let r="/audio?performer=1&q="+encodeURIComponent(n.name),s=window.getWebHost?window.getWebHost():"";n.id&&(r=`/artist/${n.id}`),o+=t?`<a class="artist_link" href="${s}${r}">${n.name}</a>`:n.name,i<e.length-1&&(o+=", ")})),o}o.d(t,{getAudioArtistsString:()=>n})},37637:(e,t,o)=>{"use strict";o.d(t,{getAudioPerformers:()=>s});var n=o(72278),i=o(28500),r=o(92414);function s(e,t=!0){let o="";const s=!(0,n.isPodcast)(e)&&t;if(Array.isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS])&&(o=(0,i.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],s)),Array.isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS])&&(o+=" feat. ",o+=(0,i.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],s)),!o){let t=e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]?e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g,""):"";if(s){o=`<a class="artist_link" data-performer="${t}" href="${"/audio?performer=1&q="+encodeURIComponent(t)}">${t}</a>`}else o=t}return o}},72278:(e,t,o)=>{"use strict";o.d(t,{isPodcast:()=>r});var n=o(92414),i=o(34892);function r(e){if(!e)return!1;let t=(0,i.isObject)(e)?e.extra:e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];return(0,i.isObject)(t)||(t=JSON.parse(t||"{}")),!!t.podcast}},98690:(e,t,o)=>{"use strict";o.d(t,{serializeAudio:()=>i});var n=o(92414);function i(e){if(!e)return null;if(Array.isArray(e))return e;const t=[e.addHash,e.editHash,e.actionHash,e.deleteHash,e.replaceHash,e.urlHash,e.restoreHash].join("/"),o=[e.coverUrl_l,e.coverUrl_p].join(","),i=[];return i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]=e.id,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]=e.owner_id,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL]=e.url,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]=e.title,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]=e.performer,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]=e.duration,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]=e.albumId,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK]=e.authorLink,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]=e.lyrics,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]=e.flags,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]=e.context,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA]=e.extra,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]=t,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]=o,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS]=e.ads,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE]=e.subTitle,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS]=e.mainArtists,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS]=e.featArtists,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM]=e.album,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=e.trackCode,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION]=e.restrictionStatus,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]=e.albumPart,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=e.accessKey,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]=e.chartInfo,i}},73242:(e,t,o)=>{"use strict";function n(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);{const o=new Blob([`\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ${t});\n        }\n      }\n    `]);try{const t=new Worker(window.URL.createObjectURL(o));return t.onmessage=function(){t.terminate(),e()},t.postMessage("start"),t}catch(o){return setTimeout(e,t)}}}o.d(t,{setWorkerTimeout:()=>n})},66282:(e,t,o)=>{"use strict";function n(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}o.d(t,{wrapAudioPlay:()=>n})},23469:(e,t,o)=>{"use strict";o.d(t,{gemiusTrackPage:()=>i});var n=o(48041);function i(){if((0,n.partConfigEnabled)("geminus_counter")){const e="pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";if(window.pp_gemius_identifier)window.pp_gemius_hit(e);else{window.pp_gemius_identifier=e;const t=function(e){window[e]=window[e]||function(){let t=window[e+"_pdata"]=window[e+"_pdata"]||[];t[t.length]=arguments}};t("gemius_hit"),t("gemius_event"),t("pp_gemius_hit"),t("pp_gemius_event"),function(e,t){try{const o=e.createElement(t),n=e.getElementsByTagName(t)[0],i="http"+("https:"==location.protocol?"s":"");let r="vkgalv";if(window.vk&&window.vk.countryISO)switch(window.vk.countryISO){case"BY":r="vkgaby";break;case"MD":r="vkgamd";break;case"EE":r="vkgaee"}o.setAttribute("async","async"),o.setAttribute("defer","defer"),o.src=i+"://"+r+".hit.gemius.pl/xgemius.js",n.parentNode.insertBefore(o,n)}catch(e){}}(document,"script")}}}},19277:(e,t,o)=>{"use strict";o.d(t,{mediascopeTrackPage:()=>s});var n=o(34892),i=o(57458),r=o(48041);function s(e,t){const o=location.protocol,s=`^https?:\\/\\/(?:(?:www|m)\\.)?(?:\\w+\\.)*${(0,n.escapeRE)("vk.com")}`,a=window._tns&&(window._tns.tnsPixelSocdem||"83"),_=t.replace(/\*/g,"%2a").split("#")[0],l=window._tns&&window._tns.tnsPixelType;if((0,n.vkImage)().src=`${o}//www.tns-counter.ru/V13a**clid:${a}*${_}*vk_com/ru/UTF-8/tmsec=vksite_total/${Math.round(1e9*Math.random())}`,(0,r.partConfigEnabled)("tns_track_sections")){const t="content",o="messenger",n="photo",r="music",a="podcasts",_="video",l="clips",c="services",u="taxi",d="eda",p="worki",h="ecomm",m="games",f="docs",g="other",v="feed",y="friends",E="groups",w="idpublicclub",b="longread",A="bookmarks",P="stickers",I="likes",T="messenger",O="photo",C="music",M="podcasts",D="video",S="clips",k="services",L="taxi",R="eda",x="worki",B="ecomm",N="gamesapp",U="gamesapppage",W="docs",F="docdoc",K="other",j=[...[[/w=story-?\d+_\d+/,t,"story"],[/z=video-?\d+_\d+/,_,"videoview"],[/z=(photo(_tag)?-?\d+_\d+|albums?-?\d+)/,n,"photoview"],[/z=audio_playlist-?\d+_\d+/,r,"playlistview"],[/z=podcast-?\d+_\d+/,r,"podcastview"],[/z=clip-?\d+_\d+/,l,"clipsview"],[/w=app\d+/,m,"gamesappview"],[/w=product-?\d+_\d+/,h,"product"]].map((([e,t,o])=>[new RegExp(s+"\\b.*?\\b"+e.source),t,o])),...[[/feed\?section=likes(\/|\&|$)/,t,I],[/feed(\/|\?|$)/,t,v],[/friends(\/|\?|$)/,t,y],[/groups(\/|\?|$)/,t,E],[/(id|public|club)\d+(\/|\?|$)/,t,w],[/@[\w-\.]+(\/|\?|$)/,t,b],[/bookmarks(\/|\?|$)/,t,A],[/stickers(\/|\?|$)/,t,P],[/im(\/|\?|$)/,o,T],[/(photos|tag\d+|(albums|photos)-?\d+|(album|photo)-?\d+_\d+)(\/|\?|$)/,n,O],[/(audio(s-?\d+)?|music)(\/|\?|$)/,r,C],[/podcasts(-?\d+)(\/|\?|$)/,a,M],[/(videos-?\d+|video(-?\d+_\d+)?)(\/|\?|$)/,_,D],[/(clips(-?\d+)?|clip-?\d+_\d+)(\/|\?|$)/,l,S],[/services(\/|\?|$)/,c,k],[/taxi(\/|\?|$)/,u,L],[/eda(\/|\?|$)/,d,R],[/worki(\/|\?|$)/,p,x],[/market(-?\d+)?(\/|\?|$)/,h,B],[/apps(\/|\?|$)/,m,N],[/app\d+(_-?\d+)(\/|\?|$)/,m,U],[/docs(\/|\?|$)/,f,W],[/doc-?\d+_\d+(\/|\?|$)/,f,F]].map((([e,t,o])=>[new RegExp(s+"\\/"+e.source),t,o]))],V=window.cur&&window.cur.module||"other";let H=g,q=K;j.some((t=>{if(t[0].test(e))return H=t[1],q=t[2],!0})),(0,i.statlogsValueEvent)("counters_check_tns",H,q,V)}"unauth"===l?(0,n.vkImage)().src=o+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184674/"+Math.round(1e9*Math.random()):"has_rough"===l?(0,n.vkImage)().src=o+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184675/"+Math.round(1e9*Math.random()):"not_has_rough"===l&&((0,n.vkImage)().src=o+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184677/"+Math.round(1e9*Math.random())),(0,r.partConfigEnabled)("tns_track_hosts")&&((0,n.vkImage)().src=`https://${function(){if(window.cur&&window.cur.module&&(0,n.isString)(window.cur.module)){const e=window.cur.module.trim().toLowerCase().replace(/[^a-z0-9_-]/g,"");if(e)return e}return"unknown"}()}.tns.vk-portal.net?v=${Math.round(1e9*Math.random())}`)}},69910:(e,t,o)=>{"use strict";o.d(t,{counterId:()=>i,getCustomCounterIdTmrUtils:()=>_,tmrFinishTimespent:()=>h,tmrSendTimespentEvent:()=>d,tmrStartTimespent:()=>p,tmrTrackPage:()=>c,tmrUpdateUserId:()=>l});var n=o(34788);const i="2579437",r={MINI_APP_EVENT:"miniAppEvent"};function s(){return window.vk&&window.vk.id?window.vk.id:0}function a(e){window.vk&&window.vk.zero||window.__dev||(window._tmr=window._tmr||[],window._tmr.push(e))}function _(e){const t=t=>{const o=s();s&&a({id:e,type:r.MINI_APP_EVENT,params:(0,n._)({},t,{platformUserId:String(o)})})},o="open",i="close",_="custom";return{tmrUpdateUserId:()=>{a({type:"setUserID",userid:s()})},tmrTrackPage:(t,o)=>{a({id:e,url:t,referrer:o,type:"pageView",start:(new Date).getTime(),pid:s(),userid:s(),timespent:!0})},tmrTrackCustomGoal:(t,o={})=>{a({id:e,type:"reachGoal",goal:t,userid:s(),params:o})},tmrSendTimespentEvent:t=>{a({id:e,type:"incrementEventTimespent",activity:t,userid:s()})},tmrStartTimespent:(t,o=!1)=>{a({id:e,type:"startTimespent",activity:t,userid:s(),canUseInBackground:o})},tmrFinishTimespent:(t,o=!1)=>{a({id:e,type:"stopTimespent",activity:t,userid:s(),canUseInBackground:o})},tmrTrackMiniAppEvent:t,tmrTrackMiniAppOpen:(e,n)=>{t({eventType:o,miniAppId:e,queryParams:n})},tmrTrackMiniAppClose:e=>{t({eventType:i,miniAppId:e})},tmrTrackMiniAppCustom:(e,o)=>{t((0,n._)({eventType:_,miniAppId:e},o))}}}const{tmrUpdateUserId:l,tmrTrackPage:c,tmrTrackCustomGoal:u,tmrSendTimespentEvent:d,tmrStartTimespent:p,tmrFinishTimespent:h,tmrTrackMiniAppEvent:m,tmrTrackMiniAppOpen:f,tmrTrackMiniAppClose:g,tmrTrackMiniAppCustom:v}=_(i)},27935:(e,t,o)=>{"use strict";o.d(t,{updateCounters:()=>a});var n=o(23469),i=o(19277),r=o(74479),s=o(57458);function a(e,t){if(window.__dev||window.vk&&(window.vk.zero||window.vk.__dev))return;t=t||document.referrer||"";[[/(hash|dl)=\w+/g,"$1="],[/(\/(?:write|mail|im|al_im.php))(?:\?[a-z0-9&=_-]*)?$/,"$1"],[/(\/write)\d*(?:\?[a-zA-Z0-9&=_-]*)?$/,"$1"]].forEach((([o,n])=>{e=e.replace(o,n),t=t.replace(o,n)})),(0,r.tmrTrackPage)(e,t);const o=[/\/login\?.*$/];o.some((t=>t.test(e)))||o.some((e=>e.test(t)))||((0,i.mediascopeTrackPage)(e,t),(0,n.gemiusTrackPage)(),(0,s.statlogsValueEvent)("counters_check",1))}},40586:(e,t,o)=>{"use strict";o.d(t,{PINNED_CONVERSATION_BIT_MASK:()=>n});const n=112,i=["online","here","здесь","тут"];new RegExp(['(?!,|;|:|\\.|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(["all","everyone","все"]).concat(i).map((e=>`@${e}|\\*${e}`)).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi")},35734:(e,t,o)=>{"use strict";o.d(t,{wrapAway:()=>s,wrapAwayIfExternal:()=>r});var n=o(20562);const i=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${n.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function r(e,t=!1){return function(e){const t=decodeURIComponent(e);return/^\/[^/]/.test(t)||i.test(t)}(e)?e:s(e,t)}function s(e,t){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}},44273:(e,t,o)=>{"use strict";o.d(t,{crc32:()=>i});let n=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let e=8;e--;)t=1&t?3988292384^t>>>1:t>>>1;n[e]=t}function i(e){let t=-1;for(let o=0,i=e.length;o<i;o++)t=t>>>8^n[255&t^e[o]];return(-1^t)>>>0}},20640:(e,t,o)=>{"use strict";function n(e,t,o){let n;return function(){const i=arguments,r=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e.apply(this,i)}),t),r&&e.apply(this,i)}}o.d(t,{debounce:()=>n})},17733:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(94795),i=o.n(n);window.EventEmitter=i();const r=i()},47679:(e,t,o)=>{"use strict";o.d(t,{getReactRootElId:()=>n});o(33751),o(48041);function n(e){return"react_root"+(e||"")}window.applicationInitFunctions||(window.applicationInitFunctions={}),window.reactInitQueue||(window.reactInitQueue={}),window.initReactApplication=function(e,t){window.applicationInitFunctions[e]?window.applicationInitFunctions[e](t):(window.reactInitQueue[e]||(window.reactInitQueue[e]=[]),window.reactInitQueue[e].push(t))}},31495:(e,t,o)=>{"use strict";function n(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}function i(){const e=n();return e&&e.type||"unknown"}function r(){const e=n();return e&&e.effectiveType||"unknown"}o.d(t,{default:()=>s});const s={getConnection:n,getConnectionType:i,getConnectionEffectiveType:r,getConnectionTypeID:function(){return{unknown:0,bluetooth:1,cellular:2,ethernet:3,none:4,wifi:5,wimax:6,other:7}[i()]||0},getConnectionEffectiveTypeID:function(){return{unknown:0,"slow-2g":1,"2g":2,"3g":3,"4g":4}[r()]||0}}},56782:(e,t,o)=>{"use strict";function n(e,t){let o,n,i;return function(...r){return new Promise(((e,s)=>{const a=Date.now(),_=()=>{e(r),o=a};!o||o+t<a?_():(i&&(i.reject(),clearTimeout(n)),i={resolve:e,reject:s},n=setTimeout(_,t-(a-o)))})).then((t=>e(...t)))}}o.d(t,{throttledPromise:()=>n})},48487:(e,t,o)=>{"use strict";function n(e){let t="";return e>=3600&&(t+=Math.floor(e/3600)+"h",e%=3600),e>=60&&(t+=Math.floor(e/60)+"m",e%=60),e>0&&(t+=Math.floor(e)+"s"),t}o.d(t,{toString:()=>n})},95478:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_MEDIA_SESSION:()=>s,HAS_MEDIA_SESSION:()=>r,clear:()=>a,updateMediaSessionMetadata:()=>_});var n=o(45701);let i;const r=window&&window.navigator&&"mediaSession"in window.navigator&&"MediaMetadata"in window,s=r?navigator.mediaSession:null;function a(){r&&(i=i||document.createElement("audio"),i.src=n.SILENCE,i.play().then((()=>{})).catch((()=>{})))}function _(e,t=s){if(!t||!r)return;(location.hostname+e.album).length>30&&(e.album=e.album.substring(0,30-location.hostname.length)+"…");const o=t.metadata;o?(o.title=e.title,o.artist=e.artist,o.album=e.album,o.artwork=e.artwork):t.metadata=new MediaMetadata(e)}},56121:(e,t,o)=>{"use strict";o.d(t,{registrationItemStat:()=>s});var n=o(68312);const i=new n.ProductionStatCollector,r=new n.ActionStatCollector(i),s=new n.RegistrationItemStatCollector(r)},82885:(e,t,o)=>{"use strict";o.d(t,{showErrorBox:()=>s});o(59397);var n=o(44734),i=(o(34892),o(23434)),r=o(3895);o(39586);function s(e){!function(){const e=(0,i.curBox)();e&&e.hide()}(),(0,n.showFastBox)((0,r.getLang)("global_error"),e)}},4723:(e,t,o)=>{"use strict";o.d(t,{default:()=>d});var n=o(39586),i=o(19338),r=o(82753),s=o(96041);const a="idle",_="pend_rows",l="pend_prefetch",c="done_prefetch",u="done";class d{getListEl(){return this._containerEl}setListEl(e,t){let o;this._containerEl=(0,r.ge)(e),this._scrollNode=t||d.closestOverflowParent(this._containerEl),o=this._scrollNode===window?0:(0,r.getXY)(this._scrollNode)[1],this._contentYOffset=(0,r.getXY)(this._containerEl)[1]-o}options(e){(0,n.extend)(this._opts,e)}_countRows(e){const t=this;let o=0;return(0,n.each)(e,(function(e,i){"string"==typeof i&&(i=(0,r.se)(i)),t._rowClasses?(0,n.each)(t._rowClasses,(function(e,t){if((0,r.hasClass)(i,t))return o++,!1})):o++})),o}_drawRows(e){const t=this;this._opts.drawRows?this._opts.drawRows(t._containerEl,e):(0,n.each)(e,(function(e,o){"string"==typeof o&&(o=(0,r.se)((0,n.trim)(o))),o&&t._containerEl.appendChild(o)})),this.toggleProgress(this._state!==u),!this._forceDrawCalled&&this._opts.onRendered&&this._opts.onRendered(this._offset)}toggleProgress(e){e?!this._isProgressShown&&this._opts.showProgress&&this._opts.showProgress():this._isProgressShown&&this._opts.hideProgress&&this._opts.hideProgress(),this._isProgressShown=e}drawMore(){(0,n.inArray)(this._state,[a,c])?(this._forceDrawCalled=!0,this._drawRows(this._prefetched),this._setState(l),this._prefetched=[],this._requestRows(),this._forceDrawCalled=!1):this._state===u&&this._opts.onNoMore&&this._opts.onNoMore(this._containerEl.childElementCount)}destroy(){this._ev_scroll&&((0,s.removeEvent)(this._scrollNode,"scroll",this._ev_scroll),this._ev_scroll=!1),this._ev_window_resize&&(0,s.removeEvent)(window,"resize",this._ev_window_resize),this._setState(u),this.toggleProgress(!1)}getOffset(){return this._offset}_requestRows(){if(!this.isDone()&&this._state!==c){function e(){this._opts.onNeedRows(this._onRowsProvided.bind(this),this._offset,this._page++,this._state===l,this)}this._initialRender=!1,e.apply(this)}}_onRowsProvided(e,t){if(this.isDone())return;if(!1===e)return this._requestRows();e=e||[];let o=!1;this._needUseExternalOffset?(this._offset=null!=t?t:0,o=Boolean(t)):(this._offset+=void 0===t?this._countRows(e):t,o=Boolean(e.length));const n=this._containerEl.childElementCount;switch(this._state){case l:0!==e.length&&(this._prefetched=this._prefetched.concat(e)),o?(this._setState(a),this._opts.onHasMore&&this._opts.onHasMore()):(this._setState(c),this._opts.onNoMore&&this._opts.onNoMore(n),0===this._prefetched.length&&this._setState(u)),(o||0!==this._prefetched.length)&&this._onScroll();break;case _:this._drawRows(e),o?(this._setState(l),this._requestRows()):(this._setState(u),this._opts.onNoMore&&this._opts.onNoMore(n)),this.toggleProgress(!1);break;case a:this._prefetched=this._prefetched.concat(e)}}_setState(e){this._state=e}isDone(){return this._state===u}static closestOverflowParent(e){let t,o=e;for(;o&&o.tagName&&(t=(0,r.getStyle)(o,"overflow"),"visible"===t||"page_wrap"===o.id);)o=(0,r.domPN)(o);return o!==window.document&&o!==document.body&&o||(o=window),o}_onScroll(){if(this._forceDrawCalled)return;if(this._state===_)return;const e=this._scrollNode;let t,o,n;e===window?(n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=(0,i.scrollGetY)()):(n=(0,r.getSize)(e)[1],t=this._scroll?this._scroll.data.scrollTop:e.scrollTop),n<10||(o=this._containerEl.scrollHeight,o-n-t+this._contentYOffset<10&&(this._state===_||!this._prefetched.length&&this._state===l?(this.toggleProgress(!0),this._setState(_)):this._state===l||this._state===a?(this._drawRows(this._prefetched),this._prefetched=[],this._setState(l),this._requestRows()):this._state===c&&(this._drawRows(this._prefetched),this._prefetched=[],this._setState(u),this._opts.onNoMore&&this._opts.onNoMore(),this.destroy())))}constructor(e,t){if(this.constructor!==d)throw new Error("AutoList: AutoList was called without 'new' operator");if(d._counter=d._counter||0,this._id=d._counter++,this.setListEl(e,t.scrollNode),this._opts=(0,n.extend)({threshold:0,renderImmediate:!1,fetchImmediate:!0},t),!this._containerEl)throw new Error("AutoList: container not found");var o,i;(this._rowClasses=!!this._opts.rowClass&&this._opts.rowClass.split(" "),delete this._opts.rowClass,this._initialRender=this._opts.renderImmediate,this._needUseExternalOffset=null!=(o=this._opts.needUseExternalOffset)&&o,this._isProgressShown=!1,this._prefetched=[],this._needUseExternalOffset)?this._offset=null!=(i=this._opts.offset)?i:0:this._initialRender?this._offset=0:this._opts.offset?this._offset=this._opts.offset:this._opts.rowClasses?this._offset=this._countRows(this._containerEl.children):this._offset=this._containerEl.children.length;this._page=this._offset>0?1:0,(0,s.addEvent)(this._scrollNode,"scroll",this._ev_scroll=this._onScroll.bind(this)),(0,s.addEvent)(window,"resize",this._ev_window_resize=this._onScroll.bind(this)),this._setState(this._opts.renderImmediate?_:l),this._opts.fetchImmediate?this._requestRows():(this._setState(a),this._onScroll())}}},76669:(e,t,o)=>{"use strict";o.d(t,{UIGallery:()=>u});var n=o(90426),i=o(34892),r=o(77995),s=o(96041),a=o(39586),_=o(82753),l=o(85793);const c=(0,n.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});class u{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,_.getSize)(this._el)[0]),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,s.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,_.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,_.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,_.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,_.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,s.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,s.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,s.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,s.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,s.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,s.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,s.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,s.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){let t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,s.cancelEvent)(e)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const e=this._width-2*this._arrowWidth,t=this._itemFullWidth>e;return{isItemBiggerThanWidth:t,scrollDistance:t?this._itemFullWidth:e}}_legacySlide(e,t,o){var n,i,a;const{scrollDistance:l,isItemBiggerThanWidth:c}=this._getScrollParams();let u=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*l;const d=this._innerCont.scrollWidth-this._width;this._scroll.negative?(u=Math.min(u,0),u=Math.abs(u)):u=Math.max(0,u),u=Math.min(d,u);const p=this._scroll.negative||this._scroll.rtlSame?-e:e;if(p>0&&u<d){u=Math.floor(u/this._itemFullWidth)*this._itemFullWidth}else if(p<0&&u>0){u=(c?Math.ceil(u/this._itemFullWidth):Math.floor(u/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(u=(this._visible.left+e)*this._itemFullWidth),0===u||u===d){const t=this._innerCont.scrollWidth;(0,_.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),u&&(u+=e*(this._innerCont.scrollWidth-t))}this._scroll.negative&&(u=-u),(0,r.animate)(this._innerCont,{scrollLeft:u},{duration:Math.abs(this._innerCont.scrollLeft-u)+50,transition:r.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(u),setTimeout((()=>(0,_.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),null==(a=this._opts)||null==(i=a.onSlide)||i.call(a,e,{eventName:null==(n=o)?void 0:n.eventName}),t&&(0,s.cancelEvent)(t)}_updateShift(e){let t=this._shift+e;const o=this._inner.scrollWidth-this._inner.clientWidth;t>o&&(t=o),t<0&&(t=0),this._shift=t}_slide(e,t,o){var n,i,r;const{scrollDistance:a}=this._getScrollParams();this._updateShift(e*a),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),null==(r=this._opts)||null==(i=r.onSlide)||i.call(r,e,{eventName:null==(n=o)?void 0:n.eventName}),t&&(0,s.cancelEvent)(t)}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const o=this._itemWidth/3,n=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,i=e&&Math.floor(n/this._itemFullWidth),r=i*this._itemFullWidth+2*o;let s;s=this._scroll.backward?e+this._width<this._inner.scrollWidth-r:e>r;const l=Math.min(this._items.length-1,Math.floor((n+this._width)/this._itemFullWidth)),c=l*this._itemFullWidth+2*o;let u;if(u=this._scroll.backward?e>this._inner.scrollWidth-c:e+this._width<c,this._opts.onViewItem){const e=s?Math.min(this._items.length-1,i+1):i,o=u?Math.max(0,l-1):l;if(t||e!==this._visible.left||o!==this._visible.right){for(let n=e;n<=o;n++)(this._visible.left<0||t&&!(0,a.inArray)(this._items[n],this._visible.items)||n<this._visible.left||n>this._visible.right)&&this._opts.onViewItem(this._items[n],n);this._visible.left=e,this._visible.right=o,this._visible.items=this._items.slice(e,o+1)}}this._opts.markOutside&&(t?((0,_.geByClass)("ui_gallery_item_outside",this._inner).forEach((e=>{(0,_.removeClass)(e,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((i!==this._outside.left||!s)&&this._outside.left>=0&&((0,_.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(l!==this._outside.right||!u)&&this._outside.right>=0&&((0,_.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),s&&i!==this._outside.left&&((0,_.addClass)(this._items[i],"ui_gallery_item_outside"),this._outside.left=i),u&&l!==this._outside.right&&((0,_.addClass)(this._items[l],"ui_gallery_item_outside"),this._outside.right=l))}if(!this._opts.noArrows){const t=e>0,o=e+this._width<this._inner.scrollWidth;(0,_.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?o:t),(0,_.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?t:o)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}}_onArrowMouseOver(e){this._inner.classList.add(`ui_gallery__inner_shift_${e}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){const o=t>=0&&t<this._items.length?this._items[t]:null;e.forEach((e=>{o?(0,_.domInsertBefore)(e,o):this._inner.appendChild(e)})),this.refresh()}}destroy(){(0,s.removeEvent)(this._innerCont),(0,s.removeEvent)(this._leftArrow),(0,s.removeEvent)(this._rightArrow),(0,_.domData)(this._el,"gallery-id",null),delete c().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,_.re)(this._el)}removeItem(e){return(0,i.isNumeric)(e)&&(e=this._items[e]),!(!e||!(0,a.inArray)(e,this._items))&&((0,_.re)(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(e){this._opts.isModernTransitionsEnabled?this._slide(e,void 0,{eventName:"bullet"}):this._legacySlide(e,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((e,t)=>[e,this._visible.left+t]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(!(e=(0,_.ge)(e)).classList.contains(l.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const o=function(e){const t=(0,_.domData)((0,_.ge)(e),"gallery-id");return t&&c().galleries[t]}(e);if(o)return o;this._opts=(0,a.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},t),this._id=c().incIndex,c().incIndex+=1,this._el=e,this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemOffset=(0,a.intval)((0,_.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,a.intval)((0,_.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,_.geByClass1)(l.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,_.geByClass1)(l.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){const t=(0,_.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>');(0,_.ge)("content").appendChild(t);const o=t.scrollLeft;e.rtl=vk.rtl,e.backward=o>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===o?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,(0,_.re)(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,_.domData)(this._el,"gallery-id",this._id),c().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},5355:(e,t,o)=>{"use strict";o.d(t,{Gifts:()=>f});var n=o(34788),i=o(1959),r=o(3895),s=o(44734),a=o(96041),_=o(39586),l=o(23434),c=o(82753),u=o(51986),d=o(56559),p=o(76810),h=o(74701),m=o(25263);const f={deleteGift:function(e,t,o,n={}){window.ajax.post("al_gifts.php",{act:"delete",mid:n.mid,gift:o,hash:n.hash},{onDone:function(e){const o=(0,c.ge)("gift"+t);var n;o&&((0,c.domNS)((0,c.domFC)(o))?(0,c.domNS)((0,c.domFC)(o)).innerHTML=e:(o.appendChild((0,c.ce)("div",{className:"gift_deleted",innerHTML:e})),(0,c.hide)((0,c.domFC)(o)),window.Pagination&&!(0,l.curBox)()&&window.Pagination.recache(-1)),(0,m.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module&&(null==(n=window.Profile)||n.updateGiftBlock()))},showProgress:()=>{e.classList.add("gift_delete--loading"),e.innerHTML="",e.appendChild((0,c.ce)("div",{className:"gift_delete__spinner",innerHTML:(0,p.getIcon16Spinner)().icon}))},hideProgress:()=>{e.classList.remove("gift_delete--loading"),e.innerHTML=(0,h.getIcon16Cancel)().icon}})},restoreGift:function(e,t,o,n){n=n||{},ajax.post("al_gifts.php",{act:"restore",mid:n.mid,gift:o,hash:n.hash},{onDone:function(){const e=(0,c.ge)("gift"+t);var o;e&&(0,c.domNS)((0,c.domFC)(e))&&((0,c.re)((0,c.domNS)((0,c.domFC)(e))),(0,c.show)((0,c.domFC)(e)),(0,m.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module&&(null==(o=window.Profile)||o.updateGiftBlock()))}})},markSpamGift:function(e,t,o,n){n=n||{},ajax.post("al_gifts.php",{act:"mark_spam",mid:n.mid,gift:o,hash:n.hash},{onDone:function(e){(0,c.ge)("gift_mark_spam"+t).innerHTML=e}})},initGiftsBox:function(e,t){e.setOptions({width:638,bodyStyle:"padding: 0",grey:!0,hideButtons:!0,onShow:function(){cur.gftbxWasScroll&&(boxLayerWrap.scrollTop=cur.gftbxWasScroll,cur.gftbxWasScroll=!1)}}),t.lang&&(cur.lang=(0,_.extend)(cur.lang||{},t.lang)),(0,_.extend)(cur,{gftbxOffset:t.offset,gftbxAutoload:!0,gftbxWasScroll:!1,gftbxMid:t.mid}),ajax.preload("al_gifts.php",{act:"box",mid:t.mid,offset:t.offset},t.preload),window.uiScrollBox&&window.uiScrollBox.init(e,{onShow:function(){(0,a.addEvent)(boxLayerWrap,"scroll",f.onGiftsScroll),setTimeout(cur.chooseAudioScroll,0)},onHide:function(){(0,a.removeEvent)(boxLayerWrap,"scroll",f.onGiftsScroll)}}),(0,a.addEvent)(boxLayerWrap,"scroll",f.onGiftsScroll);const o=boxLayerWrap.scrollTop;(0,c.elfocus)((0,c.geByClass1)("_scroll_node",e.bodyNode)),boxLayerWrap.scrollTop=o,onBodyResize(),f.onGiftsScroll()},moreGifts:function(){const e=(0,c.ge)("gifts_more_link");(0,i.buttonLocked)(e)||(ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{onDone:function(t,o,n){const i=(0,c.ce)("div",{innerHTML:t}),r=(0,c.ge)("gifts_rows");if(r){for(let e=(0,c.domFC)(i);e;e=(0,c.domFC)(i))r.appendChild(e);cur.gftbxOffset=o,n?f.preloadGifts():(0,c.hide)(e)}},showProgress:i.lockButton.pbind(e),hideProgress:i.unlockButton.pbind(e),cache:1}),cur.gftbxAutoload=!0)},preloadGifts:function(){ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{cache:1})},onGiftsScroll:function(){if(!cur.gftbxAutoload)return;const e=lastWindowHeight,t=(0,c.ge)("gifts_more_link");(0,c.isVisible)(t)&&e>(0,c.getXY)(t,!0)[1]&&t.click()},showGiftBox:function(e,t,o){return window.Profile?window.Profile.showGiftBox(e,t,o):(cur.gftbxWasScroll=boxLayerWrap.scrollTop,boxLayerWrap.scrollTop=0,cur.viewAsBox?cur.viewAsBox():!(0,s.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,fr:e==vk.id?1:0,ref:o},{stat:["gifts.css",window.jsc("web/wide_dd.js"),"wide_dd.css"],cache:1},t))},processBoxOptions(e,t){-1e3!=t&&t&&(requestAnimationFrame((()=>{(0,l.hideBoxLoader)()})),(0,_.extend)(cur,{paymentsOfferPreview:t.paymentsOfferPreview,paymentsPreload:t.paymentsPreload,paymentsAppOrder:t.paymentsAppOrder,paymentsOfferPreload:t.paymentsOfferPreload}),t.orderData&&d.AppOrderBox.initialize(t.orderData.orderId,t.orderData.appId,t.orderData.testMode,t.orderData.hash,t.orderData.votes,t.orderData.discount,t.orderData.billPeriod),(0,_.extend)(cur,{paymentsAuthPayment:t.paymentsAuthPayment,paymentsOrderNotice:t.paymentsOrderNotice,paymentsTryCompleteOrder:t.paymentsTryCompleteOrder,isPaymentsAppOrder:t.isPaymentsAppOrder,paymentsOfferApp:t.paymentsOfferApp,checkoutEnabled:t.checkoutEnabled}),t.showProgress&&u.PaymentsBox.showProgress(""),(0,_.extend)(cur,{votesAmountsData:t.votesAmountsData,paymentsPreferVotes:t.paymentsPreferVotes,votesTypeInit:t.votesTypeInit,psList:t.psList,paymentsWideBox:t.paymentsWideBox,paymentsTooltips:t.paymentsTooltips,paymentsChangeType:0===t.paymentsWideBox?(0,r.getLang)("payments_go_change_pay_type"):"",payments_get_votes:(0,r.getLang)("payments_get_votes_new"),getVotesDoneHide:!0,paymentsWaitingCache:{},isPaymentComplete:!1,isPaymentAttemted:!1,usdRate:t.usdRate,paymentsHash:t.paymentsHash,paymentComplete:u.PaymentsBox.complete,paymentCanceled:u.PaymentsBox.paymentCanceled,paymentsShowProgress:u.PaymentsBox.showProgress,statSessionId:t.statSessionId}),u.PaymentsBox.initialize(e),cur.checkoutEnabled||(u.PaymentsBox.initPhoneCountry(t.countries,t.country),u.PaymentsBox.initPhoneNumber((0,c.ge)("phone"))),(0,_.extend)(cur,{paymentsTypesSum:t.paymentsTypesSum,instantNeedCVV:t.instantNeedCVV,votesType:t.votesType,paymentsWPreload:t.paymentsWPreload,isNewSizeCheckout:t.isNewSizeCheckout,isHideButtonBackAndText:t.isHideButtonBackAndText}),t.getVotesAmountsOnDone&&u.PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsWPreload))},showGetMoneyBox(e=null){return(0,s.showBox)("al_gifts.php",(0,n._)({act:"get_money"},e),{onDone:this.processBoxOptions})}}},17622:(e,t,o)=>{"use strict";function n(e){const t=e.getBoundingClientRect(),o=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||o.scrollTop,r=window.pageXOffset||n.scrollLeft||o.scrollLeft,s=n.clientTop||o.clientTop||0,a=n.clientLeft||o.clientLeft||0;return{top:Math.round(t.top+i-s),left:Math.round(t.left+r-a),width:e.offsetWidth,height:e.offsetHeight}}o.d(t,{default:()=>n})},16652:(e,t,o)=>{"use strict";o.d(t,{showJoinBox:()=>r,showQuickLoginBox:()=>i});o(86812),o(77995),o(73359),o(82079),o(96041),o(1959);var n=o(44734);o(46944),o(3895),o(39586),o(82753),o(68312),o(56121),o(79937),o(27095),o(28959),o(76669),o(36181),o(44151),o(46026),o(48041);function i(e){const t={act:"box"};return e&&(t.flow_source=e),(0,n.showBox)("al_login.php",t),!1}function r(e){const t={act:"box",from:window.nav.strLoc};return e&&(t.flow_source=e),(0,n.showBox)("join.php",t),!1}},16768:(e,t,o)=>{"use strict";o.d(t,{vkIndexer:()=>i});var n=o(34892);function i(e,t,o){this.list=e,this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=o||function(){},this.prepareFunc=t||function(e){return e},setTimeout(this.indexIteration.bind(this),10)}i.prototype.delimiter=i.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),i.prototype.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),i.prototype.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},i.prototype.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},i.prototype.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},i.prototype.indexIteration=function(){let e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;for(;t<e;t++){let e=this.list[t];try{e._order=t}catch(e){}this.add(e)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},i.prototype.strToPrefixes=function(e){let t={},o=(0,n.winToUtf)(e).toLowerCase().split(this.delimiter),i=o.length;for(;i--;){let e=o[i],n="";if(e){for(let t=0;t<6;t++){let o=e.charCodeAt(t);if(o){let i=this.toTranslit[o],r=e.substr(t,1);n+=null!=i?i:r}}t[n]=1}}return t},i.prototype.strToSearchPrefixes=function(e){let t=[],o=e.toLowerCase().split(this.delimiter),n=o.length;for(;n--;){let e={},i=o[n],r="",s="",a="",_=i.length>1;if(i){for(let e=0;e<6;e++){let t=i.charCodeAt(e);if(t){let o=this.toTranslit[t],n=i.substr(e,1);if(r+=null!=o?o:n,_){let e=this.toLocalCase[n],o=this.toLocalTranslit[t];s+=null!=e?e:n,a+=null!=o?o:n}}}e[r]=1,_&&(e[s]=2,e[a]=3),t.push(e)}}return t},i.prototype.toIndexTree=function(e,t){let o=this.index;for(let t=0;t<6;t++){let n=e.substr(t,1)||-1;o=o[n]?o[n]:o[n]=5==t?[]:{}}o.push(t)},i.prototype.remove=function(e){let t=this.prepareFunc(e),o=this.strToPrefixes(t);for(let t in o)if(o.hasOwnProperty(t)){let o=this.index;for(let e=0;e<6;e++){let n=t.substr(e,1)||-1;if(!o[n])break;o=o[n]}if(o.length)for(let t in o)if(this.equals(o[t],e)){o.splice(t,1);break}}},i.prototype.equals=function(e,t){for(let o in e)if(e.hasOwnProperty(o))switch(typeof e[o]){case"object":if(!this.equals(e[o],t[o]))return!1;break;case"function":if(void 0===e[o]||e[o].toString()!=t[o].toString())return!1;break;default:if(e[o]!=t[o])return!1}for(let e in t)if(void 0===t[e])return!1;return!0},i.prototype.intersect=function(e,t){let o=[];if((0,n.isNumeric)(e[0])||(0,n.isNumeric)(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)e[0]._order<t[0]._order?e.shift():(e[0]._order>t[0]._order||this.equals(e[0],t[0])&&o.push(e.shift()),t.shift());return o},i.prototype.add=function(e){let t=this.prepareFunc(e),o=this.strToPrefixes(t);for(let t in o)o.hasOwnProperty(t)&&this.toIndexTree(t,e)},i.prototype.search=function(e){let t=this.index,o=this.strToSearchPrefixes(e),n=[],i=!1;for(let e in o)if(o.hasOwnProperty(e)){if(i&&!n)break;let r=this.localSearch(o[e],0,t);r.sort((function(e,t){return e._order-t._order})),n=i?this.intersect(n,r):r,i=!0}let r=n[0],s=n.length+1,a=[];for(let e=1;e<s;e++){let t=n[e];t!=r&&(a.push(r),r=t)}return a},i.prototype.localSearch=function(e,t,o){if(!o)return[];let n={};for(let o in e)if(e.hasOwnProperty(o)){const e=o.substr(t,1)||-1;n[e]||(n[e]={}),n[e][o]=1}if(6==t++||!o)return o;let i=[];for(let e in n)if(-1==e)for(let r in o)o.hasOwnProperty(r)&&i.push.apply(i,this.localSearch(n[e],t,o[r]));else{let r=this.localSearch(n[e],t,o[e]);i.push.apply(i,r)}return i}},11575:(e,t,o)=>{"use strict";o.d(t,{__adsUpdate:()=>_,updSeenAdsInfo:()=>a});var n=o(82079),i=o(39586),r=o(82753),s=o(66925);function a(){if(!((0,r.getXY)("ads_left",!0)||{})[1]||!vk.id)return;const e=(0,s.getLeftMenuHeight)(),t=Math.max(Math.floor(((window.lastWindowHeight||0)-e-42-10)/260),0),o=(0,n.getCookie)("remixseenads");window.__seenAds=(0,i.intval)(o),o&&__seenAds===t||(window.__seenAds=t,(0,n.setCookie)("remixseenads",t,30))}function _(e){if(window.noAdsAtAll)return!1;_=function(){window.AdsLight&&AdsLight.updateBlock.apply(AdsLight.updateBlock,arguments)},window.stManager.add([window.jsc("web/ads_light.js")],_.pbind(e))}window.__adsLoaded=(0,i.vkNow)()},35989:(e,t,o)=>{"use strict";o.d(t,{AjaxCacheClient:()=>s});var n=o(34788),i=o(39586),r=o(65076);class s{static getInstance(e,t){const o=s.makeCacheKey(e,t);return s._instances[o]||(s._instances[o]=new s(o)),s._instances[o]}getFromCache(e,t,{cacheLevel:o=0,forceGlobalCache:n=!1,onAnswerProcessed:r=(()=>{})}){if(o>0||n){let s=window.ajaxCache[this._cacheKey];if(s&&s._loading)return s._callbacks.push(e),!1;if(s&&!n)return e(0,s),3===o&&delete window.ajaxCache[this._cacheKey],!1;if(s=window.globalAjaxCache[this._cacheKey],s)return-1===s||(0,i.isFunction)(s)?window.globalAjaxCache[this._cacheKey]=t:t.apply(window,s),r&&r(),!1}return window.ajaxCache[this._cacheKey]={_loading:1,_callbacks:[]},!0}processExistingCache(e,t){const o=window.ajaxCache[this._cacheKey];o&&o._loading&&(setTimeout((function(){for(const n in o._callbacks)o._callbacks.hasOwnProperty(n)&&o._callbacks[n](e,t)}),0),delete window.ajaxCache[this._cacheKey])}cacheResponse(e){window.ajaxCache[this._cacheKey]=e}static ensureCachesInitialized(){window.ajaxCache||(window.ajaxCache={}),window.globalAjaxCache||(window.globalAjaxCache={})}static makeCacheKey(e,t){const o=(0,n._)({},t);return["al","al_ad","ads_section","ads_showed","captcha_sid","captcha_key","_smt","_preload"].forEach((e=>delete o[e])),e+"#"+(0,r.toQueryString)(o)}static preload(e,t,o){s.ensureCachesInitialized(),e&&"/"!==e.substr(0,1)&&(e="/"+e),window.ajaxCache[s.makeCacheKey(e,t)]=o}static invalidate(e,t){s.ensureCachesInitialized(),void 0===e?window.ajaxCache={}:delete window.ajaxCache[s.makeCacheKey(e,t)]}static invalidateFor(e){Object.keys(window.ajaxCache).forEach((t=>{e(t)&&delete window.ajaxCache[t]}))}constructor(e){s.ensureCachesInitialized(),this._cacheKey=e}}s._instances={}},50869:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FrameTransport:()=>FrameTransport});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(34788),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65076),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39586),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12111),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(24915),_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82753),_shared_lib_site__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(20562),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48041);const _queueStartMarker={type:"start"},_queueEndMarker={type:"end"};class FrameTransport{setHandlers(e=(()=>{}),t=(()=>{}),o=(()=>{})){this._onEnd=e,this._onModuleEvaluated=t,this._debug=o}setInlineHandler(e){this.execInline=e}run(e,t){return this._debug("Run ",e,this.frameDataQueue),this.frameUrl=e,this.onReady=t,this.fulfilled=!1,this.queueReady=!1,this.frameDataQueue=[_queueStartMarker],clearTimeout(this.frameTimeout),this.frameTimeout=!1,this.frame&&this._cleanup(),this.frame=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:"<iframe></iframe>"}),utilsNode.appendChild(this.frame),this.frame.firstChild.src=this.frameUrl,this}onWindowMessage(e){const t=!("isTrusted"in e)||e.isTrusted;if(!_shared_lib_site__WEBPACK_IMPORTED_MODULE_5__.VK_ORIGIN_REGEX_STRICT.test(e.origin)||!t)return;const{data:{action:o,type:n,data:i}}=e;if("frame_transport"===n&&"use_meta"===o)this.useMeta(i)}useMeta(e){this._debug("Metainfo: ",e),this.onReady(e)}useAjaxBlock(e,t,o){this._debug("Ajax block: ",e,t,o,this.fulfilled,this.frameDataQueue),this.fulfilled||(this.frameDataQueue.push(FrameTransport._makeQueueBlock(e,t,o)),1===this.frameDataQueue.length&&this._nextQueueItem())}finalize(e,t){this._debug("Finalize: ",e),this._cleanup(),e&&this.frameDataQueue.push(FrameTransport._makeQueueBlock(!1,!1,e,t)),this.queueReady=!0,this.frameDataQueue.push(_queueEndMarker),window.cur.onFrameBlocksDone&&window.cur.onFrameBlocksDone(),this._onEnd&&this._onEnd((new Date).getTime())}_nextQueueItem(){if(this.frameTimeout&&clearTimeout(this.frameTimeout),!this.queueReady)return void(this.frameTimeout=setTimeout((()=>this._nextQueueItem()),100));if(this._debug("Next queue item: ",this.fulfilled,this.frameDataQueue),this.fulfilled||0===this.frameDataQueue.length)return void(this.frameTimeout=!1);const e=this.frameDataQueue.shift();switch(e.type){case _queueStartMarker.type:this._nextQueueItem();break;case _queueEndMarker.type:this.fulfilled=!0;break;default:this.frameTimeout=setTimeout((()=>this._onReceived(e)),0)}}_onReceived(e){const t=(t,o)=>{if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_6__.partConfigEnabled)("new_frame_transport_eval_sentry_log")){var n;const e=(null==(n=t)?void 0:n.message)||"Unknown error in eval";let i="<b>JavaScript error</b>"+((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_6__.partConfigEnabled)("extended_client_logging")?": "+e:"");t.stack&&__debugMode&&(i+="<br/>"+t.stack.replace(/\n/g,"<br/>")),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__.topMsg)(i,15,"#FFB4A3"),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__.logEvalError)(t,o,{message:e,breadcrumb:{data:{msg:e,module:(window.cur||{}).module,id:vk.id,host:locHost,lang:vk.lang,loc:(window.nav||{}).strLoc,realloc:location.toString()}}})}else(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__.topError)(t,{dt:15,type:8,url:this.frameUrl,js:o,answer:JSON.stringify(e)}),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__.logEvalError)(t,o)},o=e.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)(e.container);o&&e.html&&(o.firstChild?o.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.cf)(e.html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(o,e.html)),e.js&&(_runJs(e.js,t),this._onModuleEvaluated&&this._onModuleEvaluated(cur.module)),e.params&&"leftads"in e.params&&window.__adsSet&&__adsSet(e.params.leftads,e.params.ads_section||"",e.params.ads_can_show,e.params.ads_showed),this._nextQueueItem()}_cleanup(){this._debug("Cleanup: ",this.frameDataQueue),this.frame&&(this.frame.innerHTML="",utilsNode.removeChild(this.frame),this.frame=null)}abort(){clearTimeout(this.frameTimeout),this.frameTimeout=!1,this._cleanup()}static get frame(){return FrameTransport.__frame||(FrameTransport.__frame=new FrameTransport),FrameTransport.__frame}static request(e,t,o,n,i){const r=FrameTransport.frame;return r.setInlineHandler(i),r.run(FrameTransport.makeUrl(e,t,!(n&&n.noSort)),o)}static _makeQueueBlock(e,t,o,n){return{type:"block",container:e,html:t,js:o,params:n}}static makeUrl(e,t,o=!0){let n=t;return"string"==typeof t&&(n=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.fromQueryString)(t)),n=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)((0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_7__._)({},n,{_rndVer:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.irand)(0,99999)}),!o),e+"?"+n}constructor(){this.frameDataQueue=[],this.frameTimeout=null,this.frame=null,this.queueReady=!1,this.fulfilled=!1,this.execInline=()=>{},this._debug=()=>{},window.addEventListener("message",this.onWindowMessage.bind(this))}}function _runJs(js,onError){const script="(function(){"+js+";})()";if(__debugMode)eval(script);else try{eval(script)}catch(e){onError&&onError(e,script)}}},1774:(e,t,o)=>{"use strict";o.d(t,{activateMobileBox:()=>r,requestBox:()=>i,validateMobileBox:()=>s,validateOtpBox:()=>_,validatePassBox:()=>a});var n=o(44734);function i(e,t,o){return e.setOptions({onDestroy:o}),e.onDone=function(){t&&t.apply(null,arguments)},e}function r(e){return i((0,n.showBox)("activation.php",{act:"activate_mobile_box",hash:e.hash}),(function(){vk.nophone=0,e.onDone()}),e.onFail)}function s(e){return i((0,n.showBox)("activation.php",{act:"validate_box",captcha:e.acceptCaptcha?1:"",skip_push:e.skip_push?e.skip_push:"",from:e.from||"",hash:e.hash,ahash:e.ahash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function a(e){return i((0,n.showBox)("activation.php",{act:"pass_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function _(e){return i((0,n.showBox)("activation.php",{act:"otp_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}},82133:(e,t,o)=>{"use strict";o.d(t,{AjaxProtoJson:()=>i});var n=o(39586);class i{parseResponse(e){let t=this.parseStaticPayload(e);return{navVersion:(0,n.intval)(t.loaderVersion),newStatic:t.static,statsMeta:t.statsMeta,langId:(0,n.intval)(t.langPack),langVer:(0,n.intval)(t.langVersion),langKeys:t.langKeys,templates:t.templates,code:(0,n.intval)(t.payload[0]),payload:t.payload[1],debugLog:t.debugLog,env:t.env,extra:t.extra,execInline:t.execInline}}parseStaticPayload(e,t){let o=e;return e&&"string"==typeof e&&(o=JSON.parse(e)),o.payload&&o.payload[0]>0&&(o.payload[1]=o.payload[1].map((e=>"string"==typeof e?JSON.parse(e):e))),o}}},55878:(e,t,o)=>{"use strict";o.d(t,{ajax:()=>x});var n=o(11010),i=o(34788),r=o(65076),s=o(23434),a=o(34892),_=o(48041),l=o(39586),c=o(82753),u=o(12111),d=o(50869),p=o(35989),h=o(23902),m=o(43014),f=o(82133),g=o(33751),v=o(99203),y=o(54328),E=o(16851),w=o(56329),b=o(44734),A=o(91686);const P="global_reload_app_modal_local_storage_key",I="ajax_request";function T(e){try{var t;return(null==(t=(new DOMParser).parseFromString(e,"text/html").querySelector("title"))?void 0:t.textContent)||e}catch(t){return e}}class O{static post(e,t,o){O._protoAdapter=new f.AjaxProtoJson,e&&"/"!==e.substr(0,1)&&"http"!==e.substr(0,4)&&(e="/"+e);const n=(0,i._)({},o||{},{_captcha:!1,_box:!1,no_ads_params:!1}),r=(0,i._)({},t,{al:n.frame?-1:1}),a=(0,l.vkNow)(),_=vk.spentLastSendTS?Math.round((a-vk.spentLastSendTS)/1e3):0;if(vk.sampleUser>=0&&window.cur&&cur.module&&_>=1&&(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&(r._smt=window.cur.module+":"+_),vk.spentLastSendTS=a),n.progress&&(n.showProgress||(n.showProgress=function(){const e=(0,c.ge)(n.progress);(0,c.hasClass)(e,"pr")&&(0,c.setStyle)(e,"opacity",1),(0,c.show)(e)}),n.hideProgress||(n.hideProgress=function(){const e=(0,c.ge)(n.progress);(0,c.hasClass)(e,"pr")&&(0,c.setStyle)(e,"opacity",0),(0,c.hide)(e)})),n.loader){const e=(0,c.isVisible)(window.boxLayerWrap);n.showProgress=function(){(0,s.boxRefreshCoords)(window.boxLoader),(0,c.show)(window.boxLoader),e||(0,c.show)(window.boxLayerWrap)},n.hideProgress=function(){(0,c.hide)(window.boxLoader),e||(0,c.hide)(window.boxLayerWrap)}}return new O(e,r,n)._post()}_post(){if(!this._query.captcha_sid&&this._options.showProgress&&this._options.showProgress(),window.__adsGetAjaxParams&&!this._options.no_ads_params&&(this._query=(0,i._)({},this._query,window.__adsGetAjaxParams(this._query,this._options))),this._options.stat&&(this._additionalStaticLoader=null,window.stManager.add(this._options.stat,(()=>{this._additionalStaticLoader&&this._additionalStaticLoader(),this._options.stat=!1}))),this._cacheClient&&!this._cacheClient.getFromCache(this.processResponse,this._options.onDone,{cacheLevel:this._options.cache,forceGlobalCache:this._options.forceGlobalCache,onAnswerProcessed:this._options.hideProgress}))return;this._options.resend=(e,t)=>new O(this._url,e,t)._post(),window.debuglogSent?(this._reqid=window.debuglogSent(this._url+(this._query?": "+(0,r.toQueryString)(this._query,this._options.noSort).replace(/&/g,"&amp;"):"")),this._options.frame&&(window._lfrid=this._reqid)):this._reqid=0;const e={};return this._options.timeout&&(e.timeout=this._options.timeout),this._options.onTimeout&&(e.ontimeout=this._options.onTimeout),this._options.frame?d.FrameTransport.request(this._url,this._query,this.onDone,this._options,this._runInlineScript.bind(this)):(0,h.plainpost)(this._url,this._query,this.onDone,this.onFail,!1,e,this._options,!1,(0,_.partConfigEnabled)("extended_ajax_logging")?e=>console.log("+ XHR Transport: "+e):null)}processResponse(e,t,o){if(this._options.cache&&this._cacheClient&&this._cacheClient.processExistingCache(e,t),this._options.stat)return this._options.stat=!1,void(this._additionalStaticLoader=this.processResponse.pbind(e,t));this._options.cache&&!this._options.forceGlobalCache&&!e&&this._cacheClient&&this._cacheClient.cacheResponse(t),this._options.hideProgress&&this._options.hideProgress(),2!==e&&(this._options._captcha&&(this._options._suggest&&(0,c.cleanElems)(this._options._suggest),this._options._captcha=R(this._options._captcha),this._options._suggest=this._options._captcha),this._options._box=R(this._options._box)),o&&this._runInlineScript(o),(0,m.getHandlerByCode)(e)(this._options,t,this._query,this._url)}onFail(e,t){var o,n;if((0,w.processWaf)(t))return;this._options.hideProgress&&this._options.hideProgress(),this._options._suggest&&(0,c.cleanElems)(this._options._suggest);const s=t instanceof XMLHttpRequest?t.status:t;var a;if(this._options._box=R(this._options._captcha,this._options._box),this._options._captcha=this._options._box,this._options._suggest=this._options._captcha,"string"==typeof e&&-1!==e.indexOf("The page is temporarily unavailable")&&__dev&&(0,l.inArray)(vk.id,[100]))this._post();else if(!this._options.ignoreDefaultErrorLogger&&!0!==(null==(o=(n=this._options).onFail)?void 0:o.call(n,e))){const t=(JSON.stringify((0,_.partConfigEnabled)("ajax_request_parse_html_error")?(a=e,"string"==typeof a?T(a):(0,i._)({},a,{data:T(a.data)})):e)||"No error details").substr(0,300),o=this._query.act,n=this._query&&(0,r.toQueryString)(this._query,this._options.noSort),l=this._url,c={message:"Uncaught ajax error",status:s,data:{url:l,query:n}},u=[`url: ${l}`,o&&`act: ${o}`,t&&`text: ${t}`].filter((e=>e)).join(", ");0===c.status&&(0,_.partConfigEnabled)("js_errors_no_write_uncaught_errors")||(0,g.logError)(u,{environment:"uncaughtAjaxRequestError",breadcrumb:c}),__debugMode?console.error("Uncaught Ajax request error:",t,c):console.log("Uncaught Ajax request error:",t,c)}}doReload(e){nav.reload({force:!0,from:e,url:this._url,query:this._query&&(0,r.toQueryString)(this._query)})}onDone(e,t){if((0,w.processWaf)(t||e))return Promise.reject();this._options.frame&&C("OnDone Req:",e);const o=t instanceof XMLHttpRequest?t.status:t;let n;try{n=O._protoAdapter.parseResponse(e)}catch(t){return this.onFail(e,o),Promise.reject()}const{navVersion:i,langId:r,payload:s}=n;return i?vk.version&&String(vk.version)!==String(i)?(i&&s.length>4?this.doReload(2):nav.strLoc?location.replace(a.locBase):(0,u.topError)("Server error.",{type:100}),Promise.reject()):(vk.version=!1,vk.lang!==r&&this._options.canReload?(this.doReload(3),Promise.reject()):M.call(this,n,this._options.canReload)):(this.onFail(`<pre>${e}</pre>`,{status:-1}),Promise.reject())}_runInlineScript(e){const t="__exec_container",o=document.getElementById(t);o&&document.body.removeChild(o);const n=document.createElement("script");n.id=t,n.innerHTML=e,document.body.appendChild(n)}constructor(e,t,o){this._url=e,this._options=(0,i._)({},o),this._query=t,this._additionalStaticLoader=null,this._cacheClient=null,o.local&&(this.onDone=(0,l.vkLocal)(this.onDone),this.onFail=(0,l.vkLocal)(this.onFail),this.processResponse=(0,l.vkLocal)(this.processResponse)),this._options.cache&&(this._cacheClient=p.AjaxCacheClient.getInstance(this._url,this._query)),this.onDone=this.onDone.bind(this),this.onFail=this.onFail.bind(this),this.processResponse=this.processResponse.bind(this)}}function C(){if(!(0,_.partConfigEnabled)("extended_ajax_logging"))return;let e;try{throw new Error}catch(t){e=t.stack}let t="+ Frame transport: "+arguments[0];console.groupCollapsed(t),[].slice.call(arguments,1).forEach((e=>console.log(JSON.stringify(e)))),console.log(e),console.groupEnd()}function M(e,t){return D.apply(this,arguments)}function D(){return D=(0,n._)((function*(e,t){if(!(this instanceof O))throw new TypeError("_preProcessResponse should be called with AjaxRequest instance as this");const{navVersion:o,newStatic:i,statsMeta:s,langId:c,langVer:u,langKeys:d,templates:p,code:h,payload:m,debugLog:f,env:y,extra:w,execInline:T}=e;if((0,_.partConfigEnabled)("webinf_show_force_reload_modal")&&i&&t&&s&&s.reloadVersion&&s.reloadVersion!==window.vk.statsMeta.reloadVersion)try{yield new Promise(((e,t)=>{let o;try{o=JSON.parse(A.vkLocalStorage.getItem(P))||{}}catch(e){o={}}const n=18e5,i=18e4,r=o.date?Date.now()-o.date:Number.POSITIVE_INFINITY;if(!o.state||"reload"===o.state&&r>n||"hidden"===o.state&&r>i){const o=()=>{A.vkLocalStorage.setItem(P,JSON.stringify({date:Date.now(),state:"reload"})),t()},n=()=>{A.vkLocalStorage.setItem(P,JSON.stringify({date:Date.now(),state:"hidden"})),e()},i={title:(0,v.getLang)("global_reload_app_modal_title"),selfDestruct:!1,hideOnBGClick:!1,noCloseButton:!1};new b.MessageBox(i).content((0,v.getLang)("global_reload_app_modal_content")).addButton((0,v.getLang)("global_reload_app_modal_action"),o).show().once("afterHide",n)}else e()}))}catch(e){throw void this.doReload(5)}if(s&&(s.reloadVersion=window.vk.statsMeta.reloadVersion,window.vk.statsMeta=s),d){const{local:e,global:t}=d;(0,v.addLangKeys)(e,window.cur),(0,v.addLangKeys)(t,!0),window.cur.onAfterReset=(t,o)=>{(0,v.addLangKeys)(e,o),delete o.onAfterReset}}let C;if(y&&y.pe&&(window.vk.pe=y.pe),p&&(0,l.addTemplates)(p),yield function(e,t,o,i){return new Promise((0,n._)((function*(n,r){if(!window.stVersions||(0,a.isEmpty)(window.stVersions))n();else try{yield function(e){return new Promise(((t,o)=>{let n,i=50;const r=()=>{if(String(e)!==String(window.stVersions.nav)){if(i--,0===i){const e=new Error("Request timeout loading loader_nav");S(n,e,e.stack),(0,_.partConfigEnabled)("webinf_enable_javascript_type_module")&&t()}setTimeout(r,100*(50-i))}else t()};if(String(e)!==String(window.stVersions.nav))if((0,_.partConfigEnabled)("webinf_enable_javascript_type_module")||(0,_.partConfigEnabled)("webinf_enable_ajax_loader_nav"))(function(e){return k.apply(this,arguments)})(e).then((o=>{o?(n=function(e){const t=window.vk.navPostfix||"",o=window.navMapSection?`&section=${window.navMapSection}`:"";return`/al_loader_nav.php?act=nav_with_json${t}&l=${vk.lang}&v=${e}&f=json${o}`}(e),fetch(n,{credentials:"same-origin"}).then((e=>e.json())).then((e=>{for(const t in e)e.hasOwnProperty(t)&&(window[t]=e[t]);t()})).catch((()=>{const e=new Error("Can't load loader_nav");S(n,e,e.stack),t()}))):t()}));else{n=function(e){const t=window.vk.navDomain||"",o=window.vk.navPostfix||"",n=window.navMapSection?`?section=${window.navMapSection}`:"";return`${t}/js/loader_nav${o}${e}_${vk.lang}.js${n}`}(e);const o=document.createElement("script");o.type=window.vk.scriptType||"text/javascript",o.src=n,o.onerror=()=>{const e=new Error("Can't load loader_nav");S(n,e,e.stack),t()},document.head.appendChild(o),setTimeout(r,0)}else t()}))}(e),yield function(e,t,o){return L.apply(this,arguments)}(t,o,i),n()}catch(e){r(e)}})))}(o,i,c,u),this._options.frame)C=m;else try{C=O._protoAdapter.parseStaticPayload(m,this._reqid),f&&(M=f,D=this._reqid,window.debuglogGot&&window.debuglogGot(D,M))}catch(e){const t={message:"JSON error",data:{answer:m,url:this._url,query:this._query&&(0,r.toQueryString)(this._query)}};(0,g.logError)(e,{environment:I,breadcrumb:t}),console.error(e)}var M,D;this.processResponse(h,C,T),(0,E._handleResponseExtraPayloads)(w),window.cur&&"function"==typeof window.cur.onAfterReset&&delete window.cur.onAfterReset})),D.apply(this,arguments)}function S(e,t,o){(0,g.logError)(t,{environment:I,breadcrumb:{message:String(o),category:"custom",data:{file:e}}}),(0,_.partConfigEnabled)("global_show_resource_fetch_error")&&(0,u.topMsg)(`Some problems with loading <b>${e}</b>...`,5)}function k(){return(k=(0,n._)((function*(e){try{var t;const o=yield fetch("/al_loader_nav.php?act=check",{credentials:"same-origin"}),n=null==(t=yield o.json())?void 0:t.loaderVersion;return String(e)===String(n)}catch(e){throw!1}}))).apply(this,arguments)}function L(){return(L=(0,n._)((function*(e,t,o){const n=["common.css"];if(e){const t=e.split(",");for(let e=0,o=t.length;e<o;++e)n.push(t[e])}if(stVersions.lang<o){stVersions.lang=o;for(const e in StaticFiles)StaticFiles.hasOwnProperty(e)&&/^lang\d/i.test(e)&&n.push(e)}return window.stManager.add(n)}))).apply(this,arguments)}function R(){for(let e=0,t=arguments.length;e<t;++e){const t=arguments[e];t&&t.isVisible()&&(t.setOptions({onHide:!1,onDestroy:!1}),t.hide())}return!1}d.FrameTransport.frame.setHandlers(void 0,(e=>{(0,y.triggerSubscribersOnModuleEvaluated)()}),C);const x={enabled:function(){try{return!!new XMLHttpRequest}catch(e){return!1}}(),plainpost:h.plainpost,post:O.post,promisifiedPost:(e,t,o)=>new Promise(((n,r)=>{O.post(e,t,(0,i._)({},o,{onDone:(...e)=>{n(e)},onFail:e=>{var t;return r(e),!!(null==(t=o)?void 0:t.ignoreDefaultErrorLogger)},onTimeout:()=>{r("timeout")}}))})),framepost:d.FrameTransport.request,request:h.request,preload:p.AjaxCacheClient.preload,invalidate:p.AjaxCacheClient.invalidate,AjaxRequest:O,AjaxCancellationToken:h.AjaxCancellationToken,frame:d.FrameTransport.frame,_framenext:()=>d.FrameTransport.frame._nextQueueItem()}},43014:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{getHandlerByCode:()=>getHandlerByCode});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(34788),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65076),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3895),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96041),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39586),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(44734),_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(82753),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(24915),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(12111),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(23434),_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5355),_modal_box__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1774),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(48041),_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(52224),_authFailed__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(30586),_web_captcha_showCaptchaPopup__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(43537);function emailNotConfirmed(e,t){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({width:520,title:t[0],onDestroy:e.onFail},t[1])}function showCaptcha(e,t,o){2===(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1])?e._captcha=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showReCaptchaBox)(t[0],t[2],e._captcha,{onSubmit:function(t){const n=(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__._)({},o,{recaptcha:t,captcha_sid:null,captcha_key:null});e.resend(n,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(e))},onDestroy:function(){e.onFail&&e.onFail()}}):(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_11__.partConfigEnabled)("vkcom_audio_captcha_enabled")?(0,_web_captcha_showCaptchaPopup__WEBPACK_IMPORTED_MODULE_13__.showCaptchaPopup)({sid:t[0],is_refresh_enabled:t[2],is_sound_captcha_available:t[3],captcha_img:t[4],captcha_track:t[5],onSubmit:(n,i)=>{e.resend((0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__._)({},o,{captcha_sid:t[0],captcha_key:n,is_sound_captcha:i}),(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(e))},onClose:()=>{e.onFail&&e.onFail()}}):e._captcha=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showCaptchaBox)(t[0],(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1]),e._captcha,{onSubmit:function(t,n){const i=(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__._)({},o,{captcha_sid:t,captcha_key:n});e.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(e))},onDestroy:function(){e.onFail&&e.onFail()}},t[2]),e._suggest=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("phone_validation_link",e._captcha.bodyNode),e._suggest&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(e._suggest,"click",(function(){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateMobileBox)({onDone:e._captcha.submit})}))}const mobileValidationRequired=e=>(t,o,n)=>{t._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateMobileBox)({acceptCaptcha:11===e,onDone:function(e,o){vk.nophone=0,e&&(t._captcha=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)());const i=e?(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__._)({},n,{captcha_sid:e,captcha_key:o}):n;t.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(t))},onFail:t.onFail,hash:o[0],ahash:o[1]})};function passwordValidationRequired(e,t,o){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validatePassBox)({onDone:()=>e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function makeRedirect(e,t){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1])?nav.go(t[0],!1,{nocur:"2"===t[1],noback:!0===t[1],showProgress:e.showProgress,hideProgress:e.hideProgress}):(hab.stop(),location.href=t[0])}function reload(e,t,o,n){nav.reload({force:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[0]),from:1,url:n,query:o&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(o)})}function mobileActivationRequired(e,t,o){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.activateMobileBox)({onDone:e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function showMessage(e,t){e.onFail&&e.onFail(),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__.topMsg)(t[0],10)}function showError(e,t,o,n){e.onFail&&e.onFail(t[0])||(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__.topError)(t[0]+(t[2]?" #"+t[2]:""),{dt:t[1]?0:10,type:4,url:n,query:o&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(o)})}function otpBox(e,t,o){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateOtpBox)({onDone:()=>e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_15__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function votesPayment(e,t,o){var n;if(window.cur.paymentSuccess=!1,(e.fromBox||e.forceDone)&&(e.onDone&&e.onDone.apply(window,t),e.fromBox))return;e._box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(t[0])},t[1]),(null==(n=t[3])?void 0:n.countries)&&!cur.votesBoxOptions&&(cur.votesBoxOptions=t[3]),cur.votesBoxOptions&&(_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_9__.Gifts.processBoxOptions(e._box,cur.votesBoxOptions),cur.votesBoxOptions=null);const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.clone)(e),{showProgress:e._box.showProgress,hideProgress:e._box.hideProgress});e.cache&&(i.cache=-1),e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.requestBox)(e._box,(function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.isVisible)(e._box.progress)||(t||(t={_votes_ok:1}),e.resend((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)(o,t),i))}),e.onFail),e._box.evalBox(t[2])}function zeroZone(e,t,o){e._box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:t[0]||(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__.getLang)("global_charged_zone_title"),onHide:e.onFail},t[1],(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__.getLang)("global_charged_zone_continue"),(function(){e.resend((0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__._)({},o,{charged_confirm:t[3]}),e)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__.getLang)("global_cancel"))}function evalCode(options,answer){const evalString=`(function(){${answer[0]};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(e,evalString)}}const defaultHandler=e=>(t,o)=>{if(-1===e||-2===e||-3===e){const t=o.pop(),n=o.pop(),i=o.pop();let r;-3===e&&(r=o.pop()),window.__adsSet&&__adsSet(i,null,n,t,null,r)}t.onDone&&t.onDone.apply(window,o)};function getHandlerByCode(e){switch(e){case 1:return emailNotConfirmed;case 2:return showCaptcha;case 3:return _authFailed__WEBPACK_IMPORTED_MODULE_12__.authFailed;case 4:return makeRedirect;case 5:return reload;case 6:return mobileActivationRequired;case 7:return showMessage;case 8:return showError;case 9:return votesPayment;case 10:return zeroZone;case 11:case 12:return mobileValidationRequired(e);case 13:return evalCode;case 14:return otpBox;case 15:return passwordValidationRequired;default:return defaultHandler(e)}}},23902:(e,t,o)=>{"use strict";o.d(t,{AjaxCancellationToken:()=>_,plainpost:()=>l,request:()=>c});var n=o(65076),i=o(44273),r=o(39586),s=o(48041),a=o(56329);class _{_setCancelCb(e){this._cancel=e}cancel(){this._cancel&&this._cancel()}}function l(e,t,o,i,r,a,_,l=!1,u=null){if(t.act&&(0,s.partConfigEnabled)("force_act_in_get_params")){let o={},i=e,r="";e.includes("?")&&([i,r]=e.split("?"),o=(0,n.fromQueryString)(r)),o.act=t.act,e=`${i}?${(0,n.toQueryString)(o,!0)}`}let d=c(e,t,{xhrOptions:a,sortQueryStringParams:_&&!_.noSort,headers:_&&_.headers,noExtraHeaders:l,urlOnly:r,cancellationToken:_&&_.cancellationToken,logger:u}),p=d._getXhr();return d.then((e=>o&&o(e.data,p.status))).catch((e=>i&&i(e,p.status))),p}function c(e,t,{xhrOptions:o,headers:s=null,urlOnly:_=!1,sortQueryStringParams:l=!0,noExtraHeaders:c=!1,cancellationToken:u=null,logger:d=null}){let p;d&&(p=(0,i.crc32)(e+JSON.stringify(t)),d(`Initialized request #${p} with URL ${e} and query ${JSON.stringify(t)}`));const h=new XMLHttpRequest;u&&u._setCancelCb((()=>{d&&d(`Aborting request #${p}`),h.abort()}));let m=new Promise((function(i,u){const m="string"!=typeof t?(0,n.toQueryString)(t,!l):t;h.onreadystatechange=function(){if((0,a.processWaf)(h))h.abort();else if(h.readyState===XMLHttpRequest.DONE)if(d&&d(`Request readyState -> DONE with status ${h.status} #${p}`),h.status>=200&&h.status<300)try{i({data:h.responseText,code:h.status}),d&&d(`Success handler finished for request #${p}`)}catch(e){d&&d(`Success handler failed for request #${p}`),u({data:h.responseText,code:-1}),d&&d(`Failure handler finished for request #${p} [1]`)}else u({data:h.responseText,url:e,act:t.act,code:h.status}),d&&d(`Failure handler finished for request #${p} [2]`)};try{d&&d(`Starting request #${p}`),h.open("POST",e,!0)}catch(e){d&&d(`Request #${p} failed`),u({data:e,code:-1}),d&&d(`Failure handler finished for request #${p} [3]`)}s&&Object.keys(s).forEach((e=>{h.setRequestHeader(e,s[e])})),o&&(0,r.each)(o,(function(e,t){h[e]=t})),_||(h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c||h.setRequestHeader("X-Requested-With","XMLHttpRequest")),d&&d(`Sending data for request #${p}`),h.send(m)}));return m._getXhr=()=>h,m}},86136:(e,t,o)=>{"use strict";o.d(t,{cancelStackFilter:()=>r,cancelStackPop:()=>a,cancelStackPush:()=>s});var n=o(99951);function i(){return window.cancelStack||[]}function r(e,t){const o=i();return t&&(0,n.topHeaderClearClose)(),window.cancelStack=o.filter((t=>t.name!==e)),window.cancelStack}function s(e,t,o){return o&&(0,n.topHeaderClose)((function(o){t(o),r(e)})),window.cancelStack=r(e).concat([{func:t,name:e,dclick:o}]),window.cancelStack}function a(e){const t=i();(0,n.topHeaderClearClose)(),t.length>0&&t.pop().func(e);const o=t[t.length-1];return o&&o.dclick&&(0,n.topHeaderClose)((function(){o.func(e),r(o.name)})),window.cancelStack=t,window.cancelStack}},38764:(e,t,o)=>{"use strict";o.d(t,{copyToClipboard:()=>n._copyWithFakeElement});o(38162),o(39586),o(96041),o(82753);var n=o(9274)},86812:(e,t,o)=>{"use strict";o.d(t,{formatTime:()=>i,getLastDay:()=>a,getServerTime:()=>r,isLeapYear:()=>s,leadingZero:()=>n});o(99203),o(39586);function n(e){return e>=10?e:"0"+e}function i(e,t){let o;e=Math.max(e,0);const n=Math.floor(e%60);o=n<10?"0"+n:n;const i=(e=Math.floor(e/60))%60;return o=i+":"+o,((e=Math.floor(e/60))>0||t)&&(i<10&&(o="0"+o),o=e+":"+o),o}function r(){return vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)}function s(e){return(e=parseInt(e))%4==0&&e%100!=0||e%400==0}function a(e,t){return 2==+t?s(e)?29:28:t>0&&(t<8&&t%2==0||t>7&&t%2==1)?30:31}},13870:(e,t,o)=>{"use strict";o.d(t,{ElementTooltip:()=>_});var n=o(82753),i=o(39586),r=o(96041),s=o(19338),a=o(52476);class _{_initEvents(e){this._opts.autoShow&&(this._el_me_event=this._onMouseEnter.bind(this),(0,r.addEvent)(e,"mouseenter",this._el_me_event),this._opts.showOnKeyboard&&(this._el_kd_event=t=>{t.target!==e||t.keyCode!==r.KEY.ENTER&&t.keyCode!==r.KEY.SPACE||this.toggle()}),(0,r.addEvent)(e,"keydown",this._el_kd_event)),(this._opts.autoShow||this._opts.autoHide)&&(this._el_ml_event=this._onMouseLeave.bind(this),(0,r.addEvent)(e,"mouseleave",this._el_ml_event)),this._opts.autoShow||this._opts.customShow||(this._el_c_event=()=>{this._isShown&&this._opts.noHideOnClick||this.toggle(!this._isShown)},(0,r.addEvent)(e,"click",this._el_c_event))}_onMouseEnter(e){clearTimeout(this._hto),this._hto=!1,!this._isShown&&this._opts.autoShow&&(clearTimeout(this._reTimeout),this._reTimeout=!1,clearTimeout(this._sto),this._sto=setTimeout(this.show.bind(this),this._opts.delay))}_onMouseLeave(e){this._clearTimeouts(),this._hto=setTimeout(this._hide.bind(this),200)}_onMouseWindowClick(e){if(this._opts.noAutoHideOnWindowClick)return;let t=e.target;for(;t&&t!==this._ttel&&t!==document.body&&t!==this._el;)t=(0,n.domPN)(t);return(0,n.hasClass)(e.target,"_ap_layer__close")||t&&t!==document.body?void 0:(0,i.isFunction)(this._opts.onWindowClick)?(this._opts.onWindowClick(),(0,r.cancelEvent)(e)):(this.hide(!0),(0,r.cancelEvent)(e))}destroy(){let e;this._el_me_event&&(0,r.removeEvent)(this._el,"mouseenter",this._el_me_event),this._el_ml_event&&(0,r.removeEvent)(this._el,"mouseleave",this._el_ml_event),this._el_c_event&&(0,r.removeEvent)(this._el,"click",this._el_c_event),this._el_kd_event&&(0,r.removeEvent)(this._el,"keydown",this._el_kd_event),this._clearTimeouts(),(0,n.removeData)(this._el,"ett"),(0,n.re)(this._ttel),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick),this._ttel&&(e=(0,n.geByClass1)("_eltt_content",this._ttel)),this._opts.onDestroy&&this._opts.onDestroy(e)}hide(e){this._hide(e)}_onTooltipMouseEnter(e){this._clearTimeouts()}_onTooltipMouseLeave(e){this._onMouseLeave()}build(){if(!this._ttel){const e=this._opts.withCloseButton?"eltt_with_close_button":"";this._ttel=(0,n.se)(`\n        <div class="eltt ${this._opts.cls||""} ${e}" id="${this._opts.id}">\n          <div class="eltt_arrow_back _eltt_arrow_back">\n            <div class="eltt_arrow"></div>\n          </div>\n          <div class="eltt_content _eltt_content"></div>\n        </div>`),this._ttArrowEl=(0,n.geByClass1)("_eltt_arrow_back",this._ttel);const t=(0,n.geByClass1)("_eltt_content",this._ttel);if(this._opts.content&&((0,i.isString)(this._opts.content)?t.innerHTML=this._opts.content:t.appendChild(this._opts.content)),this._opts.withCloseButton){const e='\n          <div class="eltt_close_button"></div>\n        ';this._ttel.insertAdjacentHTML("beforeend",e),this._closeButton=this._ttel.lastElementChild;const t=e=>{e.stopPropagation(),this.hide(),this._opts.onCloseButtonClick&&this._opts.onCloseButtonClick()};this._closeButton.addEventListener("click",t),cur.destroy.push((()=>this._closeButton.removeEventListener("click",t)))}this._appendToEl&&this._appendToEl.appendChild(this._ttel),this._opts.onClick&&(this._ttel.addEventListener("click",this._opts.onClick),window.cur.destroy.push((()=>this._ttel.removeEventListener("click",this._opts.onClick))))}}show(){if(this._isShown)return void this.updatePosition();if(this._clearTimeouts(),this._ttel||(this.build(),(this._opts.autoShow||this._opts.autoHide)&&(this._ev_ttenter=this._onTooltipMouseEnter.bind(this),this._ev_ttleave=this._onTooltipMouseLeave.bind(this),(0,r.addEvent)(this._ttel,"mouseenter",this._ev_ttenter),(0,r.addEvent)(this._ttel,"mouseleave",this._ev_ttleave))),this._opts.width){const e=(0,i.isFunction)(this._opts.width)?this._opts.width.call(this):this._opts.width;(0,n.setStyle)(this._ttel,"width",e)}(0,n.show)(this._ttel);const e=(0,n.geByClass1)("_eltt_content",this._ttel);this._opts.onFirstTimeShow&&!this._firstTimeShown&&this._opts.onFirstTimeShow.call(this,e,this._ttel),this._opts.onShow&&this._opts.onShow(e,!this._firstTimeShown),this._firstTimeShown=!0,this.updatePosition(),this._isShown=!0,this._el.setAttribute("aria-expanded","true"),this._visTO=setTimeout(n.addClass.pbind(this._ttel,"eltt_vis"),10),this._opts.elClassWhenShown&&(0,n.addClass)(this._el,this._opts.elClassWhenShown),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick),this._ev_wclick=this._onMouseWindowClick.bind(this),(0,r.addEvent)(document,"mousedown",this._ev_wclick)}static getType(e){switch(e){case"top":case"bottom":return _.TYPE_VERTICAL;case"right":case"left":return _.TYPE_HORIZONTAL}}getOptions(){return this._opts}updatePosition(){let e=this._opts.forceSide,t=!!this._opts.getTargetBoundingBox&&this._opts.getTargetBoundingBox(this);if(!t){const e=(0,n.getXY)(this._el),o=(0,n.getSize)(this._el);t={left:e[0],top:e[1],width:o[0],height:o[1]}}const o=this._opts.getWrapEl?this._opts.getWrapEl(this):(0,n.gpeByClass)("audio_layer_container",this._ttel),r=o||(0,n.domClosestOverflowHidden)(this._ttel),l=r!==document.body?(0,n.getXY)(r):[(0,s.scrollGetX)(),(0,s.scrollGetY)()+(0,a.getPageHeaderHeight)()],c=r!==document.body?(0,n.getSize)(r):[window.innerWidth,window.innerHeight],u=(0,n.getSize)(this._ttel),d=this._arrowSize,p=this._opts.noBorder?0:1,h=(0,i.isFunction)(this._opts.offset)?this._opts.offset():this._opts.offset;let m;const f=(e,o)=>{const i={},r=[vk.rtl?"marginRight":"marginLeft","marginTop"].indexOf(e);let s;s=this._opts.align===(vk.rtl?_.ALIGN_LEFT:_.ALIGN_RIGHT)?u[r]-Math.max(p+d+(o||0),Math.min(u[r],t[r?"height":"width"])/2):this._opts.align===(vk.rtl?_.ALIGN_RIGHT:_.ALIGN_LEFT)?Math.max(p+d+(o||0),Math.min(u[r],t[r?"height":"width"])/2):u[r]/2,i[e]=Math.floor(s)-p-d-(o||0),this._opts.onSetArrowPosition(i),(0,n.setStyle)(this._ttArrowEl,i)};if(this._opts.setPos)m=this._opts.setPos(this)||{},_.getType(e)===_.TYPE_VERTICAL?void 0!==m.arrowPosition?(0,n.setStyle)(this._ttArrowEl,{marginLeft:m.arrowPosition}):vk.rtl?f("marginRight"):f("marginLeft"):void 0!==m.arrowPosition?(0,n.setStyle)(this._ttArrowEl,{marginTop:m.arrowPosition}):f("marginTop");else{if(!e&&this._prevSide&&this._opts.preventSideChange)e=this._prevSide;else if(!e)if(this._opts.type===_.TYPE_VERTICAL){const o=document.body.classList.contains("body_im")?this._opts.bottomGap||60:this._opts.bottomGap||0,n=t.top-l[1]>u[1]+d-h[1],i=(0,s.scrollGetY)()+c[1]-(t.top+t.height+d)-o>u[1];e="top"===this._opts.defaultSide?n?"top":"bottom":i?"bottom":"top"}else e=t.left-l[0]<u[0]?"right":"left";let o,i,r,a,p,m,g=(0,n.getXY)(this._appendToEl),v=[t.left-g[0],t.top-g[1]],y=h[0]+v[0];this._opts.centerShift?(y+=this._opts.centerShift||0,o=this._opts.centerShift):this._opts.rightShift&&(o=-(u[0]/2-this._opts.rightShift),y+=o),this._prevSide=e;let E=20;const w=!this._opts.autoAdjustToViewport;switch(this._opts.align===(vk.rtl?_.ALIGN_LEFT:_.ALIGN_RIGHT)?(i=t.width-u[0],r=t.height-u[1]):this._opts.align===(vk.rtl?_.ALIGN_RIGHT:_.ALIGN_LEFT)?(i=0,r=0):(i=-u[0]/2+t.width/2,r=t.height/2-u[1]/2),e){case"bottom":p=i+y,m=t.height+d-h[1]+v[1],o||w||(a=i+t.left+h[0]+u[0]+E-(l[0]+c[0]),a<0&&(a=0),p-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p,top:m});break;case"top":p=i+y,o||w||(a=i+t.left+h[0]+u[0]+E-(l[0]+c[0]),a<0&&(a=0),p-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p}),m=-(0,n.getSize)(this._ttel)[1]-d+h[1]+v[1],(0,n.setStyle)(this._ttel,{top:m});break;case"right":p=t.width+d+y,m=r+h[1]+v[1],o||w||(a=r+t.top+h[1]-(l[1]+E),a>0&&(a=0),m-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p,top:m});break;case"left":p=-u[0]-d+y,m=r+h[1]+v[1],o||w||(a=r+t.top+h[1]-(l[1]+E),a>0&&(a=0),m-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p,top:m})}this._opts.type===_.TYPE_VERTICAL?vk.rtl?f("marginRight",o):f("marginLeft",o):f("marginTop",o)}(0,i.each)(["top","bottom","left","right"],function(t,o){e!==o&&(0,n.removeClass)(this._ttel,"eltt_"+o)}.bind(this)),(0,n.addClass)(this._ttel,"eltt_"+e),(0,n.setStyle)(this._ttel,m)}_hide(e){if(!this.tempPreventHide){if(this._isShown=!1,this._clearTimeouts(),this._reTimeout=setTimeout(function(){(0,n.hide)(this._ttel),this._el.setAttribute("aria-expanded","false"),this._opts.elClassWhenShown&&(0,n.removeClass)(this._el,this._opts.elClassWhenShown),this._opts.onHide&&this._opts.onHide(this._ttel,!!e)}.bind(this),_.FADE_SPEED),this._opts.onBeforeHide)try{this._opts.onBeforeHide(this._ttel,!!e)}catch(e){}(0,n.removeClass)(this._ttel,"eltt_vis"),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick)}}isShown(){return this._isShown}toggle(){this.isShown()?this.hide():this.show()}_clearTimeouts(){this._visTO&&clearTimeout(this._visTO),this._visTO=!1,this._sto&&clearTimeout(this._sto),this._sto=!1,this._hto&&clearTimeout(this._hto),this._hto=!1,this._reTimeout&&clearTimeout(this._reTimeout),this._reTimeout=!1}getContent(){return(0,n.geByClass1)("_eltt_content",this._ttel)}constructor(e,t){var o;if(this.constructor!==_)throw new Error("ElementTooltip was called without 'new' operator");if(!(e=(0,n.ge)(e))||!e.nodeType)throw new Error("First argument not a DOM element");if((0,n.data)(e,"ett"))return(0,n.data)(e,"ett");if(this._opts=(0,i.extend)({delay:100,offset:[0,0],type:_.TYPE_VERTICAL,id:"",cls:"",width:null,appendToParent:!1,autoAdjustToViewport:!0,autoShow:!0,autoHide:!1,noHideOnClick:!1,arrowSize:"normal",customShow:!1,align:_.ALIGN_CENTER,withCloseButton:!1,onSetArrowPosition:()=>{}},t),this._opts.customShow&&(this._opts.autoShow=!1),this._opts.defaultSide||(this._opts.defaultSide=this._opts.type===_.TYPE_VERTICAL?"top":"left"),this._opts.cls+=" eltt_arrow_size_"+this._opts.arrowSize,this._opts.cls+=" eltt_align_"+this._opts.align,this._opts.noBorder&&(this._opts.cls+=" eltt_noborder"),this._opts.setPos&&!this._opts.forceSide)throw new Error("forceSide parameter should be set if you use setPos");if(this._appendToEl=this._opts.appendTo?this._opts.appendTo:this._opts.appendToParent?(0,n.domClosestPositioned)(e,{noOverflow:!0}):e,this._arrowSize={mini:_.ARROW_SIZE_MINI,normal:_.ARROW_SIZE_NORMAL,big:_.ARROW_SIZE_BIG}[this._opts.arrowSize],this._opts.forceSide){const e=_.getType(this._opts.forceSide);if(void 0===e)throw new Error("ElementTooltip: invalid 'forceSide' option provided: ",this._opts.forceSide);this._opts.type=e}this._opts.type===_.TYPE_HORIZONTAL&&void 0===(null==(o=t)?void 0:o.autoAdjustToViewport)&&(this._opts.autoAdjustToViewport=!1),this._el=e,(0,n.data)(this._el,"ett",this),this._initEvents(e),this._clearTimeouts(),this._isShown=!1,this._el.setAttribute("aria-expanded","false")}}_.TYPE_VERTICAL=0,_.TYPE_HORIZONTAL=1,_.FADE_SPEED=100,_.ARROW_SIZE_MINI=9,_.ARROW_SIZE_NORMAL=8,_.ARROW_SIZE_BIG=16,_.ALIGN_LEFT="left",_.ALIGN_CENTER="center",_.ALIGN_RIGHT="right"},49305:(e,t,o)=>{"use strict";o.d(t,{setFavIcon:()=>i});var n=o(82753);function i(e,t){if(!window.icoNode)return;if(e=e+"?"+((stVersions||{}).favicon||""),icoNode.getAttribute("href")===e&&!t)return;const o=(0,n.ce)("link",{rel:"shortcut icon",type:"image/gif",href:e});headNode.replaceChild(o,icoNode),icoNode=o}},50033:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{moneyTransferBox:()=>moneyTransferBox,showWriteMessageBox:()=>showWriteMessageBox});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(34788),_message_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44734),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(56401),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39586),_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1959),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82753),_dom_events__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(96041),_lang__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(99203),_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(24915),_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(23434),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(48041),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(70956),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(69788),_web_settings_addressBox__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(38589),_icons_desktop__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(84499),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(59427);function showSettingsAddressBox(){(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_settings.php",{act:"address_box"},{stat:[window.jsc("web/settings.js"),"settings.css"],params:{bodyStyle:"padding: 0;",hideButtons:!0},onDone(e,{hash:t}){(0,_web_settings_addressBox__WEBPACK_IMPORTED_MODULE_12__.initSettingsAddressBox)(e,t)}})}function showWriteMessageBox(e,t,o={}){cur.onFriendMessage&&cur.onFriendMessage(),window.stManager.add([window.jsc("web/page.js"),window.jsc("web/wide_dd.js")]);const n=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_im.php",(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_14__._)({act:"a_write_box",to:t},o.params),{stat:[window.jsc("web/writebox.js"),"writebox.css","wide_dd.css","page.css","post.css",window.jsc("web/emoji.js"),"notifier.css"],cache:1},e);return n&&(0,_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(e),window.WriteBox&&WriteBox.extractEmoji(),!n}function giftsBox(e,t,o){return cur.viewAsBox?cur.viewAsBox():!(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_gifts.php",{act:"box",tab:o||"received",mid:e},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]},t)}function moneyTransferBox(e,t,o,n,i,r,s){if(cur.viewAsBox)return cur.viewAsBox();if(i){if(!s){let r,s;return 2===i?(r=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.curLang)("mail_money_transfer_cancel_confirm")||(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("mail_money_transfer_cancel_confirm"),s=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.curLang)("mail_money_transfer_cancel_btn")||(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("mail_money_transfer_cancel_btn")):(r=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.curLang)("mail_money_transfer_decline_confirm")||(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("news_fb_money_transfer_decline_confirm"),s=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.curLang)("mail_money_transfer_decline_btn")||(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("news_fb_money_transfer_decline_btn")),void(cur.confirmBox=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_action_confirmation"),r,s,moneyTransferBox.pbind(e,t,o,n,i,!1,1),(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_cancel")))}const r=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)((0,_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(n),"wall_postlink_preview_btn")||(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(n,"money_transfer__decline_button"),a=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("flat_button",(0,_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(n)),_=()=>{r?((0,_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(n.firstChild,"round_spinner"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(n.firstChild,"button")):(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(n)},l=()=>{r?((0,_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(n.firstChild,"button"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(n.firstChild,"round_spinner")):(0,_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(n)};return 2!==s&&((0,_ui__WEBPACK_IMPORTED_MODULE_3__.disableButton)(a,!0),_(n),cur.confirmBox&&cur.confirmBox.hide()),void ajax.post("al_payments.php?act=a_cancel_money_transfer",{tx_id:e,hash:t,from:r?"snippet":""},{onDone:function(s,_,l){0!==s?(r?((0,_dom__WEBPACK_IMPORTED_MODULE_4__.re)(n),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(a,"secondary")||(0,_dom__WEBPACK_IMPORTED_MODULE_4__.domReplaceEl)(a,l)):(0,_dom__WEBPACK_IMPORTED_MODULE_4__.re)((0,_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(n)),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)(_),window.TopNotifier.invalidate()):setTimeout((()=>moneyTransferBox(e,t,o,n,i,!1,2)),2e3)},onFail:function(e){return(0,_ui__WEBPACK_IMPORTED_MODULE_3__.disableButton)(a,!1),l(n),setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e).hide,2e3),!0}})}return cur.acceptMoneyBtn=n,r?!_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__.MoneyTransfer.showMoneyTransferBox({request_id:e,request:r,hash:t},{stat:["payments.css",(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_9__.partConfigEnabled)("webinf_move_payments_from_workers")?window.jsc("web/payments_legacy.js"):window.jsc("workers/payments.js")]},(e=>((0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)()&&(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e).hide,2e3),!0))):!(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_payments.php",{act:"accept_money_transfer_box",tx_id:e,hash:t},{stat:["payments.css",(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_9__.partConfigEnabled)("webinf_move_payments_from_workers")?window.jsc("web/payments_legacy.js"):window.jsc("workers/payments.js")],onFail(e){return(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)()&&(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e).hide,2e3),!0},onDone(e,t){_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__.MoneyTransfer.initHandlers(),window.cur=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)(window.cur,{paymentsOptions:t,paymentsPopupWrite(e){e.document.innerHTML!=cur._popup_text&&(e.document.write(window.cur._popup_text),e.document.close(),e.blur(),e.focus(),window.cur._popup_callback&&window.cur._popup_callback())}}),e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){window.cur.moneyTranferCheckInt&&clearInterval(window.cur.moneyTranferCheckInt),window.removeEventListener("message",_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__.MoneyTransfer.frameMessage,!1)}}),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__.MoneyTransfer.initAccept(t.chkData,t.frame)}},o)}function reportAd(e,t){{let o="",n=null;const i=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("/reports.php",{act:"report_ad_box",ad_data:t},{onDone:function(){const e=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn","ad_report");window.radioBtns.ad_report={val:0,els:e};const t=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("ad_csrf");o=t?t.value:o,n=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("ad_comment")},params:{width:370,onClean:()=>{delete window.radioBtns.ad_report}},stat:["reports.css"]});i.removeButtons(),i.addButton((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("box_send"),(r=>{ajax.post("reports.php",{act:"a_report_ad",ad_id:e,reason:window.radioBtns.ad_report.val,comment:n?n.value:"",ad_data:t,hash:o},{onDone:()=>{i.hide(),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("reports_thanks_for_report"))},showProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(r),hideProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(r)})})),i.addButton((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_cancel"),!1,"no")}}const mobilePromo=()=>(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_login.php",{act:"mobile",box:1});function showAudioClaimWarning(e,t,o){const{id:n,ownerId:i,title:r}=e,s=t.id,{reason:a,original:_}=t,l={width:470};let c,u;if(e.restrictionStatus)return _web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.showAudioRestriction(e);"geo"===a?(c=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claimed_geo"),u=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning_title")):"site_rules_violation"===a?(c=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_site_rules_violation_warning"),u=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_site_rules_violation_header")):"replace"===a?(c=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claimed_replacement_available"),u=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning_title")):"subscription"===a?(l.hideButtons=!0,l.bodyStyle="padding: 0; border-radius: 4px;",l.width=450,u=!1,c=`\n      <div class="audio_claim_popup">\n        <div class="audio_claim_popup__title">${(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_audio_only_with_subscription_title")}</div>\n        <div class="audio_claim_popup__text">${(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_audio_only_with_subscription_text")}</div>\n        <div class="audio_claim_popup__close" onclick="curBox().hide()">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_15__.getIcon24Cancel)().icon}</div>\n        ${_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_13__.FlatButton.render({appearance:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_13__.FlatButtonAppearance.PRIMARY,size:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_13__.FlatButtonSize.M,round:!0,restAttrs:{onclick:"AudioPlayer.showSubscriptionPopup()"},children:(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_audio_only_with_subscription_btn")}).outerHTML}\n      </div>`):(c=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning"),u=(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning_title")),l.title=u,c=c.replace(/\{audio\}/g,`<b>${r}</b>`),c=c.replace(/\{objection_link\}/g,`<a href="/help?act=cc_objection&claim=${s}&content=audio${i}_${n}">${(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_objection")}</a>`),c=c.replace(/\{delete_link\}/g,`<a onclick="deleteAudioOnClaim(${i}, ${n}); return false;">${(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_delete")}</a>`);const d=[l,c];let p=null;if(o&&_){const e=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.drawAudio(_,"no_extra");d[1]=c.replace(/\{original\}/g,_[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.AUDIO_ITEM_INDEX_PERFORMER]+" - "+_[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.AUDIO_ITEM_INDEX_TITLE])+"<br/><br/>"+e,d.push((0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_replace_with_original"),(function(){(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(p.btns.ok[0]),o((()=>p.hide()))})),l.textControls=`<a onclick="deleteAudioOnClaim(${i}, ${n}); return false;">${(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_delete_capital")}</a>`}cur.claimWarning=p=_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox.apply(null,d)}function sureDeleteAll(title,text,where,objectId,toId,fromId,hash,event){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(event))return;const box=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)({title:title},text,(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_delete"),(function(btn){ajax.post("/delete_all.php",{act:where,object_id:objectId,to_id:toId,from_id:fromId,hash:hash,loc:nav.objLoc[0]},{onDone:function(res){if(__debugMode)eval(res);else try{eval(res)}catch(e){(0,_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(e,res)}box.hide()},showProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(btn),hideProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(btn)})}),(0,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_cancel"));return!1}function imageStatusPopup(e,t){Object.assign(t,{act:"image_status"});const o=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("special_event.php",t,{containerClass:"ImageStatusPopup__container",params:{hideButtons:!0,needShadow:!1},onFail:function(){return window.cur.imageStatusBox&&window.cur.imageStatusBox.hide(),!0},onDone:function(e,t){const{status_id:o}=t;o&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_10__.saveStatlogEvents)({name:"image_status",value:o,keys:["show_popup"]})}},e);o&&((0,_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(e),window.cur.imageStatusBox=o)}function showPollBox(e,{ref:t,className:o}={}){(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_voting.php",{act:"get_layout",voting_id:e,for_box:!0,ref:t},{containerClass:o,params:{hideButtons:!0,width:510}})}},49957:(e,t,o)=>{"use strict";o.d(t,{bookmarkArticle:()=>B,bookmarkEvent:()=>V,bookmarkLink:()=>N,bookmarkNarrative:()=>j,bookmarkPodcast:()=>U,bookmarkPost:()=>x,getAudioPlayer:()=>q,getAudioPlayerUI:()=>G,isArticleLayerOpen:()=>$,openArticleEditor:()=>L,shareAudioPlaylist:()=>H,showAlbum:()=>C,showAlbums:()=>O,showApp:()=>S,showDonutSubscribePopup:()=>z,showPhoto:()=>T,showPhotoTags:()=>M,showPodcast:()=>k,showWiki:()=>D});var n=o(34788),i=(o(19571),o(56401),o(34892)),r=o(82753),s=o(39586),a=o(23434),_=o(96041),l=o(44734),c=(o(7659),o(1959)),u=o(99203),d=(o(65076),o(47782)),p=(o(70956),o(99602)),h=o(10524),m=o(56648),f=o(21159),g=o(8567),v=o(43533),y=o(35921),E=o(24793),w=o(82196),b=(o(61877),o(73674)),A=o(89801),P=o(48041),I=o(95824);function T(e,t,o={},i){var r,l,u,p;if(o&&o.additional&&o.additional.open_pe&&o.temp&&(0,d.isImgBlurred)(o.temp)){const n=function(){T(e,t,o,i)};return void Page.showUnblurBox(o.temp.restrictionTitle,o.temp.restrictionText,o.temp.photoRaw,o.temp.unblurHash,n)}if(o&&o.additional&&o.additional.open_pe&&o.temp&&o.temp.restrictionGeo&&delete o.additional.open_pe,cur.viewAsBox)return cur.viewAsBox();if((0,_.checkEvent)(i)||cur._editMode&&cur._editMode(i))return;if((0,h.isUnauthorizedMediaLayerBoxAvailable)()&&!o.forceUnauth)return h.Unauthorized.showMoreBox(null,0,h.UnauthorizedSourceType.PHOTO,(()=>{o.preventPhotoShowingInLayer||T(e,t,(0,n._)({},o,{forceUnauth:!0}),i)})),!1;const m=[window.jsc("web/photoview.js"),"photoview.css",window.jsc("web/page.js"),"page.css"];if(o.img&&(o.showProgress=function(){(0,c.showProgress)(o.img)},o.hideProgress=function(){(0,c.hideProgress)(o.img)}),!e)return!1;let f=1;if(((null==(l=o)||null==(r=l.additional)?void 0:r.open_pe)||(null==(u=o)?void 0:u.noCache))&&(f=0),window.Photoview&&!1===Photoview.showPhoto(e,t,o)&&f)return!1;let g=!0;if(cur.pvOptions||(cur.pvOptions={}),cur.pvOptions.isLightMode=o.isLightMode,o.temp&&!(cur.pvNoTemp||{})[e]&&window.stManager.add(m,(function(){(0,s.extend)(cur,{pvCancelLoad:function(){g=!1},pvData:cur.pvData||{},pvOptions:cur.pvOptions||{}}),cur.pvData.temp=[o.temp],cur.pvOptions.temp_final=o.temp_final,cur.pvOptions.temp_summary=o.temp_summary,cur.pvOptions.queue=o.queue,o.onBeforeLayersPreparing&&(cur.pvOptions.onBeforeLayersPreparing=o.onBeforeLayersPreparing),Photoview.show("temp",0)})),(0,s.extend)(o,{onDone:function(n){Photoview.list(e,t,n),o.blog_text&&arguments[3]&&arguments[3][0]&&(arguments[3][0].album=o.blog_text),Photoview.loaded.apply(window,arguments),g&&("deleted"===n?Photoview.showDeleted.apply(window,arguments):Photoview.showPhoto(e,t,o,!0))},onHide:o.onHide,onChange:o.onChange,onFail:e=>((0,a.showDoneBox)(e),!0),stat:m,cache:f}),o.temp_final)return!1;let v="";nav.objLoc.dmcah&&(v=nav.objLoc.dmcah);const y=(0,A.getTrackCodeFromPost)(null==(p=i)?void 0:p.target);return ajax.post("al_photos.php",(0,s.extend)({act:"show",gid:cur.gid,photo:e,list:t,dmcah:v,module:cur.module||"",list_info:o.list_info||null,track_code:y},o.additional),o),!1}function O(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,_.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbums(e,t)})),!1)}function C(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,_.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbum(e,t)})),!1)}function M(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,_.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showTagged(e,t)})),!1)}function D(e,t,o,n={}){if((0,_.checkEvent)(o))return!0;if(0!==cur.gid&&(e.gid=cur.gid),e.location_owner_id=cur.oid,window.wkcur&&wkcur.shown&&wkcur.wkRaw===e.w&&e.w&&!e.reply)return WkView.restoreLayer(n),(0,_.cancelEvent)(o);(window.wkcur&&wkcur.hideTitle||e.hide_title)&&(n.hide_title=e.hide_title=1);const i=n.stat||[window.jsc("web/wkview.js"),"wkview.css","wk.css",window.jsc("web/wk.js")];t&&i.push(window.jsc("web/wk_editor.js"),"wk_editor.css");const r={stat:i,loader:!n.noloader,onDone:function(t,i,r,a){var _,l,c;(null==(l=window.Feed)||null==(_=l.viewStats)||_.onWkLayer(e.postId),e.w&&"string"==typeof e.w&&e.w.startsWith("wall")&&(0,P.partConfigEnabled)("feed_content_events_open_post_event_web"))&&I.feedOpenItemCollector.logEvent({source:null!=(c=n.clickSource)?c:"news_item_click"},{track_code:n.trackCode},(0,A.resolveRefFromCur)());WkView.show(t,i,(0,s.extend)(r,n),a,o)},onFail:function(e){return(0,s.isFunction)(n.onFail)?n.onFail(e):e?WkView.showError(e):void 0}};if(nav.objLoc.claim&&(e.claim=nav.objLoc.claim),nav.objLoc.tariff_act&&(e.tariff_act=nav.objLoc.tariff_act),nav.objLoc._post&&(e._post=nav.objLoc._post),nav.objLoc._post&&(e._post=nav.objLoc._post),e.w&&"/query"===e.w.substr(-6)){const t=(0,s.clone)(nav.objLoc);delete t[0],delete t.w,e.query=JSON.stringify(t)}let a,l;n.preload&&(0,s.extend)(r,n.preload),n.ads_params&&(a=n.ads_params,l=nav.getPostParams(o&&o.target),l.post_click_url&&(a._post_click_url=l.post_click_url));let c="";"feed"===cur.module&&window.feed?c=window.feed.getModuleRef():"public"===cur.module?c="club":"profile"===cur.module&&(c="profile"),n.customRef&&(c=n.customRef);let u="";const d=(0,s.clone)(nav.objLoc);return d.dmcah&&(u=d.dmcah),ajax.post("wkview.php",(0,s.extend)({act:"show",loc:nav.objLoc[0].includes("market/category")||nav.objLoc[0].includes("market/section")||nav.objLoc[0].includes("market/compilation")?"market":nav.objLoc[0],is_znav:n.isZnav,dmcah:u,ref:c,track_code:n.trackCode},e,a,cur.getWkviewOpts&&cur.getWkviewOpts()),r),(0,_.cancelEvent)(o)}function S(e,t,o,n,i,r){r||(r={});let a=!1,_=(0,s.extend)({w:"app"+t},r);if(o=(0,s.intval)(o),n&&((0,s.isObject)(n)?_=(0,s.extend)(_,n):_.ref=n),r.layer&&(a=!0),(cur.apps&&cur.apps[t]||!o)&&!a){delete _.w;const o="app"+t+(i?"_"+i:""),n=nav.objLoc&&!nav.objLoc[1]&&nav.objLoc[0]===o;return nav.go("/"+o+nav.toStr(_),e,{nocur:n})}i&&(_.mid=i);const l={stat:[window.jsc("web/wkview.js"),"wkview.css",window.jsc("web/apps.js"),"apps.css"]};r.queue&&(l.queue=1);const c=cur.module;if(l.onHide=()=>{cur.module=c,r.onHide&&r.onHide()},r.urlHash&&(_.url_hash=r.urlHash),_["#"]){const e=_["#"];delete _["#"],l.onLoaded=()=>{nav.setLoc((0,s.extend)(nav.objLoc,{"#":e}))}}return D(_,!1,e,l)}function k(e,t,o,n,i){if(!vk.widget)return(0,r.show)(boxLoader),(0,r.show)(boxLayerWrap),(0,a.boxRefreshCoords)(boxLoader),window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.show(e,t,null,n,i)})),o&&(0,_.cancelEvent)(o)}function L(e,t,o,n={},i={}){if(cur.articleEditorLayer)return void cur.articleEditorLayer.openById(e,t);window.initialFCCollapse="article";const r=[window.jsc("web/article_editor_layer.js"),"article.css","article_editor.css"];window.stManager.add(r,(()=>{}));const a=Object.assign({act:"open_editor",article_owner_id:e,article_id:t,from_post_convert:o?1:0,post_data_medias:o?o.medias.join(","):""},n);ajax.post("al_articles.php",a,{loader:!0,onFail:function(e){return"app"===i.from?i.errorHandler&&i.errorHandler("ServerError: Can't open article editor."):(0,l.showFastBox)((0,u.getLang)("global_error"),e),window.SAKIntegration&&window.SAKIntegration.isIntegrated&&window.SAKIntegration.sendMessage("error",{error:e}),!0},onDone:function(e,t,n,a,_){window.WkView&&WkView.hide(),window.boxQueue&&boxQueue.hideAll(),o&&(_.postData=o),(0,s.extend)(window.cur.lang,_.lang),_.articleOwnerId?window.stManager.add(r,(function(){if(layers.fullhide=function(){cur.articleEditorLayer&&cur.articleEditorLayer.hide()},window.AuthorPage&&window.AuthorPage.isOpen()&&(cur.needAuthorPageHardBack=!0),cur.articleEditorLayer=new window.ArticleEditorLayer(e,t,n,_,a,(()=>delete cur.articleEditorLayer)),"app"===i.from){const e=e=>t=>{t.type=e,"publish"!==e&&"close"!==e||cur.articleEditorLayer&&cur.articleEditorLayer.hide(),i.eventHandler&&i.eventHandler(t)};cur.articleVkAppEditor={onSaveDraft:e("draft"),onPublish:e("publish"),onClose:e("close")}}})):nav.change({z:!1})}})}function R(e,t,o,n,_=!1,c="",d="",p="",h=1,m){ajax.post("al_bookmarks.php",{act:"bookmark",owner_id:e,object_id:t,type:o,state:_?1:0,hash:n,item_access_hash:c,ref:d||cur.module,track_code:p,show_snack:h,source:m},{onDone:(n,_,c,d)=>{if(n&&!vk.widget){const p=function(n){const a=(0,r.geByClass1)("bookmarks_tag_set",n);if(a&&!(0,i.isEmpty)(_)){const n=[];(0,s.each)(_,((e,t)=>{n.push(t)})),n.sort(((e,t)=>e.order-t.order));let i='<div class="bookmarks_tags_list">';for(let e=0;e<n.length;e++){const t=n[e];i+=`<div class="bookmarks_tags_list_item" data-id="${t.id}">${t.name}</div>`}i+="</div>",i=(0,r.se)(i),i.addEventListener("click",(o=>{const n=(0,r.domClosest)("bookmarks_tags_list_item",o.target);if(n){const o=(0,r.domData)(n,"id"),i=(0,r.toggleClass)(n,"bookmarks_tags_list_item--selected");ajax.post("al_bookmarks.php",{act:"set_tag",item_type:c,item_oid:e,item_id:t,hash:d,tag_id:o,is_tagged:(0,s.intval)(!i),is_from_snackbar:!0},{onFail:e=>((0,l.showFastBox)((0,u.getLang)("global_error"),e),!0)})}})),cur.setBookmarksTagTooltip&&cur.setBookmarksTagTooltip.destroy(),window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{}));let p=new ElementTooltip(a,{content:i,appendToParent:!0,cls:"bookmarks_tag_set_tt",autoShow:!0,offset:"video"===o?[-95,-10]:[0,-36],onFirstTimeShow:e=>{window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{cur.setBookmarksTagTooltipScrolls||(cur.setBookmarksTagTooltipScrolls=[]),cur.setBookmarksTagTooltipScrolls.push(new uiScroll((0,r.domFC)(e),{theme:"dark"}))}))},onShow:function(){Notifier.freezeEvents(),curNotifier.tooltipShown=!0},onHide:function(){curNotifier.tooltipShown=!1,curNotifier.unfreezeAfterTooltipHide&&Notifier.unfreezeEvents()}});cur.destroy.push((()=>{cur.setBookmarksTagTooltipScrolls&&(cur.setBookmarksTagTooltipScrolls.forEach((function(e){e.destroy()})),delete cur.setBookmarksTagTooltipScrolls),p.destroy()}))}};(0,a.showDoneBox)(n,{tooltipHandler:p,link:"/bookmarks"})}}})}function x(e,t,o,n,i,a,_="",l=""){if((0,s.isObject)(window.cur)&&(0,s.isFunction)(window.cur.viewAsBox))return window.cur.viewAsBox();const c=W(e);e.innerHTML=c?(0,r.domData)(e,"add"):(0,r.domData)(e,"remove"),(0,r.domData)(e,"state",c?0:1),R(t,o,n,i,c,a,_,l)}function B(e,t,o,n,i,r,s,a=!1){return t&&(s=W(t),a?K(t,s,24):F(t,s)),R(o,n,i,r,s),document.querySelectorAll(`._article_${o}_${n}`).forEach((e=>{const t=e.querySelector("._bookmark_btn");a?K(t,s,24):F(t,s)})),(0,_.cancelEvent)(e)}function N(e,t,o){const n=W(t);return F(t,n),function(e,t,o,n,i,r){ajax.post("al_bookmarks.php",{act:"bookmark_link",state:e?1:0,hash:t,url:o,img:n,title:i,ref:cur.module,track_code:r},{onDone:e=>{e&&!vk.widget&&(0,a.showDoneBox)(e)}})}(n,o,(0,r.domData)(t,"link-url"),(0,r.domData)(t,"link-img"),(0,r.domData)(t,"link-title"),(0,r.domData)(t,"track-code")),(0,_.cancelEvent)(e)}function U(e,t,o,n,i){return window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.toggleFave(e,t,o,i)})),n&&(0,_.cancelEvent)(n)}function W(e){return parseInt(e.dataset.state)}function F(e,t){e.dataset.state=String(t?0:1),e.innerHTML=t?(0,f.getIcon24FavoriteOutline)().icon:(0,g.getIcon24Favorite)().icon}function K(e,t,o=16){e.dataset.state=String(t?0:1);const n={16:(0,v.getIcon16Bookmark)().icon,24:(0,y.getIcon24Bookmark)().icon}[o],i={16:(0,E.getIcon16BookmarkOutline)().icon,24:(0,w.getIcon24BookmarkOutline)().icon}[o];e.innerHTML=t?i:n}function j(e,t,o,n,i,r){const s=W(t);return F(t,s),R(o,n,i,r,s),s||(0,m.sendNarrativeAnalytic)(m.NarrativeAnalyticEventType.addToBookmarks,{ownerId:o,id:n},window.cur.module),(0,_.cancelEvent)(e)}function V(e,t,o,n){const i=W(t);return F(t,i),ajax.post("fave.php",{act:i?"a_delete_group":"a_add_group",gid:o,hash:n},{onDone:(e,t)=>{i||vk.widget||(0,a.showDoneBox)(t)}}),(0,_.cancelEvent)(e)}function H(e,t,o,n){return(0,l.showBox)("like.php",{act:"publish_box",object:"audio_playlist"+t+"_"+o,list:n},{stat:[window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")],params:{shareButtonElement:e.target}}),(0,_.cancelEvent)(e)}function q(){return!window.ap&&window.AudioPlayer&&(window.ap=new window.AudioPlayer,window.dispatchEvent(new CustomEvent(b.AUDIO_PLAYER_INITED_EVENT))),window.ap||null}function G(){return window.audioPlayerUI=window.audioPlayerUI||new window.AudioPlayerUI({audioPlayer:q()}),window.audioPlayerUI}function $(){return window.ArticleLayer&&window.ArticleLayer.isShown()}function z(e,t,o,i,r,a={},c=""){if(!o&&!c)return;const u=`donut_payment${o}`,d=i,h=(0,l.showBox)("al_donut.php",(0,n._)({act:"subscribe_popup",ownerId:o,ownerDomain:c,source:i,hash:r,type:a.type},a.params),{stat:["donut_subscribe_popup.css",window.jsc("web/donut_subscribe_popup.js")],params:{width:450,hideButtons:!0,containerClass:"DonutSubscribePopup",onDestroy:()=>{if(window.DonutSubscribePopup&&window.DonutSubscribePopup.onDestroy(),!a.fromSnippet){(0,_.removeEvent)(window,"popstate",m);const{w:e,source:t}=nav.objLoc;e===u&&d===t&&(delete nav.objLoc.w,delete nav.objLoc.source,nav.setLoc(nav.objLoc))}}},onDone:(e,t)=>{if(window.DonutSubscribePopup.init({ownerId:o||t.owner_id,source:i,type:a.type,onSuccessPayment:a.onSuccessPayment},e,t),!a.fromSnippet&&"subscribe"===a.type){(0,_.addEvent)(window,"popstate",m);const e=(0,s.extend)(nav.objLoc,{w:u,source:i});nav.setLoc(e)}},onFail:e=>{if(e&&"string"==typeof e)return"group_doesnt_exists"===e&&a.onFailCallback&&"function"==typeof a.onFailCallback?(a.onFailCallback(),h.hide(),!0):(h.hide(),(0,p.showErrorBox)(e),!0)}},t);function m(){h.hide()}(0,_.cancelEvent)(t)}},73359:(e,t,o)=>{"use strict";o.d(t,{placeholderInit:()=>d,placeholderSetup:()=>u});var n=o(82753),i=o(96041),r=o(77995),s=o(39586),a=o(7659),_=o(48041),l=o(89084);function c(e,t={},o,i){const s=e.phshown,_=e.phcont,{back:l,editable:c,hideBackAfter:u,timeout:d,phColor:p="#8C8E91",activeColor:h="#C0C8D0"}=t,m=d||0===d?d:100,f=t.period||200;let g;if(g=c?(void 0!==e.textContent?e.textContent:e.innerText)||(0,n.geByTag)("img",e).length:e.value,s&&(l&&g||!l&&(o&&!o.type||g))?((0,n.hide)(_),e.phshown=!1):s||g||!l&&!i||((0,n.show)(_),e.phshown=!0,a.browser.opera&&i&&(e.setAttribute("placeholder",""),e.removeAttribute("placeholder",""))),l&&!g){if(o&&!o.type){const t=u?n.hide.pbind(_.firstChild.firstChild):null;clearTimeout(e.phanim),e.phanim=setTimeout((function(){(0,r.animate)(_.firstChild.firstChild,{color:h},f,t)}),m)}i&&(clearTimeout(e.phanim),u&&(0,n.show)(_.firstChild.firstChild),e.phanim=setTimeout((function(){(0,r.animate)(_.firstChild.firstChild,{color:p},f)}),m))}}function u(e,t){const o=(0,n.ge)(e);if(!o)return!1;if(!(o.getAttribute?o.getAttribute("contenteditable"):o.contenteditable)&&(0,_.partConfigEnabled)("native_placeholder_enable"))return!1;const r=t?(0,s.clone)(t):{};if(o.phevents&&!r.reload)return;const l=o.getAttribute?o.getAttribute("placeholder"):o.placeholder;if(!l)return;o.removeAttribute("placeholder");let u={},d=!1;const p=["Top","Bottom","Left","Right"];if(r.pad)u=r.pad;else{if(r.fast){for(let e=0;e<4;e++)u["padding"+p[e]]=3,u["margin"+p[e]]=0,u["border"+p[e]+"Width"]=1;(0,s.extend)(u,r.styles||{})}else{const e=[];for(let t=0;t<4;t++)e.push("margin"+p[t]),e.push("padding"+p[t]),e.push("border"+p[t]+"Width");u=(0,n.getStyle)(o,e)}for(let e=0;e<4;e++){const t="margin"+p[e],o="border"+p[e]+"Width";u[t]=(0,s.intval)(u[t])+(0,s.intval)(u[o])+"px",delete u[o]}}if(r.reload){const e=o.previousSibling;e&&(0,n.hasClass)(e,"input_back_wrap")&&(0,n.re)(e)}const h=r.big?" big":"",m=(0,n.getSize)(o)[0]-20,f=o.phcont=o.parentNode.insertBefore((0,n.ce)("div",{className:"input_back_wrap no_select",innerHTML:`<div class="input_back"><div class="input_back_content${h}" style="width: ${m}px;">${l}</div></div>`}),o),g=(0,n.domFC)(f);(0,n.setStyle)(g,u);const v=c.pbind(o,r),y=a.browser.mobile?v:(e,t)=>setTimeout(v.pbind(e,t),0);a.browser.msie&&a.browser.version<8&&(0,n.setStyle)(g,{marginTop:1}),o.phonfocus=function(e){d||(o.focused=!0,cur.__focused=o,!0===e&&((0,n.setStyle)(o,{backgroundColor:"#FFF"}),(0,n.hide)(g)),y(!0,!1))},o.phonblur=function(){d||(cur.__focused=o.focused=!1,(0,n.show)(g),y(!1,!0))},o.phshown=!0,o.phanim=null,(o.value||r.editable&&((void 0!==o.textContent?o.textContent:o.innerText)||(0,n.geByTag)("img",o).length))&&(o.phshown=!1,(0,n.hide)(f)),a.browser.opera_mobile||((0,i.addEvent)(f,"focus click",(function(e){d||(r.editableFocus?(setTimeout(r.editableFocus.pbind(o),0),o.phonfocus()):(o.blur(),o.focus()))})),(0,i.addEvent)(o,"focus"+(r.editable?" click":""),o.phonfocus),(0,i.addEvent)(o,"keydown paste cut input",y)),(0,i.addEvent)(o,"blur",o.phonblur),o.check=y,o.getValue=()=>r.editable?o.innerHTML:o.value,o.setPlaceholder=e=>(0,n.geByClass1)("input_back_content",f).textContent=e,o.setDisabled=e=>d=e,o.setValue=function(e){r.editable?o.innerHTML=e:o.value=e,c(o,r)},o.phevents=!0,o.phonsize=function(){},r.global||r.reload||(cur.__phinputs||(cur.__phinputs=[],cur.destroy.push(function(e){for(let t=0,o=e.length;t<o;t++)(0,n.removeData)(e[t])}.pbind(cur.__phinputs))),cur.__phinputs.push(o))}function d(e,t){const o=(0,n.ge)(e);if(!o)return!1;if(!(o.getAttribute?o.getAttribute("contenteditable"):o.contenteditable)&&(0,_.partConfigEnabled)("native_placeholder_enable"))return!1;const r=t?(0,s.clone)(t):{},c=void 0===(0,n.ce)("input").placeholder||o&&o.getAttribute&&o.getAttribute("contenteditable");if(o.phevents&&!r.reload)return;const u=o.getAttribute?o.getAttribute("placeholder"):o.placeholder;if(!u)return;if(o.getValue=function(){return r.editable?o.innerHTML:o.value},o.setValue=function(e){r.editable?o.innerHTML=e:o.value=e,c&&d(o,r)},o.phonfocus=function(){},o.phonblur=function(){},!c)return;function d(e,t={}){const o=e.phshown,i=e.phcont;let r;t.editable?(r=void 0!==e.textContent?e.textContent:e.innerText,r&&a.browser.opera&&r.match(/^[ ]+$/)&&(r=""),r||(r=(0,n.geByTag)("img",e).length>0),r||(r=(0,n.geByTag)("br",e).length>1),r||(r=(0,n.geByTag)("p",e).length>1)):r=e.value,o&&r?((0,n.hide)(i),e.phshown=!1):o||r||((0,n.show)(i),e.phshown=!0)}if(o.removeAttribute("placeholder"),r.reload){const e=(0,n.domNS)(o);e&&(0,n.hasClass)(e,"placeholder")&&(0,n.re)(e)}const p=o.phcont=(0,n.domInsertAfter)((0,n.ce)("div",{className:"placeholder",innerHTML:'<div class="ph_input"><label class="ph_content" for="'+o.id+'">'+u+"</label></div>"}),o),h=d.pbind(o,r),m=a.browser.mobile?h:(e,t)=>setTimeout(h.pbind(e,t),0);o.phonfocus=function(){o.focused=!0,cur.__focused=o,m(!0,!1)},o.phonblur=function(){cur.__focused=o.focused=!1,m(!1,!0)},o.phshown=!0,(o.value||r.editable&&((void 0!==o.textContent?o.textContent:o.innerText)||(0,n.geByTag)("img",o).length))&&(o.phshown=!1,(0,n.hide)(p)),a.browser.opera_mobile||((0,i.addEvent)(p,"focus click contextmenu",(function(e){r.editableFocus?(setTimeout(r.editableFocus.pbind(o),0),"contextmenu"===e.type&&a.browser.msie&&r.editableFocus(o),o.phonfocus()):(o.blur(),o.focus())})),(0,i.addEvent)(o,"focus"+(r.editable?" click":""),o.phonfocus),(0,i.addEvent)(o,"keydown paste cut input",m)),(0,i.addEvent)(o,"blur",o.phonblur),o.check=m,o.phevents=!0,o.phonsize=function(){},r.global||r.reload||(cur.__phinputs||(cur.__phinputs=[],(0,l.pushNavDestroy)((()=>{if(cur.__phinputs)for(let e=0,t=cur.__phinputs.length;e<t;++e)(0,n.removeData)(cur.__phinputs[e])}))),cur.__phinputs.push(o))}},52476:(e,t,o)=>{"use strict";o.d(t,{autosizeSetup:()=>E,checkPageBlocks:()=>g,getPageHeaderHeight:()=>m,getProgressHtml:()=>w,onBodyResize:()=>y,updateNarrow:()=>f});var n=o(39586),i=o(82753),r=o(19338),s=o(13996),a=o(1959),_=o(11575),l=(o(77995),o(96041)),c=o(88909),u=o(7659),d=(o(86136),o(49957)),p=o(39958);o(68312),o(4375),o(44151),o(48041),o(36181),o(11288),o(96250);let h;function m(){const e=(0,i.ge)("page_header");return h=h||(e?e.offsetHeight:0),h}function f(){cur.__narrowBar=cur.__narrowBar||{},cur.__narrowBar.bar=cur.__narrowBar.bar||(0,i.ge)("narrow_column"),cur.__narrowBar.barBlock=cur.__narrowBar.bar&&(0,i.geByClass1)("page_block",cur.__narrowBar.bar),cur.__narrowBar.wideCol=cur.__narrowBar.wideCol||(0,i.ge)("wide_column"),cur.__narrowBar.isBarFixed=cur.__narrowBar.isBarFixed||"fixed"===(0,i.getStyle)(cur.__narrowBar.bar,"position"),cur.__narrowBar.pl=cur.__narrowBar.pl||(0,i.ge)("page_layout");const e=cur.__narrowBar.bar,t=cur.__narrowBar.barBlock,o=cur.__narrowBar.wideCol,s=(0,r.scrollGetY)();if(u.browser.mobile||!e||!t||!o||(0,i.isVisible)(boxLoader)||(0,i.isVisible)(boxLayerBG)||(0,i.isVisible)(layerBG))return;const a=window.lastWindowHeight||0,_=Math.min(s,document.body.clientHeight-a),l=cur.__narrowBar.pl,c=vk.staticheader?Math.max(0,m()-_):m(),d=cur.__narrowBar.isBarFixed,p=(0,n.floatval)((0,i.getStyle)(cur.__narrowBar.barBlock,"marginTop")),h=(0,i.getSize)(e)[1]-(d?p:0),f=(0,i.getSize)(o)[1],g=(0,i.getXY)(o)[1],v=h>=f-p,y=p,E=_+a-f-g-y,w=Math.max(0,E),b=g-c,A=(0,i.getXY)(e)[1]+(d?p:0),P=cur.__narrowBar.lastSt||0,I=cur.__narrowBar.lastStyles||{},T=c+y+h+p+w<=a&&!cur.narrowHide,O=cur.__narrowBarForceNotFixed;let C,M=!1;_-1<b&&!(T&&u.browser.msie&&A<c+p)||v?C={marginTop:0}:!O&&(_-1<Math.min(P,A-c-p)||T)?(C={top:c,marginLeft:Math.min(-document.body.scrollLeft,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,i.getSize)(l)[0]))},M=!0):!O&&(_+1>Math.max(P,A+h+y-a)&&E<0&&!cur.narrowHide||cur.narrowHide&&_+1>Math.max(P,A+h-c))?(C={bottom:cur.narrowHide?a-c:y,marginLeft:Math.min(-document.body.scrollLeft,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,i.getSize)(l)[0]))},M=!0):C={marginTop:E>=0?f-h:Math.min(A-g,f-h+b)},function(e,t){const o=(0,n.clone)(e),i=(0,n.clone)(t);return(0,n.each)(o,(function(e,t){"position"!==e&&(o[e]=Math.round(t))})),(0,n.each)(i,(function(e,t){"position"!==e&&(i[e]=Math.round(t))})),JSON.stringify(o)===JSON.stringify(i)}(C,I)||((0,n.each)(I,(function(e){I[e]=null})),(0,i.setStyle)(e,(0,n.extend)(I,C)),cur.__narrowBar.lastStyles=C),M!==d&&(0,i.toggleClass)(e,"fixed",M),cur.__narrowBar.lastSt=_,cur.__narrowBar.isBarFixed=M}function g(){const e=(0,i.ge)("content");e&&((0,i.toggleClass)(e,"page_block",!(0,i.geByClass1)("page_block",e)),(0,p.updateAriaElements)())}function v(e,t){e&&"fixed"===(0,i.getStyle)(e,"position")&&(t?(0,i.removeClass)(e,t):(0,i.setStyle)(e,{position:"relative"}),e.offsetLeft,t?(0,i.addClass)(e,t):(0,i.setStyle)(e,{position:"fixed"}))}function y(e){if(!window.pageNode)return;const{clientWidth:t,clientHeight:o}=document.documentElement,r=(0,a.sbWidth)();let l=Math.max((0,n.intval)(window.innerWidth),(0,n.intval)(t)),p=Math.max((0,n.intval)(window.innerHeight),(0,n.intval)(o)),h=!1;if(u.browser.mobile&&(l=Math.max(l,(0,n.intval)(document.body.scrollWidth)),p=Math.max(p,(0,n.intval)(document.body.scrollHeight))),window.lastWindowWidth!==l||!0===e){h=!0,window.lastInnerWidth=window.lastWindowWidth=l,layerWrap.style.width=boxLayerWrap.style.width=l+"px";const e=layer.style.width=boxLayer.style.width=l-r-2+"px";if(window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.width=l+"px",mvLayer.style.width=e),window.wkLayerWrap&&(wkLayerWrap.style.width=l+"px",wkLayer.style.width=e),document.body.offsetWidth<vk.width+r+2&&(l=vk.width+r+2),l)for(let e=pageNode.firstChild;e;e=e.nextSibling){if(!e.tagName)continue;const t=(window.lastInnerWidth=l-r-1)-1;for(let o=e.firstChild;o;o=o.nextSibling)"scroll_fix"===o.className&&(o.style.width=t+"px");document.documentElement.style.setProperty("--scroll-fixed-width",`${t}px`),vk.staticheader||(0,s.updateHeaderStyles)({width:t})}}if((window.lastWindowHeight!==p||!0===e)&&(h=!0,window.lastWindowHeight=p,layerBG.style.height=boxLayerBG.style.height=layerWrap.style.height=boxLayerWrap.style.height=p+"px",window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.height=p+"px"),window.wkLayerWrap)){const e=u.browser.mobile?window.innerHeight:p;wkLayerWrap.style.height=e+"px"}if(vk.noSideTop||(0,a.updSideTopLink)(1),h&&window.curRBox&&window.curRBox.boxes&&window.getWndInner){const e=getWndInner();(0,n.each)(curRBox.boxes,((t,o)=>o._wnd_resize(e[0],e[1])))}setTimeout(_.updSeenAdsInfo,0);const m=(0,d.getAudioPlayer)();m.audioLayer&&m.audioLayer.isShown()&&m.audioLayer.updatePosition(),cur.pvShown&&window.Photoview&&setTimeout(Photoview.updatePhotoDimensions),window.tooltips&&tooltips.rePositionAll(),cur.lSTL&&(0,i.setStyle)(cur.lSTL,{width:Math.max((0,i.getXY)(cur.lSTL.el)[0],0),height:p-1}),(0,i.ge)("dev_top_nav")&&(0,i.setStyle)((0,i.ge)("dev_top_nav","left",null));const g=(0,i.geByClass)("ui_search_fixed"),y=(0,i.ge)("narrow_column");(0,n.each)(g,(function(){v(this,"ui_search_fixed"),setTimeout(v.pbind(this,"ui_search_fixed"),0)})),y&&(v(y,"fixed"),setTimeout(v.pbind(y,"fixed"),0)),(0,s.updateLeftMenu)(),f(),(0,c.updateSTL)()}function E(e,t={}){if(!(e=(0,i.ge)(e)))return;if(e.autosize)return void e.autosize.update();t.minHeight=(0,n.intval)(t.minHeight)||(0,n.intval)((0,i.getStyle)(e,"height")),t.maxHeight=(0,n.intval)(t.maxHeight);let o=(0,i.getSize)(e)[0]||(0,n.intval)((0,i.getStyle)(e,"width")),r=(0,i.getStyle)(e,"fontSize"),s=(0,i.getStyle)(e,"lineHeight");o<1&&(o=(0,n.intval)((0,i.getStyle)(e,"width",!1))),r.indexOf("em")>0&&(r=(0,n.floatval)(r)*parseInt(window.getComputedStyle(document.body).fontSize)),r=(0,n.intval)(r);const a={width:o,height:10,fontFamily:(0,i.getStyle)(e,"fontFamily"),fontSize:r+"px",lineHeight:s,boxSizing:(0,i.getStyle)(e,"boxSizing")};(0,n.each)(["Top","Bottom","Left","Right"],(function(){a["padding"+this]=(0,i.getStyle)(e,"padding"+this)})),e.autosize={options:t,helper:(0,i.ce)("textarea",{className:"ashelper"},a),handleEvent:function(t,o){let n=o.charCode?String.fromCharCode(o.charCode):o.charCode;if(void 0===n&&(n=String.fromCharCode(o.keyCode),10===o.keyCode||13===o.keyCode?n="\n":!u.browser.msie&&o.keyCode<=40&&(n="")),!n)return t;if(!u.browser.msie)return t.substr(0,e.selectionStart)+n+t.substr(e.selectionEnd);const i=document.selection.createRange();return i.text&&(t=t.replace(i.text,"")),t+n},update:function(t){let o=e.value;!t||"blur"===t.type||"keyup"===t.type||u.browser.msie&&"keypress"!==t.type||t.ctrlKey||t.altKey||t.metaKey||(o=e.autosize.handleEvent(o,t)),o||(o=" "),e.autosize.helper.value!==o&&(e.autosize.helper.value=o);const r=e.autosize.options,a=(0,i.getSize)(e,!0)[1];let _=e.autosize.helper.scrollHeight;const l=_%s;r.exact&&l>2&&(_-=l-2),_<r.minHeight&&(_=r.minHeight);const c={overflow:"hidden"},d=(0,i.getStyle)(e,"overflow").indexOf("auto")>-1?"auto":"hidden";r.maxHeight&&_>r.maxHeight&&(_=r.maxHeight,(0,n.extend)(c,{overflow:"auto",overflowX:"hidden"})),r.addHeight&&(_+=r.addHeight),a===_&&d===c.overflow||(c.height=_,(0,i.setStyle)(e,c),(0,n.isFunction)(r.onResize)&&r.onResize(_))}},t.exact&&("normal"===s&&(s="120%"),s.indexOf("%")>0&&(s=r*(0,n.intval)(s)/100)),utilsNode.appendChild(e.autosize.helper),u.browser.opera_mobile?((0,i.setStyle)(e,{overflow:"hidden"}),e.autosize.update(),(0,l.addEvent)(e,"blur",e.autosize.update)):((0,l.addEvent)(e,"keydown keyup keypress change",e.autosize.update),setTimeout((()=>{(0,i.setStyle)(e,{overflow:"hidden",resize:"none"});const t=(0,i.val)(e);(0,i.val)(e," ",!0),(0,i.val)(e,t,!0),e.autosize.update()}),0))}function w(e,t){return(0,i.rs)(vk.pr_tpl,{id:e||"",cls:t||""})}},49848:(e,t,o)=>{"use strict";o.d(t,{statDurationsLoadImage:()=>r,statNavigationTiming:()=>s});var n=o(74752),i=o(39586);function r(){if(Math.random()<.001&&window.performance&&window.performance.getEntriesByType){if(window.clientStatsInited)return!1;const e=window.performance.getEntriesByType("resource");if(!e)return!1;const t={},o={};for(let n=0;n<e.length;n++)if(e[n]&&"img"===e[n].initiatorType)if(e[n].duration<100)t["<100"]=(t["<100"]||0)+1;else if(e[n].duration<250)t["100-250"]=(t["100-250"]||0)+1;else if(e[n].duration<500)t["250-500"]=(t["250-500"]||0)+1;else if(e[n].duration<1e3)t["500-1000"]=(t["500-1000"]||0)+1;else if(e[n].duration<2e3)t["1000-2000"]=(t["1000-2000"]||0)+1;else if(e[n].duration<5e3)t["2000-5000"]=(t["2000-5000"]||0)+1;else if(t[">5000"]=(t[">5000"]||0)+1,e[n].name&&e[n].name.indexOf("pp.vk.me")>0){let t="";t=e[n].name,t=t.substr(t.indexOf("pp.vk.me")+9),t.indexOf("/")>0&&(t=t.substr(0,t.indexOf("/")),o[t]=(o[t]||0)+1)}(0,i.each)(t,((e,t)=>(0,n.statlogsValueEvent)("img_load",t,e))),(0,i.each)(o,((e,t)=>(0,n.statlogsValueEvent)("img_slow",t,e))),window.clientStatsInited=!0}}function s(){if(window.clientStatsInitedNT)return!1;if(window.performance&&performance.timing){if(Math.random()>.001&&!__dev)return!1;const e={},t=window.cur&&window.cur.module;performance.timing.redirectStart&&performance.timing.redirectEnd&&(e.redirect=performance.timing.redirectEnd-performance.timing.redirectStart),performance.timing.domainLookupStart&&performance.timing.domainLookupEnd&&(e.domainLookup=performance.timing.domainLookupEnd-performance.timing.domainLookupStart),performance.timing.connectStart&&performance.timing.connectEnd&&(e.connect=performance.timing.connectEnd-performance.timing.connectStart,performance.timing.secureConnectionStart&&(e.secureConnection=performance.timing.connectEnd-performance.timing.secureConnectionStart)),performance.timing.requestStart&&performance.timing.responseStart&&(e.request=performance.timing.responseStart-performance.timing.requestStart,performance.timing.responseEnd&&(e.response=performance.timing.responseEnd-performance.timing.responseStart)),performance.timing.unloadEventStart&&performance.timing.unloadEventEnd&&(e.unloadEvent=performance.timing.unloadEventEnd-performance.timing.unloadEventStart),performance.timing.domLoading&&performance.timing.domComplete&&(e.processing=performance.timing.domComplete-performance.timing.domLoading),performance.timing.domContentLoadedEventStart&&performance.timing.domContentLoadedEventEnd&&(e.domContentLoadedEvent=performance.timing.domContentLoadedEventEnd-performance.timing.domContentLoadedEventStart),performance.timing.loadEventStart&&performance.timing.loadEventEnd&&(e.loadEvent=performance.timing.loadEventEnd-performance.timing.loadEventStart),performance.timing.loadEventEnd&&performance.timing.responseEnd&&(e.resource=performance.timing.loadEventEnd-performance.timing.responseEnd),(0,i.each)(e,((e,o)=>(0,n.statlogsValueEvent)("navigation_timing",o,e,t))),window.clientStatsInitedNT=!0}}},12796:(e,t,o)=>{"use strict";o.d(t,{shortCurrency:()=>r});var n=o(39586),i=o(82753);function r(){const e={};(0,n.each)((0,i.geByClass)("_short_currency"),(function(){const t=(0,i.domData)(this,"short")||"";if(!t)return!0;const o=this.innerHTML,r=(0,n.winToUtf)(o).length,s=(0,i.getStyle)(this,"fontFamily")||"tahoma,arial,sans-serif";if(void 0===e[s]){let t="";for(let e=r-1;e>=0;e--)t+="&#8399;";const n=(0,i.ce)("div",{innerHTML:`<b>${o}</b><b>${t}</b>`},{fontFamily:s,fontSize:"24px"});(0,i.ge)("utils").appendChild(n),e[s]=Math.abs(n.firstChild.offsetWidth-n.lastChild.offsetWidth)>=2*r,(0,i.re)(n)}!1===e[s]&&(0,i.val)(this,t)}))}},49513:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Nav:()=>Nav,getPageContentWrapperNode:()=>getPageContentWrapperNode});var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(11010),_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(34788),_shared_counters_tmr_moduleChangeHandler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(56520),_shared_lib_js_logger_debug_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72242),_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(19571),_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83092),_web_feed_constants_feedPageLoadingState__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77510),_web_lib_date__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(86812),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(23434),_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(39586),_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(34892),_ads__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(11575),_debug_tools__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(24915),_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(82753),_dom_events__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(96041),_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(19338),_ui_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(12111),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(65076),_nav_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(13996),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(27935),_layout_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(52476),_video__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(62425),_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(49848),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7659),_feature_entries__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(49957),_accessibility__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(39958),_top_search__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(99951),_stl__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(88909),_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(99602),_message_box__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(44734),_lang__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(99203),_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(58424),_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(54328),_shared_evbus__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(42885),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(48041),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(57458),_shared_im_helpers__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(35664),_shared_marusia_marusia_stats__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(28536),_web_lib_cur__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(83985),_shared_production_stats_click_feed_post_interaction__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(96825),_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(56525),_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(89801),_web_feed_feedPageLoading_navigationHandler__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(59676),_shared_lib_bookmakers__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(57570),_spa_web_infrastructure_routing__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(51126),_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(51237),_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(77027);const SHOW_MORE_APPS_SHOWN_CLASSNAME="LeftMenu__moreAppsContainer--shown",SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME="LeftMenu__item--showMoreAppsHidden";let updateCountersTimeout,locationChangeListeners=[];const navigationStartListeners=new Set,interseptingNavigationHandlers=new Set,PAGE_CONTENT_WRAPPER_NODE_ID="wrap3";function getPageContentWrapperNode(){var e;return null!=(e=document.getElementById(PAGE_CONTENT_WRAPPER_NODE_ID))?e:void 0}const Nav={getData:function(e,t=null){if(e.length){for(const i in navMap){if(!navMap.hasOwnProperty(i))continue;if("<"===i[0])continue;const r=e.match(new RegExp("^"+i,"i")),s=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router_check_full_loc_enabled")&&t&&t.match(new RegExp("^"+i,"i"));if(r||s){var o,n;if(navMap[i][2])return null;const e=navMap[i][3],t=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router")&&(null==(o=e)?void 0:o.enabled)&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)(e.enabled);return{url:navMap[i][0],files:t?[]:navMap[i][1],clientOnly:Boolean(t&&(null==(n=e)?void 0:n.client_only)&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)(e.client_only))}}}return e.match(/^[a-z0-9\-_]+\.php$/i)?{url:e}:{url:navMap["<other>"][0],files:navMap["<other>"][1]}}return{url:navMap["<void>"][0],files:navMap["<void>"][1]}},isClientOnly:function(){try{var e;const o=null==(e=this.objLoc)?void 0:e[0],n=/^friends/,i=this.strLoc,r=i&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router_friends_check_full_loc_enabled")&&i.match(n)?i:null;var t;if(o)return(null==(t=this.getData(o,r))?void 0:t.clientOnly)||!1}catch(e){return!1}return!1},reload:function(e){if((0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.reloadCheckFlood)(e))return;e=e||{};const t=Nav.strLoc.replace(/^\/+/g,"");e.force?(hab.stop(),t.includes("#")&&window.location.href.replace(window.location.origin,"")==="/"+t&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("mini_apps_save_hash_on_language_change")?window.location.reload():location.href="/"+t):(TopNotifier.invalidate(),Nav.go("/"+t,void 0,(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({nocur:!0},e)))},link:function(e,t){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_12__.checkEvent)(t)||cur.noAjaxNav){const t=(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__.toMaybeVKSiteURLRelativeName)(e);window.open(t)}else Nav.go(e)},onLocationChange:function(e){return locationChangeListeners.push(e),()=>{locationChangeListeners=locationChangeListeners.filter((t=>t!==e))}},addNavigationStartListener:function(e){navigationStartListeners.add(e)},removeNavigationStartListener:function(e){navigationStartListeners.has(e)&&navigationStartListeners.delete(e)},addInterseptingNavigationHandler:function(e){interseptingNavigationHandlers.add(e)},removeInterseptingNavigationHandler:function(e){interseptingNavigationHandlers.has(e)&&interseptingNavigationHandlers.delete(e)},go:function(loc,ev,opts={}){var _ev;const debugLog=opts.debugLog||(()=>{});Nav.showLessApps();const awayLink=maybeNavigateAwayLink(loc,opts);if(awayLink)return debugLog("awayLink",awayLink),document.location.href=awayLink,!1;if((0,_dom_events__WEBPACK_IMPORTED_MODULE_12__.checkEvent)(ev)||window.cur.noAjaxNav)return void debugLog("noAjaxNav");if(LongView.onBeforePageChange(),loc.tagName&&"a"===loc.tagName.toLowerCase()){if("_blank"===loc.target||Nav.baseBlank)return void debugLog("baseBlank");const e=loc.getAttribute("hrefparams");if(e&&(opts.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(opts.params||{},(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(e))),loc=loc.href||"",ev&&(!loc||!(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__.isVKSiteURLForNav)(loc)))return void debugLog("isVKSiteURLForNav")}let strLoc="",objLoc={},changed={};"string"==typeof loc?(loc=(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__.toMaybeVKSiteURLRelativeName)(loc),strLoc=loc,objLoc=Nav.fromStr(loc)):(loc[0]||(loc[0]=""),strLoc=Nav.toStr(loc),objLoc=loc),opts.hard&&(debugLog("hard",strLoc),location.href=strLoc),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_navigation_listeners")&&navigationStartListeners.forEach((e=>{try{e(strLoc,objLoc)}catch(e){(0,_shared_lib_js_logger_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logUnknownError)(e)}})),window.cur.isCurrentVideoLayer&&!objLoc.section&&-1!==objLoc[0].indexOf("/playlist/")&&(objLoc.section="album_"+objLoc[0].split("_")[1]);const bugtrackerLocations=/(^bug\d+|^bugs$|^bugs_mng$|^bugtracker_adm$)/;if(-1!==Nav.objLoc[0].search(bugtrackerLocations)&&-1===objLoc[0].search(bugtrackerLocations)||-1===Nav.objLoc[0].search(bugtrackerLocations)&&-1!==objLoc[0].search(bugtrackerLocations))return debugLog("bugtracker",strLoc),void(location.href=strLoc);(0,_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_20__.statDurationsLoadImage)(),(0,_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_20__.statNavigationTiming)(),0===strLoc.indexOf("market")&&window.MarketAnalyticsManager&&window.MarketAnalyticsManager.setScreen(window.cur.module);const donutLinkRegex=/^donut\/([A-Za-z0-9_\.]{2,32})/;if(!opts.skipDonutLinkCheck&&strLoc.match(donutLinkRegex)){const e="direct_link",t=strLoc.match(donutLinkRegex),o=t[1],n=()=>{debugLog("groupDoesntExists"),nav.go(strLoc,ev,(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_42__._)({},opts,{skipDonutLinkCheck:!0}))};return window.DonutSubscribePopup&&window.DonutSubscribePopup.onCloseButtonClick(),debugLog("donutLink",strLoc),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.showDonutSubscribePopup)(null,null,null,e,"",{type:"subscribe",fromSnippet:!0,onFailCallback:n,params:{act:"subscribe_popup"}},o),!1}("im"===objLoc[0]&&(0,_shared_im_helpers__WEBPACK_IMPORTED_MODULE_33__.isMarusiaPeer)(objLoc.sel)||"write-194070336"===strLoc)&&(_shared_marusia_marusia_stats__WEBPACK_IMPORTED_MODULE_34__.marusiaStats.logChatOpen(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.getModule()),window.ajax.post("al_marusia.php",{act:"send_event",event:"chatopen"}));const ap=(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)();if(ap&&ap.updateCurrentPlaying&&ap.updateCurrentPlaying(),!opts.nocur){changed=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(objLoc);for(const e in Nav.objLoc)Nav.objLoc.hasOwnProperty(e)&&(Nav.objLoc[e]===changed[e]?delete changed[e]:void 0===changed[e]&&(changed[e]=!1));if(!1===(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)((0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(changed),{hist:opts.hist,replace:opts.replace,back:opts.back,asBox:opts.asBox,onDone:opts.onDone},objLoc))return debugLog("zNav",strLoc),Nav.setLoc(strLoc,opts),!1;bookmarksNav(ev,strLoc);const e=window.cur._back&&window.cur._back.hasOwnProperty("onArticleNavBack")?window.cur._back.onArticleNavBack:null,t=articleNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,e,ev);if(t)return Promise.resolve(t).then((()=>{strLoc=cleanArticleUrlByObjLoc(objLoc),Nav.setLoc(strLoc,(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_42__._)({},opts,{isForce:!0})),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back})})),debugLog("handled",strLoc),!1;const o=authorPageNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,opts.postId);if(o)return window.AuthorPage&&window.AuthorPage.isOpen()&&window.cur.articleEditorLayer&&window.cur.articleEditorLayer.hide(!1),window.cur._hardNav?(debugLog("hardNav",strLoc),window.location.href=strLoc,!1):(Nav.setLoc(strLoc,opts),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back}),debugLog("noHardNav",strLoc,Nav.objLoc.z||Nav.objLoc.w),!1)}if(!opts.nocur&&(vk.loaded||!changed[0])){const e=window.cur.nav||[];for(let t=e.length-1;t>=0;t--){const o=document.URL;if(!1===e[t]((0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(changed),Nav.objLoc,objLoc,opts)){const e=`${locProtocol}//${location.host}/${strLoc}`,n=o===e?"":o;return updateCountersTimeout&&clearTimeout(updateCountersTimeout),updateCountersTimeout=setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_17__.updateCounters.pbind(e,n),10),debugLog("curnav",t,objLoc),!1}}}if(4===vk.al||!vk.loaded&&(!window.audioPlayer||!audioPlayer.player)&&changed[0])return debugLog("al4","/"+(strLoc||"").replace("%23","#")),setTimeout((function(){location.href="/"+(strLoc||"").replace("%23","#")}),0),!1;if(window.Upload&&Upload.terminateAllUploads(),(0,_top_search__WEBPACK_IMPORTED_MODULE_24__.topHeaderClose)(),opts.back){if(window.cur._back&&window.cur._back.onBack)return debugLog("_back",strLoc),window.cur._back.onBack(strLoc);for(let e=0,t=globalHistory.length;e<t;e++)if(globalHistory[e].loc===strLoc){const t=globalHistory.splice(e,1)[0],o=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID),n=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("title"),i=window.cur._onback;return window.tooltips&&window.tooltips.destroyAll(),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("audio_tip_wrap"),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(window.cur),window.radioBtns=t.radioBtns,window.ajaxCache=t.ajaxCache,window.PageID=t.pid,boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)(),window.cur=t.cur,setTimeout((function(){if(o.innerHTML="",o.parentNode.replaceChild(t.content,o),vk.width===t.width&&vk.width_dec===t.width_dec&&vk.width_dec_footer===t.width_dec_footer||(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.handlePageView)(t),(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToY)(t.scrollTop,0),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.setDocumentTitle)(t.htitle),n&&(n.innerHTML=t.title,(0,_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(n.parentNode,"display",t.hideHeader?"none":"block")),t.bodyClass!==document.body.className&&(document.body.className=t.bodyClass||"",vk.body_class=t.bodyClass||""),window.cur._back.show)for(let e=0,t=window.cur._back.show.length;e<t;e++)window.cur._back.show[e]();if(!window.cur.noquickreg&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.isFunction)(window.changeQuickRegButton)&&window.changeQuickRegButton(!1),i)for(let e=0,t=i.length;e<t;e++)i[e]();Nav.setLoc(strLoc,opts);const e=t.back||{};setTimeout((function(){_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.sendBack(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.getModule()),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)(e[0],e[1],e[2]),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back}),(0,_stl__WEBPACK_IMPORTED_MODULE_25__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_23__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_24__.default.clear()}),10),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying()}),10),debugLog("globalHistory",strLoc),!1}}const dest=objLoc[0];let where;delete objLoc[0];try{const e=/^friends/,t=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router_friends_check_full_loc_enabled")&&strLoc.match(e)?strLoc:null;where=Nav.getData(dest,t)}catch(e){where=null}if(null===where){if(debugLog("noWhere"),opts.throwErrorOnDisabledPath)throw new Error("AL navigation is disabled for this path");return!0}opts.params&&opts.params._ref||(opts.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(opts.params||{},{_ref:Nav.objLoc[0]||""})),where.files&&window.stManager.add(where.files),where.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({__query:dest,al_id:vk.id},objLoc,opts.params||{});const possibleLinkElement=null==(_ev=ev)?void 0:_ev.target,postParamsEl=Nav.getLinkElementWithPostParamsOrLocation(possibleLinkElement,loc),postParams=Nav.getPostParams(postParamsEl,!!where.params._post_click_type);where.params=Nav.mergePostParamsOptions(postParams,where.params),opts.cl_id&&(where.params.fr_click=window.cur.oid+","+opts.cl_id+","+window.cur.options.fr_click),opts.permanent&&(where.params._permanent=opts.permanent);const curNavVersion=++window.NextPageID,done=function({title:title,html:html,js:js,params:params}){var _opts_trackCode;opts.isMention&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("post_click_analytics_int_ext_link_click_web")&&_shared_production_stats_click_feed_post_interaction__WEBPACK_IMPORTED_MODULE_36__.feedInteractionItemStatCollector.logEvent({track_code:null!=(_opts_trackCode=opts.trackCode)?_opts_trackCode:void 0,ref:(0,_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_38__.resolveRef)(window.cur.module,window.cur.section,window.cur.subsection),item:_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_37__.FeedInteractionItemType.WALL_ITEM},_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_37__.EventItemType.INT_LINK_CLICK);if(curNavVersion!==window.NextPageID)return!0;try{params._id=params.id}catch(e){return(0,_ui_util__WEBPACK_IMPORTED_MODULE_14__.topError)(e,{dt:15,type:6,msg:`Error: ${e.message}, (params undefined?), title: ${title}, html: ${html}, js: ${js}`,url:where.url,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(where.params),answer:arguments.length})}const execTqTasks=e=>{params.exec_on_start&&(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_30__.processExecData)(JSON.stringify(params.exec_on_start),e)};window.lastScrollTop=(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollGetY)();const isReloadRequired=stVersions[window.jsc("web/common_web.js")]>StaticFiles[window.jsc("web/common_web.js")].v,needForceReloadForDomainMigration=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("domain_migration_navigation_reload");if(needForceReloadForDomainMigration&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_32__.statlogsValueEvent)("tmp_stat_2","","login_migrate_cookies","force_reload_by_nav"),(isReloadRequired||needForceReloadForDomainMigration)&&!window.Upload&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("clips_publish_videos_to_clips_web")){var _window_Calls;if(Nav.setLoc(params.loc||Nav.strLoc,opts),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.reloadCheckFlood)({force:!0,from:4}))return;if(null==(_window_Calls=window.Calls)?void 0:_window_Calls.isInActiveCall)return;return debugLog("reload",isReloadRequired),void location.reload(!0)}const newPage=void 0===where.params.al_id||where.params.al_id!=params.id||params.fullPage,tNode=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("title");let wNode=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID),_back=window.cur._back,hist=!1;if((strLoc===(window.cur._back||{}).loc||newPage||opts.back)&&(_back=!1),(opts.noback||params.level&&(!window.cur._level||params.level<=window.cur._level)&&!1!==opts.noback)&&(_back=!1,(opts.noback||window.cur._level&&params.level<window.cur._level)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)()),window.tooltips&&window.tooltips.destroyAll(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)((0,_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("page_actions_wrap"),((e,t)=>(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(t))),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("audio_tip_wrap"),_back){if((0,_video__WEBPACK_IMPORTED_MODULE_19__.revertLastInlineVideo)(null,!0),hist={loc:_back.loc||Nav.strLoc,cur:window.cur,radioBtns:(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(radioBtns),ajaxCache:ajaxCache,pid:window.PageID,scrollTop:(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollGetY)(),htitle:document.title.toString(),width:vk.width,width_dec:vk.width_dec,width_dec_footer:vk.width_dec_footer,noleftmenu:vk.noleftmenu,notopmenu:vk.notopmenu,nobottommenu:vk.nobottommenu,bodyClass:vk.body_class,back:!(!_tbLink||!_tbLink.loc)&&[_tbLink.loc,(0,_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_tbLink),_tbLink.fast]},tNode&&tNode.parentNode&&!(0,_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(tNode.parentNode)&&(hist.hideHeader=!0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.globalHistoryDestroy)(hist.loc),globalHistory.length>2){const e=globalHistory.shift();(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(e.cur),e.content.innerHTML=""}if(window.cur._back.hide)for(let e=0,t=window.cur._back.hide.length;e<t;e++)window.cur._back.hide[e]();_back.text&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)(hist.loc,_back.text,1)}else _tbLink&&(_tbLink.fast=0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(window.cur);if(window.PageID=window.NextPageID,(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(radioBtns,(function(e,t){t.keep||delete radioBtns[e]})),window.ajaxCache={},boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),(0,_web_lib_cur__WEBPACK_IMPORTED_MODULE_35__.resetWindowCur)(),window._stlWas=0,newPage){for((0,_dom__WEBPACK_IMPORTED_MODULE_11__.cleanElems)("quick_login_button","quick_expire","search_form","top_links","bottom_nav");globalHistory.length;){const e=globalHistory.shift();(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(e.cur),e.content.innerHTML=""}const e=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("dev_top_nav_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("dev_top_nav_wrap")[0]||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("page_header_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("page_header_wrap")[0]||0;pageNode.innerHTML=html,execTqTasks(pageNode),e&&!vk.staticheader&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateHeaderStyles)({width:e}),window._tbLink=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("top_back_link");try{_tbLink.style.maxWidth=_tbLink.parentNode.offsetWidth-35+"px"}catch(e){}_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.mobile||(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.onBodyResize)(!0)}else{if(_back){const e=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{id:PAGE_CONTENT_WRAPPER_NODE_ID});(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(hist,{content:wNode.parentNode.replaceChild(e,wNode),title:tNode?tNode.innerHTML:""}),globalHistory.push(hist),wNode=e}const e=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("dev_top_nav_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("dev_top_nav_wrap")[0]||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("page_header_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("page_header_wrap")[0]||0;wNode&&(wNode.innerHTML=html,execTqTasks(wNode)),e&&!vk.staticheader&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateHeaderStyles)({width:e}),tNode&&(tNode.innerHTML=title,(title?_dom__WEBPACK_IMPORTED_MODULE_11__.show:_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(tNode.parentNode)),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying()}if((0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.checkPageBlocks)(),(0,_stl__WEBPACK_IMPORTED_MODULE_25__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_23__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_24__.default.clear(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.handlePageParams)(params),opts.preventScroll||(opts.scrollTop>0?(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToY)(opts.scrollTop,0):opts.noscroll||params.noscroll||(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)(0)),Nav.curLoc=params.loc,js){const evalString=`(function(){${js};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){(0,_debug_tools__WEBPACK_IMPORTED_MODULE_10__.logEvalError)(e,evalString)}}window.ajax._framenext(),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router")||opts.onDone&&opts.onDone(),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.mobile&&(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.onBodyResize)(),changed.f&&(0,_utils__WEBPACK_IMPORTED_MODULE_26__.handleScroll)(changed.f),Nav.setLoc(params.loc||"",opts),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router")&&opts.onDone&&opts.onDone(),changed[0]&&(window.vkLastNav=Date.now()),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.lTimeout)((function(){(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying(),window.TopMenu.toggle(!1)}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.chrome?100:50)},clientOnlyDone=function(e,t){if(curNavVersion!==window.NextPageID)return;(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.handlePageView)({width:window.vk.defaultLayout.width,width_dec:window.vk.defaultLayout.widthDec}),adjustStylesToSpa(),window.PageID=window.NextPageID,window.lastScrollTop=(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollGetY)();let o=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID);window.tooltips&&window.tooltips.destroyAll(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)((0,_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("page_actions_wrap"),((e,t)=>(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(t))),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("audio_tip_wrap"),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(window.cur),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(radioBtns,(function(e,t){t.keep||delete radioBtns[e]})),boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),(0,_web_lib_cur__WEBPACK_IMPORTED_MODULE_35__.resetWindowCur)(!0),window._stlWas=0,o&&(o.innerHTML=""),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying(),(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.checkPageBlocks)(),(0,_stl__WEBPACK_IMPORTED_MODULE_25__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_23__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_24__.default.clear(),(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)(0),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.mobile&&(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.onBodyResize)(),changed.f&&(0,_utils__WEBPACK_IMPORTED_MODULE_26__.handleScroll)(changed.f),Nav.setLoc(e,t),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:t.hist,replace:t.replace,back:t.back}),t.onDone&&t.onDone(),changed[0]&&(window.vkLastNav=Date.now()),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.lTimeout)((function(){(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying(),window.TopMenu.toggle(!1)}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.chrome?100:50)};window.Page&&(Page.postsSave(),Page.postsSend(),Page.postsClearTimeouts()),(0,_ads__WEBPACK_IMPORTED_MODULE_9__.updSeenAdsInfo)(),(0,_ads__WEBPACK_IMPORTED_MODULE_9__.__adsUpdate)("already"),"im"!==Nav.objLoc[0]&&"im"!==changed[0]||(where.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({},where.params,{_full_page:!0})),(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_43__.subscribeOnModuleEvaluated)((()=>{var e;where.clientOnly&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("send_navigation_stats_in_spa")||(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.sendGo(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.getModule()),(0,_shared_counters_tmr_moduleChangeHandler__WEBPACK_IMPORTED_MODULE_0__.handleModuleChanged)((null==(e=window.cur)?void 0:e.module)||""))}),!0),Array.isArray(window.cur.beforeNavigateRequestHandlers)&&window.cur.beforeNavigateRequestHandlers.forEach((e=>{"function"==typeof e&&e()})),window.cur.beforeNavigateRequestHandlers=[],__debugMode||(0,_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__.handlePageLoadingStart)();const callDoneFunc=e=>{let t;if(__debugMode)t=done.call(null,e);else{try{t=done.call(null,e)}catch(t){(0,_ui_util__WEBPACK_IMPORTED_MODULE_14__.topError)(t,{dt:15,type:6,url:where.url,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(where.params),js:e.js,answer:Array.prototype.slice.call(arguments).join("<!>")})}(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_43__.subscribeOnModuleEvaluated)((()=>(0,_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__.handlePageLoadingFinish)()),!0)}return t},performRequest=(e=!1)=>{const t=strLoc;(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("special_groups_redirects")&&(0,_shared_lib_bookmakers__WEBPACK_IMPORTED_MODULE_40__.processBookmakers)(_spa_web_infrastructure_routing__WEBPACK_IMPORTED_MODULE_41__.Routes,t)||(where.clientOnly?(clientOnlyDone.call(null,t,opts),__debugMode||(0,_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__.handlePageLoadingFinish)(),(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_43__.triggerSubscribersOnModuleEvaluated)()):window.ajax.post(where.url,where.params,{onDone:(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_44__._)((function*(){if(e&&"success"===(0,_web_feed_constants_feedPageLoadingState__WEBPACK_IMPORTED_MODULE_4__.getFeedPageLoadingState)().content.requestState)return;callDoneFunc({title:arguments[0],html:arguments[1],js:arguments[2],params:arguments[3]})})),onFail:opts.onFail||function(e){if(e)return setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_27__.showFastBox)({title:(0,_lang__WEBPACK_IMPORTED_MODULE_28__.getLang)("global_error")},e).hide,__debugMode?3e4:3e3),!0},frame:opts.noframe?0:1,canReload:!0,showProgress:opts.showProgress,hideProgress:opts.hideProgress,cache:opts.search?1:""}))};if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_navigation_handlers")){let e;for(const t of interseptingNavigationHandlers)try{const o=t({dest:dest,opts:opts,where:where,performRequest:performRequest,clientOnlyDone:clientOnlyDone,debugLog:debugLog,callDoneFunc:callDoneFunc});if(void 0!==o&&(e=o),e)break}catch(e){(0,_shared_lib_js_logger_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logUnknownError)(e)}if(void 0!==e)return e}return performRequest(),debugLog("nothing"),!1},getLinkElementWithPostParamsOrLocation(e,t){var o;const n=null==(o=e)?void 0:o.closest("a");return n&&n.getAttribute?n:t&&t.getAttribute?t:null},setLoc:function(e,t={}){const o="boolean"==typeof t?{isForce:t}:t;let n,i;if(n=i=e,"string"==typeof e?i=Nav.fromStr(e):n=Nav.toStr(e),!o.isForce&&(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.isArticleLayerOpen)()&&!n.match(/article_edit(-?\d+_\d+)/))return;const r=Nav.strLoc;if(Nav.strLoc=n,Nav.objLoc=i,hab.setLoc(Nav.strLoc,t),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("disable_push_equal_history_location")&&r===n&&!t.replace)return;let s=t.replace?_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__.Action.Replace:_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__.Action.Push;t.back&&t.hist&&(s=_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__.Action.Pop);for(const e of locationChangeListeners)e(Nav.strLoc,s)},change:function(e,t=null,o={}){const n=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(Nav.objLoc);return(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(e,(function(e,t){!1===t?delete n[e]:n[e]=t})),Nav.go(n,t,o)},fromStr:function(e){const t=(e=e.split("#"))[0].split("?"),o={0:t[0]||""};return e[1]&&(o["#"]=e[1]),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)((0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(t[1]||""),o)},toStr:function(e){const t=(e=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(e))["#"]||"",o=e[0]||"";delete e[0],delete e["#"];const n=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(e);return(n?o+"?"+n:o)+(t?"#"+t:"")},init:function(){window.globalHistory=[],Nav.strLoc=hab.getLoc(),Nav.objLoc=Nav.fromStr(Nav.strLoc)},getPostParams:function(e,t){const o=!(!e||!e.getAttribute),n={};if(!o)return n;const i=e.getAttribute("data-post-id");i&&(n.post_id=i);const r=e.getAttribute("data-parent-post-id");r&&(n.parent_post_id=r);const s=e.getAttribute("data-post-click-type");s&&(n.post_click_type=s);const a=e.getAttribute("mention_id");a&&(n.post_click_mention_id=a);const _=e.getAttribute("data-post-click-cc-key");_&&(n.post_click_cc_key=_);const l=[e.getAttribute("href"),e.getAttribute("data-href")];(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(l,(function(e,t){if(t&&"#"!==t)return n.post_click_url=t,!1}));if(!!s||t){let t=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("_ads_block_data_w",e);t=t||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("_ads_promoted_post_data_w",e);const o=t&&t.getAttribute("data-ad"),i=t&&t.getAttribute("data-ad-block-uid");o&&(n.ad_data=o),i&&(n.ad_block_unique_id=i)}return n},mergePostParamsOptions:function(e,t){if(t=t||{},!e)return t;function o(e,o,n){const i=n&&t[o];return!(!e||i)&&(t[o]=e,!0)}return o(e.post_id,"_post",!0),o(e.parent_post_id,"_parent_post",!0),o(e.post_click_type,"_post_click_type",!0),t._post_click_type&&(o(e.post_click_mention_id,"_post_click_mention_id",!0),o(e.post_click_cc_key,"_post_click_cc_key",!0),o(e.post_click_url,"_post_click_url",!0),o(e.ad_data,"_post_ad_data",!0)&&o(e.ad_block_unique_id,"_post_ad_block_unique_id")),t},showMoreApps(){const e=getShowMoreAppsContainer();if(!e)return;e.classList.add(SHOW_MORE_APPS_SHOWN_CLASSNAME);getShowMoreAppsButton().classList.add(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME)},showLessApps(){const e=getShowMoreAppsContainer();if(!e)return;e.classList.remove(SHOW_MORE_APPS_SHOWN_CLASSNAME);getShowMoreAppsButton().classList.remove(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME)},subscribeOnModuleEvaluated:_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_43__.subscribeOnModuleEvaluated,unsubscribeOnModuleEvaluated:_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_43__.unsubscribeOnModuleEvaluated};function getShowMoreAppsContainer(){return document.querySelector(".LeftMenu__moreAppsContainer")}function getShowMoreAppsButton(){return document.querySelector(".LeftMenu__item--showMoreApps")}function authorPageNav(e,t,o){if(o&&cur.backFromAuthorPage)return delete cur.backFromAuthorPage,!0;const n=e.toLowerCase(),i=window.AuthorPage&&window.AuthorPage.isOpen(),r=n.match(/^(?:%40|@)-?[.a-z0-9_]+(?:\?\w+)?([\?&]z\=[a-z0-9-_]+)*$/);if(r)return!!i||(r[1]?cur._hardNav=!0:((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_6__.boxRefreshCoords)(boxLoader),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.show)(boxLoader),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.show)(boxLayerWrap),window.stManager.add([window.jsc("web/author_page.js"),window.jsc("web/article_layer.js"),"author_page.css","ui_controls.js","ui_controls.css"],(function(){cur.prevAuthorPageUrl=t,window.AuthorPage.showLayer(n)})),!0));if(i){if(/^article_edit([0-9\-]+)_(\d+)/.test(n))return!1;if(o&&window.AuthorPage.isStandalone())return window.location.reload(!0),!0;const e=window.AuthorPage.close(!0);return void 0!==e?e:!!o}}function articleNav(e,t,o,n,i){const r=e.toLowerCase();if((0,_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_46__.isArticleURL)(r)){var s;window.isArticleLayerOpen()||(cur.articlePrevLoc=t),window.WkView&&WkView.hide(!0),window.boxQueue&&boxQueue.hideAll(),window.Videoview&&window.Videoview.togglePlay(!1);const e=null==(s=i)?void 0:s.target,n=e?(0,_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_38__.getBaseDataFromPost)(e):void 0;return window.stManager.add([window.jsc("web/article_layer.js"),"article.css"]).then((()=>new Promise((e=>{var t,s;ArticleLayer.show(r,!0,!1,{ev:i,onShowDone:()=>{cur.articleSequence=Math.max(1,(cur.articleSequence||0)+(o?-1:1)),e()},trackCode:null==(t=n)?void 0:t.trackCode,postId:null==(s=n)?void 0:s.postId,prepareAsync:!0})}))))}if(window.isArticleLayerOpen()){if(o&&ArticleLayer.isStandalone())return window.location.reload(!0),!0;const t=()=>{ArticleLayer.close(),delete cur.articleSequence},i=cur.articlePrevLoc;return delete cur.articlePrevLoc,i&&!_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_46__.articleURLPattern.test(i)?e===i?(t(),n&&n(),!0):(layers.fullhide=function(){t()},!1):(t(),!0)}return!1}function cleanArticleUrlByObjLoc(e){return e&&e.ref&&delete e.ref,Nav.toStr(e)}function bookmarksNav(e){if(!e)return;const t=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("bookmarks_rows",e.target),o=!!(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("bookmarks_pages",e.target);if((t||o)&&(o||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(t,"bookmarks_rows_user")||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(t,"bookmarks_rows_group")||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(t,"bookmarks_rows_page"))){let o;if(o=t?(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("_bookmark_page_item",e.target):(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("line_cell",e.target),!o)return;(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_32__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"page",item_id:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.intval)((0,_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"id")),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_5__.getServerTime)()})}}function maybeNavigateAwayLink(e,t){if(e&&e.href&&e.getAttribute&&e.getAttribute("data-change-location-with-post-away")){let o=e.href;const n=Nav.getPostParams(e,!(!t.params||!t.params._post_click_type)),i=Nav.mergePostParamsOptions(n,t.params),r={};return i._post&&(r.post=i._post,i._post_ad_data&&(r.post_ad_data=i._post_ad_data),i._post_click_cc_key&&(r.cc_key=i._post_click_cc_key),o="/away.php?to="+encodeURIComponent(o)+"&"+(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(r)),o}return null}function adjustStylesToSpa(){document.body.classList.contains("video_showcase")&&document.body.classList.remove("video_showcase");const e="redesign_web_legacy_width";document.body.classList.contains(e)&&document.body.classList.remove(e),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_helpdesk_styles_cleanup")&&(document.body.classList.contains("body_helpdesk")&&document.body.classList.remove("body_helpdesk"),document.body.classList.contains("body_narrow_sidebar")&&document.body.classList.remove("body_narrow_sidebar"))}Nav.addInterseptingNavigationHandler(_web_feed_feedPageLoading_navigationHandler__WEBPACK_IMPORTED_MODULE_39__.feedLoadingNavigationHandler);var __WEBPACK_DEFAULT_EXPORT__=Nav},38162:(e,t,o)=>{"use strict";o.d(t,{rangeCreate:()=>a,rangeGet:()=>r,rangeInsert:()=>_});var n=o(82753),i=o(7659);function r(){let e=null,t=window.getSelection();t.getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0));let o=null,n=null,i=0,r=0,s=document.activeElement;return e&&("selectionStart"in s?(o=s,n=s,i=s.selectionStart,r=s.selectionEnd):t.rangeCount&&(o=e.startContainer,n=e.endContainer,i=e.startOffset,r=e.endOffset)),[e,o,i,n,r]}function s(e){let t=window.getSelection();return t.removeAllRanges(),t.addRange(e),e}function a(e,t,o,n){let i=document.createRange();return i.setStart(e,t),i.setEnd(o,n),s(i)}function _(e,t){if(t=t?t+"":"",!i.browser.msie&&document.execCommand)document.execCommand("insertHTML",!1,t);else if(e){e.deleteContents();let o=(0,n.cf)(t),i=o.lastChild;e.insertNode(o),i&&((e=e.cloneRange()).setStartAfter(i),e.collapse(!0),s(e))}return e}},74752:(e,t,o)=>{"use strict";o.d(t,{removeSearchPositionTracker:()=>it,saveSearchAttemptStats:()=>rt,serviceTopSearch:()=>L,statlogsValueEvent:()=>_.statlogsValueEvent});var n=o(34788),i=o(34892),r=o(96041),s=o(39586),a=o(82753),_=o(57458),l=o(91686),c=o(59427),u=o(48041);const d={},p="groups",h="groups_catalog",m="search_communities",f="events",g="friends",v="search_people",y="friends_find",E="wall_users",w="wall_groups",b="wall",A="search_statuses",P="news",I="search_audio",T="bookmarks_groups",O="bookmarks_users",C="apps_list",M="apps",D="apps_manage",S="search_video",k="search_clips",L="top_search",R="photos",x="docs",B="messages",N="audio",U="manage",W="video",F="market",K="market_v2",j="market_groups",V="profile_user_friends",H="games_catalog",q="",G="tap",$="join_group",z="leave_group",Y="fave",Q="unfave",X="write_msg",J="add_friend",Z="remove_friend",ee="restore_friend",te="show_photo",oe="add",ne="remove",ie="play",re="open_artist",se="open_author_group",ae="open_author_user",_e="open_author",le="show_similar",ce="search_by_tag",ue="edit",de="like",pe="open_comments",he="share",me="expand",fe="mark_as_spam",ge="stats",ve="group",ye="profile",Ee="",we="own",be="search",Ae="search_groups",Pe="search_communities_geo",Ie="own_playlists",Te="global_clips",Oe="own_audios",Ce="search_artists",Me="search_playlists",De="search_global_playlists",Se="search_audios",ke="own_conversations",Le="own_messages",Re="own_albums",xe="own_videos",Be="video_playlists",Ne="search_videos",Ue="serps",We="SERPS_LOGS_DATA_LOCK",Fe=180,Ke=100,je="",Ve="user",He="group",qe="app",Ge="event",$e="public",ze="grid",Ye="list";function Qe(e,t,o,n="",r=void 0,s=void 0){let _=0,l="",c=0,u=1,d=0,p=0;return e&&((0,i.isArray)(o)||(o=[o]),o.some((o=>{const i=e.classList.contains(o)?e:(0,a.gpeByClass)(o,e);let h=0;if(i){let o;if(o=n?document.querySelectorAll(n):i.parentNode.children,o){if(_=[...o].indexOf(i)+1,_&&r)for(const e in r)if(r.hasOwnProperty(e)){const t=document.querySelectorAll(r[e]);if(t){const o=[...t].indexOf(i)+1;if(o){c=o,l=e;break}}u++,h++}if(s)for(const t of s){const o=(0,a.gpeByClass)(t,e);o&&(u=o.getAttribute("data-block-num"))}return[d,p]=t(i,h),!0}}}))),[_,d,p,l,c,u]}function Xe(e,t,o,n,i,r,s){if(!d[e])return;const _=s.target;if(_&&_.classList)switch(e){case p:return void function(e,t,o,n,i,r){if(!t)return;const s=r.classList,_=r.outerHTML,l=r.tagName;let[,u,d,p,h]=Qe(r,(e=>{let t=e.getAttribute("id")||e.getAttribute("data-id");return t=t?t.replace("gl_groups","").replace("gl_admin",""):0,[0,"-"+t]}),["_gl_row","search_row"],"#groups_list_tab_groups ._gl_row, #groups_list_search_wrap ._gl_row, #results .search_row, #groups_list_search_wrap .search_row",{[we]:"#groups_list_tab_groups ._gl_row",[be]:"#groups_list_search_wrap ._gl_row, #groups_list_search_wrap .search_row"});if(!h)return;p===we&&(n=0,i="");let m=q;if(s.contains("group_row_title")||s.contains("group_row_img")||s.contains("highlight")||s.contains("search_item_img")||"A"===l&&-1!==_.indexOf("return nav.go")){let e=(0,a.gpeByClass)("group_list_row",r)||(0,a.gpeByClass)("groups_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),m=G}(c.FlatButton.isFlatButton(r)&&c.FlatButton.getAppearance(r)!==c.FlatButtonAppearance.SECONDARY||s.contains("search_sub_button"))&&(m=$);(c.FlatButton.isFlatButton(r)&&c.FlatButton.getAppearance(r)===c.FlatButtonAppearance.SECONDARY||s.contains("search_unsub_button"))&&(m=z);if(p===we&&-1!==_.indexOf("GroupsList.subscribe")){if(s.contains("ui_actions_menu"))return;m=$,!cur.scrollList.deleted[-d]&&(m=z)}if(p===we&&-1!==_.indexOf("GroupsList.toggleFave")){if(s.contains("ui_actions_menu"))return;m=Y,"1"===r.getAttribute("data-value")&&(m=Q)}if(m===q)return;tt(),m===G&&et(ve,e,p,h,o,t,d,u,n,i);ot(e,p,h,m,o,t,d,u,n,i,je)}(e,t,o,n,i,_);case m:return(0,u.partConfigEnabled)("search_communities_web_blocks_enabled")?void function(e,t,o,n,i,r,s){var _,l,c,u,d;const p=s.classList,h=s.tagName,m=s.outerHTML,f=Boolean(null==(_=s)?void 0:_.closest(".block_geo_groups"))||Boolean(null==(l=s)?void 0:l.closest(".search_communities_block.section_page"))?Pe:Ae,g=(null==(d=s)||null==(u=d.closest(".search_row"))||null==(c=u.dataset)?void 0:c.id)||0,v=(()=>{var e,t,o,n;const i=document.querySelector("#results .block_user_groups"),r=document.querySelector("#results .block_other_groups"),a=document.querySelector("#results .block_geo_groups"),_=document.querySelector("#results .search_communities_block.section_page");if(a&&(null==(e=s)?void 0:e.closest(".block_geo_groups"))){const e=[...a.querySelectorAll(".search_row")].findIndex((e=>{var t,o;return+(null==(o=e)||null==(t=o.dataset)?void 0:t.id)==+g}));if(-1!==e)return e+1}return[...(null==(t=i)?void 0:t.querySelectorAll(".search_row"))||[],...(null==(o=r)?void 0:o.querySelectorAll(".search_row"))||[],...(null==(n=_)?void 0:n.querySelectorAll(".search_row"))||[]].findIndex((e=>{var t,o;return+(null==(o=e)||null==(t=o.dataset)?void 0:t.id)==+g}))+1})(),y=document.querySelector("#results .block_geo_groups")?f===Pe?1:2:1;if(!v)return;let E=q;if(p.contains("search_item_img")||p.contains("highlight")||"A"===h&&-1!==m.indexOf("return nav.go")){let e=(0,a.gpeByClass)("groups_row",s);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),E=G}p.contains("search_sub_button")&&(E=$);p.contains("search_unsub_button")&&(E=z);if(E===q)return;tt(),E===G&&et(ve,e,f,v,o,t,g,0,n,i,r,y);ot(e,f,v,E,o,t,g,0,n,i,je,"",r,y)}(e,t,o,n,i,r,_):void function(e,t,o,n,i,r,s){var _;if(!t)return;const l=s.classList,c=s.outerHTML,u=s.tagName;let[d,p,h]=Qe(s,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#results .search_row");const m=(null==(_=s)?void 0:_.closest(".search_communities_block.section_page"))?Pe:Ee;if(!d)return;let f=q;if(l.contains("search_item_img")||l.contains("highlight")||"A"===u&&-1!==c.indexOf("return nav.go")){let e=(0,a.gpeByClass)("groups_row",s);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),f=G}l.contains("search_sub_button")&&(f=$);l.contains("search_unsub_button")&&(f=z);if(f===q)return;tt(),f===G&&et(ve,e,m,d,o,t,h,p,n,i);ot(e,m,d,f,o,t,h,p,n,i,je,"",r)}(e,t,o,n,i,r,_);case h:return void function(e,t,o,n,i,r){if(!t)return;const s=r.classList,_=r.outerHTML,l=r.tagName;let[c,u,d]=Qe(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#results .search_row"),p=q;if(s.contains("search_item_img")||s.contains("highlight")||"A"===l&&-1!==_.indexOf("return nav.go")){let e=(0,a.gpeByClass)("groups_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),p=G}s.contains("search_sub_button")&&(p=$);s.contains("search_unsub_button")&&(p=z);if(p===q)return;tt(),p===G&&et(ve,e,Ee,c,o,t,d,u,n,i);ot(e,Ee,c,p,o,t,d,u,n,i,je)}(e,t,o,n,i,_);case f:return void function(e,t,o,n,i,r){const s=r.classList,_=r.outerHTML,l=r.parentElement?r.parentElement.classList:null;let[c,u,d]=Qe(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#groups_list_in_tab_search_all .search_row");if(!c)return;let p=q;if(s.contains("search_item_img")||-1!==_.indexOf("return nav.go")&&l&&l.contains("title")){let e=(0,a.gpeByClass)("search_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),p=G}s.contains("search_sub_button")&&(p=$);s.contains("search_unsub_button")&&(p=z);if(p===q)return;tt(),p===G&&et(ve,e,Ee,c,o,t,d,u,n,i);ot(e,Ee,c,p,o,t,d,u,n,i,je)}(e,t,o,n,i,_);case g:case V:return void function(e,t,o,n,i,r){const s=r.classList,_=r.outerHTML,l=r.tagName;let[,c,u,d,p]=Qe(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("friends_user_row",""):0,[0,t]}),"friends_user_row","#list_content .friends_user_row, #friends_search_cont .friends_user_row",{[we]:"#list_content .friends_user_row",[be]:"#friends_search_cont .friends_user_row"});if(!p)return;let h=q;d===we&&-1!==_.indexOf("showWriteMessageBox")&&(h=X);d===we&&-1!==_.indexOf("deleteFriend")&&(h=Z);d===we&&s.contains("friends_restore_link")&&(h=ee);s.contains("ui_zoom_icon")&&(h=te);d===be&&r.id&&-1!==r.id.indexOf("friends_subsc")&&(h=J);d===be&&r.id&&-1!==r.id.indexOf("friends_unsubsc")&&(h=Z);if(s.contains("friends_photo_img")||d===we&&"A"===l&&-1!==_.indexOf("return nav.go")||d===be&&"A"===l&&0===s.length){let e=(0,a.gpeByClass)("friends_user_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),h=G}if(h===q)return;tt(),h===G&&et(ye,e,d,p,o,t,u,c,n,i);ot(e,d,p,h,o,t,u,c,n,i,je)}(e,t,o,n,i,_);case y:return void function(e,t,o,n,i,r){const s=r.classList,_=r.outerHTML,l=r.parentElement?r.parentElement.classList:null;if(!t)return;let[c,u,d]=Qe(r,(e=>[0,e.getAttribute("data-id")||0]),"search_row","#results .search_row");if(!c)return;let p=q;if(s.contains("search_item_img")||-1!==_.indexOf("return nav.go")&&l&&l.contains("name")){let e=(0,a.gpeByClass)("people_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),p=G}s.contains("search_sub_button")&&(p=J);s.contains("search_unsub_button")&&(p=Z);if(p===q)return;tt(),p===G&&et(ye,e,Ee,c,o,t,d,u,n,i);ot(e,Ee,c,p,o,t,d,u,n,i,je)}(e,t,o,n,i,_);case v:return void function(e,t,o,n,i,r,s){const _=s.classList,l=s.outerHTML,c=s.parentElement?s.parentElement.classList:null;if(!t)return;let[u,d,p]=Qe(s,(e=>[0,e.getAttribute("data-id")||0]),"search_row","#results .search_row");if(!u)return;let h=q;if(_.contains("search_item_img")||-1!==l.indexOf("return nav.go")&&c&&c.contains("name")){let e=(0,a.gpeByClass)("people_row",s);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),h=G}_.contains("search_sub_button")&&(h=J);_.contains("search_unsub_button")&&(h=Z);if(h===q)return;tt(),h===G&&et(ye,e,Ee,u,o,t,p,d,n,i);ot(e,Ee,u,h,o,t,p,d,n,i,je,"",r)}(e,t,o,n,i,r,_);case T:return void function(e,t,o,n,i,r){const s=r.classList,_=r.outerHTML;let[l,c,u]=Qe(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,t]}),"_bookmark_page_item");if(!l)return;let d=q;if(s.contains("group_link")||s.contains("bookmark_page_item__image")){let e=(0,a.gpeByClass)("_bookmark_page_item",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),d=G}(s.contains("ui_zoom")||s.contains("ui_zoom_icon"))&&(d=te);-1!==_.indexOf("Bookmarks.removeBookmark")&&(d=Q);if(d===q)return;tt(),d===G&&et(ve,e,Ee,l,o,t,u,c,n,i);ot(e,Ee,l,d,o,t,u,c,n,i,je)}(e,t,o,n,i,_);case O:return void function(e,t,o,n,i,r){const s=r.classList,_=r.outerHTML,[l,c,u]=Qe(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,t]}),"_bookmark_page_item");if(!l)return;let d=q;if(s.contains("mem_link")||s.contains("bookmark_page_item__image")){let e=(0,a.gpeByClass)("_bookmark_page_item",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),d=G}(s.contains("ui_zoom")||s.contains("ui_zoom_icon"))&&(d=te);-1!==_.indexOf("Bookmarks.removeBookmark")&&(d=Q);if(d===q)return;tt(),d===G&&et(ye,e,Ee,l,o,t,u,c,n,i);ot(e,Ee,l,d,o,t,u,c,n,i,je)}(e,t,o,n,i,_);case I:!function(e,t,o,n,i,r){const s=r.classList,_=r.tagName;let l=(0,a.gpeByClass)("ap_layer_wrap",r);if(l)return;let c=(0,a.gpeByClass)("search_results",r);if(!c)return;let[u,d,p]=Qe(r,(e=>{let t=e.getAttribute("data-full-id");return t&&t.indexOf("_")?t.split("_"):[0,0]}),"_audio_row");if(!u)return;let h=q;(s.contains("audio_row__cover_icon")||s.contains("audio_row__performer_title")||s.contains("audio_row__title")||s.contains("audio_row__title_inner")||s.contains("audio_row__title_inner_subtitle")||s.contains("audio_row__inner")||s.contains("audio_player__place")||s.contains("audio_row__action_next")||s.contains("audio_row__performers"))&&(h=ie);s.contains("audio_row__action_add")&&(h=oe);"A"===_&&(h=re);if(h===q)return;ot(e,Ee,u,h,o,t,p,d,n,i,je)}(e,t,o,n,i,_);break;case S:return void function(e,t,o,n,i,r,s){const a=s.classList;let[_,l,c]=Qe(s,(e=>{let t=e.getAttribute("data-id");return t&&t.indexOf("_")?t.split("_"):[0,0]}),"_video_item","#results ._video_item");if(!_)return;let u=q;(a.contains("video_thumb_play")||a.contains("video_item_controls")||a.contains("video_thumb_label_item")||a.contains("video_thumb_label")||a.contains("video_item_title")||a.contains("mv_subtitle"))&&(u=ie);(a.contains("icon_add")||a.contains("video_thumb_action_add")||a.contains("VideoCard__action--add"))&&(u=oe);a.contains("icon_added")&&(u=ne);a.contains("group_link")&&(u=se);a.contains("al_need_login")&&(u=re);a.contains("mem_link")&&(u=ae);if(u===q)return;ot(e,Ee,_,u,o,t,c,l,n,i,je,"",r)}(e,t,o,n,i,r,_);case k:return void function(e,t,o,n,i,r,s){const a=s.classList;let[_,l,c]=Qe(s,(e=>{let t=e.parentNode.getAttribute("href");return t=t.replace("/clip",""),t&&t.indexOf("_")?t.split("_"):[0,0]}),"ShortVideoGridItem__thumb",".ShortVideoGridItem__thumb");if(!_)return;let u=q;a.contains("ShortVideoGridItem__thumb")&&(u=ie);if(u===q)return;ot(e,Ee,_,u,o,t,c,l,n,i,je,"",r)}(e,t,o,n,i,r,_);case N:return void function(e,t,o,n,i,r){const s=r.classList,a=r.tagName,_=r.parentElement?r.parentElement.classList:null,[,l,c,u,d]=Qe(r,((e,t)=>{let o="";switch(t){case 1:case 4:case 2:o=e.getAttribute("data-full-id");break;case 0:case 3:case 6:o=e.getAttribute("data-raw-id")}return o&&o.indexOf("_")?o.split("_"):o?[o,0]:[0,0]}),["_audio_pl_item","audio_block_small_item","_audio_row","_video_item"],"\n        ._audio_section__search ._audio_pl_item,\n        ._audio_section__search ._audio_row,\n        ._audio_section__search .audio_block_small_item,\n        ._audio_section__search .video_item,\n        ._audio_search_blocks ._audio_row,\n        ._audio_search_blocks ._video_item,\n        ._audio_search_blocks ._audio_pl_item,\n        ._audio_search_blocks .audio_block_small_item\n      ",{[Me]:".CatalogBlock__search_global_albums ._audio_pl_item",[Oe]:".CatalogBlock__search_owned_audios ._audio_row",[Se]:".CatalogBlock__search_global_audios ._audio_row",[Ce]:".CatalogBlock__search_global_artists .audio_block_small_item",[Te]:".CatalogBlock__search_global_clips .video_item",[Ie]:'._audio_page_block__playlists_items[data-audio-context="search_owned_playlist"] ._audio_pl_item',[De]:".CatalogBlock__search_global_playlists ._audio_pl_item"});if(!d)return;let p=q;s.contains("audio_row__action_more")||_&&_.contains("audio_row__actions")||(p=ie);s.contains("audio_row__action_next")&&(p=ie);u===Oe&&s.contains("audio_row__action_recoms")&&(p=le);u===Oe&&s.contains("audio_row__action_delete")&&(p=ne);u===Oe&&s.contains("audio_row__action_add")&&(p=oe);u===Se&&s.contains("audio_row__action_add")&&(p=oe);u===Te&&s.contains("icon_add")&&(p=oe);u===Te&&s.contains("icon_added")&&(p=ne);u===Ce&&"A"===a&&(p=re);if(p===q)return;ot(e,u,d,p,o,t,c,l,n,i,je)}(e,t,o,n,i,_);case L:return void function(e,t,o,n,i,r){const s=r.classList;let _=r;s.contains("ts_contact")||(_=(0,a.gpeByClass)("ts_contact",r,"div#ts_cont_wrap"));let[l,c,u]=Qe(_,(()=>[0,(_.id||"").replace("ts_contact","")]),"ts_contact","#ts_cont_wrap .ts_contact");if(!l)return;let d=G,p=je;switch(_.getAttribute("hinttype")){case"h_friends":p=Ve,s.contains("ts_contact_status")&&(d=X);break;case"h_mutual_friends":case"s_people":case"h_mail_peers":p=Ve;break;case"h_vk_apps":case"h_apps":p=qe;break;case"h_events":p=Ge;break;case"h_publics":p=$e;break;case"h_visited":case"s_groups":p=He}ot(e,Ee,l,d,o,t,u,c,n,i,p)}(e,t,o,n,i,_);case W:return void function(e,t,o,n,i,r,s){const a=s.classList;let[,_,l,c,u]=Qe(s,((e,t)=>{let o="";switch(t){case 1:case 3:o=e.getAttribute("data-id");break;case 2:o=e.getAttribute("data-name")}return o&&o.indexOf("_")?o.split("_"):[0,0]}),["video_playlist_item","_video_item","ui_gallery_item"],"\n        #video_layout_search .video_playlist_item,\n        #video_layout_search ._video_item,\n        #video_subtab_pane_search_promo_albums .ui_gallery_item\n      ",{[Re]:"#video_subtab_pane_search_albums .video_playlist_item",[xe]:"#video_subtab_pane_search_videos ._video_item",[Be]:"#video_subtab_pane_search_promo_albums .ui_gallery_item",[Ne]:"#video_subtab_pane_search_global_videos ._video_item"});if(!u)return;let d=q;(a.contains("icon_add")||a.contains("video_thumb_action_add")||a.contains("VideoCard__action--add"))&&(d=oe);a.contains("icon_added")&&(d=ne);c===xe&&a.contains("video_restore_act")&&(d=oe);c===xe&&a.contains("video_thumb_action_delete")&&(d=ne);(a.contains("video_item_title")||a.contains("video_item_controls")||a.contains("video_thumb_label_item")||a.contains("video_thumb_play"))&&(d=ie);a.contains("group_link")&&(d=se);a.contains("al_need_login")&&(d=re);a.contains("mem_link")&&(d=ae);d===q&&c===Be&&(a.contains("VideoCard__controlsOverlay")||a.contains("VideoCard__title")||a.contains("VideoCard__icon")||a.contains("VideoCard__controlsOverlayText"))&&(d=G);if(d===q)return;ot(e,c,u,d,o,t,l,_,n,i,je,"",r)}(e,t,o,n,i,r,_);case F:case j:return void function(e,t,o,n,i,r){const s=r.classList;let _=ze;const l=(0,a.gpeByClass)("market_row_line",r,".marketplace_content_search");l&&(_=Ye);const c=_===ze?"_market_row":"market_row_line";let[u,d,p]=Qe(r,(e=>[0,e.getAttribute("data-id")||0]),c,"#marketplace_content ."+c);if(!u)return;let h=q;switch(_){case Ye:(s.contains("market_row_img")||s.contains("link"))&&(h=G),s.contains("market_favourite")&&!s.contains("selected")&&(h=Y),s.contains("market_favourite")&&s.contains("selected")&&(h=Q),s.contains("mem_link")&&(h=ae),s.contains("group_link")&&(h=se);break;case ze:h=G,(s.contains("icon")||s.contains("fav"))&&(h=Y)}if(h===q)return;ot(e,Ee,u,h,o,t,p,d,n,i,je)}(e,t,o,n,i,_);case K:return void function(e,t,o,n,i,r){const s=r.classList,a="ClassifiedsCatalogProduct__serpItem",[_,l,c]=Qe(r,(e=>[+e.getAttribute("data-owner-id"),+e.getAttribute("data-id")]),a);if(!_)return;let u=q;s.contains("ClassifiedsCatalogProduct__serpTap")&&(u=G);s.contains("MarketplaceCatalogProductFavouriteButton--favorite")&&(u=Y);s.contains("MarketplaceCatalogProductFavouriteButton--notFavorite")&&(u=Q);s.contains("ClassifiedsCatalogProduct__serpOwnerGroup")&&(u=se);s.contains("ClassifiedsCatalogProduct__serpOwnerUser")&&(u=ae);if(u===q)return;ot(e,Ee,_,u,o,t,c,l,n,i,je)}(e,t,o,n,i,_);case B:return void function(e,t,o,n,i,r){let[,s,a,_,l]=Qe(r,(e=>{let t=e.getAttribute("data-peer");return t||(t=0),[0,t]}),"_im_dialog","._im_page_dcontent ._im_dialog",{[ke]:"._im_page_dcontent ._im_dialog:not(._im_search)",[Le]:"._im_page_dcontent ._im_dialog._im_search"});if(!l)return;ot(e,_,l,G,o,t,a,s,n,i,je)}(e,t,o,n,i,_);case x:return void function(e,t,o,n,i,r){const s=r.classList,a=r.outerHTML;let[,_,l,c,u]=Qe(r,(e=>{let t=e.getAttribute("id");return t&&(t=t.replace("docs_file_","")),t&&t.indexOf("_")?t.split("_"):[0,0]}),"_docs_item","#docs_list ._docs_item, #docs_search_list ._docs_item",{[we]:"#docs_list ._docs_item",[be]:"#docs_search_list ._docs_item"});if(!u)return;let d=q;c===be&&s.contains("docs_add_row")&&(d=oe);c===we&&s.contains("docs_delete_row")&&(d=ne);c===we&&-1!==a.indexOf("Docs.restoreItem")&&(d=oe);c===we&&s.contains("docs_edit_row")&&(d=ue);(s.contains("highlight")||s.contains("docs_item_thumb_img")||s.contains("docs_item_icon")||s.contains("docs_item_name"))&&(d=G);-1!==a.indexOf("Docs.tagSearch")&&(d=ce);if(d===q)return;ot(e,c,u,d,o,t,l,_,n,i,je)}(e,t,o,n,i,_);case C:case M:return void function(e,t,o,n,i,r){const[s,a,_]=Qe(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("app",""):0,[0,t]}),"_apps_cat_row");if(!s)return;let l=G;if(l===q)return;ot(e,Ee,s,l,o,t,_,a,n,i,je)}(e,t,o,n,i,_);case H:return void function(e,t,o,n,i,r){const s=r.classList,[a,_,l]=Qe(r,(e=>[0,e.getAttribute("data-app-id")||0]),"GameCatalogSearchCard");if(!a)return;let c=q;(s.contains("GameCatalogSearchCard__screenshotImg")||s.contains("GameCatalogSearchCard__run")||s.contains("GameCatalogSearchCard__avatar")||s.contains("GameCatalogSearchCard__name"))&&(c=ie);if(c===q)return;ot(e,Ee,a,c,o,t,l,_,n,i,je)}(e,t,o,n,i,_);case R:return void function(e,t,o,n,i,r){const[s,a,_]=Qe(r,(()=>{let e=r.getAttribute("href")||"";e=e.replace("/photo","");let t=e.split("_");return 2!==t.length?[0,0]:[t[0],t[1]]}),"page_post_thumb_wrap","._feed_rows .page_post_thumb_wrap");if(!s)return;ot(e,Ee,s,G,o,t,_,a,n,i,je)}(e,t,o,n,i,_);case E:case w:case b:case A:case P:return void function(e,t,o,n,i,r){const s=r.classList,_=r.outerHTML,l=(0,a.gpeByClass)("replies",r,".post");if(l)return;let c="feed_row",u="";e!==A&&e!==E&&e!==w||(c="post");e!==E&&e!==w||(u="#page_search_posts .post");const[d,p,h]=Qe(r,(e=>{let t;if(e.classList.contains("post"))t=e;else{const o=e.getElementsByClassName("post");if(0===o.length)return[0,0];t=o[0]}if(!t)return[0,0];const o=(t.getAttribute("data-post-id")||"").split("_");return 2===o.length?o:[0,0]}),c,u);if(!d)return;let m=q;const f=(0,a.gpeByClass)("wall_text",r,".post");(f||s.contains("wall_text"))&&(m=G);(s.contains("author")||s.contains("post_img")||s.contains("copy_author")||s.contains("copy_post_img")||s.contains("_copy_post_img")||s.contains("PostHeader__avatar"))&&(m=_e);const g=(0,a.gpeByClass)("PostHeaderSubtitle__link",r,"_post");(s.contains("rel_date")||s.contains("published_by_date")||g)&&(m=G);const v=(0,a.gpeByClass)("like",r,".post"),y=(0,a.gpeByClass)("PostBottomActionContainer",r,"_post");(v||s.contains("like")||y)&&(m=de);const b=(0,a.gpeByClass)("comment",r,".post");(b||s.contains("comment"))&&(m=pe);const P=(0,a.gpeByClass)("share",r,".post");(P||s.contains("share"))&&(m=he);s.contains("ui_actions_menu_item")&&-1!==_.indexOf("bookmarkPost")&&(m=Y);s.contains("ui_actions_menu_item")&&-1!==_.indexOf("wall.markAsSpam")&&(m=fe);const I=(0,a.gpeByClass)("PostTextMore",r,"_post");I&&(m=me);if(m===q)return;ot(e,Ee,d,m,o,t,h,p,n,i,je)}(e,t,o,n,i,_);case U:case D:return void function(e,t,o,n,i,r){const s=r.classList,a=r.tagName,[_,l,c]=Qe(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("app",""):0,[0,t]}),"_apps_settings_row");if(!_)return;let u=q;s.contains("apps_settings_stats")&&(u=ge);"A"!==a&&"img"!==a||(u=G);if(u===q)return;ot(e,Ee,_,u,o,t,c,l,n,i,je)}(e,t,o,n,i,_)}}function Je(){const e=window.vk.id;let t={[e]:{}};const o=l.vkLocalStorage.getItem(Ue);if(!o)return t;try{t=JSON.parse(o)}catch(e){t={}}return t&&e&&(t=(0,n._)({},t,{[e]:(0,n._)({},t[e])})),t}function Ze(e){if("locked"===l.vkLocalStorage.getItem(We))setTimeout((()=>Ze(e)),100);else{l.vkLocalStorage.setItem(We,"locked");try{e()}catch(e){}l.vkLocalStorage.setItem(We,"free")}}function et(e,t,o,n,i,r,s,a,_,c,u=!1,d=0){Ze((()=>{const p=window.vk.id;let h=Math.round(+new Date/1e3),m=Je();m[p][e]=m[p][e]||{};const f=Object.keys(m[p][e]);if(f.length>=Ke){let t=f[0],o=m[p][e][t][0];f.forEach((n=>{let i=m[p][e][n][0];i<o&&(o=i,t=n)})),delete m[p][e][t]}m[p][e][s]=[h,t,o,n,i,r,a,_,c,u,d],l.vkLocalStorage.setItem(Ue,JSON.stringify(m))}))}function tt(){Ze((()=>{let e=Je();if(!e)return;const t=Math.round(+new Date/1e3);Object.keys(e).forEach((o=>{Object.keys(e[o]).forEach((n=>{let i=e[o][n];Object.keys(i).forEach((e=>{let o=i[e][0];t-o>Fe&&delete i[e]})),e[o][n]=i,0===Object.keys(i).length&&delete e[o][n]}))})),l.vkLocalStorage.setItem(Ue,JSON.stringify(e))}))}function ot(e,t,o,n,i,r,s,a,l,c,u,d="",p=!1,h=0){if(!o)return;const m=-(new Date).getTimezoneOffset();(0,_.statlogsValueEvent)("search_position",e,u,n,t,o,p,a,s,r,m,i,l,c,d,h)}function nt(){for(let e in d)d.hasOwnProperty(e)&&it(e)}function it(e){if(d[e]){const t=d[e];(0,r.removeEvent)(window,"click",t),delete d[e]}}function rt(e,t,o,n,i="0",a=0,l="0",c="",u=Ee,p="",h=!1,m=0,f=null,g=0,v=!1){o=o?1:0,i=i&&"0"!==i?i:(0,s.rand)(-9223372035,9223372035).toFixed(0).concat((0,s.rand)(0,999999999).toFixed(0)),v||function(e,t,o,n,i,r,s,a,l="",c=!1,u=0,d=0,p=0){const h=-(new Date).getTimezoneOffset();(0,_.statlogsValueEvent)("search_attempts",e,c,r,n,h,o,s,i,a,t,l,u,d,p)}(e,u,i,n,l,o,a,c,p,h,m,f,g),d[e]&&it(e);const y=Xe.pbind(e,n,i,a,c,h);d[e]=y,(0,r.addEvent)(window,"click",y,!1,!1,!0),cur.destroy||(cur.destroy=[]),cur.destroy.some((e=>e===nt))||cur.destroy.push(nt)}},88909:(e,t,o)=>{"use strict";o.d(t,{updateSTL:()=>r});o(1959),o(52476),o(13996),o(96041),o(19338);var n=o(82753),i=o(39586);o(99203),o(6180);function r(){const{innerWidth:e}=window,{clientWidth:t}=document.documentElement,o=Math.max((0,i.intval)(e),(0,i.intval)(t));(0,n.toggleClass)(document.body,"no_stl",o<vk.width+280),(0,n.toggleClass)(document.body,"no_sett",o<vk.width+62)}},25890:(e,t,o)=>{"use strict";o.d(t,{showNarrative:()=>l,showStory:()=>_});var n=o(44734),i=(o(23434),o(99203)),r=o(52476),s=o(82753);let a=!1;function _(e,t={},o=void 0){if(cur.storiesNotSupported)return(0,n.showFastBox)((0,i.getLang)("global_error"),(0,i.getLang)("stories_bad_browser"));clearTimeout(a),a=setTimeout((function(){document.body.appendChild((0,s.ce)("div",{id:"stories_loader",innerHTML:(0,r.getProgressHtml)("stories_loader_pr","pr_baw pr_medium")+'<div class="back"></div>'}))}),1e3);const _=[window.jsc("web/stories.js"),"stories.css",window.jsc("web/emoji.js"),window.jsc("web/videoview.js"),"videoplayer.css"];window.stManager.add(_,(function(){clearTimeout(a),(0,s.re)("stories_loader"),window.Stories.show(e,t,o)}))}function l(e,t,o=0,n="",i={}){_(`${e}${o=o?`_${o}`:""}&${`narrative${t}`}/${n=n||`narrative${e}_${t}`}`,i)}},46944:(e,t,o)=>{"use strict";o.d(t,{showHint:()=>_,showTitle:()=>a,showTooltip:()=>s});var n=o(82753),i=o(96041),r=o(39586);function s(e,t){(vk.loaded||t.noload)&&e&&(e.temphide||(e.temphide=function(){e.showing=!1},(0,i.addEvent)(e,"mouseout",e.temphide)),e.showing=!0,"loadingstat"!==e.tt&&(e.tt||(e.tt="loadingstat"),cur.cancelTooltip=!1,t.stat&&window.stManager.add(t.stat),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"],(function(){"loadingstat"===e.tt&&(e.tt=!1),e.showing&&!cur.cancelTooltip&&(!function(e){e.temphide&&((0,i.removeEvent)(e,"mouseout",e.temphide),(0,n.removeAttr)(e,"temphide"),(0,n.removeAttr)(e,"showing"))}(e),e.tt&&e.tt.el&&!t.force||(tooltips.create(e,t),t.onCreate&&t.onCreate()),tooltips.show(e,t))}))))}function a(e,t,o,i){e=(0,n.ge)(e);if(!o){o=[Math.round(20-(0,n.getSize)(e)[0]/2),8]}s(e,(0,r.extend)({text:function(){return t||e.getAttribute("data-title")},shift:o,black:1},i||{}))}function _(e,t){t=t||{};s(e=(0,n.ge)(e),(0,r.extend)({text:function(){return e.getAttribute("data-title")},dir:"auto",width:300,shift:[22,8]},t))}},99951:(e,t,o)=>{"use strict";o.d(t,{default:()=>E,topHeaderClearClose:()=>v,topHeaderClose:()=>g});var n=o(82753),i=o(34892),r=o(50033),s=o(96041),a=o(39586),_=o(86136),l=o(99203),c=o(99602),u=o(74752),d=o(86660),p=o(48122),h=o(48041),m=o(19191),f=o(50722);function g(e,t){window.headerDestroy&&window.headerDestroy(t),window.headerDestroy=e}function v(){delete window.headerDestroy}const y={searchLinkId:"ts_search_link",cache:{},lists:{},maxItems:8,init:function(){if(this.inited)return!1;const e=(0,n.ge)("ts_input"),t=(0,n.ge)("ts_cont_wrap");if(vk.id&&Chat.init(),!e)return!1;(0,s.addEvent)(e,"focus",(function(){y.deselect(),(0,a.trim)((0,n.val)(this))&&(0,n.addClass)(t.firstChild,"active"),y.toggleInput(!0)})),(0,s.addEvent)(e,"keydown",(function(o){switch(o.keyCode){case s.KEY.DOWN:case s.KEY.UP:y.moveSelection(o.keyCode),(0,s.cancelEvent)(o);break;case s.KEY.ENTER:const i=(0,n.geByClass1)("active",t);if(i)y.select(i,o);else{const t=(0,a.trim)((0,n.val)(this));t&&(e.blur(),y.clear(),y.toggleInput(!1),nav.go("/search?c[section]=auto&c[q]="+encodeURIComponent(t)))}(0,s.cancelEvent)(o);break;case s.KEY.TAB:y.clear(),y.toggleInput(!1),(0,_.cancelStackFilter)("top_search",!0)}})),vk.id&&((0,s.addEvent)(e,"keyup",(function(e){switch(e.keyCode){case s.KEY.DOWN:case s.KEY.UP:case s.KEY.ENTER:case s.KEY.ESC:(0,s.cancelEvent)(e);break;default:y.prepareRows((0,a.trim)((0,n.val)(this)))}})),(0,s.addEvent)(e,"paste",(function(){setTimeout((function(){y.prepareRows((0,a.trim)((0,n.val)(e)))}),10)})),(0,s.addEvent)(document,"mousedown",(function(e){(0,s.checkKeyboardEvent)(e)||(0,n.domClosest)("top_audio_layer_place",e.target)||(0,n.domClosest)("_ap_layer__close",e.target)||(0,n.domClosest)("layer_wrap",e.target)||(0,n.domClosest)("PortalNavigation",e.target)||(0,n.domClosest)("PortalNavigationDropdown",e.target)||(0,n.domClosest)("ObsceneTextAlertBox",e.target)||g()})),this.inited=!0)},clear:function(){window.tooltips&&tooltips.destroyAll((0,n.ge)("ts_cont_wrap"));const e=(0,n.ge)("ts_input");e&&((0,n.val)(e,""),e.blur(),this.prepareRows())},select:function(e,t,o){if((0,s.checkEvent)(t))return!0;const i=(0,n.ge)("ts_input"),r=(0,a.trim)((0,n.val)(i)).length,_=e.getAttribute("hinttype");var l,c;if(this.clear(),g(),r||i.blur(),o&&(0,n.hasClass)(t.target,"ts_contact_status"))return ajax.post("al_search.php",{act:"save_metrics",ql:r,mk:"chat_box"}),(null==(c=window)||null==(l=c.reforgedME)?void 0:l.selectPeer)?window.reforgedME.selectPeer(o,"global_search"):this.writeBox(o),!1;const u=nav.go(e,t,{params:{search_string:cur.tsStr||""}});return ajax.post("al_search.php",{act:"save_metrics",ql:r,mk:_}),u},deselect:function(){const e=(0,n.ge)("ts_cont_wrap");(0,a.each)((0,n.geByClass)("active",e),((e,t)=>(0,n.removeClass)(t,"active")))},itemOver:function(e,t,o){1===t&&y.deselect();const i=(0,a.inArray)(e.getAttribute("hintType"),["h_friends","h_correspondents","h_chats"]);(0,n.toggleClass)(e,"write",i),(0,n.toggleClass)(e,"active",t)},moveSelection:function(e){const t=(0,n.ge)("ts_cont_wrap"),o=(0,n.geByClass1)("active",t);let i;switch(e){case s.KEY.UP:i=!!o&&(this.getNextNode(o,-1,"a")||o);break;case s.KEY.DOWN:i=o?this.getNextNode(o,1,"a")||o:t.firstChild}return this.deselect(),i&&(0,n.addClass)(i,"active"),!1},getNextNode:function(e,t,o){let i=e;const r=(0,n.domPN)(e);for(;;){if(i=t>0?(0,n.domNS)(i):(0,n.domPS)(i),i||(i=t>0?(0,n.domFC)(r):(0,n.domLC)(r)),o&&i.tagName&&i.tagName.toLowerCase()===o||!o&&i)return i;if(i===e)return!1}},toggleInput:function(e){e=!!e;const t=(0,n.ge)("ts_cont_wrap");(0,n.isVisible)(t)!==e&&((0,n.toggle)("ts_cont_wrap",e),e&&(0,_.cancelStackPush)("top_search",(function(){const e=(0,n.ge)("ts_input");y.toggleInput(!1),e.blur()}),!0))},getList:function(e){switch(e){case"friends":return((0,i.isObject)(this.lists.friends)&&!(0,a.isEmpty)(this.lists.friends)?this.lists.friends:this.topFriends)||{};case"publics":case"events":case"groups":case"apps":case"chats":case"search":return this.lists[e]||{}}return{}},onlines:function(){return window.curFastChat&&curFastChat.onlines||this.lists.onlines||{}},initFriendsList:function(){if(y.friendsLoaded)return!1;if(cur.initingFL||vk.isBanned||!vk.id)return!1;const e=function(){if(y.friendsLoaded)return!1;cur.initingFL=!0,ajax.post("al_search.php",{act:"get_pages"},{cache:1,onDone:function(e){delete cur.initingFL,y.friendsLoaded||((0,a.each)(e,(function(e,t){y.lists[e]=t,"onlines"!==e&&y.updateCache(e)})),y.friendsLoaded=!0,(0,n.val)("ts_input")||y.prepareRows(""))},onFail:function(){delete cur.initingFL}})},t=y.getList("friends");(0,a.isEmpty)(t)?(cur.initingFL=!0,ajax.post("al_search.php",{act:"get_top_friends"},{cache:1,onDone:function(t){delete cur.initingFL,y.topFriends=t,y.updateCache("friends"),y.forceUpdate=!0,y.prepareRows(cur.tsStr||""),e()},onFail:function(){delete cur.initingFL}})):(y.updateCache("friends"),y.forceUpdate=!0,y.prepareRows(cur.tsStr||""),e())},getSimilarQueries:function(e){const t=[e=e.toLowerCase()];let o;return(o=(0,l.parseLatin)(e))&&t.push(o),(o=(0,l.parseLatKeys)(e))&&t.push(o),(o=(0,l.parseCyr)(e))&&t.push(o),t},searchCache:function(e,t){const o=y.getList(e);if(!t)return!1;const n=this.getSimilarQueries(t);if(void 0!==this.cache[e][t])return n;const r=this.cache[e][t]={};(0,a.each)(n,((t,n)=>{const s=this.cache[e][" "+n.charAt(0).toLowerCase()];if(s){const e=new RegExp("(^|[\\s\\-\\(\\)\\.,;|:]+)"+(0,a.escapeRE)(n),"gi");(0,a.each)(s,(t=>{const n=o[t+"_"];if(!(0,i.isArray)(n))return!0;null!==n[0].match(e)&&(r[t]=1)}))}}));let s=0;return(0,a.each)(r,(()=>s++)),r._num=s,n},updateCache:function(e,t,o){const n=t||this.getList(e);this.cache[e]=o&&this.cache[e]||{},(0,a.each)(n,((t,o)=>{const n=o[0],i=(0,a.intval)(t),r=n.split(/[\s\-\(\)\.,;|:]+/);(0,a.each)(r,((t,o)=>{const n=" "+o.charAt(0).toLowerCase();this.cache[e][n]=this.cache[e][n]||{},this.cache[e][n][i]=1}))}))},listSearch:function(e,t,o,n){const i=[];let r={};return t?(y.searchCache(e,t),r=y.cache[e]&&y.cache[e][t]||{}):(0,a.each)(y.getList(e),(function(e){const t=(0,a.intval)(e);r[t]=1})),(0,a.each)(y.getList(e),(function(e){const t=(0,a.intval)(e),s=r[t];if((!n||!n[t])&&s)return!!o--&&void i.push([t,this])})),i},row:function(e,t,o,n,i,r,s,_,l,u=!1){let p=0;if(r&&(n=n.replace(r,'$1<em class="ts_clist_hl">$2</em>')),(0,a.inArray)(s,["h_friends","h_correspondents","h_chats"])&&(p=e),_||(_=""),l=(0,a.intval)(l)){let t="";1&l&&(t+="page_verified "),2&l&&(t+="page_top_author "),8&l&&9!=l&&(t+="page_verified page_verified_by_services "),l=`<div class="${t}" onmouseover="pageVerifiedTip(this, {type: ${l}, oid: ${e}})"></div>`}else l="";let f="";p&&(f=(0,d.getIcon16MessageOutline)().icon);return`\n<a href="${t}" class="ts_contact clear_fix" id="ts_contact${e}" onclick="return TopSearch.select(this, event, ${p});" onmousedown="event.cancelBubble = true;"\n      onmouseover="TopSearch.itemOver(this, 1, event);"  onmouseout="TopSearch.itemOver(this, 0, event);" hinttype="${s}">\n  ${(0,h.partConfigEnabled)("avatar_component_refactor_web")?(0,m.renderAvatarToString)(o,34,"","ts_contact_photo",i,"",!1,e,n,u):`\n        <span class="ts_contact_photo ${(0,c.onlinePlatformClass)(i)}">\n            <img class="ts_contact_img" src="${o}" alt="" />\n        </span>\n    `}\n  <span class="ts_contact_name fl_l">\n    <div class="ts_contact_title_wrap${l?" is_verified":""}">\n      <span class="ts_contact_title">${n}</span>\n    </div>${l}\n    <div class="ts_contact_info">${_}</div>\n  </span>\n  <div class="ts_contact_status">${f}</div>\n</a>`},searchLists:function(e){let t={};return t=e?{friends:{order:0,count:y.maxItems-1,label:(0,l.getLang)("global_friends")},groups:{order:1,count:4,label:(0,l.getLang)("global_communities")},publics:{count:2,parent:"groups"},events:{count:1,parent:"groups"},apps:{order:2,count:1,label:(0,l.getLang)("global_apps")},vk_apps:{order:2,count:1,label:(0,l.getLang)("global_apps")},chats:{order:3,count:y.maxItems-1,label:(0,l.getLang)("global_chats")},search:{order:4,count:y.maxItems-1,label:(0,l.getLang)("head_search_results")}}:{friends:{order:0,count:y.maxItems,label:(0,l.getLang)("global_friends")}},t},initListsHtml:function(){y.listsHtml=[]},addToListsHtml:function(e,t,o){const n=y.searchLists(o),i=n[(n[e]||{}).parent||e]||{},r=i.order||0,s=i.label||"";y.listsHtml[r]=y.listsHtml[r]||(o&&s?[`<div class="ts_search_sep">${s}</div>`]:[]),y.listsHtml[r].push(t)},searchLinkHtml:function(e,t,o,n){return`<a href="${(0,a.clean)(e)}" class="ts_search_link${n?" ts_search_link_sep":""} clear_fix active" id="${(0,a.clean)(o)}" onclick="return TopSearch.select(this, event);" onmousedown="event.cancelBubble = true;" onmouseover="TopSearch.itemOver(this, 1, event);" onmouseout="TopSearch.itemOver(this, 0, event);" >\n        <span class="ts_search_link__label">${t}</span>\n        <span class="ts_search_link__icon">${(0,p.getIcon16Chevron)().icon}</span>\n      </a>`},htmlRows:function(e){let t="";const o=y.listsHtml.map((e=>e.join(""))).join("");if(e){const o="#"===e[0],n=`/search?c[section]=${o?"statuses":"auto"}&c[q]=${encodeURIComponent(e)}`,i=o?(0,l.getLang)("global_news_search_results"):(0,l.getLang)("global_show_all_results");t=y.searchLinkHtml(n,i,y.searchLinkId)}return t+o},prepareRows:function(e){let t=y.maxItems;const o=(0,n.ge)("ts_cont_wrap");if(!o||!vk.id)return!1;if(cur.tsStr&&cur.tsStr===e&&!y.forceUpdate)return!1;delete y.forceUpdate,y.initListsHtml();const i={};if(e){const o=[];(0,a.each)(this.getSimilarQueries(e),(function(){o.push((0,a.escapeRE)(this))})),cur.lastRe=new RegExp("([ -]|^|s|&nbsp;|\b)("+o.join("|")+")","gi"),t--}(0,a.each)(y.searchLists(e),(function(o,r){if(!y.cache[o])return;const s=r.count,_=y.listSearch(o,e,s,i),l=[];let c=0;(0,a.isEmpty)(_)||((0,a.each)(_,((e,o)=>{if(!t||c>=s)return!1;l.push(o),t--,c++})),l.length&&(0,a.each)(l,((t,r)=>{const s=r[1],_=(0,a.intval)(r[0]),l=!!f.Ranges.isUserIdTransitional(_)&&y.onlines()[_],[c,u,d,p,h,m,g=!1]=s,v="search"===o?p:"h_"+o,E=y.row(_,d,u,c,l,n.re,v,h,m,g);y.addToListsHtml(o,E,e),i[_]=1})))})),o.innerHTML=y.htmlRows(e),e||(0,u.removeSearchPositionTracker)(u.serviceTopSearch),!t&&e&&"#"!==e[0]&&(0,u.saveSearchAttemptStats)(u.serviceTopSearch,0,!0,e),t&&e&&"#"!==e[0]&&this.hintsSearch(e,cur.lastRe||!1),(e||""===e)&&(cur.tsStr=e)},hintsSearch:function(e,t){const o=(0,n.ge)("ts_input"),i=(0,n.ge)("ts_cont_wrap");let r;const s=+new Date;ajax.post("al_search.php",{act:"get_pages_hints",q:e},{cache:1,onDone:function(_,l){if((0,a.trim)((0,n.val)(o))!==e)return!1;if(!_)return!1;let c=y.maxItems-(0,n.geByClass)("ts_contact",i).length-1;const d=c,p={};(0,a.each)(_,(function(o,i){const s=(0,a.intval)(o),[_,l,u,d,h,m,f=!1]=i,g=y.searchLists(e),v=d.replace("h_","");let E=(g[v]||{}).parent||v;if(void 0===g[E]&&(E="search"),p[E]=p[E]||{},p[E][o]=i,y.lists[E]=y.lists[E]||{},y.lists[E][o]=i,(0,n.ge)("ts_contact"+s))return!0;if(!c--)return!1;const w=y.row(s,u,l,_,!1,t,d,h,m,f);return y.addToListsHtml(E,w,e),r=!0,!0}));const h=+new Date-s;if((0,u.saveSearchAttemptStats)(u.serviceTopSearch,0,d!==c,e,0,l,h),(0,a.each)(p,((e,t)=>y.updateCache(e,t,!0))),r){const t=(0,n.geByClass1)("active",i),o=t?t.id:"";i.innerHTML=y.htmlRows(e),o&&(0,n.ge)(o)&&(0,n.addClass)((0,n.ge)(o),"active")}}})},writeBox:function(e){window.curFastChat&&curFastChat.inited&&window.FastChat?window.FastChat.selectPeer(e,!1,{entrypoint:"fastchat_global_search"}):f.Ranges.isUserIdTransitional(e)?(0,r.showWriteMessageBox)(!1,e):nav.go("/im?sel="+e)}},E=y},99602:(e,t,o)=>{"use strict";o.d(t,{checkTextLength:()=>d,handleScroll:()=>m,hashCode:()=>u,onlinePlatformClass:()=>h,parseJSON:()=>c.parseJSON,showErrorBox:()=>f,updateMoney:()=>p});o(20562);var n=o(39586),i=(o(82079),o(34892),o(44734)),r=o(82753),s=o(99203),a=o(7659),_=o(39958),l=(o(96041),o(19338)),c=(o(46218),o(88419));function u(e){let t=0;if(0===e.length)return t;for(let o=0,n=e.length;o<n;o++){t=(t<<5)-t+e.charCodeAt(o),t|=0}return t}function d(e,t,o,n,i,a,_,l,c){if(!t)return;const u=t.getValue?t.getValue():t.value,d=t.lastLen||0;if(t.lastLen===u.length&&!a)return;t.lastLen=u.length;const p={"&":5,"<":4,">":4,'"':6,"\n":n?1:4,"\r":0,"!":5,"'":5,$:6,"\\":6},h={1168:1,1169:1,8211:1,8212:1,8216:1,8217:1,8218:1,8230:1,8240:1,8249:1,8250:1,8364:1,8470:1,8482:1,65533:1},m={1037:1,1104:1,1117:1};i&&(p[","]=5);const f=function(e){let t=0;for(let o=0,n=e.length;o<n;o++){const n=c?void 0:p[e.charAt(o)],i=e.charCodeAt(o);t+=void 0!==n?n:!_&&i>=128&&(i<1025||m[i]||i>1119)&&!h[i]&&(i<8220||i>8222)&&(i<8224||i>8226)?("&#"+i+";").length:1}return t}(u);if(o=(0,r.ge)(o),f>Math.max(e-100,.75*e))if((0,r.show)(o),f>e)if(i){const n=(0,r.val)(t,function(e,t){let o=0,n="";for(let i=0,r=e.length;i<r;i++){const r=e.charAt(i),s=c?void 0:p[r],a=e.charCodeAt(i);if(o+=void 0!==s?s:!_&&a>=128&&(a<1025||m[a]||a>1119)&&!h[a]&&(a<8220||a>8222)&&(a<8224||a>8226)?("&#"+a+";").length:1,o>t)break;n+=r}return n}(u,Math.min(e,d)));t.lastLen=n.length,o.innerHTML=(0,s.getLang)("text_N_symbols_remain",0),l&&o.classList.contains(l)&&o.classList.remove(l)}else o.innerHTML=(0,s.getLang)("text_exceeds_symbol_limit",f-e),l&&!o.classList.contains(l)&&o.classList.add(l);else o.innerHTML=(0,s.getLang)("text_N_symbols_remain",e-f),l&&o.classList.contains(l)&&o.classList.remove(l);else(0,r.hide)(o)}function p(e,t){if(void 0===e||!1===e)return;if("object"==typeof e)return;let o="";!0===t?(vk.balanceEx=e,o="_ex"):vk.balance=e;const i=(0,r.geByClass)("votes_balance_nom"+o);(0,n.each)(i,((t,o)=>o.innerHTML=`${e} ${(0,s.getLang)("votes_flex",e)}`));const a=e*(vk.vcost||7),_=(0,r.geByClass)("money_balance_nom"+o);(0,n.each)(_,((e,t)=>t.innerHTML=(0,s.getLang)("global_money_amount_rub",a,!0))),void 0!==t&&!1!==t&&!0!==t&&p(t,!0),window.GamesCatalog&&window.GamesCatalog.updateMoney(e);const l=document.getElementById("topmenu-balance");l&&(l.textContent=e)}function h(e){let t=" _online";return e&&(t+=" online"),a.mobPlatforms[e]&&(t+=" mobile"),(0,_.updateOnlineText)(),t}function m(e){e=e.split(",");const t=cur.named||{};let o=e[0]&&(t[e[0]]||(0,r.ge)(e[0]))||!1;const n=e[1]&&(t[e[1]]||(0,r.ge)(e[1]))||!1;if(!o&&!n){if(o=document.getElementsByName(e[0])[0],!o)return;o=o.nextSibling}const i=(0,r.ge)("page_header_wrap")||(0,r.ge)("dev_top_nav_wrap");setTimeout((function(){o&&(0,l.scrollToY)((0,r.getXY)(o)[1]-(i?(0,r.getSize)(i)[1]:0),0),n&&(0,r.elfocus)(n)}),300)}function f(e,t){return void 0===t&&(t=1e4),setTimeout((0,i.showFastBox)({title:(0,s.getLang)("global_error")},e).hide,t)}},27095:(e,t,o)=>{"use strict";o.d(t,{isEmail:()=>r});var n=o(39586);const i=/^\S+@\S+\.\S+$/;const r=e=>(e=(0,n.trim)(e),Boolean(e.match(i)))},62425:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{VideoConstants:()=>VideoConstants,initVideo:()=>initVideo,loadInlineVideo:()=>loadInlineVideo,pauseLastInlineVideo:()=>pauseLastInlineVideo,playLastInlineVideo:()=>playLastInlineVideo,revertLastInlineVideo:()=>revertLastInlineVideo,showInlineVideo:()=>showInlineVideo,showVideo:()=>showVideo});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(34788),_videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(69367),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(57458),_web_lib_date__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86812),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82753),_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96041),_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39586),_lang__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99203),_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(44734),_layout_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(52476),_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(10524),_web_video_video_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(37817),_shared_lib_site__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(20562);const rtrgQuery=`//${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_10__.getHostName)()}/rtrg?r=w*Z1Flwi3QdbWaoLMc7zOA*7Cr4Nrtojr9otHjsjIhsb2CVqRWalgbvxZw3MzxZa6be3Siu2XY3gvK5fysYtWLWgNwHMpjRTupSGZrcGRNlj7fduqq9*t7ij6CX4aMcBTD5be8mIXJsbTsvP8Zl2RZEd76a4FTuCOFqzMxqGtFc-`;function showVideo(e,t,o={},n){if(cur.viewAsBox)return cur.viewAsBox();if((0,_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(n))return;if((0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.isUnauthorizedMediaLayerBoxAvailable)()&&(n||o.openInPopup)&&!o.forceUnauth&&!cur.is_showcase)return _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.Unauthorized.showMoreBox(null,0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.UnauthorizedSourceType.VIDEO,(()=>{showVideo(e,t,(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_11__._)({},o,{openInPopup:!1,forceUnauth:!0}),n)})),!1;if(o.forceUnauth=!0,window.mvcur&&mvcur.mvShown&&mvcur.minimized&&mvcur.videoRaw==e)return o.fromPlayer||Videoview.unminimize(),!1;const i=nav.objLoc.claim,r=!(!o.addParams||!/^-?\d+_\d+$/.test(o.addParams.post_id))&&o.addParams.post_id;if(!o.playlistId&&r&&(/^public|groups|profile$/.test(cur.module)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)("post"+r,"own")?o.playlistId="wall_"+cur.oid:o.playlistId="post_"+o.addParams.post_id),o.playlistId)if(o.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o.addParams,{playlist_id:o.playlistId}),window.VideoPlaylist&&VideoPlaylist.getList(o.playlistId))e||(o.addParams.load_playlist=1);else if(/^wall_/.test(o.playlistId)){var s,a;const e=cur.wallVideos&&cur.wallVideos[o.playlistId];o.addParams.load_playlist=(null==(s=e)?void 0:s.list.length)>=50?0:1,o.addParams.show_next=(null==(a=e)?void 0:a.list.length)>=1?1:0}else{const e=/^(?:post_)?-?\d+_-?\d+$/.test(o.playlistId)&&!(cur.pageVideosList&&cur.pageVideosList[o.playlistId]);o.addParams.load_playlist=e?1:0,o.addParams.show_next=e?1:0}o.expandPlayer||!cur.videoInlinePlayer||cur.videoInlinePlayer.getVideoId()!=e&&cur.videoInlinePlayer.getProjectId()!=e||!cur.videoInlinePlayer.canExpand()||(o.expandPlayer=cur.videoInlinePlayer),o.expandPlayer&&(o.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o.addParams,{expand_player:1}),delete cur.videoInlinePlayer);const _=new CallHub((function(){o.hidden?o.hidden(_.data,o,t,e):Videoview.showVideo.apply(Videoview,_.data)}),2);window.stManager.add([window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/page.js"),"page.css"],(()=>{_.failed||(o.hidden||(revertLastInlineVideo(),Videoview.show(n,e,t,o)),_.done())})),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o,{onDone:function(){const t=Array.prototype.slice.call(arguments);t.unshift(e),_.data=t,_.done()},onFail:function(t){if(_.failed=1,!o.hidden){var n,i;if(window.mvcur&&mvcur.mvShown)window.Videoview.hide();else{const t=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.clone)(nav.objLoc);t.z==="video"+e&&delete t.z,t[0]==="video"+e&&(t[0]="videos"+e.split("_")[0]),nav.setLoc(t)}const o=t&&"object"==typeof t?null==(n=t)?void 0:n.data:t;if((0,_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)((0,_lang__WEBPACK_IMPORTED_MODULE_5__.getLang)("global_error"),o||(0,_lang__WEBPACK_IMPORTED_MODULE_5__.getLang)("global_error_occured")),null==(i=window.Videoview)?void 0:i.isMinimized())if(mvcur&&mvcur.fallbackData){const{videoRaw:e,options:t,listId:o,mvData:n}=mvcur.fallbackData;mvcur.videoRaw=e,mvcur.options=t,mvcur.listId=o,mvcur.myData=n,mvcur.fallbackData=null,Videoview.initPlaylistBlock(e,t.playlistId,t.catLoadMore),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hide)("mv_progress_box")}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)("mv_player_box","");_.done()}return!0},cache:"status"!==t}),window.VideoPlaylist&&(window.VideoPlaylist.module=null);let l=o.params;return l||(l={act:"show",video:e,list:t,autoplay:o.autoplay?1:0,ad_video:o.ad_video,module:o.module||window.Videoview&&window.Videoview.getVideoModule()||"",webcast:nav.objLoc.webcast?1:0,screen:nav.objLoc.screen?1:0}),cur.is_showcase&&!l.context&&cur.ref_context&&(l.context=cur.ref_context),o.addParams&&(l=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(l,o.addParams)),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(l.module)||(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(l,{_nol:JSON.stringify(nav.objLoc)}),l.module&&(window.VideoPlaylist&&(window.VideoPlaylist.module=l.module),o.is_similar&&(l.module+=":similar")),i&&(l.claim=i),ajax.post(`al_video.php?act=${l.act}`,l,o),(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_9__.idlizeCall)((()=>{(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=`${locProtocol}${rtrgQuery}`})),!1}function showInlineVideo(videoId,listId,options,ev,thumb){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(ev))return!0;if(options=options||{},window.mvcur&&mvcur.mvShown||options.hasRestriction)return showVideo(videoId,listId,options,ev);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(thumb,"data-loading"))return!1;const h=thumb.clientHeight,w=thumb.clientWidth,btn=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domByClass)(thumb,"page_post_video_play_inline"),onLoaded=options.onLoaded;onLoaded&&delete options.onLoaded;const params={video:videoId,list:listId,autoplay:options.autoplay,module:options.module};return thumb.className.includes("page_video_croppable")&&(params.with_crop=!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domData)(thumb,"stretch-vertical")&&(params.stretch_vertical=1),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(params,options.addParams),window.VideoPlaylist&&(window.VideoPlaylist.module=params.module),showProgress(),loadInlineVideo(params,(function(e,t){hideProgress(),e?onDone.apply(null,t):onFail.apply(null,t)}),options.cache),cur.videoInlinePlayerDestroyerSet||(cur.destroy.push(_destroyInlineVideoPlayer),cur.videoInlinePlayerDestroyerSet=1),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=rtrgQuery,!1;function onDone(title,html,js,opts){revertLastInlineVideo(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hide)(thumb);const isMt=thumb.dataset.mtId,isDirectMp4=!!thumb.dataset.directMp4,mtAspectRatio=thumb.dataset.mtAspectRatio?Number(thumb.dataset.mtAspectRatio):0,videoWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("div",{innerHTML:html,className:"inline_video_wrap"},{width:w,height:isMt&&mtAspectRatio?Math.round(w*mtAspectRatio):h});if(opts&&opts.mvData&&-195297477!==opts.mvData.authorId&&(window._videoLastInlined=[videoWrap,thumb]),thumb.parentNode.appendChild(videoWrap),cur.mvOpts=!(!opts||!opts.mvData)&&opts.mvData,opts.player){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domByClass)(videoWrap,"video_box_wrap");(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(onLoaded)&&(opts.player.params[0].onPlayerLoaded=onLoaded);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(thumb,"data-link-attr");if(t&&(opts.player.params[0].link_attr=t),isMt){opts.player.params[0].ad_block_id=isMt;const e=thumb.dataset.mtVideoMp4;e&&(opts.player.params[0].direct_mp4=e);const t=thumb.dataset.mtVideoHls;t&&(opts.player.params[0].hls=t),mtAspectRatio&&(opts.player.params[0].aspect_ratio=mtAspectRatio);const o=thumb.firstChild&&thumb.firstChild.firstChild&&thumb.firstChild.firstChild.src;o&&(opts.player.params[0].jpg=o);const n=thumb.firstChild,i=n.dataset.mtLink,r=n.getAttribute("onclick");i&&(opts.player.params[0].link_attr=`href="${i}" onclick="${r}"`)}isDirectMp4&&(opts.player.params[0].direct_mp4=thumb.dataset.directMp4,opts.player.params[0].hls=void 0,opts.player.params[0].dash_sep=void 0,Object.keys(opts.player.params[0]).forEach((e=>{e.startsWith("url")&&(opts.player.params[0][e]=void 0)}))),VideoInitializer.initPlayer(e,opts.player.type,opts.player.params)}try{eval("(function () {"+js+"})();")}catch(e){}if(!params.from_autoplay){const e=window.Notifier;e&&setTimeout((()=>e.lcSend("video_start")),0);const t=window.ap;t&&t.isPlaying()&&(t.pauseByChangeChannel(),t.pausedByVideo=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkNow)())}ev&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("bookmarks_row_type_video",ev.target)&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_0__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"video",item_owner_id:cur.mvOpts.oid,item_id:cur.mvOpts.vid,time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_1__.getServerTime)()}),thumb.setAttribute("data-playing",1)}function onFail(e){params.from_autoplay||(0,_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)((0,_lang__WEBPACK_IMPORTED_MODULE_5__.getLang)("global_error"),e||(0,_lang__WEBPACK_IMPORTED_MODULE_5__.getLang)("global_error_occured"))}function showProgress(){thumb.setAttribute("data-loading",1),options.no_progress||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass)(btn,"page_post_video_play_inline_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)(btn,(0,_layout_utils__WEBPACK_IMPORTED_MODULE_7__.getProgressHtml)()))}function hideProgress(){thumb.removeAttribute("data-loading"),options.no_progress||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(btn,"page_post_video_play_inline_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)(btn,""))}}function loadInlineVideo(e,t,o){const n=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)({autoplay:0,module:cur.module},e);(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(n.module)||(n._nol=JSON.stringify(nav.objLoc));const i=[window.jsc("web/videoview.js"),"videoview.css"];function r(e,o){(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(t)&&t(e,o)}n.from_autoplay&&i.push("videoplayer.css"),ajax.post("al_video.php?act=video_box",n,{onDone:function(){r(!0,[].slice.call(arguments))},onFail:function(){return r(!1,[].slice.call(arguments)),!0},stat:i,local:1,cache:o})}function revertLastInlineVideo(e,t=!1){if(!window._videoLastInlined)return;let o,n=!1;const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(e);if(i&&(o=window._videoLastInlined[0],o)){for(;o=o.parentNode;)if(o==i){n=!0;break}if(!n)return}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)(window._videoLastInlined[0]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)(window._videoLastInlined[1]),window._videoLastInlined[1].removeAttribute("data-playing"),window._videoLastInlined=!1,_destroyInlineVideoPlayer(t),delete cur.mvOpts}function _destroyInlineVideoPlayer(e=!1){cur.videoInlinePlayer&&(cur.videoInlinePlayer.destroy(e),delete cur.videoInlinePlayer)}function pauseLastInlineVideo(){if(!window._videoLastInlined)return;const e=cur.videoInlinePlayer||document.getElementById("video_yt")&&window.VideoYoutube;if(e){if(e.isActiveLive&&e.isActiveLive())return;cur.mvOpts.lastPlayerState=e.getState(),e.togglePlay(!1)}}function playLastInlineVideo(){if(!window._videoLastInlined||!cur.mvOpts||cur.mvOpts.lastPlayerState!==_videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_12__.PLAYING)return;const e=cur.videoInlinePlayer||document.getElementById("video_yt")&&window.VideoYoutube;e&&e.togglePlay(!0)}const VideoConstants={VIDEO_ITEM_INDEX_OWNER_ID:0,VIDEO_ITEM_INDEX_ID:1,VIDEO_ITEM_INDEX_THUMB:2,VIDEO_ITEM_INDEX_TITLE:3,VIDEO_ITEM_INDEX_FLAGS:4,VIDEO_ITEM_INDEX_DURATION:5,VIDEO_ITEM_INDEX_HASH:6,VIDEO_ITEM_INDEX_OWNER:8,VIDEO_ITEM_INDEX_DATE:9,VIDEO_ITEM_INDEX_VIEWS:10,VIDEO_ITEM_INDEX_PLATFORM:11,VIDEO_ITEM_INDEX_BLOCKED:12,VIDEO_ITEM_INDEX_MUSIC_VIDEO_META:13,VIDEO_ITEM_INDEX_ARIA:14,VIDEO_ITEM_INDEX_RESTRICTION_BLOCK:15,VIDEO_ITEM_INDEX_RESTRICTION_CLASSES:16,VIDEO_ITEM_INDEX_ADMIN_INFO:17,VIDEO_ITEM_INDEX_CARD_MENU_TOGGLE:18,VIDEO_ITEM_INDEX_RAW_DURATION:19,VIDEO_ITEM_INDEX_LINK:20,VIDEO_ITEM_INDEX_TRAILER:21,VIDEO_ITEM_INDEX_VIEWED_DURATION:22,VIDEO_ITEM_INDEX_VIEWED_DAY:23,VIDEO_ITEM_INDEX_LIST_ID:24,VIDEO_ITEM_INDEX_PLAYLIST_ID:25,VIDEO_ITEM_INDEX_CARD_ACTIONS:26,VIDEO_ITEM_INDEX_CARD_PRIVACY_ICONS:27,VIDEO_ITEM_INDEX_SMALL_THUMB:28,VIDEO_ITEM_INDEX_ML_THUMB_ID:29,VIDEO_ITEM_INDEX_PLAY_FROM:30,VIDEO_ITEM_INDEX_RECOMMENDATION_SOURCES:31,VIDEO_ITEM_INDEX_RECOMMENDATION_USERS:32,VIDEO_ITEM_TRACK_CODE:33,VIDEO_ITEM_INDEX_SUBTITLE_PLACE:34,VIDEO_ITEM_INDEX_AVATAR_IMAGE:35,VIDEO_ITEM_INDEX_AVATAR_PLACE:36,VIDEO_ITEM_INDEX_DESCRIPTON:37,VIDEO_ITEM_INDEX_DOWNLOAD_URL:38,VIDEO_ITEM_INDEX_OWNER_HREF:39,VIDEO_ITEM_PUBLISH_DATE:40,VIDEO_ITEM_BOOKMARKED:41,VIDEO_ITEM_BOOKMARK_HASH:42,VIDEO_ITEM_INDEX_UPCOMING_LIVE_DATE:43,VIDEO_TEMPLATE_INDEX_SUBTITLE_DURATION_WITH_VIEWS:0,VIDEO_TEMPLATE_INDEX_SUBTITLE_LABEL:1,VIDEO_TEMPLATE_INDEX_SUBTITLE_SCHEDULED:2,VIDEO_TEMPLATE_INDEX_SUBTITLE_UPCOMING_LIVE:3,VIDEO_ITEM_FLAG_EXTERNAL:1,VIDEO_ITEM_FLAG_ACTIVE_LIVE:2,VIDEO_ITEM_FLAG_CAN_DOWNLOAD:32,VIDEO_ITEM_FLAG_CAN_EDIT:64,VIDEO_ITEM_FLAG_CAN_DELETE:128,VIDEO_ITEM_FLAG_CAN_ADD:256,VIDEO_ITEM_FLAG_PRIVATE:512,VIDEO_ITEM_FLAG_NO_AUTOPLAY:1024,VIDEO_ITEM_FLAG_ADDED:2048,VIDEO_ITEM_FLAG_SKIP_THUMB_LOAD:4096,VIDEO_ITEM_FLAG_NEED_SIGN_IN:8192,VIDEO_ITEM_FLAG_HD:16384,VIDEO_ITEM_FLAG_DELETED:32768,VIDEO_ITEM_FLAG_CAN_MOVE:65536,VIDEO_ITEM_FLAG_CAN_DELETE_FROM_HISTORY:1<<17,VIDEO_ITEM_FLAG_PRIVATE_BY_LINK:1<<18,VIDEO_ITEM_FLAG_LIVE:1<<19,VIDEO_ITEM_FLAG_PRIVATE_NOT_PUBLISHED:1<<20,VIDEO_ITEM_FLAG_PRIVATE_MEMBERS:1<<21,VIDEO_ITEM_FLAG_HORIZONTAL:1<<22,VIDEO_ITEM_FLAG_NFT_AVATAR:1<<23,VIDEO_ITEM_FLAG_SCHEDULED:1<<24,VIDEO_ITEM_FLAG_CAN_BOOKMARK:1<<25,VIDEO_ITEM_FLAG_BOOKMARKED:1<<26,VIDEO_ITEM_FLAG_UPCOMING_LIVE:1<<27};function initVideo(){window._videoLastInlined=!1}},47252:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(85893),i=o(67294),r=o(73935),s=o(45697),a=o.n(s),_=o(59397),l=o(17622);class c extends i.Component{componentDidMount(){this.el=r.findDOMNode(this),this.inputEl="INPUT"===this.el.tagName?this.el:this.el.getElementsByTagName("input")[0],this.backgroundElement=document.getElementById("box_layer_wrap"),this.el.addEventListener("mouseenter",this.addTooltip),this.el.addEventListener("mouseleave",this.removeTooltip),this.inputEl.addEventListener("focus",this.addTooltip),this.inputEl.addEventListener("blur",this.removeTooltip),this.backgroundElement.addEventListener("scroll",this.addTooltip),window.addEventListener("resize",this.addTooltip)}componentWillUnmount(){this.el.removeEventListener("mouseenter",this.addTooltip),this.el.removeEventListener("mouseleave",this.removeTooltip),this.inputEl.removeEventListener("focus",this.addTooltip),this.inputEl.removeEventListener("blur",this.removeTooltip),this.backgroundElement.addEventListener("scroll",this.addTooltip),window.removeEventListener("resize",this.addTooltip)}update(e){const{position:t,align:o,text:n,rect:i,marginTop:r,marginLeft:s}=e,a=!i||0===i.top&&0===i.left;if(!0===e.remove||!this.props.isShown||a)return void this.setState({tooltip:Object.assign({},this.state.tooltip,{removed:!0})});let _=i.left,l=i.top;switch(t){case"t":_+=.5*i.width;break;case"r":_+=i.width,l+=.5*i.height;break;case"b":_+=.5*i.width,l+=i.height;break;case"l":l+=.5*i.height}_=Math.round(_+s),l=Math.round(l+r),this.setState({tooltip:{position:t,align:o,text:n,x:_,y:l}})}render(){const e=this.renderTooltip();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),(0,n.jsxs)(i.Fragment,{children:[this.props.children,r.createPortal(e,this.defaultNode)]})):this.props.children}constructor(e){super(e),this.addTooltip=e=>{if(this.el){const{text:e,position:t,align:o,marginTop:n,marginLeft:i}=this.props,r=(0,l.default)(this.el);this.update({text:e,position:t,align:o,rect:r,marginTop:n,marginLeft:i})}},this.removeTooltip=e=>{document.activeElement!==this.inputEl&&this.update({remove:!0})},this.renderTooltip=()=>{if(!this.state.tooltip)return null;const{x:e,y:t,position:o,align:i,text:r,removed:s}=this.state.tooltip,{appearance:a,width:l}=this.props,c=(0,_.classNames)("UnblockTooltip",`UnblockTooltip--${o}`,`UnblockTooltip--${a}`,{"UnblockTooltip--removed":!!s,[`UnblockTooltip--align-${i}`]:"t"===o||"b"===o});let u={top:t,left:e},d=l?{width:l}:{};return(0,n.jsx)("div",{className:c,style:u,children:(0,n.jsx)("div",{className:"UnblockTooltip__in",style:d,dangerouslySetInnerHTML:{__html:r}})})},this.state={}}}c.propTypes={appearance:a().oneOf(["black","white"]),text:a().string.isRequired,position:a().oneOf(["t","r","b","l"]),align:a().oneOf(["left","center","right"]),marginTop:a().number,marginLeft:a().number,width:a().number,isShown:a().bool,children:a().node},c.defaultProps={appearance:"black",position:"b",align:"center",marginTop:0,marginLeft:0}},2620:(e,t,o)=>{"use strict";o.d(t,{Login:()=>P,initLoginBoxForm:()=>b,initLoginCombinedBoxForm:()=>A});var n=o(34788),i=o(85893),r=o(97742),s=o(3895),a=o(1959),_=o(12111),l=o(73359),c=o(23434),u=o(39586),d=(o(67294),o(31591)),p=o(82753),h=o(99898),m=o(47214),f=o(56121),g=o(68312),v=o(27095),y=o(28959),E=o(80541),w=o(82930);function b(e){e&&new m.LoginBoxForm(e)}function A(e,t={}){const o=e.querySelector('.LoginRecentBox [name="ul"]'),n=e.querySelector(".LoginRecentBox__alternative"),i=e.querySelector(".LoginRecentBox .LoginBox__title");n.addEventListener("click",(t=>{t.preventDefault(),e.classList.add("LoginCombinedBox--standard")}));const r=new h.LoginRecentUsersGallery(e.querySelector(".LoginRecentBox__users"));r.onChange=e=>{const n=t.users[e];n&&(i.innerHTML=n.title,o&&(o.value=n.encrypted))},r.init(),e.querySelectorAll(".LoginRecentBox__user").forEach(((e,t)=>{e.addEventListener("click",(()=>{r.setIndex(t)}))}))}const P={init(){(0,u.each)((0,p.geByClass)("big_text","login_form_wrap"),((e,t)=>{(0,l.placeholderInit)(t)})),setTimeout(p.elfocus.pbind(!(0,p.isVisible)("email")||(0,p.val)("email")?"pass":"email"),0);let e=(0,p.ge)("login_form"),t=(0,p.ge)("email"),o=(0,p.ge)("pass"),n=(0,p.val)("login_ul");const i=[(0,p.$)("input[name=captcha_sid]"),(0,p.$)("input[name=captcha_key]"),(0,p.$)("input[name=recaptcha]")];return e&&(e.onsubmit=()=>{if(!window.submitQuickLoginForm)return!0;if(!n&&!(0,u.trim)(t.value))return(0,a.notaBene)(t),!1;if(!(0,u.trim)(o.value))return(0,a.notaBene)(o),!1;let e={expire_input:(0,p.val)("expire_input")};n&&(e.ul=n),i.forEach((e=>{e.value||e.remove()}));const r=(0,v.isEmail)(t.value)?g.RegistrationItemEventTypes.INPUT_EMAIL:g.RegistrationItemEventTypes.INPUT_PHONE;return f.registrationItemStat.logEvent(r,cur.eventScreen,void 0,{force:!0}),submitQuickLoginForm(t.value,o.value,{prg:"login_button",params:e}),!1}),window.loginByCredential&&!n&&(t.onclick=loginByCredential,o.onclick=loginByCredential),!0},initBlockedPage(){r.FAQTutorial.tryInit()},initBox(){const e=(0,c.curBox)();e.changed=!0,e.setOptions({width:560,onClean:()=>{},hideButtons:!0,bodyStyle:"padding: 0"}),b(document.querySelector(".LoginBox"))},initVkId(e){const t=document.querySelector("#content");t&&(0,y.initVkIdForm)(t,e.source,e)},changeMail(e,t,o){let n=(0,u.trim)((0,p.val)("login_new_mail")),i=1;return n?(e&&(o=cur.changeMailHash),-1==n.indexOf("@")?(0,_.showMsg)("login_change_mail_error",(0,s.getLang)("reg0_error_bad_email"),"error"):(e&&(i=0),void ajax.post("/login?act=a_change_mail",{newmail:n,hash:o,from_page:i},{onDone(t){let o="login_change_mail_form";e&&(o="login_change_mail_box",(0,c.curBox)().removeButtons(),(0,c.curBox)().addButton((0,s.getLang)("global_cancel"),null,"no")),(0,p.val)(o,t)},onFail(e){return(0,_.showMsg)("login_change_mail_error",e,"error"),!0},showProgress:()=>lockButton(t),hideProgress:()=>unlockButton(t)}))):(0,a.notaBene)("login_new_mail")},initChangeMailBox(){(0,c.curBox)().removeButtons(),(0,c.curBox)().addButton((0,s.getLang)("global_cancel"),null,"no"),(0,c.curBox)().addButton((0,s.getLang)("reg0_change_mail"),P.changeMail.pbind(1)),(0,p.elfocus)("change_mail_new")},isBanExpired(){return cur.unblockDate<Date.now()/1e3},canUnblockFast(){return!0===cur.canUnblockFast},showUnblockForm(){(0,E.showMessageBoxModal)((e=>(0,i.jsx)(w.AppRootProvider,{children:(0,i.jsx)(d.default,(0,n._)({},e,{tooltips:{phone:cur.phoneTooltip,phoneCallReset:cur.phoneCallResetTooltip,code:cur.verificationCodeTooltip,codeCallReset:cur.verificationCodeCallResetTooltip,password:cur.passwordTooltip}}))})))},fastUnblock:e=>{let t={act:"fast_unblock",hash:e};const o=document.getElementsByClassName("unblock_button--fast")[0];o?ajax.post("/al_login.php",t,{onDone:function(){(0,c.showDoneBox)((0,s.getLang)("login_fast_unblocked_wait_description"),{out:5e3}),nav.reload()},onFail:function(e){return unlockButton(o),(0,c.showDoneBox)(e),!0},showProgress:()=>lockButton(o)}):showFastBox((0,s.getLang)("global_error"))},showDeletePageBox(){showFastBox((0,s.getLang)("login_blocked_delete_page_header"),(0,s.getLang)("login_blocked_sure_delete_page_question"),(0,s.getLang)("box_yes"),(()=>{ajax.post("al_settings.php",{act:"a_deactivate",hash:cur.deactivate_hash},{onDone:e=>{(0,c.showDoneBox)(e),nav.go("/id"+vk.id)},onFail:e=>{(0,c.showDoneBox)(e),(0,c.curBox)().hideProgress()}})}),(0,s.getLang)("box_no"))}}},56559:(e,t,o)=>{"use strict";o.d(t,{AppOrderBox:()=>u});var n=o(82753),i=o(3895),r=o(39586),s=o(23434),a=o(1959),_=o(44734),l=o(99602),c=o(5355);class u{static instantSkipAppOrder(e,t){const o=(0,n.gpeByClass)("payments_instant_progress_wrap",e);let i={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,test_mode:cur.paymentsOrderTestMode,_skip_instant:t||1,hash:cur.paymentsOrderHash};void 0!==cur.checkedMaxVotes&&(i.checked_max_votes=cur.checkedMaxVotes),ajax.post("al_apps.php",i,{forceDone:1,onDone:()=>{cur.paymentsCheckOrderCnt=1,(0,s.curBox)().hide(),cur.paymentsCheckOrderCnt=0,cur.fromInstantPay=!0},showProgress:()=>o&&o.classList.add("loading"),hideProgress:()=>o&&o.classList.remove("loading")})}static processOrder(e,t){t||(t=(0,s.curBox)());const o=(0,n.isVisible)("payments_box")?2:0;let r=!1;e||(e=o),o&&(r=t.btns.ok[0],(0,a.lockButton)(r));let d={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,from:nav.objLoc[0],test_mode:cur.paymentsOrderTestMode,_votes_ok:e,hash:cur.paymentsOrderHash};1==e&&cur.paymentsOrderBillPeriod&&(d.payment_type=cur.votesType),!cur.paymentsOrderBillPeriod&&(0,n.ge)("payments_order_auto_confirm")&&(d.auto_confirm=(0,a.isChecked)("payments_order_auto_confirm")),ajax.post("al_apps.php",d,{forceDone:3==+e?1:0,onDone:(d,p,h,m,f)=>{if(m&&-1e3!==m&&(cur.votesBoxOptions=m),3==e&&-1e3==h)return c.Gifts.processBoxOptions((0,s.curBox)(),m),cur.paymentsCheckOrderCnt=1,t.hide(),void(cur.paymentsCheckOrderCnt=0);if(0===h||h>0)return cur.paymentsPreferVotes=1,o?cur.paymentsShowBoxError(p):(t.hide(),(0,_.showFastBox)((0,i.getLang)("global_error"),p)),void((cur.paymentsOrderBillPeriod||f)&&cur.onSubscriptionFail?cur.onSubscriptionFail(h):cur.onAppOrderFail&&cur.onAppOrderFail(h));if(d.result){let e=(0,s.curBox)();return cur.isPaymentsAppOrder=!1,e&&e.hide(),(0,s.showDoneBox)(p),d.balance&&(0,l.updateMoney)(d.balance),void(cur.onSubscriptionDone&&d.subscriptionStatus&&(cur.onSubscriptionDone(d.subscriptionStatus),cur.onSubscriptionDone=!1))}const g=d.orderId;if(!g)return void(cur.paymentGetOrderItemTO=setTimeout(u.processOrder.pbind(!1,t),1e3));p&&(t=(0,_.showFastBox)("",p)).setOptions({title:!1,width:520,bodyStyle:"padding: 0;",hideButtons:!0}),r&&(0,a.unlockButton)(r),cur.isPaymentsAppOrder=!1,cur.paymentsOrderId=g,d.subscriptionId&&(cur.paymentsSubscriptionId=d.subscriptionId),cur.paymentsOrderCheckHash=d.checkHash;const v=(0,i.getLang)("payments_waiting_app_order_complete");(0,n.ge)("payments_box_progress_msg_wrap")?((0,n.val)("payments_box_progress_msg_wrap",`<span id="payments_box_progress_msg">${v}</span>`),cur.paymentsShowProgress()):(0,n.val)("apps_paymentbox_progress_msg_wrap",v),cur.paymentsCheckOrderCnt=0,cur.paymentsCheckOrderInt=setInterval(u.checkOrder,2e3)},onFail:function(e){return!e||(cur.onSubscriptionFail?cur.onSubscriptionFail():cur.onAppOrderFail&&cur.onAppOrderFail(),(0,n.isVisible)("payments_box")?cur.paymentsShowBoxError(e):(t.hide(),(0,_.showFastBox)((0,i.getLang)("global_error"),e)),!0)}})}static checkOrder(){if(15==cur.paymentsCheckOrderCnt)(0,n.ge)("payments_box_progress_msg").innerHTML=(0,i.getLang)("payments_waiting_payment_complete_still");else if(cur.paymentsCheckOrderCnt>30)return clearInterval(cur.paymentsCheckOrderInt),(0,s.curBox)().hide(),void(0,_.showFastBox)((0,i.getLang)("payments_app_order_box_title"),(0,i.getLang)("payments_app_add_votes_delay"),(0,i.getLang)("global_close"),(()=>{cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.onAppOrderCancel&&cur.onAppOrderCancel(),(0,s.curBox)().hide()}));cur.paymentsCheckOrderCnt++,ajax.post("al_apps.php",{act:"a_check_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,test_mode:cur.paymentsOrderTestMode,from:nav.objLoc[0],hash:cur.paymentsOrderCheckHash},{onDone:(e,t,o,n,i)=>{e&&((0,s.curBox)()&&(0,s.curBox)().hide(),clearInterval(cur.paymentsCheckOrderInt),cur.paymentsCheckOrderCnt=0,(0,s.showDoneBox)(t,{out:1e3}),o&&(0,l.updateMoney)(o),1==e?(cur.paymentsOrderBillPeriod&&cur.onSubscriptionSuccess?(cur.onSubscriptionSuccess(cur.paymentsSubscriptionId),TopNotifier&&TopNotifier.invalidate()):cur.onAppOrderSuccess&&cur.onAppOrderSuccess(cur.paymentsOrderId),cur.onSubscriptionDone&&i&&(cur.onSubscriptionDone(i),cur.onSubscriptionDone=!1)):cur.paymentsOrderBillPeriod&&cur.onSubscriptionFail?cur.onSubscriptionFail(n):cur.onAppOrderFail&&cur.onAppOrderFail(n))},onFail:function(e){return clearInterval(cur.paymentsCheckOrderInt),cur.paymentsShowBoxError(e),!0}})}static initialize(e,t,o,n,i,s,a){(0,r.extend)(cur,{isPaymentsAppOrder:!0,paymentsAuthPayment:!1,paymentsOrderNotice:!1,paymentsOrderId:e,paymentsOrderAppId:t,paymentsOrderTestMode:o,paymentsOrderHash:n,paymentsPreferVotes:i,paymentsOrderDiscount:s,paymentsOrderBillPeriod:a})}}},69788:(e,t,o)=>{"use strict";o.d(t,{MoneyTransfer:()=>k});var n=o(34788),i=o(1959),r=o(7659),s=o(12796),a=o(34892),_=o(73359),l=o(96041),c=o(23434),u=o(44734),d=o(82753),p=o(12111),h=o(99602),m=o(39586),f=o(24915),g=o(74752),v=o(3895),y=o(76624),E=o.n(y),w=o(51986),b=o(4723),A=o(42885),P=o(46944),I=o(70358),T=o(20562),O=o(59427),C=o(50722);const M=1,D=2,S=-1,k={initHandlers(){(0,A.tq)().setInteractiveHandler("MoneyTransfer/receive_method_change",(e=>{const t=e.payload.event.target;if((0,d.hasClass)(t,"disabled"))return;const{value:o,name:n}=e.payload.dataAttrs;k.onReceiveMethodChange(t,o,n)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/in_chat_focus_amount",(()=>{(0,d.elfocus)("transfer_amount")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_user_message",(()=>{k.checkUserMessage()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/show_hint",(e=>{(0,P.showHint)(e.payload.event.target)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/send",(e=>{k.send(Boolean(e.payload.dataAttrs.newWindow))})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_participate",(e=>{(0,i.checkbox)(e.payload.event.target),k.checkRequestParticipate()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check",(e=>{(0,i.checkbox)(e.payload.event.target)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_auto_accept",(e=>{(0,i.checkbox)(e.payload.event.target),k.checkAutoAccept()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/about",(e=>{k.aboutBox(e.payload.dataAttrs.aboutKey)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/history",(()=>{k.historyBox()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/hide_pin_box",(()=>{k.hidePinBox()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_vk_pay_offer",(()=>{k.checkVkPayOfferBox()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/clean_amount",(e=>{k.cleanAmount(e.payload.event.target,e.payload.event,Boolean(e.payload.dataAttrs.onlyClean))})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/send_amount_on_enter",(e=>{13===e.payload.event.keyCode&&k.send(),k.autosizeAmount()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/focus_from_to",(e=>{(0,d.elfocus)(e.payload.event,0,1e4)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/focus_and_hide_link",(e=>{(0,d.elfocus)(e.payload.event,0,1e4),k.hideLinkCopied()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/copy_link",(e=>{k.copyLinkToClipboard((0,d.ge)(e.payload.dataAttrs.element))})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/share_qr",(()=>{k.shareQRCode()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/download_qr",(()=>{k.downloadQRCode()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/switch_to_transfer_box",(e=>{k.switchBoxSection(e.payload.event.target,"transfer")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/switch_to_request_box",(e=>{k.switchBoxSection(e.payload.event.target,"request")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/switch_to_link_box",(e=>{k.switchBoxSection(e.payload.event.target,"link")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/init_accept",(()=>{k.initAccept(cur.paymentsOptions.chkData,cur.paymentsOptions.frame,!0)}))},init(){this.initHandlers();const e=(0,c.curBox)();if((0,d.ge)("payments_box")!=(0,d.geByClass1)("payments_money_transfer_box",e.bodyNode)&&_message_boxes.length>1){let e=!0;_message_boxes.forEach((function(t,o){e&&(0,d.ge)("payments_box")==(0,d.geByClass1)("payments_money_transfer_box",t.bodyNode)&&(boxLayer.removeChild((0,d.gpeByClass)("popup_box_container",t.bodyNode)),boxQueue._boxes.splice(o,1),delete _message_boxes[o],e=!1)}))}if(cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip),e.setOptions({grey:!0}),cur.paymentsOptions.requestId&&!cur.paymentsOptions.vkpayAvailable&&(e.changed=!0,e.setOptions({width:510}),k.send()),(0,_.placeholderInit)("transfer_amount"),(0,_.placeholderInit)("transfer_comment"),cur.paymentsOptions.isChat){if((0,_.placeholderInit)("transfer_chunk_amount"),cur.autoacceptCardDD=new InlineDropdown("transfer_autoaccept_card",{items:cur.paymentsOptions.cards,selected:cur.paymentsOptions.cardSeleceted,withArrow:!0,onShow:k.enableAutoaccept,onSelect:e=>{-1==e?k.sendBind():cur.paymentsOptions.vkpayAvailable&&k.checkAmount((0,d.val)("transfer_amount"))}}),cur.autoacceptCardEl=(0,d.ge)("transfer_autoaccept_card"),(0,d.toggleClass)("transfer_autoaccept_card","disabled",!cur.paymentsOptions.autoAcceptEnabled),cur.paymentsOptions.autoAcceptEnabled&&(0,i.checkbox)("transfer_autoaccept",!0),cur.paymentsOptions.cards.length<2){let e=(0,d.ce)("a",{id:"payments_money_transfer_new_card_lnk",innerHTML:(0,v.getLang)("payments_money_transfer_new_card")});(0,l.addEvent)(e,"mousedown",k.sendBind),(0,d.hide)(cur.autoacceptCardEl),cur.autoacceptCardEl.parentNode.appendChild(e)}}else if((0,d.ge)("transfer_to")){(0,d.hide)("payments_money_transfer_user");let e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo=new Dropdown((0,d.ge)("transfer_to"),cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]})),{big:!0,introText:(0,v.getLang)("votes_transfer_start_typing_recipient"),noResult:"",placeholder:(0,v.getLang)("votes_transfer_choose_recipients"),multiselect:!1,enableCustom:!0,autocomplete:!0,imageId:"transfer_to_photo",indexkeys:[1,4],noImageSrc:"/images/blank.gif",onChange:e=>{if(!e||-1==e)return;const t=cur.uiTransferTo.val_full();cur.paymentsOptions.toId=t[0],cur.paymentsOptions.hash=t[5],(0,d.val)("payments_money_transfer_summary",t[6]),setTimeout(d.elfocus.pbind("transfer_amount"),100),cur.paymentsOptions.vkpayAvailable&&k.updateMethods()}})}else(0,d.ge)("transfer_method")&&k.initMethods();setTimeout(d.elfocus.pbind("transfer_amount"),100),(0,s.shortCurrency)(),"link"===cur.paymentsOptions.boxTab&&k.genQRCode();let t=(0,d.val)("transfer_amount");t&&k.checkAmount(t,!1,!0),k.autosizeAmount(),k.showMoneyLinksTooltip(),cur.transferPageLoaded=!1,cur.destroy.push(k.destroy)},destroy(){k.stopCheckFrameLoad(),cur.uiTransferTo&&cur.uiTransferTo.destroy(cur.uiTransferTo),cur.qrFrame&&(0,d.re)(cur.qrFrame)},initMethods(){cur.paymentsOptions.onlyCards=!(0,d.isVisible)("payments_money_transfer_receive_methods");let e=cur.paymentsOptions.cardSelected;if([D,M].includes(parseInt(cur.paymentsOptions.forceType)))for(const[t]of cur.paymentsOptions.cards)t===S&&(e=S);if(cur.uiTransferCard=new Dropdown((0,d.ge)("transfer_method"),cur.paymentsOptions.cards,{big:!0,selectedItems:e,onChange:(e,t)=>{if(-2===parseInt(e)){const e=(0,d.se)(t);nav.go(e.getAttribute("data-url"));const o=document.querySelector("#payments_money_transfer_send");return O.FlatButton.lock(o),!1}k.updateTransferType(),k.updateCardFee(!0),(0,d.val)("transfer_amount")||setTimeout(d.elfocus.pbind("transfer_amount"),100)}}),!cur.paymentsOptions.onlyCards){(0,d.geByClass1)("payments_money_transfer_receive_options","payments_money_transfer_receive_methods")&&(window.radioBtns.receiveOptions={els:Array.prototype.slice.apply((0,d.geByClass)("radiobtn")),val:e==S?"vkpay":"cards"})}if(void 0!==cur.paymentsOptions.vkpayBalance&&((0,m.each)((0,d.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,l.addEvent)(this,"mousedown",k.onPinClick),(0,l.addEvent)(this,"keyup",k.onPinKeyUp),(0,l.addEvent)(this,"keypress",k.onPinEnter)})),k.isVKPayFillUpEnabled())){const e=k.getBindCards();e.length>0&&(cur.uiFillUpCard=new Dropdown((0,d.ge)("fill_up_card"),e,{big:!0,selectedItems:cur.paymentsOptions.fillUpCardSelected}))}const t=!cur.paymentsOptions.transferType||cur.paymentsOptions.forceType;t&&k.updateTransferType(),k.updateCardFee(!t)},updateLocalStorageNewWindowSign(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+20+20*Math.random());return localStorage.setItem("money_transfer_new_window",t.getTime()),t},getLocalStorageNewWindowSign(){var e;let t=parseInt(null!=(e=localStorage.getItem("money_transfer_new_window"))?e:0);if(1===t)t=k.updateLocalStorageNewWindowSign().getTime();else if(0===t)return!1;return t>(new Date).getTime()},updateMethods(){var e;const t=cur.paymentsOptions.toId;if(!t||!cur.paymentsOptions.vkpayAvailable||!C.Ranges.isUserIdTransitional(t)&&!C.Ranges.isChatOrChannelPeer(t))return;const o=document.querySelector("#payments_money_transfer_send");(0,d.val)("payments_box_error",""),cur.moneyTranferMethodsReq&&(cur.moneyTranferMethodsReq.abort(),cur.moneyTranferMethodsReq=null),"request"!==(null==(e=cur.paymentsOptions)?void 0:e.boxTab)&&(cur.moneyTranferMethodsReq=ajax.post("al_payments.php?act=a_get_money_transfer_methods",{to_id:t},{onDone:(e,t)=>{O.FlatButton.unlock(o),(0,d.val)("payments_money_transfer_methods",e),cur.paymentsOptions=(0,m.extend)(cur.paymentsOptions,t),cur.paymentsOptions.transferType=t.transferType,k.initMethods()},onFail:e=>(e&&(0,a.isString)(e)&&(O.FlatButton.unlock(o),k.showError(e)),!0),showProgress:()=>O.FlatButton.lock(o)}))},send(e=!1,t=!1){const o=(0,c.curBox)(),n=document.querySelector("#payments_money_transfer_send");if(O.FlatButton.isLocked(n))return;if(!cur.paymentsOptions.toId&&cur.uiTransferTo)return void(0,i.notaBene)(cur.uiTransferTo.container);let r=0;if(k.resetTransferWindow(),!(0,d.isVisible)("payments_money_transfer_no_amount_wrap")){if(r=(0,d.val)("transfer_amount"),!r||r<=0)return(0,d.addClass)("payments_money_transfer_amount_wrap","money_error"),setTimeout(d.removeClass.pbind("payments_money_transfer_amount_wrap","money_error"),500),void(0,d.elfocus)("transfer_amount");if(!k.checkAmount(r,!0))return;if((0,i.isChecked)("transfer_participate")){r-=k.getChunkAmount(r,!0)}}if(k.hideMoneyLinksTooltip(),cur.paymentsOptions.onSendStart&&cur.paymentsOptions.onSendStart(),"request"===cur.paymentsOptions.boxTab)return void k.sendRequest(r);k.createFrame();let s={act:"a_init_money_transfer",to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:r,currency:cur.paymentsOptions.currency,comment:(0,d.val)("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash,accept_vk_pay_offer:cur.paymentsOptions.shouldAcceptVkPayOffer};if(cur.paymentsOptions.vkpayAvailable&&(s.card_id=cur.uiTransferCard.val(),cur.paymentsOptions.onlyCards||(s.receive_method=(0,i.radioval)("receiveOptions")),"-1"===s.card_id)){if(!t)return void k.showPinBox();s.vkpay_pin=t}if(k.isVKPayTransfer()&&k.isVKPayFillUpEnabled()&&k.isFillUpCardSelectionVisible()&&(s.fill_up_card_id=cur.uiFillUpCard.val()),cur.paymentsOptions.requestId&&(s.request_id=cur.paymentsOptions.requestId),cur.paymentsOptions.statSessionId&&(s.stat_session_id=cur.paymentsOptions.statSessionId),(0,d.val)("payments_box_error",""),e||!localStorage||this.isVKPayTransfer()||"-1"===s.card_id||(e=k.getLocalStorageNewWindowSign()),e){cur.paymentsOptions.qid&&(s.act="a_continue_money_transfer",s.qid=cur.paymentsOptions.qid),cur.transferWindow=window.open("","Money Transfer");let e=w.PaymentsBox.popupHtml((0,v.getLang)("payments_cards_redirect"),"","");cur.transferWindow.document.write(e)}ajax.post("al_payments.php",s,{onDone:(t,n)=>{if(n)if(cur.paymentsOptions.qid=t.qid,e)cur.transferWindow?k.updateTransferWindow(n):k.showError((0,v.getLang)("payments_payment_cancelled"),"info_msg");else{let e;cur._popup_text=n,cur._popup_callback=function(){(0,d.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_prg","payments_iframe_cookie_disabled_div"),(0,d.show)("payments_money_transfer_iframe","payments_iframe_container"),cur.uiTransferTo&&((0,d.hide)("payments_money_transfer_user_select"),(0,d.show)("payments_money_transfer_user")),(0,d.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",k.frameMessage,!1),o.changed=!0,o.setOptions({width:510}),!cur.paymentsOptions.requestId&&(0,d.isVisible)(o.titleWrap)&&o.setBackTitle(k.resetSendBox),(0,d.setStyle)(e,{width:(0,d.ge)("payments_iframe_container").parentNode.offsetWidth-(0,i.sbWidth)()+"px"})},e=(0,d.ge)("transfer_iframe"),e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(n),e.contentWindow.document.close(),cur._popup_callback(),k.startCheckFrameLoad(+new Date)}else cur.paymentsOptions.receiptRedesign&&window.addEventListener("message",k.frameMessage,!1),(0,d.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_container",(0,d.geByClass1)("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&((0,d.hide)("payments_money_transfer_user_select"),(0,d.show)("payments_money_transfer_user")),(0,d.show)("payments_money_transfer_iframe","payments_money_transfer_prg");k.startCheckStatus(t,e)},onFail:e=>(k.resetTransferWindow(),k.showError(e),!0),showProgress:()=>O.FlatButton.lock(n),hideProgress:()=>O.FlatButton.unlock(n)})},sendRequest(e){let t=document.querySelector("#payments_money_transfer_send"),o={to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:e,currency:cur.paymentsOptions.currency,comment:(0,d.val)("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash};if(cur.paymentsOptions.statSessionId&&(o.stat_session_id=cur.paymentsOptions.statSessionId),cur.paymentsOptions.isChat){if(o.total_amount=parseInt(e),o.amount=parseInt((0,d.val)("transfer_chunk_amount")),o.pin_message=(0,i.isChecked)("transfer_pin_message")?1:0,(0,i.isChecked)("transfer_autoaccept")&&(cur.autoacceptCardDD&&(o.accept_card=cur.autoacceptCardDD.val()),!o.accept_card||-1==o.accept_card))return k.showError((0,v.getLang)("payments_money_request_error_no_accept_card")),!1;let t=!1;const n=k.getTransferLimit("minAmount"),r=k.getTransferLimit("maxAmount");if(n&&o.amount<n?t=(0,v.getLang)("payments_money_request_error_min_chunk_amount_currency"):r&&o.amount>r?t=(0,v.getLang)("payments_money_request_error_max_chunk_amount_currency"):o.total_amount&&o.amount>o.total_amount&&(t=(0,v.getLang)("payments_money_request_error_chunk_amount_too_big")),t)return k.showError(t),(0,i.notaBene)("transfer_chunk_amount"),!1}(0,d.val)("payments_box_error",""),ajax.post("al_payments.php?act=a_send_money_request",o,{onDone:e=>{(0,c.curBox)().hide(),(0,c.showDoneBox)(e,{out:6e3})},onFail:e=>(k.showError(e),!0),showProgress:()=>O.FlatButton.lock(t),hideProgress:()=>O.FlatButton.unlock(t)})},sendBind(){const e=(0,c.curBox)();k.createFrame(),(0,d.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_summary_wrap","payments_iframe_container",(0,d.geByClass1)("msg","payments_money_transfer_iframe"),(0,d.geByClass1)("tb_tabs_wrap",e.bodyNode)),(0,d.show)("payments_money_transfer_iframe","payments_money_transfer_prg"),e.setBackTitle(k.resetSendBox),e.setOptions({width:510});const t={type:"card",only_auth:1,hash:cur.paymentsOptions.bindHash};(0,d.val)("payments_box_error",""),ajax.post("al_payments.php?act=a_getvotes_charge",t,{onDone:(t,o)=>{let n;cur._popup_text=o,cur._popup_callback=function(){(0,d.hide)("payments_money_transfer_prg"),(0,d.show)("payments_iframe_container"),(0,d.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",k.frameMessage,!1),cur.autoacceptCardDD&&(0,d.isVisible)(cur.autoacceptCardEl)&&cur.autoacceptCardDD.select(cur.paymentsOptions.cards[0][0]),e.changed=!0,(0,d.setStyle)(n,{width:(0,d.ge)("payments_iframe_container").parentNode.offsetWidth-(0,i.sbWidth)()+"px"})},n=(0,d.ge)("transfer_iframe"),n.contentWindow.document.open("text/html","replace"),n.contentWindow.document.write(o),n.contentWindow.document.close(),cur._popup_callback(),cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTranferCheckInt=setInterval((function(){k.checkBindStatus(t),(cur.isPaymentCanceled||cur.isPaymentFailed)&&(clearInterval(cur.moneyTranferCheckInt),cur.isPaymentFailed?k.showError((0,v.getLang)("payments_landing_cancelled")):k.showError((0,v.getLang)("payments_payment_cancelled"),"info_msg"))}),2e3)},onFail:e=>(k.showError(e),!0)})},createFrame(){let e=(0,d.ge)("payments_iframe_container"),t=(0,d.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:510-(0,i.sbWidth)()+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t)},popupWrite(e){if(e.document.innerHTML!==cur._popup_text){e.document.write(cur._popup_text),e.document.close();try{e.document.charset="windows-1251"}catch(e){}e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback()}},resetSendBox(){const e=(0,c.curBox)();if(!e)return;const t=(0,d.geByClass1)("tb_tabs_wrap",e.bodyNode);(0,d.hide)("payments_money_transfer_iframe"),(0,d.show)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_money_transfer_summary_wrap",t,(0,d.geByClass1)("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&((0,d.hide)("payments_money_transfer_user"),(0,d.show)("payments_money_transfer_user_select")),t&&e.setOptions({title:""}),e.changed=!1,e.setOptions({width:510}),(0,d.isVisible)(e.titleWrap)&&e.setBackTitle(!1)},resetTransferWindow(){cur.transferWindow&&((0,d.show)("payments_money_transfer_wrap","payments_money_transfer_buttons"),(0,d.hide)("payments_money_transfer_prg","payments_money_transfer_iframe"),cur.transferWindow.location=window.location,cur.transferWindow.close()),cur.transferWindow=void 0},updateTransferWindow(e){const t=cur.transferWindow.document.getElementById("wait_text_container");t&&(t.innerHTML=""),cur.transferWindow.document.write(e),setTimeout((()=>{var e;null==(e=cur.transferWindow.document.getElementById("popup_payment_form"))||e.submit()}),1500),window.addEventListener("message",k.frameMessage,!1),(0,d.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_safari_trouble_div","payments_iframe_container"),(0,d.val)("payments_transfer_box_progress_msg",(0,v.getLang)("payments_waiting_transfer_complete")),(0,d.show)("payments_money_transfer_iframe","payments_money_transfer_prg")},startCheckStatus(e,t=!1){cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTransferRedirected=!1,cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=setInterval((function(){if(k.checkStatus(e,t),cur.isPaymentCanceled||cur.isPaymentFailed){let t=k.resetTransferWindow();if(t&&t(),clearInterval(cur.moneyTranferCheckInt),e.accept)return void(0,c.curBox)().hide();cur.isPaymentFailed?k.showError((0,v.getLang)("payments_landing_cancelled")):k.showError((0,v.getLang)("payments_payment_cancelled"),"info_msg")}}),2e3)},hideBoxQueue(){for(;boxQueue.count();)boxQueue.hideLast(!1)},stopListeningFrameMessages(){window.removeEventListener("message",k.frameMessage,!1)},checkStatus(e,t){const o={act:"a_check_money_transfer",qid:e.qid,hash:e.hash};e.accept&&(o.accept=e.accept),ajax.post("al_payments.php",o,{onDone:(o,n,r,s)=>{if(!o||4==o&&cur.moneyTransferRedirected){var a;t&&(null==(a=cur.transferWindow)?void 0:a.closed)&&(k.showError((0,v.getLang)("payments_payment_cancelled")),k.stopListeningFrameMessages(),k.resetTransferWindow(),cur.isPaymentFailed=!1,cur.isPaymentCanceled=!1)}else{if(1==o||3==o){if(t){0===cur.paymentsOptions.transferType||cur.paymentsOptions.transferType===M?cur.transferWindow&&!cur.transferWindow.closed&&(k.resetTransferWindow(),k.hideBoxQueue()):(k.resetTransferWindow(),k.hideBoxQueue())}else if(cur.paymentsOptions.transferType===D)k.resetTransferWindow(),k.hideBoxQueue();else if(cur.paymentsOptions.receiptRedesign){var _;(0,d.hide)(document.querySelector(".payments_money_transfer_footer")),(null==(_=s)?void 0:_.receipt_link)&&k.setIframeByLink(s.receipt_link)}s||(0,c.showDoneBox)(n,{out:6e3});const i=nav.objLoc;e.accept||"settings"!==i[0]||"payments"!==i.act||"transfer"!==i.section||(cur.historyOffset||(cur.historyOffset={}),cur.historyOffset.transfer=0,(0,I.showNextPaymentsHistory)(!1,i.section)),3==o&&(s&&s.title&&(0,u.showFastBox)({title:s.title},n,(0,v.getLang)("payments_remember_card_btn"),k.rememberAcceptCard.pbind(s),(0,v.getLang)("payments_dont_remember_card_btn")),TopNotifier.invalidate(),cur.acceptMoneyBtn&&(0,d.hasClass)((0,d.domPN)(cur.acceptMoneyBtn),"feedback_buttons")?((0,d.re)((0,d.domPN)(cur.acceptMoneyBtn)),cur.acceptMoneyBtn=!1):cur.acceptMoneyBtn&&((0,d.re)((0,d.geByClass1)("_decline_btn",(0,d.domPN)(cur.acceptMoneyBtn))),(0,d.domReplaceEl)(cur.acceptMoneyBtn,r),cur.acceptMoneyBtn=!1))}else if(2==o||5==o)k.showError(n),k.stopListeningFrameMessages(),cur.isPaymentFailed=!1,cur.isPaymentCanceled=!1;else{if(4==o){if(cur.moneyTransferRedirected=!0,cur._popup_text=r,t&&cur.transferWindow)k.updateTransferWindow(r);else{let e;cur._popup_callback=function(){(0,d.hide)("payments_money_transfer_prg"),(0,d.show)("payments_iframe_container"),(0,d.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",k.frameMessage,!1),(0,c.curBox)().changed=!0,(0,d.setStyle)(e,{width:(0,d.ge)("payments_iframe_container").parentNode.offsetWidth-(0,i.sbWidth)()+"px"})},e=(0,d.ge)("transfer_iframe"),e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(r),e.contentWindow.document.close(),cur._popup_callback()}return}if(6==o)return void((0,d.isVisible)("payments_money_transfer_prg")||((0,d.hide)("payments_iframe_container"),(0,d.show)("payments_money_transfer_iframe","payments_money_transfer_prg")))}clearInterval(cur.moneyTranferCheckInt)}},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),k.resetTransferWindow()(),k.showError(e),!0)})},checkBindStatus(e){let t={act:"a_getvotes_check",type:"card"};e&&(e.oid||e.qid)&&(t.oid=e.oid,t.qid=e.qid,t.hash=e.hash),ajax.post("al_payments.php",t,{onDone:(e,t,o)=>{e&&(1==e?(k.resetSendBox(),k.enableAutoaccept(),o&&cur.autoacceptCardDD&&((0,d.isVisible)(cur.autoacceptCardEl)||((0,d.hide)((0,d.geByTag)("A",cur.autoacceptCardEl.parentNode)[0]),(0,d.show)(cur.autoacceptCardEl)),cur.paymentsOptions.cards.unshift([o.bindingId,o.bin]),cur.autoacceptCardDD.setItems(cur.paymentsOptions.cards),cur.autoacceptCardDD.select(o.bindingId))):2!=e&&10!=e||k.showError(t),clearInterval(cur.moneyTranferCheckInt))},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),k.showError(e),!0)})},paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,k.frameHeight()},frameHeight(e,t){let o=(0,d.ge)("transfer_iframe");e?(e=Math.max(e,250),cur.prevFrameHeight=o.style.height,o.style.height=e+"px"):(o.style.height=cur.prevFrameHeight,(0,d.removeClass)("payments_iframe_container","payments_threeds_frame")),t||((0,d.ge)("payments_iframe_container").style.height=(e||cur.prevFrameHeight)+15+"px"),(0,d.ge)("payments_iframe_container").scrollTop=0},frameMessage(e){var t;if(!(0,c.curBox)()&&cur.paymentsOptions.receiptRedesign)return void k.stopListeningFrameMessages();if(!(e.origin.match(/^https?:\/\/([a-zA-Z0-9\-.]+\.)?money\.mail\.ru$/)||e.origin.match(new RegExp(`^https?:\\/\\/([a-zA-Z0-9\\-.]+\\.)?${T.VK_SITE_REGEX_SOURCE_UNSAFE}$`))&&(null==(t=cur.paymentsOptions)?void 0:t.receiptRedesign)))return!1;let o={};if(e.data){switch(typeof e.data){case"object":o=e.data;break;case"string":"{"===e.data.substr(0,1)&&(o=(0,h.parseJSON)(e.data))}if("billing"!==o.type)return!1}vk.dev&&(0,f.debugLog)(o);const n=(0,d.geByClass1)("payments_iframe_container",(0,c.curBox)().bodyNode)||(0,d.ge)("payments_iframe_container");if(cur.transferPageLoaded=!0,"resizeFrame"===o.action?setTimeout(k.frameHeight.pbind(o.action_params.height),200):"submit"===e.data||"3dsPage"===o.action?(setTimeout(k.frameHeight.pbind(600,!0),200),(0,d.addClass)(n,"payments_threeds_frame")):"3dsFinish"===o.action?(k.frameHeight(),(0,d.removeClass)(n,"payments_threeds_frame")):"session_fail"===o.action?((0,d.hide)(n),k.resetTransferWindow(),(0,d.show)("payments_iframe_safari_trouble_div"),k.updateLocalStorageNewWindowSign()):"putPixel"===o.action&&"page_load"===o.action_params.alias?(w.PaymentsBox.finishFormMeasure("dmr_transfer"),(0,g.statlogsValueEvent)("money_transfers",0,"iframe_loaded")):"paySuccess"===o.action?setTimeout(k.frameHeight.pbind(500),300):"payError"===o.action&&(0,d.isVisible)("payments_iframe_container")&&((0,d.hide)("payments_iframe_container"),(0,d.val)("payments_transfer_box_progress_msg",(0,v.getLang)("payments_waiting_transfer_complete")),(0,d.show)("payments_money_transfer_iframe","payments_money_transfer_prg")),cur.paymentsOptions.receiptRedesign){if("make_one_more_transfer"===o.action||"close_window"===o.action)switch(clearInterval(cur.moneyTranferCheckInt),k.resetTransferWindow(),k.stopListeningFrameMessages(),o.action){case"make_one_more_transfer":k.resetSendBox();break;case"close_window":k.hideBoxQueue()}if("get_transfer_source"===o.action){let e=vk.dev?"*":window.location.origin;cur.transferWindow&&cur.transferWindow.postMessage(JSON.stringify({from:cur.paymentsOptions.from}),e);let t=(0,d.ge)("transfer_iframe");t&&t.contentWindow.postMessage(JSON.stringify({action:"set_transfer_source",source:cur.paymentsOptions.from}),e)}}},setIframeByLink(e){let t=(0,d.geByClass1)("payments_iframe_container",(0,c.curBox)().bodyNode)||(0,d.ge)("payments_iframe_container"),o=(0,d.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});o.frameBorder=0,t.innerHTML="",t.appendChild(o),(0,d.hide)((0,d.ge)("payments_money_transfer_prg")),(0,d.show)(t),o.src=e},startCheckFrameLoad(e){cur.frameLoadChecker=setInterval((function(){if(cur.transferPageLoaded)k.stopCheckFrameLoad();else{+new Date-e>5e3&&(k.stopCheckFrameLoad(),k.resetTransferWindow(),(0,d.hide)("payments_iframe_container"),(0,d.show)("payments_iframe_safari_trouble_div"),k.updateLocalStorageNewWindowSign())}}),1e3)},stopCheckFrameLoad(){clearInterval(cur.frameLoadChecker)},initAccept(e,t,o=!1){if(o)cur.transferWindow=window.open("/","Money transfer"),cur.transferWindow.document.write(t),(0,d.hide)("payments_box_error","payments_iframe_container","payments_iframe_safari_trouble_div","payments_iframe_container"),(0,d.val)("payments_transfer_box_progress_msg",(0,v.getLang)("payments_waiting_transfer_complete")),(0,d.show)("payments_money_transfer_iframe","payments_money_transfer_prg");else{let e=(0,d.geByClass1)("payments_iframe_container",(0,c.curBox)().bodyNode)||(0,d.ge)("payments_iframe_container");(0,d.show)(e);let o=(0,d.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});o.frameBorder=0,e.innerHTML="",e.appendChild(o),o.contentWindow.document.open("text/html","replace"),o.contentWindow.document.write(t),o.contentWindow.document.close(),k.startCheckFrameLoad(+new Date)}window.addEventListener("message",k.frameMessage,!1),k.startCheckStatus(e,o)},rememberAcceptCard(e){const t=(0,c.curBox)()||{};let o=t.btns.ok[0];ajax.post("al_payments.php?act=a_remember_money_transfer_accept_card",{card_id:e.card_id,hash:e.hash},{onDone:t.hide,showProgress:()=>O.FlatButton.lock(o),hideProgress:()=>O.FlatButton.unlock(o)})},cleanAmount(e,t,o){if(13===t.keyCode)return;let n=e.value.replace(/[^0-9]/g,"");n=n.replace(/^0+/,""),e.value!=n&&(e.value=n),o||(k.checkAmount(n),k.autosizeAmount(),cur.paymentsOptions.cardsFee&&k.updateCardFee(!0))},getTransferLimit(e){let t="request"===cur.paymentsOptions.boxTab?0:cur.paymentsOptions.transferType;return"balance"===e&&parseInt(t)===D?cur.paymentsOptions.vkpayBalance:(cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab&&"maxAmount"===e&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(t=2),cur.paymentsOptions.limits[t][e])},checkAmount(e,t,o){var n;let r=!1;const s=(0,d.hasClass)("payments_money_transfer_amount_wrap","money_error"),a=parseInt(null==(n=cur.uiTransferCard)?void 0:n.val())===S,_=k.isVKPayTransfer(),l=k.isVKPayFillUpEnabled();if(t&&s)return _&&e>k.getTransferLimit("balance")&&!l&&(0,u.showFastBox)({title:(0,v.getLang)("payments_vkpay_low_balance_title"),width:420},(0,v.getLang)("payments_vkpay_low_balance_text"),(0,v.getLang)("payments_vkpay_topup_button"),nav.go.pbind("/vkpay#action=refill"),(0,v.getLang)("global_close")),!1;const c=cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab,p=c&&(0,i.isChecked)("transfer_participate"),h=k.getTransferLimit("minAmount")*(p?2:1),m=k.getTransferLimit("maxAmount"),f=k.getTransferLimit("balance"),g=(0,v.langNumeric)(h,cur.paymentsOptions.currencyStr,!0),y=(0,v.getLang)("payments_money_transfer_amount_limits").replace("{min_amount}",g);let E=!c;if(c&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(E=!0),a&&_&&l&&!(void 0!==f&&e<=f)||k.hideFillUpCardSelection(),t&&h&&e<h)r=(0,v.getLang)("payments_money_transfer_error_min_amount_currency").replace("{min_amount}",g);else if(m&&E&&e>m){const e=(0,v.langNumeric)(m,cur.paymentsOptions.currencyStr,!0);r=(0,v.getLang)("payments_money_transfer_error_max_amount_currency").replace("{max_amount}",e)}else if(a&&void 0!==f&&e>f)if(_&&l){k.getBindCards().length>0?k.showFillUpCardSelection():r=(0,v.getLang)("payments_money_transfer_low_balance")}else r=(0,v.getLang)("payments_money_transfer_low_balance");const w=(0,d.ge)("payments_money_transfer_notice");if(0!=r)return(0,d.val)(w,r),(0,d.addClass)("payments_money_transfer_amount_wrap","money_error"),!1;if((s||o||e<h)&&((e<h||"request"===cur.paymentsOptions.boxTab)&&(0,d.val)(w,y),(0,d.removeClass)("payments_money_transfer_amount_wrap","money_error")),!t&&c){const t=k.getChunkAmount(e,p);if((0,d.val)("transfer_chunk_amount",t),h&&e<h)(0,d.val)(w,y);else{const o=p?e-t:e,n=(0,v.langNumeric)(o,cur.paymentsOptions.currencyStr,!0);(0,d.val)(w,(0,v.getLang)("payments_money_transfer_will_be_requested").replace("{amount}",n))}}return!0},getChunkAmount(e,t){const o=k.getTransferLimit("minAmount"),n=k.getTransferLimit("maxAmount");let i=Math.max(o||100,Math.ceil(e/Math.max(1,cur.paymentsOptions.chatCount-(t?0:1))));return n&&(i=Math.min(i,n)),i},autosizeAmount(){let e=(0,d.ge)("transfer_amount"),t=(0,d.ce)("span",{innerHTML:e.value||"0"},{fontFamily:(0,d.getStyle)(e,"fontFamily"),fontSize:(0,d.getStyle)(e,"fontSize"),fontWeight:(0,d.getStyle)(e,"fontWeight")});(0,d.ge)("utils").appendChild(t);let o=Math.floor((0,d.getSize)(t)[0])+50;(0,d.re)(t),cur.amountMinSize||(cur.amountMinSize=80),o<cur.amountMinSize&&(o=cur.amountMinSize),(0,d.setStyle)(e,{width:o})},checkUserMessage(){(0,h.checkTextLength)(cur.paymentsOptions.maxTextLength,(0,d.ge)("transfer_comment"),(0,d.ge)("transfer_comment_limit_message"),!1,!0),((0,d.val)("transfer_comment_limit_message")&&(0,d.isVisible)("transfer_comment_limit_message")?d.hide:d.show)("payments_money_transfer_fee_link")},checkRequestParticipate(){k.checkAmount((0,d.val)("transfer_amount"))},checkRequestNoAmount(e,t){e&&uiTabs.switchTab(e),t?((0,d.hide)("payments_money_transfer_amount_wrap","transfer_participate"),(0,d.show)("payments_money_transfer_no_amount_wrap")):((0,d.hide)("payments_money_transfer_no_amount_wrap"),(0,d.show)("payments_money_transfer_amount_wrap","transfer_participate"),(0,d.elfocus)("transfer_amount"))},checkAutoAccept(){(0,d.toggleClass)("transfer_autoaccept_card","disabled",!(0,i.isChecked)("transfer_autoaccept"))},enableAutoaccept(){(0,i.isChecked)("transfer_autoaccept")||((0,i.checkbox)("transfer_autoaccept",!0),(0,d.removeClass)("transfer_autoaccept_card","disabled"))},showMoneyTransferBox(e,t,o=void 0,i=null){return(0,u.showBox)("al_payments.php",(0,n._)({},e,{act:"money_transfer_box"}),(0,n._)({},t,{onDone(e,t){var o;null==(o=i)||o(),cur.paymentsOptions=t,e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),nav.objLoc.z&&"moneysend"===nav.objLoc.z.substr(0,9)&&(delete nav.objLoc.z,nav.setLoc(nav.objLoc))}}),k.init()},onFail:o}))},aboutBox(e){return!(0,u.showFastBox)({title:(0,v.getLang)("payments_money_transfer_about_title"),width:560},(0,v.getLang)(e))},showError(e,t){e&&((0,d.ge)("payments_box_error").innerHTML="",(0,p.showMsg)("payments_box_error",e,t||"error"),(0,d.show)("payments_box_error")),(0,d.ge)("payments_money_transfer_wrap")&&(k.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1))},switchBoxSection(e,t){if(cur.paymentsOptions.boxTab!==t){if(e&&uiTabs.switchTab(e),"transfer"===cur.paymentsOptions.boxTab&&(0,d.isVisible)("payments_money_transfer_iframe")&&(k.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1)),"transfer"===cur.paymentsOptions.boxTab&&cur.paymentsMoneyBoxTTHide&&cur.paymentsMoneyBoxTTHide(),"link"===cur.paymentsOptions.boxTab&&((0,d.hide)("payments_money_link_box"),(0,d.show)("payments_money_transfer_request_box"),k.hideMoneyLinksTooltip()),cur.paymentsOptions.boxTab=t,"link"===t)(0,d.hide)("payments_money_transfer_request_box"),(0,d.show)("payments_money_link_box"),k.hideMoneyLinksTooltip(),k.genQRCode(),k.showMoneyLinksTooltip();else{(0,d.val)("payments_money_transfer_summary",cur.paymentsOptions.boxSections[t].summary);const e=document.querySelector("#payments_money_transfer_send");O.FlatButton.setLabel(e,cur.paymentsOptions.boxSections[t].btn),(0,d.val)("payments_money_transfer_user_select_label",cur.paymentsOptions.boxSections[t].user_select_label),k.checkAmount((0,d.val)("transfer_amount"),!1,!0),"transfer"===t&&k.updateCardFee(!0)}(0,d.toggle)("payments_money_transfer_nf_warning","transfer"===t),(0,d.toggle)("payments_money_transfer_methods","transfer"===t),(0,d.toggle)("payments_money_transfer_vk_pay_offer","transfer"===t),k.renderSelectBox(),setTimeout(d.elfocus.pbind("transfer_amount"),100)}},genQRCode(){const e=(0,d.ge)("payments_money_transfer_qr");if(e.childNodes.length)return;(0,d.val)(e,E().createQR(cur.paymentsOptions.transferLink,115,"qr-code",{isShowLogo:!0,isShowBackground:!1,foregroundColor:"var(--vkui--color_text_primary)",logoColor:"var(--vkui--color_icon_accent)"}))},shareQRCode(){k.hideMoneyLinksTooltip(!0),(0,u.showBox)("like.php",{act:"publish_box",object:"moneysend"+vk.id+"_0",list:""})},downloadQRCode(){if(!cur.paymentsOptions.qrUrl)return!1;let e=(0,d.ce)("iframe",{src:cur.paymentsOptions.qrUrl});return utilsNode.appendChild(e),cur.qrFrame&&(0,d.re)(cur.qrFrame),cur.qrFrame=e,!1},hideLinkCopied(){(0,m.each)((0,d.geByClass)("_link_copied","payments_money_link_box"),d.hide.pbind(this))},copyLinkToClipboard(e){k.hideLinkCopied(),k.hideMoneyLinksTooltip(!0),e.select(),document.execCommand("copy");const t=(0,d.geByClass1)("_link_copied",(0,d.gpeByClass)("_link_wrap",e));(0,d.show)(t)},renderSelectBox(){if(!cur.uiTransferTo)return;const e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo.setData([]),cur.uiTransferTo.setOptions({autocomplete:!1}),cur.uiTransferTo.setData(cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]}))),cur.uiTransferTo.setOptions({autocomplete:!0}),cur.paymentsOptions.toId=null,cur.paymentsOptions.hash=null,cur.uiTransferTo.clear(),cur.uiTransferTo.deselectTokens(),(0,d.val)("payments_money_transfer_methods","")},updateImHistory(e,t,o){const n=(0,d.geByClass1)("_money_transfer"+t,e);if(!n)return;let i=(0,d.geByClass1)("_accept_btn",n);i&&((0,d.re)((0,d.geByClass1)("_decline_btn",(0,d.domPN)(i))),(0,d.domReplaceEl)(i,o))},initHistoryBox(e,t,o,n){let s=(0,d.ge)("ui_money_transfer_load_more");if(s){let a=(0,d.ge)("settings_transfer_history").tBodies[0];cur.userAutoScroll=new b.default(a,{offset:o,onNoMore:d.re.pbind(s),onNeedRows:(o,i)=>{let r={act:"money_transfer_history_box",offset:i,owner_id:e};t&&(r.request_id=t),n&&(r.hash=n),ajax.post("al_payments.php",r,{onDone:o})},drawRows:(e,t)=>{if(r.browser.msie){const o=(0,d.se)("<table>"+t+"</table>");t=(0,d.geByTag)("tr",o);for(let o in t)1==t[o].nodeType&&e.appendChild(t[o])}else e.insertAdjacentHTML("beforeEnd",t)},showProgress:()=>(0,i.lockButton)(s),hideProgress:()=>(0,i.unlockButton)(s),rowClass:"settings_history_row"})}},historyBox(){(0,u.showBox)("al_payments.php?act=money_transfer_history_box")},showMoneyLinksTooltip(){if(!cur.paymentsOptions.moneylinks_feature_tooltip||cur.moneyLinksTooltip)return;let e,t,o;(0,d.isVisible)("payments_money_link_box")?(e=(0,d.geByClass1)("payments_money_transfer_link_copy_btn","payments_money_link_box"),t=(0,v.getLang)("payments_money_link_btn_feature_text"),o={forceSide:"right",width:320,offset:[6,0]}):(e=(0,d.geByClass1)("ui_tab",(0,d.geByClass1)("_moneylink_tab","box_layer")),e&&(t=(0,v.getLang)("payments_money_link_tab_feature_text"),o={forceSide:"bottom",width:250,offset:[0,4]})),e&&setTimeout((function(){cur.moneyLinksTooltip=new ElementTooltip(e,(0,m.extend)({content:'<div class="feature_tooltip__close" onclick="cur.moneyLinksTooltip.hide();"></div>'+t,cls:"feature_intro_tt feature_info_tooltip moneylinks_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:(0,d.geByClass1)("ui_tabs","box_layer"),onHide:k.hideMoneyLinksTooltip.pbind(!0)},o)),cur.moneyLinksTooltip.show(),cur.destroy.push(k.hideMoneyLinksTooltip)}),500)},hideMoneyLinksTooltip(e){e&&ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.paymentsOptions.moneylinks_feature_tooltip_hash,type:"moneylinks"}),cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip)},showPinBox(){(0,d.addClass)((0,c.curBox)().bodyNode,"payments_box_code_showed"),(0,d.show)("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),(0,m.each)((0,d.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,d.val)(this,"")})),(0,d.elfocus)("payments_code1"),(0,c.curBox)().changed=!0;const e=document.querySelector("#payments_money_transfer_send");e&&(e.style.pointerEvents="none",setTimeout((()=>{e.style.pointerEvents="auto"}),0))},hidePinBox(){(0,d.hide)("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),(0,d.removeClass)((0,c.curBox)().bodyNode,"payments_box_code_showed"),(0,c.curBox)().changed=!1},checkVkPayOfferBox(){const e="payments_money_transfer_vk_pay_offer_box",t=!(0,i.isChecked)(e),o=document.querySelector("#payments_money_transfer_send");O.FlatButton.setDisabled(o,!t),(0,i.checkbox)(e)},onPinKeyUp(e){const t=e.target;if(8==e.keyCode){const e=(0,d.domPS)(t);if(e){const t=e.getAttribute("data-index");(0,d.val)(e,""),cur.paymentsOptions.vkpcode[t]="",cur.paymentsOptions.vkpcode[t-1]="",(0,d.elfocus)(e)}}},onPinEnter(e){const t=e.target;if(!(e.keyCode>=47&&e.keyCode<=57))return(0,l.cancelEvent)(e);{const o=t.getAttribute("data-index");cur.paymentsOptions.vkpcode||(cur.paymentsOptions.vkpcode=[]),cur.paymentsOptions.vkpcode[o-1]=e.key,(0,d.val)(t,String.fromCharCode(9679));const n=(0,d.domNS)(t);n?setTimeout(d.elfocus.pbind(n),10):setTimeout((function(){t.blur(),k.checkPin()}),10)}},onPinClick(e){const t=e.target,o=(0,d.domPS)(t);if(o&&!(0,d.val)(o))return(0,l.cancelEvent)(e)},checkPin(){const e=cur.paymentsOptions.vkpcode.join("");delete cur.paymentsOptions.vkpcode,(0,d.val)("payments_money_transfer_code_error",""),ajax.post("al_payments.php?act=a_check_vkpay_pin",{code:e,hash:cur.paymentsOptions.pinHash},{onDone:t=>{if(1==t)return(0,d.hide)((0,d.geByClass1)("_code_enter","payments_money_transfer_code_box")),void(0,d.show)((0,d.geByClass1)("_code_recover","payments_money_transfer_code_box"));k.hidePinBox(),k.send(!1,e)},onFail:e=>(e&&(0,d.val)("payments_money_transfer_code_error",e),(0,m.each)((0,d.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,d.val)(this,""),(0,i.notaBene)(this)})),(0,d.elfocus)("payments_code1"),!0),showProgress:function(){(0,d.hide)("payments_money_transfer_code_wrap"),(0,d.show)("payments_money_transfer_spinner")},hideProgress:function(){(0,d.hide)("payments_money_transfer_spinner"),(0,d.show)("payments_money_transfer_code_wrap")}})},onReceiveMethodChange(e,t,o){(0,i.radiobtn)(e,t,o),k.updateTransferType(e),k.updateCardFee(!0)},updateTransferType(e){void 0!==cur.paymentsOptions.forceType?cur.paymentsOptions.transferType=cur.paymentsOptions.forceType:parseInt(cur.uiTransferCard.val())===S?cur.paymentsOptions.transferType=D:cur.paymentsOptions.onlyCards?cur.paymentsOptions.transferType=0:(void 0===e&&(0,m.each)(radioBtns.receiveOptions.els,(function(){(0,d.hasClass)(this,"on")&&(e=this)})),void 0!==e&&(cur.paymentsOptions.transferType=(0,m.intval)((0,d.attr)(e,"data-type")))),k.checkAmount((0,d.val)("transfer_amount"),!1,!0)},updateCardFee(e){if(!cur.uiTransferCard||"request"===cur.paymentsOptions.boxTab)return;const t=(0,m.intval)((0,d.val)("transfer_amount")),o=k.getTransferLimit("minAmount"),n=(0,d.ge)("payments_money_transfer_to_card"),i=cur.uiTransferCard.val(),r=cur.paymentsOptions.cardsFee[i],s=0===cur.paymentsOptions.transferType,a=parseInt(i)===S||cur.paymentsOptions.forceType===M||cur.paymentsOptions.forceType===D,_=parseInt(i)!==S&&!cur.paymentsOptions.receiverVkpay||0===cur.paymentsOptions.forceType;let l=(0,v.getLang)("payments_transfer_without_fee"),c=(0,v.getLang)("payments_money_transfer_btn"),u=a?"payments_money_transfer_to_vkpay":"payments_money_transfer_to_card",p=_,h=0;if((0,d.toggleClass)(n,"disabled",a),(0,d.toggleClass)("payments_money_transfer_to_vkpay","disabled",_),0===parseInt(i))s&&(l=cur.paymentsOptions.mastercardPromoEnabled?(0,v.getLang)("payments_transfer_method_without_fee_for_mastercard"):(0,v.getLang)("payments_money_transfer_commission_undefined"));else if(parseInt(i)===S)p=!0;else if(s&&r&&(r.percent||r.vkPay&&r.vkPay.percent)){const e=r.free_amount_rest||0,o=r.free_amount_min||0;if(!e||t>e||o&&t<o){let o=t;t>e&&(o=t-e);const n=r.percent||0,i=r.min||0,s=r.add||0;h=o*n,h<i?h=i:h+=s,h=+(Math.round(h+"e+3")+"e-3"),h=+(Math.round(h+"e+2")+"e-2"),l=(0,v.langNumeric)(h,cur.paymentsOptions.cardsFeeStr,!0)}if(r.vkPay){const e=t+h,o=r.vkPay.percent||0,n=r.vkPay.min||0,i=r.vkPay.add||0;let s=e*o;s<n?s=n:s+=i,h=+(Math.round(h+s+"e+2")+"e-2"),s=+(Math.round(s+"e+2")+"e-2"),l=(0,v.langNumeric)(h,cur.paymentsOptions.cardsFeeStr,!0),l+=(0,v.langNumeric)(s,cur.paymentsOptions.cardsFeeVkPayStr,!0)}}!u||e&&!p||(0,d.ge)(u).classList.contains("on")||(0,d.ge)(u).click(),t>=o&&!(0,d.hasClass)("payments_money_transfer_amount_wrap","money_error")&&((0,d.val)("payments_money_transfer_notice",l),0===parseInt(i)&&s||(c=(0,v.langNumeric)(+(Math.round(t+h+"e+2")+"e-2"),cur.paymentsOptions.buttonAmountStr,!0)));const f=document.querySelector("#payments_money_transfer_send");O.FlatButton.setLabel(f,c)},isVKPayFillUpEnabled(){return 1==cur.paymentsOptions.vkpayFillUpEnabled},isVKPayTransfer(){return parseInt(cur.paymentsOptions.transferType)===D},getBindCards(){return cur.paymentsOptions.cards.filter((e=>{const t=parseInt(e[0]);return 0!==t&&t!==S}))},hideFillUpCardSelection(){(0,d.hide)("payments_money_transfer_fill_up_cards")},showFillUpCardSelection(){(0,d.show)("payments_money_transfer_fill_up_cards")},isFillUpCardSelectionVisible(){return(0,d.isVisible)("payments_money_transfer_fill_up_cards")}}},51986:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PaymentsBox:()=>PaymentsBox});var _icons_desktop__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(76005),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(48041),_shared_evbus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42885),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7659),_shared_lib_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(34892),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3895),_shared_lib_site__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(20562),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(57458),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(39958),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(23434),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(24915),_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(82753),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(96041),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(49957),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(44734),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(46944),_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1959),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(12111),_web_lib_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(99602),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(39586),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(56559);class PaymentsBox{static initHandlers(){(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/ps_promo_banner_click",(e=>{(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments_ps_promo_banner_event","","votes_buypage","relocate"),PaymentsBox.getVotesAmounts(!1,"spasibo",e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/save_phone_prefix_click",(e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByTag1)("input",e.payload.target.parentNode),0,0)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/save_phone_input",(e=>{13===e.payload.event.keyCode&&PaymentsBox.saveSmsPhone()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/get_votes_amounts",(e=>{PaymentsBox.getVotesAmounts(!1,e.payload.dataAttrs.name,e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/phone_code_input",(e=>{13===e.payload.event.keyCode&&PaymentsBox.smsSendCode()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_confirm_on_enter",(e=>{13===e.payload.event.keyCode&&PaymentsBox.showConfirm()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_confirm",(()=>{PaymentsBox.showConfirm()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_types",(()=>{PaymentsBox.showTypes()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_terminal_tt",(e=>{PaymentsBox.paymentsShowTerminalTT(e.payload.target,e.payload.dataAttrs.name)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form",(()=>{PaymentsBox.showPhoneForm(2)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form_1",(()=>{PaymentsBox.showPhoneForm(1)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/show_all_prices",(e=>{PaymentsBox.showAllPrices(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/change_option",(e=>{const{index:t,name:o}=e.payload.dataAttrs;PaymentsBox.onChangeOption(e.payload.target,t,o)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/focus_votes",(()=>{PaymentsBox.onChangeOption((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("last","payments_getvotes_amounts"),4,"payments_getvotes_amounts")})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/update_pay_amount",(e=>{PaymentsBox.updatePayAmount(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/make_checkbox",(e=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.checkbox)(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("PaymentsBox/toggle_email",(e=>{PaymentsBox.toggleEmail(e.payload.target)}))}static initialize(e){PaymentsBox.initHandlers(),window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.started&&((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_3__.isArray)(cur.onUnidle)||(cur.onUnidle=[]),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_3__.isArray)(cur.onIdle)||(cur.onIdle=[]),cur.onUnidle.push((()=>{cur.getVotesDoneHide=!0})),cur.onIdle.push((()=>{cur.getVotesDoneHide=!1})));let t={bodyStyle:"padding: 0;",hideButtons:!0};if(cur.paymentsWideBox){let e={width:cur.checkoutEnabled?800:780,height:390};cur.checkoutEnabled||(e.title=!1),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.extend)(t,e)}else t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.extend)(t,{width:480});if(e.setOptions((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.extend)(t,{onClean:()=>{let t="sms"===cur.votesType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress");cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt);for(let e in cur.paymentsWaitingCache)cur.paymentsWaitingCache[e][2]&&clearInterval(cur.paymentsWaitingCache[e][2]);cur.smsAmountsInt&&clearTimeout(cur.smsAmountsInt),cur.isPaymentsAppOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)?e.onDone?e.onDone():(e.hide(),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_19__.AppOrderBox.processOrder(1,e)):cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.onAppOrderCancel?cur.onAppOrderCancel():cur.paymentsTryCompleteOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)&&e.onDone&&e.onDone(),PaymentsBox.removeCheckOffersEvent(),window.removeEventListener("message",PaymentsBox.frameMessage,!1),window.removeEventListener("message",PaymentsBox.handlePaymentCompleteMessage,!1),t&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_get_votes_box_close_notice"),{out:6e3})}})),(cur.fromInstantPay||cur.paymentsAuthPayment)&&(e.onDone=!1),cur.votesBox=e,cur.destroy.push((()=>{for(;boxQueue.count();)boxQueue.hideLast(!1)})),cur.checkoutEnabled)if(cur.paymentsWideBox){PaymentsBox.showProgress(""),PaymentsBox.submitDmrCheckout(cur.paymentsPreferVotes,!0);let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_wide_box_close_btn");e&&(e.onclick=cur.votesBox.hide)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_cont"),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_amounts")))},PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm);else cur.votesTypeInit&&(PaymentsBox.getVotesAmounts(!1,cur.votesTypeInit),cur.votesTypeInit=!1)}static initPhoneCountry(e,t){cur.countries=e,cur.defCountry=t,cur.uiPhoneCountry=new Dropdown((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("phone_country"),cur.countries,{selectedItems:t,big:!0,autocomplete:!0,multiselect:!1,onChange:e=>{let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("phone"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_phone_prefix"),n=cur.uiPhoneCountry.val_full()[3];if(0===e||"0"===e||""===e||!1===e||void 0===e){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(o);if(n==e)return;for(let t=0,o=cur.countries.length;t<o;++t)if(cur.countries[t][3]==e)return cur.uiPhoneCountry.val(cur.countries[t]);return cur.uiPhoneCountry.val(cur.defCountry,!0)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(o,n),setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus.pbind(t),0)}}),cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))}static initPhoneNumber(e){e&&["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){e.addEventListener(t,(e=>{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domClosestByTag)("input",e.target);t&&(t.value=t.value.replace(/\D/g,""))}))}))}static validateEmail(e){return e.length<64&&e.match(/^.{1,40}@.{1,40}$/)&&e.match(/^([a-z0-9_\-]{0,40}\.){0,10}[a-z0-9_\-*]{1,40}@(([a-z0-9][a-z0-9_\-]{0,40})?[a-z0-9]\.){1,6}[a-z]{2,7}$/i)}static getEmail(){let e=!1;if(cur.paymentsEmailCheckbox)if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)(cur.paymentsEmailCheckbox)){if(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(cur.paymentsEmailInput)),!e)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)(cur.paymentsEmailInput),""}else e="false";return e}static toggleEmail(e){"INPUT"===e.tagName&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(e)),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)(e))||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.checkbox)(e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)(e)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)(cur.paymentsEmailInput))}static unbind(e,t,o,n){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isButtonLocked)("payments_getvotes_submit"))return;const i=cur.paymentsPreferVotes;if(!o){const o="card"==e?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_unbind_card_confirm"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_revoke_token_confirm");return void(cur.confirmBox=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_action_confirmation"),bodyStyle:"padding: 20px; line-height: 160%;"},o,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_unbind_card_btn"),(()=>{PaymentsBox.unbind(e,t,!0)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_cancel")))}const r={act:"a_del_instant_method",type:e,prefer_votes:n?-1:i,hash:t};cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(r.aid=cur.paymentsOrderAppId),ajax.post("al_payments.php",r,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:function(e){return PaymentsBox.showBoxError(e),!0},showProgress:()=>{cur.confirmBox?cur.confirmBox.showProgress():(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit")},hideProgress:()=>{cur.confirmBox?cur.confirmBox.hide():(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit")}})}static instantPay(){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isButtonLocked)("payments_getvotes_submit"))return;const e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)();if(cur.isPaymentAttemted=!0,cur.paymentsAuthPayment)return void e.hide();let t,o,n;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_amounts")&&(cur.votesAmountsVal=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.radioval)("payments_getvotes_amounts")),void 0===cur.votesAmountsData[cur.votesAmountsVal]){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_num")?parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_num").value,10):0;if(!(e>0))return;cur._otherVotes=e,t=cur._otherAmount,o=cur._otherAmount,n=cur.votesAmountCustomTimeHash}else t=cur.votesAmountsData[cur.votesAmountsVal][2],o=cur.votesAmountsData[cur.votesAmountsVal][3],n=cur.votesAmountsData[cur.votesAmountsVal][4];let i={act:"a_getvotes_charge",type:cur.votesType,instant_pay:1,amount:t,order_amount:o,hash:n};cur.statSessionId&&(i.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(i.order_id=cur.paymentsOrderId,i.order_app_id=cur.paymentsOrderAppId,i.order_bill_period=cur.paymentsOrderBillPeriod,i.order_hash=cur.paymentsOrderHash),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",i,{onDone:(e,t)=>{cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,e)}),2e3),PaymentsBox.showProgress&&PaymentsBox.showProgress()},onFail:e=>(PaymentsBox.showBoxError(e),!0),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton.pbind("payments_getvotes_submit"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton.pbind("payments_getvotes_submit")})}static showAllPrices(e){return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_amounts")),((e,t)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(t)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(e),!1}static paymentsShowTerminalTT(e,t){let o="";cur.paymentsTooltips[t]&&(o+=cur.paymentsTooltips[t]),o&&(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.showTooltip)(e,{text:o,dir:"auto",slide:15,className:"payments_terminal_tt",shift:[-3,3],hasover:1})}static updatePayAmount(o){let v=o.value.replace(/[^0-9]/g,"");const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.intval)(parseInt(v,10));v=i<1e4?i:parseInt(i.toString().substr(0,4),10),o.value!==v.toString()&&(o.value=v);let amount=0;if(cur.votesAmountsData.calcPayAmount){-1==cur.votesAmountsData.calcPayAmount.indexOf("return")&&(cur.votesAmountsData.calcPayAmount="return "+cur.votesAmountsData.calcPayAmount);const calcFunc="(function(votes){"+cur.votesAmountsData.calcPayAmount+";})("+v+")";try{amount=eval(calcFunc)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.logEvalError)(e,calcFunc)}amount=amount?Math.ceil(100*amount)/100:0,amount=parseInt(amount,10)==amount?amount.toFixed(0):amount.toFixed(2),cur._otherAmount=amount,cur._otherVotes=v}const isBonusVotesDiscount=!!cur.votesAmountsData.calcBonusVotesForDiscount,isPriceDiscount=!!cur.votesAmountsData.calOriginalAmountForDiscount;let bonusElement=null;if(bonusElement=isBonusVotesDiscount?document.getElementById("personal_discount_bonus"):isPriceDiscount?document.getElementById("personal_discount_original_amount"):document.getElementById("payments_other_votes_bonus"),bonusElement&&(cur.votesAmountsData.bonusesTable||cur.votesAmountsData.calcBonusVotes||isBonusVotesDiscount||isPriceDiscount)){let bonus=0;if(cur.votesAmountsData.calcBonusVotes||isBonusVotesDiscount||isPriceDiscount){const calcFunc="(function(votes){"+(cur.votesAmountsData.calcBonusVotes||cur.votesAmountsData.calcBonusVotesForDiscount||cur.votesAmountsData.calOriginalAmountForDiscount)+";})("+v+")";try{bonus=eval(calcFunc)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.logEvalError)(e,calcFunc)}}else for(let e in cur.votesAmountsData.bonusesTable)if(v>=e){const t=Math.floor(v*cur.votesAmountsData.bonusesTable[e]/e);t>bonus&&(bonus=t)}if(bonus)if(isBonusVotesDiscount)bonusElement.innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("apps_personal_discount_amount_gift_calc",bonus),bonusElement.style.display="block";else if(isPriceDiscount){let e="";e=cur.votesAmountsData.currency_str?bonus>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(bonus,cur.votesAmountsData.currency_str):"":bonus>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_votes_cost_in_rubles",bonus):"",bonusElement.innerHTML=e,bonusElement.style.display="inline-block"}else bonusElement.innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_bonus_votes",bonus),bonusElement.style.display="inline-block";else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(bonusElement)}if(cur.votesAmountsData.currency_str?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_amount").innerHTML=amount>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(amount,cur.votesAmountsData.currency_str):"":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_amount").innerHTML=amount>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_votes_cost_in_rubles",amount):"",isPriceDiscount){const e=document.getElementById("votes_amount");e&&e.classList.add("payments_opt_gift")}}static onChangeOption(e,t,o){let n;if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.radiobtn)(e,t,o),"payments_getvotes_amounts"===o){const e=cur.votesAmountsData[t];if(e){cur.votesAmountsVal=t,n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_get_votes_for_X").replace("{amount}",e[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("votes_num",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("votes_amount","");const o=document.getElementById("personal_discount_original_amount");o&&(o.style.display="none"),cur.paymentsEmailCheckbox&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)(cur.paymentsEmailCheckbox)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)(cur.paymentsEmailInput)}else n=cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)("votes_num");cur.checkoutEnabled?PaymentsBox.setButtons(n,PaymentsBox.showConfirm):PaymentsBox.setButtons(n,cur.votesAmountIsInstant||e&&e.length>=5?PaymentsBox.instantPay:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}}static setConfirmButtons(){if("card"!=cur.votesType&&cur.psList[cur.votesType]){const e=cur.paymentsWideBox?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_back_to_ps_list"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_go_ps_list");let t=!cur.psList[cur.votesType].in_menu;cur.paymentsInstantPayType==cur.votesType?t?PaymentsBox.setButtons((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_pay_order_btn"),PaymentsBox.instantPay,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_pay_order_btn"),PaymentsBox.instantPay):t?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm)}else cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}static popupWrite(e){return!(e.document.innerHTML==cur._popup_text||!cur._popup_text)&&(e.document.write(cur._popup_text),e.document.close(),e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback(),!0)}static show3DsFrame(e,t){if(cur.threeds_submitted)return!0;cur.threeds_submitted=!0;let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("cards_iframe");n||(n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:o.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"}),n.frameBorder=0,o.innerHTML="",o.appendChild(n));let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("form",{target:"card_iframe",method:"POST",action:e});for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("input",{type:"hidden",name:e,value:t[e]}));o.appendChild(i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_progress"),i.submit()}static submitDmrCheckout(e,t=!1){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress")&&!t)return;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit");const o=cur.psList.dmr_checkout;let n=!1;const i=(e*o.vote_cost).toFixed(2);if(!e||e<=0?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_web_no_sum"):o.min_amount&&e<o.min_amount?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_min_amount_limit_votes").replace("%s",o.min_amount):o.max_amount&&e>o.max_amount?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_max_amount_limit_votes").replace("%s",o.max_amount):void 0!==o.rest_amount_day&&e>o.rest_amount_day?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_rest_amount_day_votes").replace("%s",o.rest_amount_day):void 0!==o.rest_amount_week&&e>o.rest_amount_week&&(n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_rest_amount_week_votes").replace("%s",o.rest_amount_week)),n)return PaymentsBox.showBoxError(n),!1;const r=PaymentsBox.getEmail();if(""===r)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),!1;if(r&&"false"!==r&&!PaymentsBox.validateEmail(r))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_error_invalid_email")),!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)("payments_iframe_container","payments_threeds_checkout_frame");let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:cur.isNewSizeCheckout?"560px":"435px",width:s.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden",display:"block",borderRadius:"0 0 4px 4px"});a.frameBorder=0,s.innerHTML="",s.style.height=a.style.height,s.appendChild(a),window.addEventListener("message",PaymentsBox.frameMessage,!1);let _=cur.votesType;!_&&cur.votesTypeInit&&(_=cur.votesTypeInit);const l={act:"a_getvotes_charge",type:"dmr_checkout",hash:cur.paymentsHash,amount:i,stat_session_id:cur.statSessionId,votes:e};_&&(l.pay_method=_),cur.paymentsAuthPayment&&(l.only_auth=1),r&&(l.email=r),cur.votesAmountsData.appoveCode&&(l.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(l.order_id=cur.paymentsOrderId,l.order_app_id=cur.paymentsOrderAppId,l.order_bill_period=cur.paymentsOrderBillPeriod,l.order_hash=cur.paymentsOrderHash),cur.votesAmountsData.purchaseDescr&&(l.purchase_descr=cur.votesAmountsData.purchaseDescr),PaymentsBox.trackingProtectionEnabled((function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_enabled")}),(function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_disabled")})),ajax.post("al_payments.php",l,{onDone:function(t,n,r){if(!t)return;if(-2==t){const t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_money_amount_rub",Math.floor(i));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_confirm_msg",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_amount",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_money",(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_money_for_votes",e).replace("{money}",t)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=r,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("confcode",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),!cur.paymentsWideBox){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_submit");PaymentsBox.setButtons(e.innerHTML,PaymentsBox.showConfirm,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_back"),PaymentsBox.showVotesAmounts)}cur._popup_text=n,cur._popup_callback=!1,cur._popup_callback=function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container").scrollTop=0};let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("card_iframe");if(s.contentWindow.document.open("text/html","replace"),s.contentWindow.document.write(n),s.contentWindow.document.close(),cur._popup_callback(),cur.isNewSizeCheckout){let e=s.closest(".popup_box_container");e&&(e.style.width="520px",e.style.minHeight="560px",e.style.height=null);let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container");if(t.style.width="520px",t.style.minHeight="560px",t.style.height=null,s.style.width="520px",s.style.minWidth="520px",s.style.minHeight="560px",s.style.height=null,document.body.attributes.scheme&&"vkcom_dark"==document.body.attributes.scheme.value&&e&&(e.querySelector(".box_title_wrap").style.backgroundColor="#19191a",e.querySelector(".box_body").style.backgroundColor="#19191a"),cur.isHideButtonBackAndText){let t=e.querySelector(".payments_box_summary");t&&(t.style.display="none")}}cur.smsChkData=t,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("dmr_checkout",t),o.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_landing_cancelled")):PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"dmr_checkout"!=o.name&&PaymentsBox.showTypes()}),2e3)},onFail:e=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0),frame:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_2__.browser.safari_mobile})}static submitCard(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress"))return;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit");const t=cur.psList.card;let o=!1;const n=(e*t.vote_cost).toFixed(2);if(!e||e<=0?o=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_web_no_sum"):t.min_amount&&e<t.min_amount?o=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_min_amount_limit_votes").replace("%s",t.min_amount):t.max_amount&&e>t.max_amount?o=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_max_amount_limit_votes").replace("%s",t.max_amount):null!=t.rest_amount_day&&e>t.rest_amount_day?o=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_rest_amount_day_votes").replace("%s",t.rest_amount_day):null!=t.rest_amount_week&&e>t.rest_amount_week&&(o=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_rest_amount_week_votes").replace("%s",t.rest_amount_week)),o)return PaymentsBox.showBoxError(o),!1;const i=PaymentsBox.getEmail();if(""===i)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),!1;if(i&&"false"!==i&&!PaymentsBox.validateEmail(i))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_error_invalid_email")),!1;if(cur.votesAmountsData.needApprove){const t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_money_amount_rub",Math.floor(n));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_confirm_msg",cur.votesAmountsData.needApprove),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_amount",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_money",(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_money_for_votes",e).replace("{money}",t)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("confcode",""),delete cur.votesAmountsData.needApprove,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_confcode_wrap"),void PaymentsBox.approveGetCode()}let r;if(PaymentsBox.disablePaymentTypesRows(),t.use_iframe){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:e.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t),window.addEventListener("message",PaymentsBox.frameMessage,!1)}else{const e=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`;r=window.open("","_blank",e),cur._popup_text=PaymentsBox.popupHtml((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_cards_redirect"),"",""),PaymentsBox.popupWrite(r)}const s={act:"a_getvotes_charge",type:"card",hash:cur.paymentsHash,amount:n,stat_session_id:cur.statSessionId};cur.paymentsAuthPayment&&(s.only_auth=1),i&&(s.email=i),cur.votesAmountsData.appoveCode&&(s.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(s.order_id=cur.paymentsOrderId,s.order_app_id=cur.paymentsOrderAppId,s.order_bill_period=cur.paymentsOrderBillPeriod,s.order_hash=cur.paymentsOrderHash),PaymentsBox.trackingProtectionEnabled((function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_enabled")}),(function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_disabled")})),ajax.post("al_payments.php",s,{onDone:function(o,i,s){if(o){if(-2==o){t.use_iframe||r.close();const o=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_money_amount_rub",Math.floor(n));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_confirm_msg",i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_amount",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_money",(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_money_for_votes",e).replace("{money}",o)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=s,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("confcode",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),t.use_iframe||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress()),cur._popup_text=i,cur._popup_callback=!1,t.use_iframe){cur._popup_callback=function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container").scrollTop=0};let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("card_iframe");e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(i),e.contentWindow.document.close(),cur._popup_callback()}else r.document.open("text/html","replace"),r.document.write(i),r.document.close(),r.blur(),r.focus();cur.smsChkData=o,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("card",o),!t.use_iframe&&r.closed?setTimeout((function(){cur.isPaymentComplete||(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),500):t.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_landing_cancelled")):PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"alfabank"!=t.name&&"dmr"!=t.name&&PaymentsBox.showTypes()}),2e3)}},onFail:function(e){return t.use_iframe||r.close(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0},frame:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_2__.browser.safari_mobile})}static trackingProtectionEnabled(e,t){let o=new XMLHttpRequest;o.open("GET","https://top-fwz1.mail.ru/counter2?id=1",!0),o.onreadystatechange=function(){200!==o.status?e():t(),o.onreadystatechange=null},o.send()}static submitPaymentSystem(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress"))return;const t=cur.votesType,o=cur.psList[t];let n=!1,i=0,r=0,s=0,a=0;if(!o.simple_redirect){if(!e)return;i=(e*o.vote_cost).toFixed(2),r=(e*o.vote_cost/cur.usdRate).toFixed(2),s=Math.floor(i),a=100*(i-s),!e||e<=0?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_web_no_sum"):o.min_amount&&e<o.min_amount?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_min_amount_limit_votes").replace("%s",o.min_amount):o.max_amount&&e>o.max_amount?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_max_amount_limit_votes").replace("%s",o.max_amount):null!=o.rest_amount_day&&e>o.rest_amount_day?n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_rest_amount_day_votes").replace("%s",o.rest_amount_day):null!=o.rest_amount_week&&e>o.rest_amount_week&&(n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_rest_amount_week_votes").replace("%s",o.rest_amount_week))}if(n)return PaymentsBox.showBoxError(n),!1;const _=PaymentsBox.getEmail();if(""===_)return;if(_&&"false"!==_&&!PaymentsBox.validateEmail(_))return void PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_error_invalid_email"));if(PaymentsBox.showProgress(),PaymentsBox.disablePaymentTypesRows(),"mailmoney_vkpay"===t){const e={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:i,random_auth:0,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",e,{onDone:e=>{const t=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)(),o={noLocChange:1,skipBoxesHide:1,noClickHide:1};cur.isPaymentsAppOrder?cur.app.openAppInLayer(e,!1,!0,o):(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.showWiki)({w:e},!1,!1,o),t._hide(!1,!0),cur.onExternalAppDone=e=>{t._show(),e.status||(PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons(),clearInterval(cur.smsChkStatInt)),cur.onExternalAppDone=null,window.WkView&&WkView.hide(!1,!0)},cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.data,null,t)}),2e3)},onFail:e=>(PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}else{if(cur.votesAmountsData.oauth_url&&(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_remember_wallet")||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)("payments_remember_wallet"))){const e=cur.votesAmountsData.oauth_params;let n="";for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){n+=`<input type="hidden" autocomplete="off" name="${t}" value="${e[t]}"/>`}let r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("paymentSystemsForm");r.action=cur.votesAmountsData.oauth_url,r.method="post",r.innerHTML=n;const s=cur.votesAmountsData.popup_params||{},a="_blank",l=s.width||700,c=s.height||600,u=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-l/2}, top=${Math.floor(window.screen.height/2)-c/2}, width=${l}, height=${c}`,d=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payment_redirect").replace("%s",o.title),p=`<form action="${r.action}" method="${r.method}" id="popup_payment_form" accept-charset="UTF-8">${r.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(d,p,"document.getElementById('popup_payment_form').submit()"),cur._popup_callback=!1,window.addEventListener("message",PaymentsBox.handlePaymentCompleteMessage,!1);let h=window.open("",a,u);cur.smsChkStatCnt=0,cur.oauthState=0;let m=0;return cur.smsChkStatInt=setInterval((function(){if(2==cur.oauthState)PaymentsBox.checkStatus(cur.votesType,cur.smsChkData);else if(0==cur.oauthState&&(m=cur.isPaymentComplete&&cur.paymentCompleteParams&&cur.paymentCompleteParams.code?cur.paymentCompleteParams.code:0,m)){cur.oauthState=1;let e={act:"a_getvotes_charge",type:t,oauth_code:m,hash:cur.paymentsHash,amount:i,stat_session_id:cur.statSessionId};return cur.paymentsAuthPayment&&(e.only_auth=1),_&&(e.email=_),void ajax.post("al_payments.php",e,{onDone:e=>{cur.oauthState=2,cur.smsChkData=e},onFail:e=>(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}(h.closed&&!cur.isPaymentComplete||cur.isPaymentComplete&&!m)&&(clearInterval(cur.smsChkStatInt),cur.isPaymentComplete?PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_sms_money_fail")):PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),2e3),void PaymentsBox.popupWrite(h)}if(cur.votesAmountsData.provider&&-1!==["dmr","paypal","yandexmoney","api_provider"].indexOf(cur.votesAmountsData.provider)){const e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payment_redirect").replace("%s",o.title);let n,r={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:i,random_auth:0,stat_session_id:cur.statSessionId};if(_&&(r.email=_),"paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_remember_wallet")?(r.remember_wallet=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)("payments_remember_wallet")||cur.forceRebind,cur.forceRebind&&(cur.forceRebind=!1)):r.remember_wallet=1,r.remember_wallet){const t=cur.votesAmountsData.popup_params||{},o=t.width||700,n=t.height||600;e=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-o/2}, top=${Math.floor(window.screen.height/2)-n/2}, width=${o}, height=${n}`}else{e=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`}n=r.remember_wallet?window.open("","",e):window.open("","_blank",e);const t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payment_redirect").replace("%s",o.title);cur._popup_text=PaymentsBox.popupHtml(t,"",""),PaymentsBox.popupWrite(n)}ajax.post("al_payments.php",r,{onDone:function(t,o,i){if(!t)return;let r="api_provider"!==cur.votesAmountsData.provider;cur.canOpenPopup=r;let s=!r;PaymentsBox.checkStatusCallback=t=>{if("paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){if(n&&!n.closed&&!s){s=!0;let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("paymentSystemsForm");o.action=t.action,o.method="get";let i="";for(let e in t.params)if(Object.prototype.hasOwnProperty.call(t.params,e)){i+=`<input type="hidden" autocomplete="off" name="${e}" value="${t.params[e]}"/>`}o.innerHTML=i;let r=`<form action="${o.action}" method="${o.method}" id="popup_payment_form" accept-charset="UTF-8">${o.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(e,r,"document.getElementById('popup_payment_form').submit()"),PaymentsBox.popupWrite(n)}(n.closed&&!cur.isPaymentComplete||cur.isPaymentComplete)&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(cur.isPaymentComplete?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_sms_money_fail"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled")),PaymentsBox.setConfirmButtons())}else cur._popup||(cur._popup=window.open("","_blank"))},cur.smsChkData=t,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,t)}),2e3)},onFail:function(e){return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0}})}else{if(!cur.isAdsPayment){const t={act:"a_getvotes_invoice",type:cur.votesType,amount:i,votes:e,invoice_hash:cur.votesAmountsData.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",t)}let n=o.gate_params,l="",c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("paymentSystemsForm"),u=(new Date).getTime();for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let o=n[t];o=o.replace("{amount_votes}",e),o=o.replace("{amount_rub}",i),o=o.replace("{amount_usd}",r),o=o.replace("{amount_rub_int}",s),o=o.replace("{amount_rub_frac}",a),o=o.replace("{time}",u),l+=`<input type="hidden" autocomplete="off" name="${t}" value="${o}"/>`}let d=o.gate_url;d=d.replace("{time}",u),d=d.replace("{amount_votes}",e),d=d.replace("{amount_rub}",i),d=d.replace("{amount_usd}",r),d=d.replace("{amount_rub_int}",s),d=d.replace("{amount_rub_frac}",a),c.action=d,c.method=o.gate_method,c.innerHTML=l;const p="_blank",h=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`;let m=!1;try{const n=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payment_redirect").replace("%s",o.title),s=`<form action="${c.action}" method="${c.method}" id="popup_payment_form" accept-charset="${o.gate_charset}">${c.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(n,s,`Payments.submitPopupForm("${t}", "${e}", "${i}", "${r}")`),cur._popup_callback=!1,m=window.open("",p,h),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments","","votes",t,"start"),cur.smsChkData=!1,cur.isPaymentComplete=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,!1),m.closed&&!cur.isPaymentComplete&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled"),"info_msg"),o.simple_redirect?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):PaymentsBox.setConfirmButtons())}),2e3),PaymentsBox.popupWrite(m)}catch(e){c.submit()}_&&ajax.post("al_payments.php",{act:"a_set_receipt_email",email:_,hash:cur.paymentsHash},{onFail:e=>!0})}}}static approveSendCode(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("confcode").value;if(!e.length)return void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)("confcode");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_error");let t=0;for(let o=0;o<e.length;o++)t+=parseInt(e[o]);if(t%=10,t!=cur.votesAmountsData.approveCodeChk)return PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_invalid_code")),void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)("confcode");cur.votesAmountsData.appoveCode=e,PaymentsBox.showConfirm()}static approveGetCode(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit");let t={act:"a_getvotes_approve_code",hash:cur.votesAmountsData.confirm_hash};return e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(t,o){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),1==t?PaymentsBox.showBoxError(o):e||(cur.votesAmountsData.approveCodeChk=o,PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.approveSendCode,cur.paymentsChangeType,cur.checkoutEnabled?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0}}),!1}static smsSendPin(){if(null==cur.votesAmountsVal)return!1;const e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4!=e&&8!=t&&(2!=e||5!=t))return!1;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("confcode").value;o.length&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",code:o,oid:cur.votesAmountsData[cur.votesAmountsVal][3],qid:cur.smsChkData.qid,hash:cur.smsChkData.hash},{onDone:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress(),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind("sms",cur.smsChkData),2e3)},onFail:function(e){return PaymentsBox.showBoxError(e),!0}}))}static smsSendCode(){if("card"===cur.votesType)return!1;if(null!=cur.votesAmountsVal){const e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4==e||8==t||2==e&&5==t)return PaymentsBox.smsSendPin()}const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("confcode").value;e.length?((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",pid:cur.votesAmountsVal,code:e,hash:cur.votesAmountsData[cur.votesAmountsVal].hash},{onDone:function(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e&&PaymentsBox.getVotesCharge()},onFail:function(e){return PaymentsBox.showBoxError(e),!0}})):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)("confcode")}static smsGetCode(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit");let t={act:"a_getvotes_validate",hash:cur.votesAmountsData[cur.votesAmountsVal].hash,pid:cur.votesAmountsVal};e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(e,t){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),2==e?(PaymentsBox.showBoxError(t,"ok_msg"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)("confcode")):e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e?PaymentsBox.getVotesCharge():(PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_confirm"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)("confcode"),cur.paymentsWideBox?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_change_phone_number"),PaymentsBox.showPhoneForm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,cur.paymentsChangeType,PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)("confcode"),!0}})}static confirmPinCode(){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("confcode").value);if(!e.length)return void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)("confcode");let t={act:"a_getvotes_confirm_pin",hash:cur.updateTnxHash,ps:cur.votesType,qid:cur.smsChkData.qid,pin:e};PaymentsBox.showProgress(),ajax.post("al_payments.php",t,{onDone:function(){cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,cur.smsChkData)}),2e3)},onFail:function(e){PaymentsBox.refreshBox(),PaymentsBox.showBoxError(e)}})}static checkPinKeyPress(e){if((e=e||window.event).ctrlKey||e.altKey||e.metaKey)return;let t=null;return null===e.which&&e.keyCode>=32?t=String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode&&e.which>=32&&(t=String.fromCharCode(e.which)),null!==t?!(t<"0"||t>"9")&&void 0:void 0}static fillBDay(){let params={act:"a_getvotes_fill_bday"};ajax.post("al_payments.php",params,{onDone:function(js){if(js)try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.logEvalError)(e,js)}}})}static showOffer(e){let t={act:"a_getvotes_offer",offer_id:e,offer_aid:cur.paymentsOfferApp||0,app_currency:cur.offersAppCurrency||0};cur.app&&cur.app.options&&(t.aid=cur.app.options.aid),cur.paymentsOfferPreview&&(t.offer_view=cur.paymentsOfferPreview),ajax.post("al_payments.php",t,{onDone:PaymentsBox.offerOnLoad,onFail:e=>(e&&(PaymentsBox.showBoxError(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_wrap")),!0)})}static showNextOffers(e){let t={act:"a_getvotes_amounts",type:"offers",offset:cur.offersOffset,app_currency:cur.offersAppCurrency,hash:cur.paymentsHash};cur.app&&cur.app.options&&(t.isAppOrder=cur.paymentsOfferApp?1:0,t.aid=cur.app.options.aid),ajax.post("al_payments.php",t,{onDone:function(t,o){o&&(t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(e),cur.offersOffset+=20,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_offers_wrap").innerHTML+=o,PaymentsBox.checkOffers())},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)(e),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)(e)})}static showConfirm(){cur.votesAmountsVal=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_amounts")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.radioval)("payments_getvotes_amounts"):0;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_num")?parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_num").value,10):0;if(void 0===cur.votesAmountsVal)return;cur.votesAmountsVal&&null==cur.votesAmountsData[cur.votesAmountsVal]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("votes_num")&&!e&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.notaBene)("votes_num");let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_spasibo_rules_accept");if(t&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isChecked)(t)){let e={text:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_spasibo_rules_not_accepted"),dir:"auto",className:"payments_terminal_tt",hasover:1};return cur.paymentsWideBox&&(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.extend)(e,{shift:[-30,10]})),void(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.showTooltip)(t,e)}if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().changed=!0,"sms"===cur.votesType){cur.isResetCheckedMaxSmsVotesValue&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_confirm_msg").innerHTML=cur.votesAmountsData.confirm_msg_again,cur.isResetCheckedMaxSmsVotesValue=!1);const t=cur.votesAmountsData.confirm_type;if(2==t&&null!=cur.votesAmountsData.checked_max_sms_votes_val&&(cur.votesAmountsVal=cur.votesAmountsData.checked_max_sms_votes_val,cur.votesAmountsData.checked_max_sms_votes_val=0,cur.isResetCheckedMaxSmsVotesValue=!0),null==cur.votesAmountsData[cur.votesAmountsVal]&&e){if(!t)return void PaymentsBox.getVotesCharge(e,!0);cur.votesAmountsData[-1]=[e,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_money_amount_rub",cur._otherAmount),cur.votesAmountsData[0][2],0],cur.votesAmountsVal=-1}void 0===cur.votesAmountsData[cur.votesAmountsVal]&&(cur.votesAmountsVal=0);const o=cur.votesAmountsData[cur.votesAmountsVal][0],n=cur.votesAmountsData[cur.votesAmountsVal][1],i=cur.votesAmountsData[cur.votesAmountsVal][2],r=cur.votesAmountsData[cur.votesAmountsVal][3],s=cur.votesAmountsData[cur.votesAmountsVal][6];if(0==i){cur.smsChkData={oid:r,qid:0,hash:cur.votesAmountsData.check_hash};let e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_to_get_send_sms",o);cur.paymentsWideBox||(e+=`<br/>${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_service_cost")}`);const t=cur.votesAmountsData[cur.votesAmountsVal];if(e=e.replace("{number}",cur.votesAmountsData[cur.votesAmountsVal][4]),e=e.replace("{text}",`<nobr>${cur.votesAmountsData[cur.votesAmountsVal][5]}${vk.id}</nobr>`),e=e.replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),t.invoice_hash&&cur.statSessionId){PaymentsBox.showWaiting("");const n={act:"a_getvotes_invoice",type:cur.votesType,oid:r,votes:o,invoice_hash:t.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",n,{onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting_msg").innerHTML=e},onFail:function(e){return clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0}})}else PaymentsBox.showWaiting(e)}else if(5==i||6==i||8==i)PaymentsBox.getVotesCharge();else if(7==i){PaymentsBox.getVotesCharge(),cur._popup_text=PaymentsBox.popupHtml((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_cards_redirect"),"",""),cur._popup_callback=!1,cur._popup_href=!1;const e="/payments?act=go_gate&type=sms",t=Math.floor(window.screen.width/2)-350,o=Math.floor(window.screen.height/2)-300;(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.debugLog)(e),cur._popup=window.open(e,"_blank",`scrollbars=1, resizable=1, menubar=0, left=${t}, top=${o}, width=700, height=600`)}else if(1!=i&&4!=i&&1!=t)PaymentsBox.getVotesCharge(!1,!0);else{if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_num",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_amount",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_money",s),3==r&&(PaymentsBox.checkStatusCallback=function(e){cur.isResetCheckedMaxSmsVotesValue=!1,cur.checkedMaxVotes=e,PaymentsBox.getVotesAmounts(!0)}),2==t&&o<=cur.votesAmountsData.confirm_max_votes){if(cur.paymentsWideBox)return void PaymentsBox.getVotesCharge();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_confcode_wrap"),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.getVotesCharge,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_back"),PaymentsBox.showVotesAmounts)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_confcode_wrap"),PaymentsBox.smsGetCode();cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[r]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_confirm_comm",cur.votesAmountsData.confirm_wait_comment[r]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_confirm_comm_wrap")):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_confirm_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_confirm_comm_wrap"))}}else{let t;t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][0]:e,cur.checkoutEnabled?PaymentsBox.submitDmrCheckout(t):"card"===cur.votesType?PaymentsBox.submitCard(t):PaymentsBox.submitPaymentSystem(t)}}static offerOnLoad(html,js){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_offers_list");let offerView=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_offer_view");if(offerView){offerView.innerHTML=html,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(offerView);try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.logEvalError)(e,js)}}}static showWaiting(e){const t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][3]:0;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting_msg").innerHTML=e,t&&cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_waiting_comm")):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_waiting_comm")),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_waiting"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_buttons"),cur.paymentsWideBox&&cur.votesAmountsData[cur.votesAmountsVal]&&cur.votesAmountsData[cur.votesAmountsVal][7]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting_amount").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][6],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting_phone").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][7],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_waiting_mo")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_waiting_mo"),delete cur.paymentsWaitingCache[cur.votesType],cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,cur.smsChkData),2e3)}static showPhoneForm(e,t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("_msg","payments_getvotes_phone").innerHTML=t||(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_get_votes_input_phone"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("phone").value="",PaymentsBox.refreshBox(),t&&cur.paymentsWideBox?PaymentsBox.setButtons((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_save_phone"),PaymentsBox.saveSmsPhone):PaymentsBox.setButtons((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_save_phone"),PaymentsBox.saveSmsPhone,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_back"),2==e?PaymentsBox.getVotesAmounts:e?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_phone");const o=cur.uiPhoneCountry.container;if("spasibo"===cur.votesType)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_phone_prefix","+79");else{const e=cur.uiPhoneCountry.selectedItems();if(e.length>0)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_phone_prefix",e[0][3]);else for(let e=0,t=cur.countries.length;e<t;++e)cur.countries[e][0]==cur.defCountry&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_phone_prefix",cur.countries[e][3]);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(o)}return cur.paymentsBoxClass=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_box").className,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)("payments_box","payments_phone_form"),!1}static showPaySystemsList(){return PaymentsBox.refreshBox(),cur.paymentsWideBox&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_title").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_ps_list_title_header").innerText),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_ps","payments_votes_vkpay_promo_banner"),cur.votesType=!1,PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!1}static showVotesAmounts(){return PaymentsBox.refreshBox(),cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):"card"!==cur.votesType&&cur.psList[cur.votesType]&&!cur.psList[cur.votesType].in_menu?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_go_ps_list"),PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_cont","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&cur.paymentsOrderNotice&&((0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_16__.showMsg)("payments_box_error",cur.paymentsOrderNotice,"info_msg",null),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_error")),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_7__.updateAriaElements)(),delete cur.votesAmountsData.appoveCode,!1}static showTypes(){if(cur.paymentsWideBox)return PaymentsBox.showVotesAmounts(),!1;if(PaymentsBox.refreshBox(),cur.votesAmountsVal=void 0,cur.votesAmountsData=[],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_buttons"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_method","payments_votes_vkpay_promo_banner"),cur.paymentBoxTitle){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().setOptions({title:cur.paymentBoxTitle})}return!1}static setButtons(e,t,o,n){if(!cur.paymentsWideBox||e){if(e){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_submit");o&&(o.innerHTML=e,o.onclick=t,o.dataset.taskClick="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(o,"payments_getvotes_buttons"))}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_buttons");if(cur.paymentsWideBox){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_back");e&&(e.innerHTML="",o&&e.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("div",{className:"button",innerHTML:o,onclick:n,"data-task-click":""})))}else{let e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)();e&&(cur.paymentBoxTitle||(cur.paymentBoxTitle=e.getOptions().title),o?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("box_title",e.titleWrap).innerHTML=`<div class="back"><span class="back__icon">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_20__.getIcon24BrowserBack)().icon}</span>${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_box_title_back")}</div>`,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("back",e.titleWrap).onclick=n,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("back",e.titleWrap).dataset.taskClick=""):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("box_title",e.titleWrap).innerHTML=cur.paymentBoxTitle)}}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_buttons")}static showBoxError(e,t){if("object"==typeof e&&(e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_error_occured")),e&&cur.paymentsWideBox&&cur.checkoutEnabled){let t=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.MessageBox({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_error"),hideButtons:!0});(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),t.content(e).show()}else{if(e){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_box_error");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(o,""),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_16__.showMsg)(o,e,t||"error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(o))}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_progress","payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_wrap"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),PaymentsBox.hideRowProgress(),PaymentsBox.enablePaymentTypesRows()}}static showProgress(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_progress_msg","string"==typeof e?e:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_waiting_payment_complete")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_error","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_progress_link"):e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_progress_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_progress")}static hideRowProgress(){["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"].forEach((e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)(e)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_getvotes_active_row",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(e)).forEach((t=>{"payments_box_menu"!==e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(t,"payments_getvotes_active_row"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(t,"payments_progress")}))}))}static refreshBox(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_box_progress","payments_box_error","payments_getvotes_method","payments_getvotes_cont","payments_getvotes_phone","payments_getvotes_confirm","payments_getvotes_waiting","payments_getvotes_other","payments_getvotes_terminals","payments_getvotes_ps","payments_getvotes_foreign_cards_warning","payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_wrap"),cur.smsChkStatInt&&!cur.paymentsWideBox&&clearInterval(cur.smsChkStatInt),cur.paymentsBoxClass&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_box").className=cur.paymentsBoxClass,cur.paymentsBoxClass=""),cur.votesType&&"card"!==cur.votesType||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_foreign_cards_warning"),PaymentsBox.enablePaymentTypesRows()}static saveSmsPhone(){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("phone")),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_phone_prefix")||{})||"");e&&(cur.paymentsWaitingCache.sms&&(clearInterval(cur.paymentsWaitingCache.sms[2]),delete cur.paymentsWaitingCache.sms),cur.newSmsPhone=t+e,PaymentsBox.getVotesAmounts())}static startFormMeasure(){cur.formMeasureTime=Date.now(),vk.dev&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.debugLog)(cur.formMeasureTime)}static finishFormMeasure(e){if(cur.formMeasureTime){const t=Date.now()-cur.formMeasureTime;vk.dev&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.debugLog)(t),delete cur.formMeasureTime,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments_frame_load_time",t,e)}}static frameMessage(e){if(!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?paymentgate\.ru$/)&&!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)&&!e.origin.match(/^https?:\/\/co\.vkpay\.io$/))return!1;let t={};if(e.data){switch(typeof e.data){case"object":t=e.data;break;case"string":"{"===e.data.substr(0,1)&&(t=(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_17__.parseJSON)(e.data))}if("billing"!==t.type)return!1}if("pageLoad"===t.action||"formLoad"===t.action)cur.paymentsIgnoreResize=!1;else if("paySuccess"===t.action||"closeWindow"==t.action&&"ok"==t.action_params.status)cur.paymentsIgnoreResize=!0,cur.checkoutEnabled&&(PaymentsBox.showProgress(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_iframe_container"));else if("submit"===e.data||"3dsPage"===t.action)setTimeout(PaymentsBox.frameHeight.pbind(600,!0),200),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("3dsFinish"===t.action)PaymentsBox.frameHeight(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("resizeFrame"===t.action)if(t.action_params.height<10&&cur.paymentsIgnoreResize)cur.paymentsIgnoreResize=!1;else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container");e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(e,"payments_threeds_checkout_frame")&&setTimeout(PaymentsBox.frameHeight.pbind(t.action_params.height),200)}else"putPixel"===t.action&&"page_load"===t.action_params.alias?(PaymentsBox.finishFormMeasure("dmr"),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_loaded")):"session_fail"===t.action?(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_6__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_session_fail"):("payError"===t.action||"closeWindow"==t.action&&["error","cancel"].includes(t.action_params.status))&&cur.checkoutEnabled?PaymentsBox.checkoutDecline(t.action_params):"typePaymentMethod"===t.action&&cur.checkoutEnabled&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)("payments_iframe_container","payments_threeds_checkout_frame"),t.action_params&&t.action_params.system&&PaymentsBox.checkoutPayMethodChanged(t.action_params.system))}static frameHeight(e,t){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("card_iframe");o&&(e?(cur.prevFrameHeight=o.style.height,o.style.height=e+"px"):(o.style.height=cur.prevFrameHeight,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame")));let n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_iframe_container");n&&(cur.paymentsWideBox&&!cur.checkoutEnabled||t||(n.style.height=(e||cur.prevFrameHeight)+(cur.checkoutEnabled?0:10)+"px"),n.scrollTop=0)}static paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,PaymentsBox.frameHeight()}static checkoutDecline(e){let t=e||{};t.act="checkout_decline",t.qid=cur.smsChkData.qid,t.hash=cur.smsChkData.declineHash,ajax.post("payments",t,{onDone:function(e){return PaymentsBox.stopCheckAndShowError(e),!0},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}})}static checkoutPayMethodChanged(e){e&&ajax.post("payments",{act:"checkout_ps_choose",qid:cur.smsChkData.qid,pay_method:e})}static stopCheckAndShowError(e){clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e)}static complete(e,t){cur.paymentCompleteParams=t,cur.isPaymentComplete=!0}static checkStatus(e,t,o,n){if("sms"===e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress")&&!cur.paymentsWideBox&&7!=cur.votesAmountsData[cur.votesAmountsVal][2])if(15==cur.smsChkStatCnt)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_box_progress_msg").innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_waiting_payment_complete_still");else if(cur.smsChkStatCnt>30){return clearInterval(cur.smsChkStatInt),cur.isPaymentAttemted=!0,(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),void(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_internet_getting_votes"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_get_votes_delay"))}let i={act:"a_getvotes_check",type:e,votes_purchase:cur.isPaymentsAppOrder||cur.paymentsWideBox||cur.paymentsInstantPayType?0:1};t&&(t.oid||t.qid)?(i.oid=t.oid,i.qid=t.qid,i.hash=t.hash):i.hash=cur.psList[e].check_hash,0==cur.smsChkStatCnt&&(i.start=1),cur.statSessionId&&(i.stat_session_id=cur.statSessionId),t.test&&(i.test=1);let r=n||(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)();ajax.post("al_payments.php",i,{onDone:function(o,n,i){if("sms"===e&&cur._popup&&cur._popup.closed)return clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_payment_cancelled"),"info_msg"),void PaymentsBox.setConfirmButtons();if(o){if(1==o){for(window.cur.paymentSuccess=!0,"mailmoney_vkpay"===e&&WkView&&(r._show(),cur.onExternalAppDone=null,WkView.hide(!1,!0)),cur.isPaymentAttemted=!0,PaymentsBox.needContinue&&(cur.needContinue=1,PaymentsBox.needContinue=0);boxQueue.count();)boxQueue.hideLast(!1);if(n&&!cur.isPaymentsAppOrder&&(!cur.paymentsTryCompleteOrder||!r.onDone)){let e=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.MessageBox({width:400,hideButtons:!0,bodyStyle:"padding: 0; border-radius: 8px;"});e.content(n),e.show()}i&&(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_17__.updateMoney)(i)}else if(2==o||10==o)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_iframe_container")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(n);else if(3==o){let o="sms"===e;cur.votesAmountsData[cur.votesAmountsVal]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_num",cur.votesAmountsData[cur.votesAmountsVal][0]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_amount",cur.votesAmountsData[cur.votesAmountsVal][1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_money",o?cur.votesAmountsData[cur.votesAmountsVal][6]:cur.votesAmountsData[cur.votesAmountsVal][1])):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_num",cur._otherVotes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_amount",cur._otherAmount+" "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_box_votes_money",cur._otherAmount+" "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str))),o||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_confirm_msg",(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_get_votes_ps_enter_code")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_confirm_amount")),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t.oid]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_confirm_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t.oid],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_confirm_comm_wrap")):o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_confirm_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_confirm_comm_wrap")),"spasibo"===e&&(cur.updateTnxHash=n),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_box_confcode_wrap","payments_getvotes_confirm"),o&&n&&PaymentsBox.showBoxError(n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("confcode").onkeypress=o?"":PaymentsBox.checkPinKeyPress,PaymentsBox.setButtons(cur.payments_get_votes,o?PaymentsBox.smsSendCode:PaymentsBox.confirmPinCode,cur.paymentsChangeType,PaymentsBox.showTypes)}else{if(4==o){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_waiting")&&!cur.paymentsWaitingCache.sms){let e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_to_get_send_sms",cur.votesAmountsData[cur.votesAmountsVal][0]);cur.paymentsWideBox||(e+=`<br/>${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_service_cost")}`),e=e.replace("{number}",n.service_number),e=e.replace("{text}",`<nobr>${n.message_text}</nobr>`),e=e.replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),PaymentsBox.showWaiting(e)}return}if(5==o)PaymentsBox.refreshBox(),PaymentsBox.showConfirm();else if(6==o)delete cur.votesAmountsData.oauth_url,delete cur.paymentsInstantPayType,PaymentsBox.showVotesAmounts(),PaymentsBox.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_instant_pay_amount_limit_error")),PaymentsBox.setConfirmButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_remember_wallet",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("payments_getvotes_confirm_descr","payments_getvotes_cont"));else{if(7==o)return void(cur._popup&&!cur._popup_href&&(cur._popup_href=n,cur._popup.location.href=n));if(8==o)return void PaymentsBox.checkStatusCallback(n);if(9==o)return void PaymentsBox.show3DsFrame(n,i)}}clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0}},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}}),cur.smsChkStatCnt++}static checkStatusCallback(e){}static getVotesCharge(e,t){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.isButtonLocked)("payments_getvotes_submit")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress"))return;if(!((e=parseInt(e,10))||null!=cur.votesAmountsVal&&cur.votesAmountsData[cur.votesAmountsVal]))return;let o={act:"a_getvotes_charge",type:cur.votesType,hash:cur.paymentsHash,stat_session_id:cur.statSessionId};const n=PaymentsBox.getEmail();""!==n&&(n&&(o.email=n),t?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit"):PaymentsBox.showProgress(),e?(o.pid=-1,o.votes=e):(o.pid=cur.votesAmountsVal,-1==cur.votesAmountsVal&&(o.votes=cur.votesAmountsData[cur.votesAmountsVal][0])),cur.isResetCheckedMaxSmsVotesValue&&(o.pay_by_repay_status=1),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",o,{onDone:o=>{PaymentsBox.votesChargeOnDone(o,e,t)},onFail:e=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_box_progress")&&PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0)}))}static votesChargeOnDone(e,t,o){if(e)if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),-1==e)PaymentsBox.getVotesAmounts(!0);else if(e.qid)if(cur.smsChkData=e,o){const e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_for_get_n_votes",t||cur.votesAmountsData[cur.votesAmountsVal][0]);let o=cur.votesAmountsData.confirm_wait_msg.replace("{amount}",e);if(o+=t?`<br/>${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_service_cost_rubles",cur._otherAmount)}`:`<br/>${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_service_cost").replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1])}`,cur.paymentsWideBox){o+=`<br><br/><a onclick="return PaymentsBox.showPhoneForm(1);">${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_change_phone_number")}</a>`}PaymentsBox.showWaiting(o)}else cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,e),2e3)}static getVotesAmounts(e,t,o){if(null!=t&&cur.paymentsWideBox){if(cur.votesType==t&&cur.votesTypeInit!=t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_cont")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_terminals")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_ps")))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_waiting")?cur.paymentsWaitingCache[cur.votesType]=[(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_title").innerHTML,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting").innerHTML,cur.smsChkStatInt]:cur.smsChkStatInt&&!cur.paymentsWaitingCache[t]&&clearInterval(cur.smsChkStatInt),cur.votesType=t}else null!=t&&(cur.votesType=t);if(!cur.votesType)return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_foreign_cards_warning");if(cur.paymentsWideBox&&!o&&(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("payments_method_"+cur.votesType,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_box_menu")))),cur.paymentsWideBox&&cur.paymentsTypesSum&&cur.paymentsTypesSum[t]){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_summary_bill");e?e.innerHTML=cur.paymentsTypesSum[t]:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_order_sum",cur.paymentsTypesSum[t]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_tt"),((e,t)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(t)}))}let n="term"===cur.votesType||"ps"===cur.votesType;if(n){PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_method");let e="";if("term"===cur.votesType?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_terminals"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_votes_vkpay_promo_banner"),e="payments_terminals_title_header"):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_ps"),e="payments_ps_list_title_header"),cur.paymentsWideBox&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_title").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(e).innerText),PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!cur.paymentsWideBox)return}const i=["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"];for(let t=0;t<i.length;t++){let r=i[t];if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)(r)||cur.paymentsWideBox&&!o||"payments_box_menu"===r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_ps")&&o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(o.parentNode,"payments_getvotes_ps_list"))continue;let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(r),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_getvotes_active_row",s);if(!e&&a.length&&!cur.paymentsWideBox)return;a.forEach((e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(e,"payments_getvotes_active_row"),cur.paymentsWideBox&&!n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(e,"payments_progress")}))}if(o&&(!cur.paymentsWideBox||"payments_box_menu"!==o.parentNode.id||n||e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(o,"payments_progress"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(o,"payments_getvotes_active_row")),cur.paymentsWideBox&&cur.paymentsWaitingCache[t])return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_title").innerHTML=cur.paymentsWaitingCache[t][0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_waiting").innerHTML=cur.paymentsWaitingCache[t][1],PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_waiting","payments_getvotes_title"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_buttons"),void PaymentsBox.hideRowProgress();if(n)return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("payments_getvotes_buttons")&&!cur.paymentsWideBox&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.lockButton)("payments_getvotes_submit");let r={act:"a_getvotes_amounts",type:cur.votesType,prefer_votes:cur.paymentsPreferVotes,hash:cur.paymentsHash};if(cur.statSessionId&&(r.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(r.aid=cur.paymentsOrderAppId,cur.paymentsOrderBillPeriod&&(r.bill_period=cur.paymentsOrderBillPeriod),cur.paymentsOrderDiscount&&(r.discount=cur.paymentsOrderDiscount)),"sms"===r.type)cur.checkedMaxVotes&&(r.checked_max_votes=cur.checkedMaxVotes,cur.checkedMaxVotes=0),cur.newSmsPhone&&(r.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.isCorpPhone&&(r.corp=cur.isCorpPhone,cur.isCorpPhone=!1);else if("offers"===r.type){if(cur.app&&cur.app.options&&(r.isAppOrder=cur.paymentsOfferApp?1:0,r.aid=cur.app.options.aid,r.orderBox=cur.isPaymentsAppOrder?1:0),cur.paymentsPreload)return PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsPreload),cur.paymentsPreload=!1,void(cur.paymentsOfferPreload&&(PaymentsBox.offerOnLoad.apply(this,cur.paymentsOfferPreload),cur.paymentsOfferPreload=!1,cur.paymentsOneOffer=!0))}else if("spasibo"===r.type)cur.newSmsPhone&&(r.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.needContinue&&(r.continue=1,cur.needContinue=0);else if(cur.psList[r.type]&&cur.psList[r.type].simple_redirect)return PaymentsBox.hideRowProgress(),void PaymentsBox.submitPaymentSystem();ajax.post("al_payments.php",r,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:e=>(PaymentsBox.showBoxError(e),!0)})}static getVotesAmountsOnDone(result,html,data,js,title){if(PaymentsBox.hideRowProgress(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_15__.unlockButton)("payments_getvotes_submit"),cur.paymentsWideBox&&(title&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_title",title),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_title")),data&&data.menu_money)){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_summary_bill");e?e.innerHTML=data.menu_money:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(`payments_method_${cur.votesType}_descr`,data.menu_money)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_votes_vkpay_promo_banner"),-1==result)return void PaymentsBox.showPhoneForm();if(-2==result)return void PaymentsBox.showPhoneForm(!1,html);if(-3==result){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_getvotes_method_opt","payments_box_menu");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("payments_getvotes_active_row","payments_box_menu"));for(let t=0;t<e.length;t++){let o=e[t];if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(o,"payments_getvotes_active_row")){o.onclick();break}}return}if(!result)return PaymentsBox.showProgress(""),void(cur.smsAmountsInt=setTimeout((()=>{PaymentsBox.getVotesAmounts(!0)}),1e3));if(!html)return;let other;if(2==result?(other=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_other"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(other,html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_cont",html),cur.votesAmountsData=data,(cur.fromInstantPay&&2==cur.votesAmountsData.confirm_type||2!=cur.votesAmountsData.confirm_type||!cur.votesAmountsData.checked_max_sms_votes_val)&&PaymentsBox.showVotesAmounts(),cur.votesType&&"card"!==cur.votesType?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_foreign_cards_warning"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_getvotes_foreign_cards_warning"),cur.paymentsPreload&&"offers"===cur.votesType?PaymentsBox.setButtons(!1):"offers"===cur.votesType?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):cur.paymentsPreload&&PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_getvotes_amounts")))},data.confirm_msg&&data.confirm_type&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("payments_getvotes_confirm_msg",data.confirm_msg),2==result&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_getvotes_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(other)),js)try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.logEvalError)(e,js)}cur.instantNeedCVV&&(PaymentsBox.showConfirm(),cur.instantNeedCVV=!1),cur.paymentsEmailInput=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_receipt_email"),cur.paymentsEmailCheckbox=!!cur.paymentsEmailInput&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("_checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(cur.paymentsEmailInput))}static popupHtml(e,t,o){return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1251" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <style>\n        body {font-family:tahoma,verdana,arial,sans-serif,Lucida Sans; font-size:11px;}\n        .text {position:relative; top:40%; text-align:center; line-height:24px;}\n        .text img {margin-bottom:8px;}\n        .text_container {position:absolute; top:0; left:0; right:0; bottom:0; line-height:150%; height: 100%;}\n    </style>\n    <script type="text/javascript">\n      if (!window.vk) window.vk = {loginscheme: '${vk.loginscheme}', ip_h: '${vk.ip_h}', __domain: '${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_5__.getHostName)()}'};\n    <\/script>\n    <script type="text/javascript" src="${(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_0__.partConfigEnabled)("webinf_move_payments_from_workers")?window.stManager.getCompiledPath(window.jsc("web/payments_legacy.js")):window.stManager.getCompiledPath(window.jsc("workers/payments.js"))}"><\/script>\n</head>\n<body>\n${t}\n<div id="wait_text_container" class="text_container">\n    <div class="text">\n        <img src="/images/progress.gif" /><br/>${e}\n    </div>\n</div>\n<script type="text/javascript">\n  var st = setTimeout(function() {try {${o}; clearTimeout(st)} catch(e) {}}, 100)\n<\/script>\n</body>\n</html>`}static viewOffer(e){this.setButtons(e,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("start_offer").submit(),PaymentsBox.setButtons((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("payments_back_to_offers_list"),PaymentsBox.backToOffersList,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_cancel"),PaymentsBox.backToOffersList)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_cancel"),PaymentsBox.backToOffersList)}static backToOffersList(){if(cur.paymentsOneOffer)return(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("payments_offer_view"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("payments_offers_list"),cur.votesTypeInit||!1===cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes)}static initializeOfferChecker(e,t,o,n){cur.offersOffset=e,cur.offersAppCurrency=t,PaymentsBox.checkOffersList=[],PaymentsBox.checkOffersDo=()=>{if(o)return;const e=PaymentsBox.checkOffersList.join(",");PaymentsBox.checkOffersList=[],ajax.post("al_payments.php",{act:"a_offers_stat",offers:e,hash:n}),PaymentsBox.checkOffersTO=!1},PaymentsBox.checkOffers(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static removeCheckOffersEvent(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.removeEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static checkOffers(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_offer",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("payments_offers_wrap")),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("box_layer_wrap").scrollTop,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)("box_layer_wrap")[1];e.forEach((e=>{const n=e,i=n.offsetTop;i+30<t+o&&i+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)(n)[1]-20>t&&!n.getAttribute("checked")&&(n.setAttribute("checked",1),PaymentsBox.checkOffersList.push(n.id.substr(15)),PaymentsBox.checkOffersTO||(PaymentsBox.checkOffersTO=setTimeout(PaymentsBox.checkOffersDo,1e3)))}))}static offersRemoveButtons(){cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(cur.paymentsChangeType,PaymentsBox.showTypes,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_4__.getLang)("global_close"),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide)}static disablePaymentTypesRows(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(let t=0;t<e.length;t++){let o=e[t];o.classList.contains("payments_getvotes_active_row")?o.classList.add("payments_getvotes_noevents_row"):o.classList.add("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}}static enablePaymentTypesRows(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(let t=0;t<e.length;t++)e[t].classList.remove("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}static handlePaymentCompleteMessage(e){e.origin==window.origin&&e.data.type&&"paymentCompleteMessage"===e.data.type&&window.PaymentsBox.complete(e.data.newUrl,e.data.params)}}},47782:(e,t,o)=>{"use strict";o.d(t,{isImgBlurred:()=>i});o(16768);var n=o(77859);function i(e){return!!e&&(!!e.restrictionBlur&&!(0,n.isPhotoUnblurred)(e.photoRaw))}},38589:(e,t,o)=>{"use strict";o.d(t,{initSettingsAddressBox:()=>c});var n=o(82753),i=o(39586),r=o(96041),s=o(46944),a=o(1959),_=o(3895),l=o(59427);function c(e,t){e.setOptions({title:(0,_.getLang)("settings_addrbox_title")});const o=document.querySelector("#settdbx_addr"),c=document.querySelector("#settdbx_addr_tt_place");o.onfocus=function(){-2===cur.addrChecked&&(0,s.showTooltip)(c,{text:(0,_.getLang)("settings_addrbox_hint"),dir:"left",slideX:15,className:"settings_pwd_tt",shift:[-12,-15,0],onCreate:function(){(0,r.removeEvent)(c,"mouseout")}})},o.onblur=function(){c.tt&&c.tt.hide()},(0,n.elfocus)(o),setTimeout(n.elfocus.pbind(o),100),(0,n.setStyle)(o,{width:230-(0,n.ge)("settdbx_base").offsetWidth-8}),(0,i.extend)(cur,{settDomainCheckAddress:function(e){clearTimeout(cur.addressCheckTO),cur.lastAddress!==(0,n.val)("settdbx_addr")&&(cur.addressCheckTO=setTimeout(cur.settDomainDoCheckAddress,e||0))},settDomainDoCheckAddress:function(){let e=document.querySelector("#settdbx_submit"),t=document.querySelector("#settdbx_advices");cur.lastAddress=(0,n.val)("settdbx_addr"),ajax.post("al_settings.php",{act:"a_check_address",name:cur.lastAddress,from:"box"},{onDone:function(o){cur.addrChecked=1,l.FlatButton.setLabel(e,o),l.FlatButton.setDisabled(e,!1),(0,n.val)(t,"")},onFail:function(i){let r=(i=i.split("<*>"))[1],s=i[2];return i=i[0],s?(cur.addrChecked=-2,o.onfocus()):(cur.addrChecked=-1,o.onblur()),l.FlatButton.setLabel(e,i),l.FlatButton.setDisabled(e,!0),(0,n.val)(t,r),!0}})},settDomainAdvisedAddress:function(e){(0,n.val)("settdbx_addr",e),cur.settDomainCheckAddress()},settDomainAddressSubmit:function(e){if(1!==cur.addrChecked)return void(0,a.notaBene)("settings_addr");let o=(0,n.val)("settdbx_addr"),i={act:"a_change_address",hash:t,name:o};l.FlatButton.lock(e),window.ajax.post("al_settings.php",i,{onDone:function(e){nav.go(o,!1,{params:{from:"address_box"}})},showProgress:()=>l.FlatButton.lock(e),hideProgress:()=>l.FlatButton.unlock(e)})}})}},70358:(e,t,o)=>{"use strict";o.d(t,{showNextPaymentsHistory:()=>s});var n=o(1959),i=o(7659),r=o(82753);const s=(e,t)=>{if((0,n.isButtonLocked)(e))return;let o,s;return(0,n.lockButton)(e),t||(t="votes"),void 0===cur.historyOffset[t]&&(cur.historyOffset[t]=5),"transfer"===t?(o={act:"a_transfer_history"},s=(0,r.ge)("settings_transfer_history")):"subscriptions"===t?(o={act:"a_payments_subsciptions"},s=(0,r.ge)("settings_payments_subscriptions")):"games"===t?(o={act:"a_payments_games"},s=(0,r.ge)("settings_payments_games")):"goods_orders"===t?(o={act:"a_payments_goods_orders"},s=(0,r.ge)("settings_payments_goods_orders")):(o={act:"a_votes_history"},s=(0,r.ge)("settings_votes_history")),o.offset=s.rows.length,"subscriptions"===t&&(o.extra_items_count=cur.historyExtraItemsSubscriptions),ajax.post("al_settings.php",o,{onDone:function(o,a,_){const l=s.tBodies[0];if(o){if((0,n.unlockButton)(e),i.browser.msie){const e=(0,r.se)("<table>"+o+"</table>");Array.from((0,r.geByTag)("tr",e)).forEach((e=>{1===e.nodeType&&l.appendChild(e)}))}else l.insertAdjacentHTML("beforeEnd",o);"subscriptions"===t&&_&&(cur.historyExtraItemsSubscriptions=_)}o&&!a||((0,r.addClass)(l.lastChild,"settings_votes_history_last"),(0,r.hide)(e))}}),!1}},97742:(e,t,o)=>{"use strict";o.d(t,{FAQTutorial:()=>d});var n=o(39586),i=o(23434),r=o(19338),s=o(82753),a=o(2620),_=o(1959);const l="tutorial_step",c="finished";function u(){let e=(0,s.geByClass)(l).slice(-1)[0],t=(0,s.geByClass1)("content",e);t.innerHTML=(0,n.getTemplate)("login_tutorial_finish_appeal")+t.innerHTML}const d={tryInit(){(0,s.geByClass1)(l)&&u()},select(e,t,o,d=!1){if(cur.tutorialProcessing)return;if((0,_.isChecked)(e))return;let p=(0,s.gpeByClass)(l,e);(0,s.hasClass)(p,c)||((0,s.removeClass)((0,s.geByClass1)("on",p),"on"),(0,s.addClass)(e,"on"),ajax.post("support?act=a_select_tutorial",{name:t,id:o,load:1,ban:nav.objLoc.ban||0},{onDone(e,t){d||(0,s.addClass)(p,c);let o=!0;const i=(0,s.ge)("page_body").offsetHeight+(vk.staticheader?0:(0,s.getH)((0,s.ge)("page_header_cont")));if(d){let e;do{e=(0,s.domNS)(p),e&&((0,s.re)(e),o=!1)}while(e)}(0,s.ge)("login_blocked_wrap").innerHTML+=e,u();if("login"===nav.objLoc[0]&&t){const e=document.querySelectorAll(".tutorial_step"),t=e[e.length-1];if(a.Login.isBanExpired()){a.Login.canUnblockFast()?t.innerHTML+=(0,n.getTemplate)("login_unblock_by_phone_fast"):t.innerHTML+=(0,n.getTemplate)("login_unblock_by_phone");const o=e[e.length-1].querySelector(".help_table_question__m");o&&(0,s.hide)(o)}else t.innerHTML+=(0,n.getTemplate)("login_wait_for_ban_expiration_message")}o&&(0,r.scrollToY)(i)},onFail(e){return(0,i.showDoneBox)(e),!1},showProgress(){cur.tutorialProcessing=!0,(0,_.lockButton)(e)},hideProgress(){cur.tutorialProcessing=!1,(0,_.unlockButton)(e)}}))},home:()=>{nav.go("/support?act=home")},back:e=>{const t=(0,s.geByClass)("tutorial_step"),o=t[t.length-1];2===t.length&&(0,s.hide)(e),(0,s.hide)(o),(0,s.removeClass)((0,s.geByClass1)("on",t[t.length-2]),"on")}}},69367:(e,t,o)=>{"use strict";o.d(t,{PLAYING:()=>n});const n="playing"},49010:(e,t,o)=>{"use strict";o.d(t,{AudioList:()=>l});var n=o(11010),i=o(70912),r=o(15816),s=o(84618),a=o(42874),_=(0,r._)("_ensureFetchable");class l{fetchAt(e,t){return(0,i._)(this,_)[_]().fetchAt(e,t)}fetchNext(e){return(0,i._)(this,_)[_]().fetchNext(e)}ensureAt(e){var t=this;return(0,n._)((function*(){const o=t.ensureAbsIndex(e);let n=t.audioAt(o);return n||t.fetchAt(o,{prefetch:!0})}))()}ensureAbsIndex(e){return(0,s.ensureAudioListAbsIndex)(this,e)}get maxIndex(){return(0,a.getAudioListMaxIndex)(this)}constructor(){Object.defineProperty(this,_,{value:c})}}function c(){const{fetchable:e}=this;if(!e)throw new Error("AudioListFetchable not implemented");return e}},84618:(e,t,o)=>{"use strict";o.d(t,{ensureAudioListAbsIndex:()=>r});var n=o(23245),i=o(65475);function r(e,t){const o=(0,n.indexAbs)(e.length,t);if(!(0,i.isValidAudioListAbsIndex)(e,o))throw new Error("Index is out of range");return o}},42874:(e,t,o)=>{"use strict";function n(e){const t=e.length;return e.infinite?t:t-1}o.d(t,{getAudioListMaxIndex:()=>n})},65475:(e,t,o)=>{"use strict";o.d(t,{isValidAudioListAbsIndex:()=>i});var n=o(42874);function i(e,t){return t>=0&&t<=(0,n.getAudioListMaxIndex)(e)}},90195:(e,t,o)=>{"use strict";var n,i,r,s,a,_,l;o.d(t,{CallStatSource:()=>s}),function(e){e.AUDIO="ok_audio",e.AUDIO_TO_VIDEO="ok_video",e.VIDEO="ok_started_as_video",e.GROUP_AUDIO="group_audio",e.GROUP_AUDIO_TO_VIDEO="group_video",e.GROUP_VIDEO="group_started_as_video"}(n||(n={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(i||(i={})),function(e){e.REMOTE_NO_CONNECT="push_not_delivered",e.REMOTE_FAILED_ACCEPT="cant_connect",e.REMOTE_DECLINE="declined_remote",e.LOCAL_DECLINE="declined_local",e.REMOTE_TIMEOUT="declined_timeout",e.REMOTE_BUSY="busy",e.CONNECTION_LOST="lost_connection"}(r||(r={})),function(e){e.CONVO_HEADER="im_header",e.CONVO_SNIPPET="im_message",e.CONVO_LIST="im_create",e.CONVO_JOIN_SNIPPET="im_join_message",e.CONVO_JOIN_HEADER="im_join_header",e.CONVO_JOIN_BANNER="im_join_header",e.FRIENDS_LIST="friends_list",e.LINK_JOIN_SNIPPET="join_deeplink",e.LINK_JOIN_PAGE="join_deeplink",e.PROFILE="profile",e.WIDGET="im_widget",e.FAST_CHAT="fast_chat",e.HISTORY="history",e.HISTORY_FRIENDS_LIST="history_friends_list",e.HISTORY_CREATE="history_create",e.LINK="link",e.STANDALONE="standalone",e.NOTIFICATION_HB="notification_hb",e.MINI_APP="mini_app",e.FC_HEADER="fast_chat_header",e.FC_PROFILE="fast_chat_profile",e.FC_MESSAGE_PROFILE="fast_chat_message_profile",e.FC_CREATE="fast_chat_create",e.FC_MESSAGE="fast_chat_message",e.FC_JOIN_POPUP="fast_chat_join_popup",e.FC_JOIN_BANNER="fast_chat_join_banner",e.FC_JOIN="fast_chat_join",e.IM_HEADER="im_header",e.IM_PROFILE="im_profile",e.IM_MESSAGE_PROFILE="im_message_profile",e.IM_CREATE="im_create",e.IM_MESSAGE="im_message",e.IM_JOIN_POPUP="im_join_popup",e.IM_JOIN_BANNER="im_join_banner",e.IM_JOIN="im_join",e.VKME_HEADER="vkme_header",e.VKME_PROFILE="vkme_profile",e.VKME_MESSAGE_PROFILE="vkme_message_profile",e.VKME_CREATE="vkme_create",e.VKME_MESSAGE="vkme_message",e.VKME_JOIN_POPUP="vkme_join_popup",e.VKME_JOIN_BANNER="vkme_join_banner",e.VKME_JOIN="vkme_join",e.VKME_CHANNEL_ACTION_BUTTON="vkme_channel_action_button",e.MESSENGER_UNHANDLED_SOURCE="messenger_unhandled_source"}(s||(s={})),function(e){e.OUTGOING_CALL_STARTED_VIDEO="OutgoingCallStartedVideo",e.OUTGOING_CALL_STARTED_AUDIO="OutgoingCallStartedAudio",e.OUTGOING_CALL_ADD_PARTICIPANTS_SENT="OutgoingCallAddParticipantsSent",e.OUTGOING_CALL_REMOTE_RINGING="OutgoingCallRemoteRinging",e.OUTGOING_CALL_ACCEPTED_REMOTELY="OutgoingCallAcceptedRemotely",e.OUTGOING_CALL_FAILED="OutgoingCallFailed",e.OUTGOING_CALL_COMPLETED="OutgoingCallCompleted",e.INCOMING_CALL_RECEIVED="IncomingCallReceived",e.INCOMING_CALL_ACCEPTED="IncomingCallAccepted",e.INCOMING_CALL_FAILED="IncomingCallFailed",e.CALL_DECLINED_OR_HANGED_LOCALLY="CallDeclinedOrHangedLocally",e.CALL_DECLINED_OR_HANGED_REMOTELY="CallDeclinedOrHangedRemotely",e.CALL_CONNECTED="CallConnected",e.CALL_DISCONNECTED="CallDisconnected",e.VIDEO_ENABLED="VideoEnabled",e.VIDEO_DISABLED="VideoDisabled",e.RELAY_CONNECTION_ESTABLISHED="RelayConnectionEstablished",e.USER_FEEDBACK_RECEIVED="UserFeedbackReceived",e.SYSTEM_STAT="SystemStat",e.GROUP_CALL_JOINED="GroupCallJoined",e.GROUP_CALL_JOIN_FAILED="GroupCallJoinFailed",e.HAND_RAISED="HandRaised",e.HAND_LOWERED="HandLowered",e.SCREEN_SHARING_STARTED="ScreenSharingStarted",e.SCREEN_SHARING_STOPPED="ScreenSharingStopped",e.AUDIO_SHARING_STARTED="AudioSharingStarted",e.ALL_MICS_DISABLED="AllMicsDisabled",e.MIC_OFF_WHILE_TALKING_ALERT="MicOffWhileTalkingAlert",e.MIC_OFF_WHILE_TALKING_ENABLE_CLICK="MicOffWhileTalkingEnableClick",e.VIDEO_DISABLED_DUE_TO_BAD_CONNECTION_ALERT="VideoDisabledDueToBadConnectionAlert",e.ALL_MICS_AND_VIDEO_DISABLED="AllMicsAndVideoDisabled",e.USER_MICS_AND_VIDEO_DISABLED="UserMicsAndVideoDisabled",e.ASK_ALL_TO_UNMUTE="AskAllToUnmute",e.ASK_USER_TO_UNMUTE="AskUserToUnmute",e.ASSIGN_ADMIN="AssignAdmin",e.RETRIEVE_ADMIN="RetrieveAdmin",e.ADMIN_PIN="AdminPin",e.ADMIN_UNPIN="AdminUnpin",e.VIRTUAL_BACKGROUND_SELECTED="VirtualBackgroundSelected",e.VIRTUAL_BACKGROUND_DISABLED="VirtualBackgroundDisabled",e.CUSTOM_VIRTUAL_BACKGROUND_SELECTED="CustomVirtualBackgroundSelected",e.CUSTOM_VIRTUAL_BACKGROUND_ADDED="CustomVirtualBackgroundAdded",e.CUSTOM_VIRTUAL_BACKGROUND_DELETED="CustomVirtualBackgroundDeleted",e.CUSTOM_VIRTUAL_BACKGROUND_DISABLED="CustomVirtualBackgroundDisabled",e.CALL_SCHEDULED="CallScheduled",e.SCHEDULED_CALL_EDITED="ScheduledCallEdited",e.SCHEDULED_CALL_LIVE_STARTED="ScheduledCallLiveStarted",e.REACTION_ENABLED="ReactionEnabled",e.REACTION_DISABLED="ReactionDisabled",e.REACTION_SENT="ReactionSent",e.CALL_WATCH_TOGETHER_CLICK="CallWatchTogetherClick",e.CALL_WATCH_TOGETHER_STARTED="CallWatchTogetherStarted",e.CALL_WATCH_TOGETHER_STOPPED="CallWatchTogetherStopped",e.SESSION_ROOMS_ASK_FOR_HELP="SessionRoomsAskForHelp",e.SESSION_ROOMS_USER_MOVED="SessionRoomsUserMoved",e.SESSION_ROOMS_USER_LEFT="SessionRoomsUserLeft",e.SESSION_ROOMS_AUTO_ALLOCATION="SessionRoomsAutoAllocation",e.SESSION_ROOMS_MANUAL_ALLOCATION="SessionRoomsManualAllocation",e.SESSION_ROOMS_OPENED="SessionRoomsOpened",e.SESSION_ROOMS_CLOSED="SessionRoomsClosed",e.SKIP_DESKTOP_JOIN_SCREEN="SkipDesktopJoinScreen",e.CALL_VMOJI_CLICK="CallVmojiClick",e.CALL_VMOJI_START_FAILED="CallVmojiStartFailed",e.CALL_VMOJI_STARTED="CallVmojiStarted",e.CALL_VMOJI_STOPPED="CallVmojiStopped",e.CALL_VMOJI_BENCHMARK="CallVmojiBenchmark",e.MIC_ENABLED="MicEnabled",e.MIC_DISABLED="MicDisabled",e.OPEN_CHAT="OpenChat",e.NAME_CHANGED_BY_USER="NameChangedByUser",e.NAME_CHANGED_BY_ANONYM="NameChangedByAnonym",e.NAME_CHANGED_BY_ADMIN="NameChangedByAdmin",e.NAME_CHANGED_BY_COMMUNITY="NameChangedByCommunity",e.TRANSCRIPTION_STARTED="TranscriptionStarted",e.TRANSCRIPTION_STOPPED="TranscriptionStopped",e.SCREEN_SHARE_NOT_VISIBLE="ScreenShareNotVisible",e.CALL_COLLAPSED="CallCollapsed",e.CALL_MISSED_NOTIFICATION="CallMissedNotification",e.SCREEN_ZOOMED="ScreenZoomed",e.WHITE_BOARD_STARTED="WhiteBoardStarted",e.ONLINE_TRANSCRIPTION_STARTED="OnlineTranscriptionStarted",e.ONLINE_TRANSCRIPTION_STOPPED="OnlineTranscriptionStopped",e.WAITING_ROOM_DISABLED="WaitingRoomDisabled",e.WAITING_ROOM_ENABLED="WaitingRoomEnabled",e.CALL_STREAMING_CLICK="CallStreamingClick",e.CALL_STREAMING_START_FAILED="CallStreamingStartFailed",e.CALL_STREAMING_STARTED="CallStreamingStarted",e.CALL_STREAMING_STOPPED="CallStreamingStopped",e.CALL_RECORDING_CLICK="CallRecordingClick",e.CALL_RECORDING_START_FAILED="CallRecordingStartFailed",e.CALL_RECORDING_STARTED="CallRecordingStarted",e.CALL_RECORDING_STOPPED="CallRecordingStopped",e.CURRENT_USER_BAD_CONNECTION_ALERT="CurrentUserBadConnectionAlert",e.DOWNLOAD_PARTICIPANTS_LIST_CLICK="DownloadParticipantsListClick",e.CONTACT_JOINED="ContactJoined",e.CONTACT_DEANONIMIZED="ContactDeanonimized",e.VIDEO_SUSPEND_MODE="VideoSuspendMode",e.CALL_PREVIEW_CAMERA_ENABLED="CallPreviewCameraEnabled",e.CALL_PREVIEW_MIC_ENABLED="CallPreviewMicEnabled",e.CALL_PREVIEW_CAMERA_DISABLED="CallPreviewCameraDisabled",e.CALL_PREVIEW_MIC_DISABLED="CallPreviewMicDisabled",e.CALL_PREVIEW_DOWNLOAD_APP_CLICK="CallPreviewDownloadAppClick",e.CALL_PREVIEW_DESKTOP_APP_JOIN_CLICK="CallPreviewDesktopAppJoinClick",e.CALL_PREVIEW_BROWSER_JOIN_CLICK="CallPreviewBrowserJoinClick",e.CALL_PREVIEW_DEVICE_CHANGE_CAM_CLICK="CallPreviewDeviceChangeCamClick",e.CALL_PREVIEW_DEVICE_CHANGE_MIC_CLICK="CallPreviewDeviceChangeMicClick",e.CALL_PREVIEW_MODAL_CLOSED="CallPreviewModalClosed"}(a||(a={})),function(e){e[e.ONCE=0]="ONCE",e[e.PERMANENT=1]="PERMANENT"}(_||(_={})),function(e){e.HDScreenSharing="HDScreenSharing",e.AudioScreenSharing="AudioScreenSharing",e.FastScreenSharing="FastScreenSharing",e.FastAudioScreenSharing="FastAudioScreenSharing"}(l||(l={}))},26312:(e,t,o)=>{"use strict";o.d(t,{MediaFocus:()=>f});var n=o(70912),i=o(15816),r=o(90426),s=o(5526),a=o(96785);const _=(0,r.makeSharedState)("media-focus",(()=>({instance:null})),{version:1});var l=(0,i._)("_mediaSessionController"),c=(0,i._)("_channels"),u=(0,i._)("_lastActiveChannel"),d=(0,i._)("_handleChannelStart"),p=(0,i._)("_handleChannelStop"),h=(0,i._)("_update"),m=(0,i._)("_updateMediaSession");class f{static ensure(){const e=_();return e.instance||(e.instance=new f),e.instance}createChannel(e){if((0,n._)(this,c)[c].has(e))throw new Error(`MediaFocusChannel id ${e} already registered`);const t=new s.MediaFocusChannel(e);return(0,n._)(this,c)[c].set(e,t),t.events.on("start",(()=>(0,n._)(this,d)[d](t))),t.events.on("stop",(()=>(0,n._)(this,p)[p](t))),(0,n._)(this,h)[h](),t}constructor(){Object.defineProperty(this,u,{get:g,set:void 0}),Object.defineProperty(this,h,{value:v}),Object.defineProperty(this,m,{value:y}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=new a.MediaSessionController,(0,n._)(this,c)[c]=new Map,(0,n._)(this,d)[d]=e=>{(0,n._)(this,c)[c].get(e.id)===e&&(0,n._)(this,h)[h]()},(0,n._)(this,p)[p]=e=>{(0,n._)(this,c)[c].get(e.id)===e&&(0,n._)(this,h)[h]()}}}function g(){return[...(0,n._)(this,c)[c].values()].filter((e=>e.active)).sort(((e,t)=>t.activatedAt-e.activatedAt)).at(0)}function v(){(0,n._)(this,m)[m]()}function y(){var e;const t=(0,n._)(this,l)[l],o=(0,n._)(this,c)[c].get("calls"),i=(null==(e=o)?void 0:e.active)?o:(0,n._)(this,u)[u];i&&t.current!==i.mediaSession&&t.setCurrent(i.mediaSession)}},5526:(e,t,o)=>{"use strict";o.d(t,{MediaFocusChannel:()=>c});var n=o(70912),i=o(15816),r=o(51508),s=o(89289),a=(0,i._)("_emitter"),_=(0,i._)("_active"),l=(0,i._)("_activatedAt");class c{get events(){return(0,n._)(this,a)[a].listenable}get active(){return(0,n._)(this,_)[_]}get activatedAt(){return(0,n._)(this,l)[l]}start(){(0,n._)(this,_)[_]||((0,n._)(this,_)[_]=!0,(0,n._)(this,l)[l]=+new Date,(0,n._)(this,a)[a].emit("start"))}stop(){(0,n._)(this,_)[_]&&((0,n._)(this,_)[_]=!1,(0,n._)(this,a)[a].emit("stop"))}constructor(e){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,n._)(this,a)[a]=new r.Emitter,(0,n._)(this,_)[_]=!1,(0,n._)(this,l)[l]=0,this.mediaSession=new s.MediaSessionObject,this.id=e}}},96785:(e,t,o)=>{"use strict";o.d(t,{MediaSessionController:()=>u});var n=o(70912),i=o(15816),r=(0,i._)("_native"),s=(0,i._)("_supportedActions"),a=(0,i._)("_current"),_=(0,i._)("_setActionHandler"),l=(0,i._)("_applyNative"),c=(0,i._)("_handleChangeCurrentData");class u{get current(){return(0,n._)(this,a)[a]}setCurrent(e){var t;null==(t=(0,n._)(this,a)[a])||t.events.off("change",(0,n._)(this,c)[c]),(0,n._)(this,a)[a]=e,e.events.on("change",(0,n._)(this,c)[c]),(0,n._)(this,l)[l](e)}constructor(){if(Object.defineProperty(this,_,{value:d}),Object.defineProperty(this,l,{value:p}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,r)[r]=null,(0,n._)(this,s)[s]=["nexttrack","pause","play","previoustrack","seekbackward","seekforward","seekto","skipad","stop","hangup","enterpictureinpicture"],(0,n._)(this,a)[a]=null,(0,n._)(this,c)[c]=({diff:{metadata:e,playbackState:t,actionHandler:o,positionState:i,cameraActive:s,microphoneActive:a}})=>{const l=(0,n._)(this,r)[r];l&&(void 0!==e&&(l.metadata=e),t&&(l.playbackState=t),o&&(0,n._)(this,_)[_](o[0],o[1]),void 0!==i&&l.setPositionState(null!=i?i:void 0),void 0!==s&&"setCameraActive"in l&&l.setCameraActive(s),void 0!==a&&"setMicrophoneActive"in l&&l.setMicrophoneActive(a))},"undefined"==typeof window||!("mediaSession"in window.navigator))return;const e=window.navigator.mediaSession;(0,n._)(this,r)[r]=e,"setCameraActive"in e&&(0,n._)(this,s)[s].push("togglecamera"),"setMicrophoneActive"in e&&(0,n._)(this,s)[s].push("togglemicrophone")}}function d(e,t){const o=(0,n._)(this,r)[r];if(o)try{o.setActionHandler(e,t)}catch(e){t&&console.error(e)}}function p(e){const t=(0,n._)(this,r)[r];if(t){t.metadata=e.metadata,t.playbackState=e.playbackState,t.setPositionState(e.positionState),"setCameraActive"in t&&t.setCameraActive(e.cameraActive),"setMicrophoneActive"in t&&t.setMicrophoneActive(e.microphoneActive);for(const t of(0,n._)(this,s)[s]){var o;const i=null!=(o=e.actionHandlers.get(t))?o:null;(0,n._)(this,_)[_](t,i)}}}},89289:(e,t,o)=>{"use strict";o.d(t,{MediaSessionObject:()=>h});var n=o(70912),i=o(15816),r=o(51508),s=(0,i._)("_emitter"),a=(0,i._)("_actionHandlers"),_=(0,i._)("_positionState"),l=(0,i._)("_metadata"),c=(0,i._)("_playbackState"),u=(0,i._)("_cameraActive"),d=(0,i._)("_microphoneActive"),p=(0,i._)("_emitChange");class h{get events(){return(0,n._)(this,s)[s].listenable}get metadata(){return(0,n._)(this,l)[l]}set metadata(e){(0,n._)(this,l)[l]=e,(0,n._)(this,p)[p]({metadata:e})}get playbackState(){return(0,n._)(this,c)[c]}set playbackState(e){(0,n._)(this,c)[c]=e,(0,n._)(this,p)[p]({playbackState:e})}get actionHandlers(){return(0,n._)(this,a)[a]}get positionState(){return(0,n._)(this,_)[_]}get cameraActive(){return(0,n._)(this,u)[u]}get microphoneActive(){return(0,n._)(this,d)[d]}setPositionState(e){(0,n._)(this,_)[_]=e,(0,n._)(this,p)[p]({positionState:e})}setActionHandler(e,t){this.actionHandlers.set(e,t),(0,n._)(this,p)[p]({actionHandler:[e,t]})}setCameraActive(e){(0,n._)(this,u)[u]=e,(0,n._)(this,p)[p]({cameraActive:e})}setMicrophoneActive(e){(0,n._)(this,d)[d]=e,(0,n._)(this,p)[p]({microphoneActive:e})}constructor(){Object.defineProperty(this,p,{value:m}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,n._)(this,s)[s]=new r.Emitter,(0,n._)(this,a)[a]=new Map,(0,n._)(this,l)[l]=null,(0,n._)(this,c)[c]="none",(0,n._)(this,u)[u]=!1,(0,n._)(this,d)[d]=!1}}function m(e){(0,n._)(this,s)[s].emit("change",{diff:e})}},96130:(e,t,o)=>{"use strict";o.d(t,{RouterContext:()=>s});var n=o(34788),i=o(67294),r=o(51237);const s=(0,i.createContext)((0,n._)({history:[]},r.DEFAULTS))},51237:(e,t,o)=>{"use strict";var n;o.d(t,{Action:()=>n,DEFAULTS:()=>i}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const i={listen:e=>{const t=["popstate","pushState","replaceState","hashchange"],o=()=>{e()};for(const e of t)window.addEventListener(e,o);return()=>{for(const e of t)window.removeEventListener(e,o)}},navigate:(...e)=>{if("string"==typeof e[0]){var t;const[o,n]=e;(null==(t=n)?void 0:t.replace)?window.history.replaceState(null,"",o):window.history.pushState(null,"",o)}else{const[t]=e;window.history.go(t)}},location:()=>({pathname:window.location.pathname,search:window.location.search,url:window.location.pathname+window.location.search}),metadata:{module:""}}},97096:(e,t,o)=>{"use strict";o.d(t,{useLocation:()=>r});var n=o(67294),i=o(96130);function r(){const{history:e,location:t}=(0,n.useContext)(i.RouterContext),{pathname:o,search:r}=t(),s=e.length>1?{url:e[e.length-2].url,action:e[e.length-1].action}:void 0;return(0,n.useMemo)((()=>({pathname:o,search:r,from:s})),[o,r,JSON.stringify(s)])}},98236:(e,t,o)=>{"use strict";o.d(t,{matcher:()=>s});var n=o(60592);o(97096);const i={};function r(e){if(!i[e]){const t=[],o=(0,n.pathToRegexp)(e,t,{strict:!0,sensitive:!0,end:!1});i[e]={keys:t,regExp:o}}return i[e]}function s(e,t){if("string"==typeof e||Array.isArray(e))for(let o of[e].flat()){const{regExp:e,keys:n}=r(o),i=e.exec(t);if(i)return[!0,Object.fromEntries(n.map((({name:e},t)=>[e,i[t+1]])))]}else{const{regExp:o}=e;if(new RegExp(o).exec(t))return[!0,{}]}return[!1,null]}},29735:(e,t,o)=>{"use strict";o.d(t,{loadPrefetchCache:()=>l,setPrefetchCacheMissHandler:()=>s,updatePrefetchCache:()=>r});let n,i=null;function r(e){i=e}function s(e){n=e}let a=!1,_=new Set;function l(e,t,o){var n,r;if(!i)return;const s=i.findIndex((n=>n.method===e&&n.version===t&&c(o,n.request)));if(null==s||-1===s)return _.add(e),void(a=!0);const l=i[s];!function(e,t){if(!e||-1===t)return;e.splice(t,1)}(i,s);const u=null==(n=l)?void 0:n.response,d=null==(r=l)?void 0:r.error;if(d){const e=new Error("Api request failed.");throw e.type="api_error",e.error=d,e}return u}function c(e,t){return e===t||(!(!d(e)||!d(t))||!d(e)&&!d(t)&&(Array.isArray(e)&&"string"==typeof t?u(e,t.split(",")):"string"==typeof e&&Array.isArray(t)?u(e.split(","),t):Array.isArray(e)&&Array.isArray(t)?u(e,t):"object"==typeof e&&"object"==typeof t?function(e,t){const o=e,n=t,i=new Set([...Object.keys(o),...Object.keys(n)]);for(const e of i){if(!c(o[e],n[e]))return!1}return!0}(e,t):"number"==typeof e&&"string"==typeof t?e===Number.parseFloat(t):"string"==typeof e&&"number"==typeof t?Number.parseFloat(e)===t:"number"!=typeof e||1!==e&&0!==e||"boolean"!=typeof t?"boolean"==typeof e&&"number"==typeof t&&(1===t||0===t)&&e===Boolean(t):Boolean(e)===t))}function u(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!c(e[o],t[o]))return!1;return!0}function d(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&null!==e&&0===Object.keys(e).length||"object"==typeof e&&null!==e&&Object.values(e).every(d)}},51723:(e,t,o)=>{"use strict";o.d(t,{useClickOutsideListener:()=>i});var n=o(67294);function i(e,t){const o=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const t=t=>{o.current&&(o.current.contains(t.target)||e(t))};return document.addEventListener("click",t,!0),()=>{document.removeEventListener("click",t,!0)}}),t),o}},48026:(e,t,o)=>{"use strict";o.d(t,{useExternRef:()=>i});var n=o(67294);function i(...e){const t=(0,n.useRef)(null);return(0,n.useMemo)((()=>({get current(){return t.current},set current(o){t.current=o,e.forEach((e=>{e&&function(e,t){t&&("function"==typeof t?t(e):t.current=e)}(o,e)}))}})),e)}},67802:(e,t,o)=>{"use strict";o.d(t,{useNumericVariableValue:()=>i});var n=o(87514);const i=(e,t)=>(0,n.useVariableValue)(e,t,(e=>parseInt(e)||0))},31475:(e,t,o)=>{"use strict";o.d(t,{useObjectMemo:()=>r});var n=o(67294),i=o(59397);const r=e=>{const[t,o]=(0,n.useState)(e);return(0,i.isEqual)(e,t)||o(e),t}},82685:(e,t,o)=>{"use strict";o.d(t,{usePatchChildrenRef:()=>s});var n=o(67294),i=o(48026);const r=e=>"string"==typeof e.type,s=e=>{var t;const o=(0,n.isValidElement)(e)&&(r(e)?e.ref:e.props.getRootRef),s=(0,i.useExternRef)(o);return(0,n.useEffect)((()=>{s.current||console.error("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента")}),[null==(t=e)?void 0:t.type,s]),[s,(0,n.isValidElement)(e)?(0,n.cloneElement)(e,{[r(e)?"ref":"getRootRef"]:s}):e]}},77663:(e,t,o)=>{"use strict";o.d(t,{useStableCallback:()=>i});var n=o(67294);function i(e){const t=(0,n.useRef)(e);return(0,n.useLayoutEffect)((()=>{t.current=e})),(0,n.useCallback)(((...e)=>t.current(...e)),[t])}},87514:(e,t,o)=>{"use strict";o.d(t,{useVariableValue:()=>i});var n=o(67294);const i=(e,t,o)=>(0,n.useMemo)((()=>o(getComputedStyle(e).getPropertyValue(t))),[])},82161:(e,t,o)=>{"use strict";o.d(t,{Ranges:()=>C});const n=1e8,i=Math.pow(2,56)-1,r=905e16+i,s=593139650,a=593139654,_=2e9,l=16e6,c=16000599,u=1698e4,d=16999999,p=-2001e6,h=-2e9,m=1e6,f=19e8,g=-2e9,v=2e9,y=-1899999999,E=-189e7,w=2000000001,b=-1e9,A=2e9,P=2000512001,I=2000512051,T=216720807,O=216820807,C=Object.freeze({getAutotestGroupIdRand(){return S(T,O)},isAutotestGroup(e){return e>=T&&e<=O},isGroupId(e){return e<=-1&&e>-1e9},isUserId(e){return e>=1&&e<f||e>=2e11&&e<1e12},isUserIdTransitional(e){C.isUserId(e);const t=M(e,0,v);return t},isRealOwner(e){return C.isGroupId(e)||C.isUserId(e)},isAudioOwner(e){return C.isRealOwner(e)||C.isUMA(e)||C.isFakeWallAudioOwner(e)},isPlaylistOwner(e){return C.isRealOwner(e)||C.isUMA(e)||C.isChatOrChannelPeer(e)},isOfficialPlaylist(e){return C.isUMAReleaseOwner(e)||C.isUMAAlbumOwner(e)},isFakeWallAudioOwner(e){return D(e,2e9,2000512e3)},isUMA(e){return C.isUMAReleaseOwner(e)||C.isUMAAlbumOwner(e)},isUMAAlbumOwner(e){return D(e,-2000999999,h)},getUMAAlbumOwnerByShift(e){return h-Math.abs(e%m)},isUMAReleaseOwner(e){return D(e,-2002e6,p)},getUMAReleaseOwnerByShift(e){return p-Math.abs(e%m)},isEmailId(e){return e<g},isOwnerId(e){return e>=1?C.isUserId(e):C.isGroupId(e)},isContactId(e){return e>=1900000001&&e<v},convertContactIdToPeerId(e){return e+f},convertPeerIdToContactId(e){return e-f},isChatOrChannelPeer(e){return e>=w&&e<=21e8},isChatId(e){return e>0&&e<=n},convertChatPeerIdToChatId(e){return e-v},convertChatIdToChatPeerId(e){return e+v},isAppDomain(e){return e>=-1999999999&&e<b},convertPeerIdToAppId(e){return-e+b},convertAppIdToPeerId(e){return b-e},isUnauthLongId(e){return D(e,9e18,r)},isUnauthLongIdOld(e){return D(e,10000000001,11e10)},isMarusyaUploadOwner(e){return s<=e&&e<=a},getRandomMarusyaUploadOwnerId(){return S(s,a)},isFakeDocOwner(e){return D(e,_,2000063999)},getFirstFakeOwnerId(){return _},getRandomFirstFakeOwnerId(){return S(_,2000064e3)},getRandomFakeOwnerId(){return _+(Math.floor(Date.now()/1e3)/173+S(0,999))%64e3},isAdsVideoOwner(e){return D(e,l,c)},getRandomAdsVideoOwner(){return S(l,c)},isAdsPhotoOwner(e){return D(e,u,d)},getRandomAdsPhotoOwner(){return S(u,d)},isZeroOwner(e){return 0===e},convertEmailIdToEmailPeerId(e){return C.isEmailId(e)?-e+g:0},isZeroOwnerDeprecated(e){return!!e||C.isZeroOwner(e)},isExternalUser(e){return M(e,g,-19e8)},isExternalUserDeprecated(e){C.isExternalUser(e);const t=M(e,g,-1e9);return t},isAnonymousCallPeerId(e){return e>=y&&e<E},isAnonymousUserPeerId(e){return e>=10000000001&&e<11e10},getAnonymousCallUserByShift(e){const t=9999999;return-1890000001-(e%t+t)%t},isValidAliExpressOrderUserId(e){return!(e<A)&&!(e>2000000150)},generateAliexpressOrderUserId(){return S(A,150)},isADBot(e){return e>=2e9&&e<=2000064e3},getMarusiaAudioFakeId(e){return P+e%50},isMarusiaAudioFakeId(e){return e>=P&&e<I},isOwnerIdTransitional(e){return e>1?C.isUserIdTransitional(e):C.isGroupId(e)},convertGroupIdToOwnerId(e){return-e},convertOwnerIdToGroupId(e){return Math.abs(e)}});function M(e,t,o){return t<e&&e<o}function D(e,t,o){return t<=e&&e<=o}function S(e,t){return e+Math.floor(Math.random()*(t-e))}},66529:(e,t,o)=>{"use strict";o.d(t,{createAccountGetHelpHintsFx:()=>c,createAccountGetInfoFx:()=>a,createAccountHideHelpHintFx:()=>u,createAccountSetInfoFx:()=>_,createAccountShowHelpHintFx:()=>d});var n=o(34788),i=o(20224),r=o(98116),s=o(38419);const a=e=>(0,s.createApiEffect)("account.getInfo",e),_=e=>(0,r.attach)({effect:(0,s.createApiEffect)("account.setInfo",e),mapParams:e=>{var{query:t}=e,o=(0,i._)(e,["query"]);return(0,n._)({},o,{query:(0,n._)({},t,{value:l(t.value)})})}});function l(e){return"boolean"==typeof e?e?"1":"0":"number"==typeof e?String(e):e}const c=e=>(0,s.createApiEffect)("account.getHelpHints",e),u=e=>(0,s.createApiEffect)("account.hideHelpHint",e),d=e=>(0,s.createApiEffect)("account.showHelpHint",e)},48861:(e,t,o)=>{"use strict";o.d(t,{createAudioAddDislikeFx:()=>f,createAudioAddFx:()=>c,createAudioAddToPlaylistFx:()=>v,createAudioCreatePlaylistFx:()=>p,createAudioDeleteFx:()=>u,createAudioDeletePlaylistFx:()=>h,createAudioGetAudioIdsBySourceFx:()=>s,createAudioGetAudioPreviewFx:()=>l,createAudioGetByIdFx:()=>i,createAudioGetFx:()=>a,createAudioGetPlaylistByIdFx:()=>r,createAudioGetStreamMixAudiosFx:()=>m,createAudioRemoveDislikeFx:()=>g,createAudioRemoveFromPlaylistFx:()=>y,createAudioRestoreFx:()=>d,createAudioSearchFx:()=>_});var n=o(38419);const i=e=>(0,n.createApiEffect)("audio.getById",e),r=e=>(0,n.createApiEffect)("audio.getPlaylistById",e),s=e=>(0,n.createApiEffect)("audio.getAudioIdsBySource",e),a=e=>(0,n.createApiEffect)("audio.get",e),_=e=>(0,n.createApiEffect)("audio.search",e),l=e=>(0,n.createApiEffect)("audio.getAudioPreviewUrl",e),c=e=>(0,n.createApiEffect)("audio.add",e),u=e=>(0,n.createApiEffect)("audio.delete",e),d=e=>(0,n.createApiEffect)("audio.restore",e),p=e=>(0,n.createApiEffect)("audio.createPlaylist",e),h=e=>(0,n.createApiEffect)("audio.deletePlaylist",e),m=e=>(0,n.createApiEffect)("audio.getStreamMixAudios",e),f=e=>(0,n.createApiEffect)("audio.addDislike",e),g=e=>(0,n.createApiEffect)("audio.removeDislike",e),v=e=>(0,n.createApiEffect)("audio.addToPlaylist",e),y=e=>(0,n.createApiEffect)("audio.removeFromPlaylist",e)},90432:(e,t,o)=>{"use strict";o.d(t,{ensureAccountInfoService:()=>s});var n=o(98116),i=o(32410);let r;function s(){if(!r){const e=(0,n.createDomain)("global/account/info");r=(0,i.createAccountInfoService)({domain:e})}return r}},17928:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPlaylistsService:()=>s});var n=o(98116),i=o(90426),r=o(65540);const s=(0,i.makeSharedState)("global/audio/playlists",(()=>(0,r.createAudioPlaylistsService)({domain:(0,n.createDomain)("global/audio/playlists"),name:"global/audio/playlists"})),{version:1})},51624:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPreviewsService:()=>s});var n=o(98116),i=o(28316);let r;function s(){if(!r){const e=(0,n.createDomain)("global/audio/audioPreviews");r=(0,i.createAudioPreviewsService)({domain:e})}return r}},96349:(e,t,o)=>{"use strict";o.d(t,{ensureAudiosService:()=>s});var n=o(98116),i=o(72011);let r;function s(){if(!r){const e=(0,n.createDomain)("global/audio/audios");r=(0,i.createAudiosService)({domain:e})}return r}},60486:(e,t,o)=>{"use strict";o.d(t,{ensureGroupsMusicService:()=>s});var n=o(98116),i=o(90426),r=o(72566);const s=(0,i.makeSharedState)("global/audio/groupsMusic",(()=>(0,r.createGroupsMusicService)({domain:(0,n.createDomain)("global/audio/groupsMusic"),name:"global/audio/groupsMusic"})),{version:1})},55673:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioDislikesService:()=>s});var n=o(98116),i=o(90426),r=o(3631);const s=(0,i.makeSharedState)("global/audio/myDislikes",(()=>(0,r.createMyAudioDislikesService)({domain:(0,n.createDomain)("global/audio/myDislikes"),name:"global/audio/myDislikes"})),{version:1})},26127:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioPlaylistsService:()=>a});var n=o(98116),i=o(90426),r=o(30742),s=o(17928);const a=(0,i.makeSharedState)("global/audio/myPlaylists",(()=>(0,r.createMyAudioPlaylistsService)({config:{domain:(0,n.createDomain)("global/audio/myPlaylists"),name:"global/audio/myPlaylists"},audioPlaylistsService:(0,s.ensureAudioPlaylistsService)()})),{version:2})},48293:(e,t,o)=>{"use strict";o.d(t,{ensureMyMusicService:()=>s});var n=o(98116),i=o(90426),r=o(37285);const s=(0,i.makeSharedState)("global/audio/myMusic",(()=>(0,r.createMyMusicService)({domain:(0,n.createDomain)("global/audio/myMusic"),name:"global/audio/myMusic"})),{version:2})},10837:(e,t,o)=>{"use strict";o.d(t,{ensureAccountHelpHintsService:()=>u});var n=o(11010),i=o(98116),r=o(90426),s=o(66529),a=o(86539),_=o(4511),l=o(86804),c=o(53934);const u=(0,r.makeSharedState)("global/account/helpHints",(()=>(e=>{const t=(0,a.getEffectorServiceDomain)(e),o=t.createStore({}),r=t.createStore({viewerId:0}),u=t.createEvent("helpHints/initialize"),d=t.createEvent("helpHints/reload"),p=t.createEvent("helpHints/logError"),h=t.createEvent("helpHints/hide"),m=t.createEvent("helpHints/show"),f=(0,s.createAccountGetHelpHintsFx)({domain:t});let g=null;const v=(0,n._)((function*(){const{items:e}=yield f({query:{}});return e.reduce(((e,t)=>(e[t.id]=t,e)),{})})),y=(0,i.attach)({name:"helpHints/getHelpHintsFx",source:o,effect:t.createEffect((e=>Object.keys(e).length?Promise.resolve(e):g||(g=v().finally((()=>{g=null})),g)))}),E=t.createEffect("helpHints/reloadHelpHintsFx");E.use((()=>v()));const w=(0,i.attach)({name:"helpHints/hideHelpHintFx",effect:(0,s.createAccountHideHelpHintFx)({domain:t}),mapParams:({hintId:e})=>({query:{hint_id:e}})}),b=(0,i.attach)({name:"helpHints/showHelpHintFx",effect:(0,s.createAccountShowHelpHintFx)({domain:t}),mapParams:e=>({query:{hint_id:e}})}),A=t.createEffect("helpHints/logErrorFx");return A.use((({error:e,logErrorFn:t})=>{let o=null,n=null;t?((0,_.isNetworkError)(e)?o=e.error:(0,l.isApiError)(e)?(o=new Error(e.type),n=e.error):o=e,o&&t(o,{environment:"global/account/helpHints",data:n})):console.error(e)})),(0,i.sample)({clock:u,target:r}),(0,i.sample)({clock:u,source:y.pending,filter:e=>!e,target:y}),(0,i.sample)({clock:d,target:E}),(0,i.sample)({clock:[y.doneData,E.doneData],target:o}),(0,i.sample)({clock:h,target:w}),(0,i.sample)({clock:h,source:o,filter:(e,{isOptimistic:t})=>Boolean(t),fn:(e,{hintId:t})=>(0,c.produce)(e,(e=>{delete e[t]})),target:o}),(0,i.sample)({clock:m,target:b}),(0,i.sample)({clock:w.done,source:o,filter:(e,{params:{isOptimistic:t}})=>!t,fn:(e,{params:{hintId:t}})=>(0,c.produce)(e,(e=>{delete e[t]})),target:o}),(0,i.sample)({clock:b.done,target:d}),(0,i.sample)({clock:p,source:r,fn:({logErrorFn:e},t)=>({error:t,logErrorFn:e}),target:A}),(0,i.sample)({clock:[y.failData,E.failData,b.failData,w.failData],target:p}),{initialize:u,canShow:e=>Boolean(o.getState()[e]),getHelpHintsFx:y,$helpHints:o,hideHelpHint:h,showHelpHint:m}})({domain:(0,i.createDomain)("global/account/helpHints"),name:"global/account/helpHints"})),{version:1})},32410:(e,t,o)=>{"use strict";o.d(t,{createAccountInfoService:()=>a});var n,i=o(34788),r=o(98116),s=o(66529);!function(e){e[e.Pending=0]="Pending",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(n||(n={}));const a=({domain:e})=>{const t=e.createStore({}),o=e.createStore(n.Pending),a=(0,s.createAccountGetInfoFx)({domain:e}),_=(0,s.createAccountSetInfoFx)({domain:e}),l=e.createEffect((()=>a({query:{}})));o.on(a,((e,t)=>t.query.fields?e:e<=n.Pending?n.Initializing:void 0)).on(a.finally,((e,t)=>t.params.query.fields||"done"!==t.status?e:n.Initializing)),t.on(a.finally,((e,t)=>"done"===t.status?(0,i._)({},e,t.result):e)).on(_.done,((e,t)=>{const{result:o,params:{query:{name:n,value:r}}}=t;return o&&n in e?(0,i._)({},e,{[n]:r}):e}));const c=e.createEvent();return(0,r.sample)({clock:c,source:o,filter:e=>e!==n.Initialized,target:l}),{$accountInfo:t,getInfoFx:a,setInfoFx:_,initEvent:c}}},99813:(e,t,o)=>{"use strict";function n({id:e,ownerId:t,accessKey:o}){return`${t}_${e}${o?`_${o}`:""}`}o.d(t,{getAudioAccessId:()=>n})},5112:(e,t,o)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}o.d(t,{getAudioFullId:()=>n})},3222:(e,t,o)=>{"use strict";o.d(t,{mapAPIAudioToAudioData:()=>i,mapAPIAudioToAudioDataAuthor:()=>_,mapAPIAudioToTrackedAudioData:()=>r});var n=o(34788);function i(e){var t;const o={id:e.id,ownerId:e.owner_id,accessKey:e.access_key};return(0,n._)({},o,{identity:o,title:e.title,author:_(e),artwork:a(null==(t=e.album)?void 0:t.thumb),duration:e.duration,url:e.url||null,isExplicit:e.is_explicit})}function r(e){if(!e.track_code)throw new Error("track_code is not defined");return(0,n._)({},i(e),{trackCode:e.track_code})}const s=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function a(e){const t=[];if(!e)return t;for(const[o,n]of s){const i=e[o];i&&t.push({src:i,size:n})}return t}function _(e){var t,o,n,i,r,s;return{main:null!=(r=null==(o=e)||null==(t=o.main_artists)?void 0:t.map(l))?r:[],feat:null!=(s=null==(i=e)||null==(n=i.featured_artists)?void 0:n.map(l))?s:[],raw:e.artist}}function l(e){return{name:e.name}}},64940:(e,t,o)=>{"use strict";function n(e){const[t,o,n]=e.split("_");if(!o||!t)throw new Error(`Invalid audio_id: ${e}`);return{id:parseInt(o,10),ownerId:parseInt(t,10),accessKey:n}}o.d(t,{mapAPIRawIdToAudioIdentity:()=>n})},84376:(e,t,o)=>{"use strict";o.d(t,{mapAPIRawIdTrackedToTrackedAudioIdentity:()=>r});var n=o(34788),i=o(64940);function r(e){return(0,n._)({},(0,i.mapAPIRawIdToAudioIdentity)(e.audio_id),{trackCode:e.track_code})}},68922:(e,t,o)=>{"use strict";var n;o.d(t,{AudioType:()=>n}),function(e){e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.PodcastEpisode="podcast_episode",e.PodcastTrailer="podcast_trailer",e.Radio="radio"}(n||(n={}))},3983:(e,t,o)=>{"use strict";o.d(t,{mapAPIAudioToMusicAudioData:()=>r});var n=o(34788),i=o(3222);function r(e,t){return(0,n._)({},(0,i.mapAPIAudioToAudioData)(t),s(e,t))}function s(e,t){var o,r,s,_,l,c,u,d;return{type:e,hasLyrics:null!=(o=t.has_lyrics)&&o,author:(r=t,(0,n._)({},(0,i.mapAPIAudioToAudioDataAuthor)(r),{main:null!=(u=null==(_=r)||null==(s=_.main_artists)?void 0:s.map(a))?u:[],feat:null!=(d=null==(c=r)||null==(l=c.featured_artists)?void 0:l.map(a))?d:[]}))}}function a(e){return{name:e.name,id:e.id}}},65540:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsService:()=>g});var n=o(11010),i=o(34788),r=o(98116),s=o(48861),a=o(22960),_=o(36496),l=o(58038),c=o(41809),u=o(84376),d=o(25233),p=o(5258),h=o(9965),m=o(2257),f=o(86539);function g(e){const t=(0,f.getEffectorServiceDomain)(e),o=(0,s.createAudioGetPlaylistByIdFx)({domain:t}),g=(0,s.createAudioGetAudioIdsBySourceFx)({domain:t}),v=(0,d.createAudioPlaylistsCreateFx)({domain:t}),y=(0,p.createAudioPlaylistsDeleteFx)({domain:t}),E=(0,h.createAddAudioFx)({domain:t}),w=(0,m.createDeleteAudioFx)({domain:t}),b=t.createStore({}),A=t.createStore({}),P=t.createEffect((0,n._)((function*({id:e,ownerId:t}){const n=yield o({query:{playlist_id:e,owner_id:t}});return(0,c.mapAPIPlaylistToAudioPlaylistData)(n)}))),I=(0,r.attach)({source:b,effect(e,t){return(0,n._)((function*(){const o=e[(0,a.getAudioPlaylistFullId)(t)];return o||P(t)}))()}}),T=t.createEffect((0,n._)((function*(e){return(yield g({query:{source:"playlist",entity_id:(0,a.getAudioPlaylistFullId)(e)}})).audios.map(u.mapAPIRawIdTrackedToTrackedAudioIdentity)}))),O=(0,r.attach)({source:A,effect(e,t){return(0,n._)((function*(){const o=e[(0,a.getAudioPlaylistFullId)(t)];return o||T(t)}))()}});return b.on(P.done,((e,{result:t})=>(0,i._)({},e,{[(0,a.getAudioPlaylistFullId)(t)]:t}))),A.on(T.done,((e,{params:t,result:o})=>(0,i._)({},e,{[(0,a.getAudioPlaylistFullId)(t)]:o}))),b.on(v.done,((e,{result:t})=>(0,_.addPairToMap)(e,{key:(0,a.getAudioPlaylistFullId)(t),value:t}))),b.on(y.done,((e,{params:t})=>(0,l.removePairFromMap)(e,(0,a.getAudioPlaylistFullId)({id:t.id,ownerId:t.ownerId})))),{$playlistDataEntities:b,$playlistAudioIdsEntities:A,createFx:v,deleteFx:y,addAudioFx:E,deleteAudioFx:w,fetchPlaylistFx:P,ensurePlaylistFx:I,fetchPlaylistAudioIdsFx:T,ensurePlaylistAudioIdsFx:O}}},9965:(e,t,o)=>{"use strict";o.d(t,{createAddAudioFx:()=>s});var n=o(11010),i=o(48861),r=o(5112);function s({domain:e}){const t=(0,i.createAudioAddToPlaylistFx)({domain:e});return e.createEffect((0,n._)((function*({ownerId:e,playlistId:o,audioIdentity:n}){yield t({query:{owner_id:e,playlist_id:o,audio_ids:(0,r.getAudioFullId)(n)}})})))}},25233:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsCreateFx:()=>a});var n=o(11010),i=o(48861),r=o(41809),s=o(5112);function a({domain:e}){const t=(0,i.createAudioCreatePlaylistFx)({domain:e});return e.createEffect((0,n._)((function*({ownerId:e,audios:o,title:n,description:i}){const a=o.map(s.getAudioFullId).join(","),_=yield t({query:{owner_id:e,audio_ids:a,title:n,description:i}});return(0,r.mapAPIPlaylistToAudioPlaylistData)(_)})))}},5258:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDeleteFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioDeletePlaylistFx)({domain:e});return e.createEffect((0,n._)((function*({ownerId:e,id:o}){yield t({query:{owner_id:e,playlist_id:o}})})))}},2257:(e,t,o)=>{"use strict";o.d(t,{createDeleteAudioFx:()=>s});var n=o(11010),i=o(48861),r=o(5112);function s({domain:e}){const t=(0,i.createAudioRemoveFromPlaylistFx)({domain:e});return e.createEffect((0,n._)((function*({ownerId:e,playlistId:o,audioIdentity:n}){yield t({query:{owner_id:e,playlist_id:o,audio_ids:(0,r.getAudioFullId)(n)}})})))}},28316:(e,t,o)=>{"use strict";o.d(t,{createAudioPreviewsService:()=>l});var n=o(11010),i=o(34788),r=o(98116),s=o(48861),a=o(28027),_=o(5112);function l({domain:e}){const t=(0,s.createAudioGetAudioPreviewFx)({domain:e}),o=e.createStore({}),l=e.createEffect((0,n._)((function*({identity:e}){const o=yield t({query:{audio_id:(0,_.getAudioFullId)(e),preview_type:"longtap"}});return(0,a.mapApiAudioPreviewToAudioPreviewData)(o)})));return(0,r.sample)({clock:l.done,source:o,fn:(e,{params:t,result:o})=>{const{id:n,ownerId:r}=t.identity,s=(0,_.getAudioFullId)({id:n,ownerId:r});return(0,i._)({},e,{[s]:o})},target:o}),{fetchAudioPreviewFx:l,$audioPreviewEntities:o}}},26570:(e,t,o)=>{"use strict";o.d(t,{createAudioVkMixService:()=>i});var n=o(47709);function i(e){const t=e.createStore([]),o=(0,n.createAudioVkMixFetchNextFx)(e);return t.on(o.doneData,((e,t)=>t.length?[...e,...t]:e)),{$lists:t,fetchNextFx:o}}},47709:(e,t,o)=>{"use strict";o.d(t,{createAudioVkMixFetchNextFx:()=>r});var n=o(11010),i=o(48861);function r(e){const t=(0,i.createAudioGetStreamMixAudiosFx)({domain:e});return e.createEffect((0,n._)((function*({id:e,count:o=1}){return yield t({query:{mix_id:e,count:o}})})))}},72011:(e,t,o)=>{"use strict";o.d(t,{createAudiosService:()=>u});var n=o(11010),i=o(34788),r=o(98116),s=o(48861),a=o(99813),_=o(3983),l=o(68922),c=o(5112);function u({domain:e}){const t=(0,s.createAudioGetByIdFx)({domain:e}),o=(0,s.createAudioGetFx)({domain:e}),u=(0,s.createAudioSearchFx)({domain:e}),p=e.createStore({}),h=e.createEffect((0,n._)((function*(e){if(!e.length)return[];return(yield t({query:{audios:e.map(a.getAudioAccessId).join(",")}})).map((e=>(0,_.mapAPIAudioToMusicAudioData)(l.AudioType.MusicTrack,e)))}))),m=e.createEffect((0,n._)((function*(e){let t;t=e.q?yield u({query:{owner_id:e.ownerId,count:e.count,offset:e.offset,q:e.q}}):yield o({query:{owner_id:e.ownerId,count:e.count,offset:e.offset}});const n=t.items.map((e=>(0,_.mapAPIAudioToMusicAudioData)(l.AudioType.MusicTrack,e)));return{count:t.count,audios:n}}))),f=(0,r.attach)({source:p,effect(e,t){return(0,n._)((function*(){if(!t.length)return[];let o=[],n=[];for(const i of t){const t=e[(0,c.getAudioFullId)(i)];t?o.push(t):n.push(i)}if(!n.length)return o;const i=yield h(n),r=d(i);o=[];for(const a of t){const _=(0,c.getAudioFullId)(a);var s;const l=null!=(s=r[_])?s:e[_];if(!l)throw console.error("AudioData not found in entities",{identity:a,fullId:_,audio:l,fetched:i,fetchedEntities:r,entities:e,identities:t,missing:n,result:o}),new Error("AudioData not found in entities");o.push(l)}return o}))()}});return p.on(h.done,((e,{result:t})=>(0,i._)({},e,d(t)))),p.on(m.done,((e,{result:t})=>(0,i._)({},e,d(t.audios)))),{$audioEntities:p,fetchAudiosFx:h,ensureAudiosFx:f,searchAudiosFx:m}}function d(e){return e.reduce(((e,t)=>(e[(0,c.getAudioFullId)(t)]=t,e)),{})}},72566:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicService:()=>p});var n=o(11010),i=o(34788),r=o(98116),s=o(69001),a=o(80592),_=o(17806),l=o(6060),c=o(28626),u=o(86539),d=o(84109);function p(e){const t=(0,u.getEffectorServiceDomain)(e),o=(0,s.createGroupsMusicAddFx)({domain:t}),p=(0,a.createGroupsMusicRestoreFx)({domain:t}),h=(0,_.createGroupsMusicDeleteFx)({domain:t}),{$addedIdentitiesMap:m,$removedIdentitiesMap:f,$identitiesMap:g,removeFromAllIdentitiesMaps:v,removedIdentitiesMapApi:y,addedIdentitiesMapApi:E}=(0,c.createIdentitiesMaps)({domain:t}),w=(0,r.attach)({source:(0,r.combine)({addedIdentitiesMap:m,removedIdentitiesMap:f}),mapParams:(e,t)=>(0,i._)({},e,t),effect:(0,r.createEffect)((0,n._)((function*({groupId:e,trackedIdentity:t,addedIdentitiesMap:n,removedIdentitiesMap:i}){let r,s;if(e===t.ownerId)r=t,s=(0,d.getGroupAudioFullId)({id:t.id,ownerId:e},e);else{const a=(0,d.getGroupAudioFullId)({id:t.id,ownerId:t.ownerId},e);if(!(a in n))return yield o({trackedIdentity:t,groupId:e});if(r=n[a],s=(0,d.getGroupAudioFullId)({id:r.id,ownerId:e},e),!(s in i))return yield o({trackedIdentity:t,groupId:e})}const a=(0,d.getGroupAudioFullId)({id:t.id,ownerId:t.ownerId},e);try{return yield p({audioId:r.id,groupId:e}),{id:r.id,ownerId:e}}catch(n){var _,c;const i=n;if((null==(c=i)||null==(_=c.error)?void 0:_.error_code)===l.GROUPS_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return v({addedGroupAudioFullId:a,removedGroupAudioFullId:s}),yield o({trackedIdentity:t,groupId:e});throw i}})))});return(0,r.sample)({clock:w.done,source:m,filter:(e,{params:{groupId:t,trackedIdentity:o}})=>t===o.ownerId&&!((0,d.getGroupAudioFullId)(o,t)in e),fn:(e,{params:{groupId:t,trackedIdentity:o},result:n})=>({groupAudioFullId:(0,d.getGroupAudioFullId)(o,t),identity:n}),target:E.add}),(0,r.sample)({clock:o.done,fn:({params:{groupId:e,trackedIdentity:{id:t,ownerId:o}},result:n})=>({groupAudioFullId:(0,d.getGroupAudioFullId)({id:t,ownerId:o},e),identity:n}),target:E.add}),(0,r.sample)({clock:p.done,fn:({params:{groupId:e,audioId:t}})=>(0,d.getGroupAudioFullId)({id:t,ownerId:e},e),target:y.remove}),(0,r.sample)({clock:h.done,fn:({params:{groupId:e,audioId:t}})=>(0,d.getGroupAudioFullId)({id:t,ownerId:e},e),target:y.add}),{addFx:w,deleteFx:h,$identitiesMap:g}}},69001:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicAddFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioAddFx)({domain:e});return e.createEffect((0,n._)((function*({trackedIdentity:e,groupId:o}){var n,i;const{id:r,ownerId:s,accessKey:a,trackCode:_}=e,l=null==(i=(yield t({query:{audio_id:r,owner_id:s,access_key:a,track_code:_,group_id:o}})).items)||null==(n=i[0])?void 0:n.new_audio_id;if(null==l)throw new Error("[GroupsMusicAddFx] addFx - missing audio ID in response from audio.add api method");return{id:l,ownerId:o}})))}},17806:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicDeleteFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioDeleteFx)({domain:e});return e.createEffect((0,n._)((function*({audioId:e,groupId:o}){yield t({query:{audio_id:e,owner_id:-o}})})))}},6060:(e,t,o)=>{"use strict";o.d(t,{GROUPS_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>n});const n=15},80592:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicRestoreFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioRestoreFx)({domain:e});return e.createEffect((0,n._)((function*({audioId:e,groupId:o}){yield t({query:{audio_id:e,owner_id:o}})})))}},86448:(e,t,o)=>{"use strict";function n(e){var t;return+(null==(t=e.split("_"))?void 0:t[0])}o.d(t,{extractGroupIdFromGroupAudioFullId:()=>n})},84109:(e,t,o)=>{"use strict";o.d(t,{getGroupAudioFullId:()=>i});var n=o(5112);function i({id:e,ownerId:t},o){return`${o}_${(0,n.getAudioFullId)({id:e,ownerId:t})}`}},28626:(e,t,o)=>{"use strict";o.d(t,{createIdentitiesMaps:()=>l});var n=o(98116),i=o(21247),r=o(36496),s=o(58038),a=o(84109),_=o(86448);const l=({domain:e})=>{const t=e.createStore({}),o=e.createStore({}),l=(0,n.createEvent)(),c=(0,n.combine)(t,o,((e,t)=>Object.entries(e).reduce(((e,[o,n])=>((0,a.getGroupAudioFullId)(n,(0,_.extractGroupIdFromGroupAudioFullId)(o))in t||(e[o]=n),e)),{}))),u=(0,n.createApi)(t,{add:(e,{groupAudioFullId:t,identity:o})=>(0,r.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,s.removePairFromMap)(e,t)}),d=(0,n.createApi)(o,{add:(e,t)=>(0,r.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,s.removePairFromMap)(e,t)});return(0,n.sample)({clock:l,target:(0,i.spread)({targets:{addedGroupAudioFullId:u.remove,removedGroupAudioFullId:d.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:o,$identitiesMap:c,addedIdentitiesMapApi:u,removedIdentitiesMapApi:d,removeFromAllIdentitiesMaps:l}}},3631:(e,t,o)=>{"use strict";o.d(t,{createMyAudioDislikesService:()=>l});var n=o(86539),i=o(75166),r=o(96620),s=o(98116),a=o(5112),_=o(99708);function l(e){const t=(0,n.getEffectorServiceDomain)(e),o=(0,i.createAddFx)({domain:t}),l=(0,r.createRemoveFx)({domain:t}),{fullIdsMapApi:c,$fullIdsMap:u}=(0,_.createFullIdsMap)(t);return(0,s.sample)({clock:o.done,fn:({params:{identity:e}})=>(0,a.getAudioFullId)(e),target:c.add}),(0,s.sample)({clock:l.done,fn:({params:{identity:e}})=>(0,a.getAudioFullId)(e),target:c.remove}),{addFx:o,removeFx:l,$identitiesMap:u}}},75166:(e,t,o)=>{"use strict";o.d(t,{createAddFx:()=>s});var n=o(11010),i=o(48861),r=o(5112);function s({domain:e}){const t=(0,i.createAudioAddDislikeFx)({domain:e});return e.createEffect((0,n._)((function*({identity:e}){yield t({query:{audio_ids:(0,r.getAudioFullId)(e)}})})))}},96620:(e,t,o)=>{"use strict";o.d(t,{createRemoveFx:()=>s});var n=o(11010),i=o(48861),r=o(5112);function s({domain:e}){const t=(0,i.createAudioRemoveDislikeFx)({domain:e});return e.createEffect((0,n._)((function*({identity:e}){yield t({query:{audio_ids:(0,r.getAudioFullId)(e)}})})))}},30742:(e,t,o)=>{"use strict";o.d(t,{createMyAudioPlaylistsService:()=>_});var n=o(11010),i=o(34788),r=o(98116),s=o(86539),a=o(52293);function _({config:e,audioPlaylistsService:t}){const o=(0,s.getEffectorServiceDomain)(e),_=o.createEvent(),l=(0,r.restore)(_,null),c=o.createStore({},{updateFilter:(e,t)=>!(0,a.shallowEqual)(e,t),serialize:"ignore"}),u=(0,r.attach)({source:l,effect(e,o){return(0,n._)((function*(){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To create a playlist, set the userId using setUserId.");return t.createFx((0,i._)({},o,{ownerId:e}))}))()}}),d=(0,r.attach)({source:l,effect(e,o){return(0,n._)((function*(){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete a playlist, set the userId using setUserId.");return t.deleteFx((0,i._)({},o,{ownerId:e}))}))()}}),p=(0,r.attach)({source:l,effect(e,o){return(0,n._)((function*(){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To add audio to playlist, set the userId using setUserId.");return t.addAudioFx((0,i._)({},o,{ownerId:e}))}))()}}),h=(0,r.attach)({source:l,effect(e,o){return(0,n._)((function*(){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete audio from playlist, set the userId using setUserId.");return t.deleteAudioFx((0,i._)({},o,{ownerId:e}))}))()}});return(0,r.sample)({clock:(0,r.combine)({playlistDataEntities:t.$playlistDataEntities,userId:l}),fn:({playlistDataEntities:e,userId:t})=>t?Object.entries(e).reduce(((e,[o,n])=>(n.ownerId===t&&(e[o]=n),e)),{}):{},target:c}),{createFx:u,deleteFx:d,addAudioFx:p,deleteAudioFx:h,setUserId:_,$myAudioPlaylistsIdentitiesMap:c}}},37285:(e,t,o)=>{"use strict";o.d(t,{createMyMusicService:()=>p});var n=o(11010),i=o(34788),r=o(98116),s=o(17056),a=o(47191),_=o(40185),l=o(67279),c=o(5112),u=o(440),d=o(86539);function p(e){const t=(0,d.getEffectorServiceDomain)(e),o=(0,s.createAddFx)({domain:t}),p=(0,a.createRestoreFx)({domain:t}),h=(0,_.createDeleteFx)({domain:t}),{$addedIdentitiesMap:m,$removedIdentitiesMap:f,$identitiesMap:g,addedIdentitiesMapApi:v,removedIdentitiesMapApi:y,addToStore:E,removeFromStore:w,removeFromAllIdentitiesMaps:b}=(0,u.createIdentitiesMaps)({domain:t}),A=(0,r.attach)({source:(0,r.combine)({addedIdentitiesMap:m,removedIdentitiesMap:f}),mapParams:(e,t)=>(0,i._)({},e,t),effect:(0,r.createEffect)((0,n._)((function*({userId:e,trackedIdentity:t,addedIdentitiesMap:n,removedIdentitiesMap:i}){let r,s;if(e===t.ownerId)r=t,s=(0,c.getAudioFullId)({id:t.id,ownerId:e});else{const a=(0,c.getAudioFullId)({id:t.id,ownerId:t.ownerId});if(!(a in n))return yield o({trackedIdentity:t,userId:e});if(r=n[a],s=(0,c.getAudioFullId)({id:r.id,ownerId:e}),!(s in i))return yield o({trackedIdentity:t,userId:e})}const a=(0,c.getAudioFullId)({id:t.id,ownerId:t.ownerId});try{return yield p({identity:{id:r.id,ownerId:e}}),{id:r.id,ownerId:e}}catch(n){var _,u;const i=n;if((null==(u=i)||null==(_=u.error)?void 0:_.error_code)===l.MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return b({addedFullId:a,removedFullId:s}),yield o({trackedIdentity:t,userId:e});throw i}})))});return(0,r.sample)({clock:A.done,source:m,filter:(e,{params:{userId:t,trackedIdentity:o}})=>t===o.ownerId&&!((0,c.getAudioFullId)(o)in e),fn:(e,{params:{trackedIdentity:t},result:o})=>({fullId:(0,c.getAudioFullId)(t),identity:o}),target:v.add}),(0,r.sample)({clock:o.done,fn:({params:{trackedIdentity:{id:e,ownerId:t}},result:o})=>({fullId:(0,c.getAudioFullId)({id:e,ownerId:t}),identity:o}),target:v.add}),(0,r.sample)({clock:p.done,fn:({params:{identity:e}})=>(0,c.getAudioFullId)(e),target:y.remove}),(0,r.sample)({clock:h.done,fn:({params:{identity:e}})=>(0,c.getAudioFullId)(e),target:y.add}),{addFx:A,deleteFx:h,addToStore:E,removeFromStore:w,$identitiesMap:g}}},17056:(e,t,o)=>{"use strict";o.d(t,{createAddFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioAddFx)({domain:e});return e.createEffect((0,n._)((function*({trackedIdentity:e,userId:o}){var n,i;const{id:r,ownerId:s,accessKey:a,trackCode:_}=e,l=null==(i=(yield t({query:{audio_id:r,owner_id:s,access_key:a,track_code:_}})).items)||null==(n=i[0])?void 0:n.new_audio_id;if(null==l)throw new Error("[MyMusicService] addFx - missing audio ID in response from audio.add api method");return{id:l,ownerId:o}})))}},40185:(e,t,o)=>{"use strict";o.d(t,{createDeleteFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioDeleteFx)({domain:e});return e.createEffect((0,n._)((function*({identity:e}){const{id:o,ownerId:n}=e;yield t({query:{audio_id:o,owner_id:n}})})))}},67279:(e,t,o)=>{"use strict";o.d(t,{MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>n});const n=15},47191:(e,t,o)=>{"use strict";o.d(t,{createRestoreFx:()=>r});var n=o(11010),i=o(48861);function r({domain:e}){const t=(0,i.createAudioRestoreFx)({domain:e});return e.createEffect((0,n._)((function*({identity:e}){const{id:o,ownerId:n}=e;yield t({query:{audio_id:o,owner_id:n}})})))}},440:(e,t,o)=>{"use strict";o.d(t,{createIdentitiesMaps:()=>_});var n=o(98116),i=o(5112),r=o(21247),s=o(36496),a=o(58038);const _=({domain:e})=>{const t=e.createStore({}),o=e.createStore({}),_=(0,n.createEvent)(),l=(0,n.createEvent)(),c=(0,n.createEvent)(),u=(0,n.combine)(t,o,((e,t)=>Object.entries(e).reduce(((e,[o,n])=>((0,i.getAudioFullId)(n)in t||(e[o]=n),e)),{}))),d=(0,n.createApi)(t,{add:(e,{fullId:t,identity:o})=>(0,s.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)}),p=(0,n.createApi)(o,{add:(e,t)=>(0,s.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)});return(0,n.sample)({clock:_,source:t,fn:(e,{oldIdentity:t,newIdentity:o})=>{const n=(0,i.getAudioFullId)(t),r=(0,i.getAudioFullId)(o);return{addToStoreParams:{identity:o,fullId:n},removeFromStoreFullId:e[n]?(0,i.getAudioFullId)(e[n]):r}},target:(0,r.spread)({targets:{addToStoreParams:d.add,removeFromStoreFullId:p.remove}})}),(0,n.sample)({clock:l,filter:({newIdentity:e})=>Boolean(e),target:(0,r.spread)({targets:{oldIdentity:d.remove.prepend((e=>(0,i.getAudioFullId)(e))),newIdentity:p.remove.prepend((e=>(0,i.getAudioFullId)(e)))}})}),(0,n.sample)({clock:c,target:(0,r.spread)({targets:{addedFullId:d.remove,removedFullId:p.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:o,$identitiesMap:u,addedIdentitiesMapApi:d,removedIdentitiesMapApi:p,addToStore:_,removeFromStore:l,removeFromAllIdentitiesMaps:c}}},99708:(e,t,o)=>{"use strict";o.d(t,{createFullIdsMap:()=>s});var n=o(98116),i=o(36496),r=o(58038);function s(e){const t=e.createStore({});return{$fullIdsMap:t,fullIdsMapApi:(0,n.createApi)(t,{add:(e,t)=>(0,i.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},36496:(e,t,o)=>{"use strict";o.d(t,{addPairToMap:()=>i});var n=o(34788);function i(e,t){return t.key in e?e:(0,n._)({},e,{[t.key]:t.value})}},22960:(e,t,o)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}o.d(t,{getAudioPlaylistFullId:()=>n})},58038:(e,t,o)=>{"use strict";o.d(t,{removePairFromMap:()=>r});var n=o(20224),i=o(58662);function r(e,t){if(!(t in e))return e;const{[t]:o}=e;return(0,n._)(e,[t].map(i._))}},41809:(e,t,o)=>{"use strict";function n(e){return{id:e.id,ownerId:e.owner_id,title:e.title,description:e.description,length:e.count}}o.d(t,{mapAPIPlaylistToAudioPlaylistData:()=>n})},28027:(e,t,o)=>{"use strict";o.d(t,{mapApiAudioPreviewToAudioPreviewData:()=>n});const n=e=>{const{url:t,clip_from:o,clip_to:n}=e;return{url:t||"",clip:{from:o||0,to:n||0}}}},38419:(e,t,o)=>{"use strict";o.d(t,{createApiEffect:()=>a});var n=o(34788),i=o(36181),r=o(29735),s=o(7680);const a=(e,{domain:t,usePrefetch:o})=>t.createEffect((({query:t,controller:a,config:_,options:l})=>{var c;const u=null==(c=a)?void 0:c.signal;if(o){const o=(0,r.loadPrefetchCache)(e,s.API_VERSION,t);if(o)return Promise.resolve(o)}return(0,i.api)(e,t,_,(0,n._)({signal:u},l))}))},86804:(e,t,o)=>{"use strict";o.d(t,{isApiError:()=>n});const n=e=>!!e&&"type"in e&&"api_error"===e.type},4511:(e,t,o)=>{"use strict";o.d(t,{isNetworkError:()=>n});const n=e=>{var t;return"network_error"===(null==(t=e)?void 0:t.type)}},4093:(e,t,o)=>{"use strict";var n;o.d(t,{AvailableHelpHints:()=>n}),function(e){e.ACCOUNT_HINT_NARRATIVES_ADD_TOOLTIP="narratives:add_tooltip",e.ACCOUNT_HINT_MVK_STORIES_ARCHIVE_ACTIONS_HINT="mvk:stories_archive:actions_hint",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_PROFILE="mini_apps:button_mvk_profile",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_APP_MENU="mini_apps:button_mvk_app_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU="mini_apps:counter_toggle_in_action_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_INTRO="mini_apps:counter_toggle_in_action_menu_intro",e.ACCOUNT_HINT_MINI_APPS_OPEN_CATALOG_WITH_BADGES="mini_apps:open_catalog_with_badges",e.ACCOUNT_HINT_MINI_APPS_CATALOG_SECTION_WITH_BADGES="mini_apps:catalog_section_with_badges",e.ACCOUNT_HINT_SUPERAPP_RECOMMEND_ACTION_IN_MENU="superapp:recommend_action_in_menu",e.ACCOUNT_HINT_SUPERAPP_SHOW_RECOMMEND_ACTION="superapp:show_recommend_action",e.ACCOUNT_HINT_MINI_APPS_NAV_BUTTONS_THIRD_PARTY_BUTTONS="mini_apps:nav_buttons_third_party_buttons",e.ACCOUNT_HINT_POSTING_EDITOR_ORD_AD="posting:editor_ord_ad",e.ACCOUNT_HINT_PROFILE_REDESIGN_ONBOARDING_BANNER="profile:redesign_onboarding_banner",e.ACCOUNT_HINT_POSTING_EDITOR_ONLINE_BOOKING="posting:editor_online_booking",e.ACCOUNT_HINT_PROFILE_REDESIGN_ONBOARDING_BOTTOMSHEET="profile:redesign_onboarding_bottomsheet",e.ACCOUNT_HINT_PROFILE_SERVICES_MENU_BANNER="profile:services_menu_banner",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING="profile:services_onboarding",e.ACCOUNT_HINT_MVK_PWA_TABBAR="mvk:pwa_tabbar",e.ACCOUNT_HINT_STORIES_EDITOR_ORD_AD="stories:editor_ord_ad",e.ACCOUNT_HINT_SUPERAPP_MVK_SHOWCASE="superapp:mvk_showcase",e.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER="superapp:im_integration_apps_tooltip_on_picker",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_APPS_BANNER="superapp:im_integration_picker_apps_banner",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_GAMES_BANNER="superapp:im_integration_picker_games_banner",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_FORCIBLY_ENABLED_ONBOARDING="friends:followers_mode_forcibly_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_CAN_BE_ENABLED_ONBOARDING="friends:followers_mode_can_be_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_ABOUT_MODAL_IMAGES="friends:followers_mode_about_modal_images",e.ACCOUNT_HINT_IM_INTEGRATION_CATALOG_ONBOARDING="superapp:im_integration_catalog_onboarding",e.ACCOUNT_HINT_PROFILE_PASSKEY_ONBOARDING_WEB="profile:passkey_onboarding_web",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_VIDEO_ONBOARDING="video:interactive_video_onboarding",e.ACCOUNT_HINT_CLIPS_WEB_UPLOAD_VIDEO_AS_CLIP="clips:upload_video_as_clip_web",e.AUTHOR_LIKE_ONBOARDING_HINT="feed:author_like_onboarding",e.GROUP_LIKE_ONBOARDING_HINT="feed:group_like_onboarding",e.ACCOUNT_HINT_COMMUNITY_REVIEW_TOOLTIP_MVK="community:review:tooltip_mvk",e.ACCOUNT_HINT_VIDEO_PIN="video:pin",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_BUTTON="video:watch_later_button",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION="video:watch_later_action",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_MENU="video:watch_later_menu",e.ACCOUNT_HINT_VIDEO_GROUP_CROP_COVER="video:group_crop_cover",e.ACCOUNT_HINT_VIDEO_MULTIPLE_VOLUME="video:multiple_volume",e.ACCOUNT_HINT_VIDEO_SUBTITLES_KAZ_LANG="video:subtitles_kaz_lang",e.ACCOUNT_HINT_MVK_VIDEO_FILTERS="mvk:video_filters",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_MVK="profile:photo_flow_onboarding_banner_profile_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_MVK="profile:photo_flow_onboarding_banner_show_all_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__MVK="profile:photo_flow_onboarding_banner_photo__mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_MVK="profile:photo_flow_onboarding_banner_mobile_question_mvk",e.ACCOUNT_HINT_PROFILE_OWNER_CONTENT_TABS_SETTINGS="profile:redesign_owner_content_tabs_settings",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING_WEB="profile:services_onboarding_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_WEB="profile:photo_flow_onboarding_banner_profile_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_WEB="profile:photo_flow_onboarding_banner_show_all_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__WEB="profile:photo_flow_onboarding_banner_photo__web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_WEB="profile:photo_flow_onboarding_banner_mobile_question_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_TOOLTIP_MOVE_PHOTO="profile:photo_flow_onboarding_tooltip_move_photo",e.ACCOUNT_HINT_ARTICLES_MOBILE_EDITOR="articles:mobile_editor",e.ACCOUNT_HINT_ADSEDIT_SITE_REMOVAL_POPUP="adsedit:site_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_REMOVAL_POPUP="adsedit:community_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_AND_SITE_REMOVAL_POPUP="adsedit:community_and_site_removal_popup",e.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_PRESENT_MINIAPP_MODAL="audio_studio:show_present_miniapp_modal",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_ANNUAL_RESULT_BANNER="audio_studio:show_annual_result_banner",e.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB="audio:longtap_preview_web",e.ACCOUNT_HINT_BANNED_RESET_SESSIONS="banned:can_not_reset_sessions",e.ACCOUNT_HINT_CLIPS_FORCE_UPLOAD_VIDEO_AS_CLIP="clips:force_upload_video_as_clip"}(n||(n={}))},83793:(e,t,o)=>{"use strict";function n(e){e.preventDefault(),e.stopPropagation()}o.d(t,{cancelEvent:()=>n})},27714:(e,t,o)=>{"use strict";o.d(t,{expectNever:()=>n});const n=e=>{throw new TypeError(`Unexpected value: ${e}`)}},86539:(e,t,o)=>{"use strict";o.d(t,{getEffectorServiceDomain:()=>r});var n=o(98116),i=o(72045);const r=e=>{var t,o;const r=(null==(t=e)?void 0:t.name)||(0,i.default)();return(null==(o=e)?void 0:o.domain)?e.domain.createDomain(r):(0,n.createDomain)(r)}},23245:(e,t,o)=>{"use strict";function n(e,t){return t<0?e+t:t}o.d(t,{indexAbs:()=>n})},88535:(e,t,o)=>{"use strict";function n(e){return"number"==typeof e&&!Number.isNaN(e)}o.d(t,{isNumber:()=>n})},97275:(e,t,o)=>{"use strict";o.d(t,{joinRawId:()=>n});const n=({ownerId:e,itemId:t,externalId:o})=>[e,t,o].filter(Boolean).join("_")},9121:(e,t,o)=>{"use strict";function n(e){e.offsetHeight}o.d(t,{reflow:()=>n})},52293:(e,t,o)=>{"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(let n=0;n<o.length;n++)if(!Object.prototype.hasOwnProperty.call(t,o[n])||e[o[n]]!==t[o[n]])return!1;return!0}o.d(t,{shallowEqual:()=>n})},69930:(e,t,o)=>{"use strict";o.d(t,{VK_MVK_APP_ID:()=>a,VK_WEB_APP_ID:()=>s});o(34788);var n=o(7680),i=(o(68963),o(48041)),r=(o(50722),o(20562));o(33751),o(59397),o(29735),o(57458);n.API_VERSION;const s=6287487,a=7879029;const _=(0,i.partConfigEnabled)("loginvk_use_mvk_client_id"),l="aR5NKGmm03GYrCiNKsaw",c="QbYic1K3lEV5kTGiqlq2";(0,r.isMvk)(),(0,r.isMvk)()},67932:(e,t,o)=>{"use strict";o.d(t,{loadPrefetchCache:()=>u});var n=o(57458),i=o(59397),r=o(48041),s=o(29735),a=o(20562);let _,l=!1,c=new Set;function u(e,t,o){var u,p,h,m,f;_!==window.cur.apiPrefetchCache&&(_=(0,i.decodeHTMLEntitiesDeep)(window.cur.apiPrefetchCache),window.cur.apiPrefetchCache=_);const g=null==(p=window.cur)||null==(u=p.apiPrefetchCache)?void 0:u.findIndex((n=>n.method===e&&n.version===t&&d(o,n.request)));if(null==g||-1===g)return c.add(e),void(l=!0);const v=null==(h=window.cur.apiPrefetchCache)?void 0:h[g];!function(e,t){if(!e||-1===t)return;e.splice(t,1)}(window.cur.apiPrefetchCache,g);const y=null==(m=v)?void 0:m.response,E=null==(f=v)?void 0:f.error;if(E){const e=new Error("Api request failed.");throw e.type="api_error",e.error=E,e}if((0,r.partConfigEnabled)("prefetch_cache_workspace")){const i=(0,s.loadPrefetchCache)(e,t,o),r=JSON.stringify(i)===JSON.stringify(y),{module:_}=window.cur,l=(0,a.isMvk)()?"mvk":"web";(0,n.statlogsValueEvent)("tmp_stat",r,"workspace_prefetch_valid",e,_,l)}return y}function d(e,t){return e===t||(!(!h(e)||!h(t))||!h(e)&&!h(t)&&(Array.isArray(e)&&"string"==typeof t?p(e,t.split(",")):"string"==typeof e&&Array.isArray(t)?p(e.split(","),t):Array.isArray(e)&&Array.isArray(t)?p(e,t):"object"==typeof e&&"object"==typeof t?function(e,t){const o=e,n=t,i=new Set([...Object.keys(o),...Object.keys(n)]);for(const e of i){if(!d(o[e],n[e]))return!1}return!0}(e,t):"number"==typeof e&&"string"==typeof t?e===Number.parseFloat(t):"string"==typeof e&&"number"==typeof t?Number.parseFloat(e)===t:"number"!=typeof e||1!==e&&0!==e||"boolean"!=typeof t?"boolean"==typeof e&&"number"==typeof t&&(1===t||0===t)&&e===Boolean(t):Boolean(e)===t))}function p(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!d(e[o],t[o]))return!1;return!0}function h(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&null!==e&&0===Object.keys(e).length||"object"==typeof e&&null!==e&&Object.values(e).every(h)}},36181:(e,t,o)=>{"use strict";o.d(t,{api:()=>l,apiWithPrefetch:()=>c,login:()=>u,removeLoginCache:()=>d});var n=o(68963),i=o(7680),r=o(48041),s=o(67932),a=o(29735),_=o(57458);const l=(e,t,o,n={})=>window.vkApi?window.vkApi.api(e,t,o,n):Promise.reject("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function"),c=(e,t,o,n={})=>{var l,c;if(!window.vkApi)return Promise.reject("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function");const u=null!=(c=null==(l=o)?void 0:l.version)?c:i.API_VERSION;try{const o=(0,s.loadPrefetchCache)(e,u,t);if((0,r.partConfigEnabled)("prefetch_cache_workspace")){const n=(0,a.loadPrefetchCache)(e,u,t),i=JSON.stringify(n)===JSON.stringify(o);(0,_.statlogsValueEvent)("tmp_stat",i,"workspace_prefetch_valid")}if(o)return Promise.resolve(o)}catch(e){return console.error(e),Promise.reject(e)}return window.vkApi.api(e,t,o,n)},u=(e,t,o,n)=>window.vkApi?window.vkApi.login(e,t,o,n):Promise.reject("[VKJS]: login didn't allowed. Use makeAuthAndApiGlobal function"),d=(e,t)=>window.vkApi?window.vkApi.removeLoginCache(e,t):console.error("[VKJS]: removeLoginCache didn't allowed. Use makeAuthAndApiGlobal function");n.upload},41612:(e,t,o)=>{"use strict";o.d(t,{AudioHlsNode:()=>p});var n=o(34788),i=o(39956),r=o(32663),s=o(15378),a=o(65061),_=o(88066),l=o(31495),c=o(66282),u=o(1934),d=o(48041);class p{get isFullyLoaded(){return this.fullyLoaded}get error(){return this.audioElement.error||null}get played(){return this.audioElement.played}get src(){return this.url}get hls(){return this.hlsInstance||null}get duration(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0}get readyState(){return this.audioElement.readyState}get currentTime(){return this.audioElement.currentTime}set currentTime(e){this.audioElement.currentTime=e}get volume(){return this.audioElement.volume}set volume(e){this.audioElement.volume=e}set playbackRate(e){this.audioElement.playbackRate=e}get currentProgress(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))}get currentBuffered(){return this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0}play(){return(0,c.wrapAudioPlay)(this.audioElement).catch((e=>{switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}))}pause(){this.audioElement.pause()}addEventListeners(e){this.audioElement.addEventListener("pause",(()=>e.onPause())),this.audioElement.addEventListener("play",(()=>e.onPlay())),this.audioElement.addEventListener("progress",(()=>{if(e.onBufferUpdate(),!this.hlsInstance){const e=this.audioElement.buffered;e.length&&Math.abs(e.end(e.length-1)-this.audioElement.duration)<1&&(this.fullyLoaded=!0)}})),this.audioElement.addEventListener("timeupdate",(()=>{e.onProgressUpdate&&e.onProgressUpdate()})),this.audioElement.addEventListener("ended",(()=>{e.onEnd&&e.onEnd()})),this.onFail=e.onFail||(()=>{}),this.audioElement.addEventListener("error",(()=>{this.onFail()})),this.audioElement.addEventListener("canplay",(()=>{e.onCanPlay&&e.onCanPlay()})),this.audioElement.addEventListener("durationchange",(()=>{e.onDurationChange&&e.onDurationChange()}))}static isHlsUrl(e){const t=(0,r.audioUnmaskSource)(e).includes(".m3u8");if(!(0,i.isAudioPWAFeature)())return t;const o=(0,a.checkIsDownloadedUrl)(e);return t||o}setUrl(e){if(this.url=e,p.isHlsUrl(this.url)&&!p.shouldUseNativeHls()&&"function"==typeof window.MediaSource)return this.initHls(this.url).catch((()=>this.onFail()));{this.hlsInstance&&this.hlsInstance.destroy();const e=this.audioElement.firstElementChild;return e.src=this.url,p.isHlsUrl(this.url)?e.type="application/vnd.apple.mpegurl":(0,d.partConfigEnabled)("music_clear_media_type")&&e.removeAttribute("type"),this.audioElement.load(),Promise.resolve()}}static shouldUseNativeHls(){const[e]=window.browser.version.split("."),t=parseInt(e);return window.browser.safari||window.browser.msie_edge&&t>11&&t<78}initHls(e){return p.loadHls().then((({default:t})=>new Promise((o=>{let i=!1;const r=!!u.ls.get("_audio_hls_debug");this.hlsInstance&&this.hlsInstance.destroy();const a=new t({debug:r,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});a.on(t.Events.BUFFER_EOS,(()=>this.fullyLoaded=!0)),a.on(t.Events.ERROR,((e,o)=>{(r||o.fatal)&&console.log("audio hls error",e,o),o.details===t.ErrorDetails.BUFFER_STALLED_ERROR&&(i=!0,a.stopLoad(),a.startLoad()),o.fatal&&this.onFail({type:o.type,details:o.details,url:o.frag&&o.frag.url||o.context&&o.context.url,code:o.networkDetails?o.networkDetails.status:0})})),a.on(t.Events.FRAG_BUFFERED,((e,t)=>{const o=(0,s.getCurrentAudio)(),r={owner_id:o.ownerId,audio_id:o.id,fragment_id:t.frag.sn.toString(),fragment_duration:Math.ceil(1e3*t.frag.duration).toString(),time_to_first_byte:Math.ceil(t.stats.loading.first-t.stats.loading.start).toString(),time_to_first_frame:Math.ceil(t.stats.loading.end-t.stats.loading.start).toString(),buffering_time:Math.ceil(t.stats.buffering.end-t.stats.buffering.start).toString(),http_request_host:new URL(t.frag.baseurl).host};i&&(i=!1,this.audioNetworkStatCollector.logEvent((0,n._)({},r,{event_type:_.AudioNetworkType.FRAGMENT_STALLED}),l.default.getConnectionType(),l.default.getConnectionEffectiveType())),this.audioNetworkStatCollector.logEvent((0,n._)({},r,{event_type:_.AudioNetworkType.FRAGMENT_LOADED}),l.default.getConnectionType(),l.default.getConnectionEffectiveType())})),a.loadSource(e),a.attachMedia(this.audioElement),this.hlsInstance=a,o()}))))}static loadHls(){return o.e(4817).then(o.bind(o,93041))}constructor(e,t){this.fullyLoaded=!1,this.url="",this.audioElement=new Audio,this.audioElement.appendChild(document.createElement("source")),this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,this.addEventListeners(e),t&&this.setUrl(t).then((()=>{this.audioElement.load()}));const o=new _.NetworkStatCollector;this.audioNetworkStatCollector=new _.AudioNetworkStatCollector(o)}}},38115:(e,t,o)=>{"use strict";o.d(t,{AudioMediaSession:()=>c});var n=o(11010),i=o(92450),r=o(76849),s=o(72278),a=o(59397),_=o(57458),l=o(95478);class c{init(){this.mediaSession&&(this.player.subscribe(i.AudioPlayerEventType.PLAY,this.handlePlay),this.player.subscribe(i.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlaylistChange))}updateMediaSessionControls(){var e=this;return(0,n._)((function*(){var t;const{mediaSession:o}=e;if(o)if(null==(t=e.player.ads)?void 0:t.isActive)o.setActionHandler("play",e.play),o.setActionHandler("pause",e.pause),o.setActionHandler("seekbackward",null),o.setActionHandler("seekforward",null),o.setActionHandler("previoustrack",null),o.setActionHandler("nexttrack",null);else{o.setActionHandler("play",e.play),o.setActionHandler("pause",e.pause);const t=e.player.getCurrentAudio();if(e.player.isPlaying()?(o.setActionHandler("seekbackward",e.seekBackward),o.setActionHandler("seekforward",e.seekForward)):(o.setActionHandler("seekbackward",null),o.setActionHandler("seekforward",null)),t&&!(0,s.isPodcast)(t))try{const[t,n]=yield e.getPrevAndNextAudio();t?o.setActionHandler("previoustrack",e.previousTrack):o.setActionHandler("previoustrack",null),n?o.setActionHandler("nexttrack",e.nextTrack):o.setActionHandler("nexttrack",null)}catch(e){o.setActionHandler("previoustrack",null),o.setActionHandler("nexttrack",null)}else o.setActionHandler("previoustrack",null),o.setActionHandler("nexttrack",null)}}))()}getPrevAndNextAudio(){return Promise.all([this.player.getPrevAudio().catch((()=>null)),this.player.getNextAudio().catch((()=>null))])}constructor(e,t){this.handlePlay=()=>{const{mediaSession:e}=this;if(!e)return;const t=this.player.getCurrentAudio(),o=(0,r.audioTupleToAudioObject)(t);if(!o)return;const n=(0,a.decodeHTMLEntities)(o.title+(o.subTitle?` (${o.subTitle})`:"")).replace(/<[^>]*>?/gm,""),i=(0,a.decodeHTMLEntities)(o.performer||"").replace(/<[^>]*>?/gm,""),s=this.player.getCurrentPlaylist(),_=s?(0,a.decodeHTMLEntities)(s.getTitle&&s.getTitle()||"").replace(/<[^>]*>?/gm,""):"",c=o.coverUrl_p||o.coverUrl_l,u=c?[{sizes:"160x160",src:c}]:[];this.updateMediaSessionControls(),(0,l.updateMediaSessionMetadata)({title:n,artist:i,album:_,artwork:u},e)},this.handlePlaylistChange=()=>{this.player&&!this.player.getCurrentAudio()&&(0,l.clear)()},this.play=()=>{this.player.play(),(0,_.statlogsValueEvent)("global_media_controls","audio_player","play")},this.pause=()=>{this.player.pause(),(0,_.statlogsValueEvent)("global_media_controls","audio_player","pause")},this.previousTrack=()=>{this.player.prev(),(0,_.statlogsValueEvent)("global_media_controls","audio_player","previous_track")},this.nextTrack=()=>{this.player.next(),(0,_.statlogsValueEvent)("global_media_controls","audio_player","next_track")},this.seekBackward=()=>{var e;const t=(null==(e=(0,r.audioTupleToAudioObject)(this.player.getCurrentAudio()))?void 0:e.duration)||0,o=(this.player.getCurrentProgress()||0)*t,n=Math.max(0,(o-10)/t);n>0?this.player.seek(n):this.player.prev(),(0,_.statlogsValueEvent)("global_media_controls","audio_player","seek_backward")},this.seekForward=()=>{var e;const t=(null==(e=(0,r.audioTupleToAudioObject)(this.player.getCurrentAudio()))?void 0:e.duration)||0,o=(this.player.getCurrentProgress()||0)*t,n=Math.min(1,(o+10)/t);n<1?this.player.seek(n):this.player.next(),(0,_.statlogsValueEvent)("global_media_controls","audio_player","seek_forward")},this.player=e,this.mediaSession=null!=t?t:l.DEFAULT_MEDIA_SESSION}}},92450:(e,t,o)=>{"use strict";var n;o.d(t,{AudioPlayerEventType:()=>n,events:()=>i}),function(e){e.CURRENT_CHANGED="curr",e.PLAY="start",e.PLAY_REQUESTED="request_play",e.IMPL_PLAY="impl_play",e.PAUSE="pause",e.STOP="stop",e.UPDATE="update",e.LOADED="loaded",e.ENDED="ended",e.FAILED="failed",e.BUFFERED="buffered",e.PROGRESS="progress",e.VOLUME="volume",e.PLAYLIST_CHANGED="plchange",e.PLAYLIST_CLEAR_REQUESTED="playlist_clear_requested",e.PLAYLIST_CLEARED="playlist_cleared",e.ADDED="added",e.REMOVED="removed",e.FREQ_UPDATE="freq",e.SEEK="seek",e.PLAY_NEXT="play_next",e.AD_READY="ad_ready",e.AD_DEINITED="ad_deinit",e.AD_STARTED="ad_started",e.AD_COMPLETED="ad_completed",e.PLAYER_IS_AD_CHANGED="player_is_ad_changed",e.PLAYER_IS_PLAYING_CHANGED="player_is_playing_changed",e.START_LOADING="start_load",e.CAN_PLAY="actual_start",e.SELECT="select",e.DESELECT="deselect",e.EMPTY_PLAYLIST="empty_playlist",e.NOT_FOUND_PLAYLIST="not_found_playlist",e.INIT="init",e.REQUEST_EXPANDED="request_expanded",e.MUSIC_AUDIOS_ADD="music_audios_add",e.MUSIC_AUDIOS_DELETE="music_audios_delete",e.MUSIC_PLAYLISTS_ADD="music_playlists_add",e.MUSIC_OWNERS_FOLLOW="music_owners_follow",e.MUSIC_OWNERS_UNFOLLOW="music_owners_unfollow",e.CURATOR_FOLLOW="curator_follow",e.CURATOR_UNFOLLOW="curator_unfollow",e.RADIOSTATION_FOLLOW="radiostation_follow",e.RADIOSTATION_UNFOLLOW="radiostation_unfollow",e.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE="current_radiostation_update",e.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE="current_audio_dislike_status_update",e.AUDIO_RESTORE_BY_DISLIKE_ACTION="audio_restore_by_dislike_action",e.AUDIO_DELETE_BY_DISLIKE_ACTION="audio_delete_by_dislike_action",e.PLACEHOLDER_REMOVE="placeholder_remove",e.PLAY_TRACK_FROM_AUTOPLAY="play_track_from_autoplay",e.CLEAN_AUTOPLAY_QUEUE="clean_autoplay_queue",e.PLAY_PREVIEW="play_preview",e.STOP_PREVIEW="stop_preview",e.END_PREVIEW="end_preview",e.PROGRESS_PREVIEW="progress_preview",e.PREVIEW_BUFFERED="preview_buffered",e.PLAY_SNIPPET="play_snippet",e.STOP_SNIPPET="stop_snippet",e.PROGRESS_SNIPPET="progress_snippet",e.SNIPPET_BUFFERED="snippet_buffered",e.SNIPPET_PLAYER_STATE_CHANGED="snippet_player_state_changed",e.SNIPPET_PLAYER_FAIL="snippet_player_fail",e.SNIPPET_PLAYER_PLAY_NEXT_SNIPPET="snippet_player_play_next_snippet",e.SNIPPET_PLAYER_PLAY_PREV_SNIPPET="snippet_player_play_prev_snippet",e.SNIPPET_PLAYER_SNIPPET_PLAYING_END="snippet_player_snippet_playing_end",e.SNIPPET_PLAYER_CHANGE_SOURCE="snippet_player_change_source",e.SNIPPET_PLAYER_PAUSED_BY_INCOMING_CALL="snippet_player_paused_by_incoming_call",e.SNIPPET_PLAYER_PAUSED_BY_VISIBILITY="snippet_player_paused_by_visibility"}(n||(n={}));const i=n},18128:(e,t,o)=>{"use strict";o.d(t,{PLAYLIST_TYPE_VKMIX:()=>i});o(11010),o(70912),o(15816),o(34788),o(3983),o(68922);var n=o(49010);o(63856);const i="vkmix";n.AudioList},63856:(e,t,o)=>{"use strict";o.d(t,{createAudioVkMixPlaylistService:()=>r});var n=o(98116),i=o(26570);function r(){const e=(0,n.createDomain)("audio/playlist/vkmix"),{$lists:t,fetchNextFx:o}=(0,i.createAudioVkMixService)(e);return{$lists:t,$loading:o.pending,fetchNextFx:o}}},90600:(e,t,o)=>{"use strict";o.d(t,{AudioStats:()=>F,SUBTYPE_PLAYLIST:()=>x,TYPE_ADDED:()=>p,TYPE_REMOVED:()=>h,TYPE_SHARE_AUDIO:()=>f,TYPE_SHOW_ALBUM:()=>m});var n=o(34788),i=o(1779),r=o(20640),s=o(57458),a=o(72045),_=o(1934),l=o(12022),c=o(68312),u=o(48041),d=o(56525);const p="added",h="removed",m="show_album",f="share_audio",g="start",v="stop",y="volume",E="rewind",w="play_further",b="broadcast",A="default",P="next_track",I="prev_track",T="auto",O="interruption",C="continue_from_pause",M="new",D="close_app",S="queue",k="pause",L="on",R="off",x="playlist",B="session_end",N={[g]:1,[v]:2,[y]:3,[E]:4,[w]:5,[p]:6,[h]:7,recommendation_removed:8,[m]:9,[f]:10,[b]:11,curator:12,[d.RADIO_STATION_EVENT_ITEM]:13},U={[A]:1,[P]:2,[I]:3,[T]:4,[O]:5,[C]:6,[M]:7,[D]:8,[S]:9,[k]:10,upload:11,[L]:12,[R]:13,follow:14,unfollow:15},W="audio_unique_unauth_id";class F{listenOnBeforeUnload(){window.addEvent(window,"beforeunload",this.onPageClose)}stopListenOnBeforeUnload(){window.removeEvent(window,"beforeunload",this.onPageClose)}logEvent(e){return this.actionStatCollector.logEvent(e)}canOperate(){return null!==this.playerAdapter&&!(this.playerAdapter.isPodcast()||this.playerAdapter.isExternalStream()||this.playerAdapter.isAdPlaying()||this.playerAdapter.isMarusiaTrack())}getCurrentAudioParams(){if(!this.playerAdapter)return{};const e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){const[t,o]=e.split("_");return{ownerId:t,audioId:o,trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}getEnvParams(){if(this.playerAdapter)return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&window.vk.widget?String(window.cur.widgetReferrer||"").substring(0,20):""}}getListenedTime(){return this.playerAdapter&&Math.round(this.playerAdapter.getListenedTime())||0}getPlaySubtype(){if(!this.playerAdapter)return"";if(this.playerAdapter.isAutoPlayed())return T;const e=this.playerAdapter.getSequence();if(e)return e>0?P:I;const t=this.pausedAudioId,o=this.playerAdapter.getAudioId();return t&&o===t?C:M}onRadioOn(e){(0,u.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:d.RADIO_STATION_EVENT_ITEM,[d.RADIO_STATION_EVENT_ITEM]:{event_type:L,radio_station_id:e.id,track_code:e.trackCode}}):this.sendAudioEvent({type:d.RADIO_STATION_EVENT_ITEM,subtype:L,playlistId:e.id,trackCode:e.trackCode})}onRadioOff(e){(0,u.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:d.RADIO_STATION_EVENT_ITEM,[d.RADIO_STATION_EVENT_ITEM]:{event_type:R,radio_station_id:e.id,duration:this.getListenedTime(),track_code:e.trackCode}}):this.sendAudioEvent({type:d.RADIO_STATION_EVENT_ITEM,subtype:R,playlistId:e.id,listened:this.getListenedTime(),trackCode:e.trackCode})}onTrackSwitch(e,t){if(!e||!this.playerAdapter)return;let o=M;const n=this.playerAdapter.getSequence(),[i,r]=e.fullId.split("_");this.playerAdapter.isAutoPlayed()?o=T:n&&(o=n>0?P:I),this.sendCurrentAudioEvent({type:v,subtype:o,position:this.currentPosition,listened:this.currentListened,trackCode:e.trackCode,playlistId:t,ownerId:Number(i),audioId:Number(r)}),this.wasEnded=!0,this.collectListenedData(e),this.collectListenedDataSwitch();const s=this.listenedData;this.listenedData=null,this.sendListenedData(s)}onPageClose(){this.playerAdapter&&this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:v,subtype:D}),this.sendListenedData())}collectListenedDataSwitch(){if(this.listenedData){if(this.listenedData.end_stream_reason===B||!this.playerAdapter)return;const e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),o=this.playerAdapter.getSequence();let n=null;o&&!e?n=o>0?"next_btn":"prev":this.playlistChanged&&(n="playlist_change"),!n&&e&&(n="playlist_next"),this.listenedData.end_stream_reason=n||"new",t&&(this.listenedData.listened=t)}}collectListenedData(e=null){const t=e||this.currentAudio;if(!this.canOperate()||!t||!this.playerAdapter)return null;const o=t.fullId,n=t.trackCode||this.playerAdapter.getAudioTrackCode(),i=this.getListenedTime(),r=t.urlHash;if(r||console.log("no url hash"),!i||!r)return null;let s={audio_id:o,listened:i,context:this.playerAdapter.getContext(),hash:r};return window.cur&&window.vk.widget&&(s.ref=window.cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(s.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(s.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(s.shuffled=1)),n&&(s.track_code=n),this.playerAdapter.isRepeatCurrentAudio()?s.repeat="one":this.playerAdapter.isRepeatAll()&&(s.repeat="all"),this.playerAdapter.isAutoPlayed()&&(s.auto=1),this.playerAdapter.hasPrevAudio()&&(s.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(s.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(s.end_stream_reason="stop_btn"),s.state=document.hidden?"background":"app",this.listenedData=s,this.sendListenedDataDelayed(1e4,s),s}sendListenedData(e=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout);const t=e||this.listenedData;this.listenedData=null,t&&t.listened&&this.playerAdapter&&(this.uniqueUserId&&(t.unique_id=this.uniqueUserId),this.playerAdapter.sendListenedData(t))}sendListenedDataDelayed(e=0,t=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout((()=>this.sendListenedData(t)),e)}serializeEvent(e){const t=[N[e.type],U[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(i.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter&&this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter&&this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(""),e.targetOwnerId?t.push(e.targetOwnerId):t.push(0),this.uniqueUserId?t.push(this.uniqueUserId):t.push(""),e.positionTo?t.push(e.positionTo):t.push(null),t}sendEvent(e){this.debug&&(console.log("[audio stats event]",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),(0,s.statlogsValueEvent)("audio_sts",...this.serializeEvent(e))}sendCurrentAudioEvent(e){if(!this.playerAdapter)return;const t=this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0;this.sendEvent((0,n._)({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:t,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId()},this.getEnvParams(),this.getCurrentAudioParams(),e))}sendAudioEvent(e){const t=(0,n._)({},e,this.getEnvParams());!window.vk.id&&this.uniqueUserId&&(t.uniqueUnauthId=this.uniqueUserId),this.sendEvent(t)}destroy(){this.playerAdapter.events.off("play",this.handlePlay).off("pause",this.handlePause).off("stop",this.handlePause).off("progress",this.handleProgress).off("volume",this.handleVolume).off("seekLegacy",this.handleSeek).off("playlistChanged",this.handlePlaylistChanged).off("ended",this.handleEnded).off("playNext",this.handlePlayNext).off("adCompleted",this.handleAdCompleted),this.stopListenOnBeforeUnload(),this.listenedData=null,null!==this.sendTimeout&&clearTimeout(this.sendTimeout)}constructor(e){if(this.handlePlay=()=>{if(!this.playerAdapter)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOn(this.playerAdapter.getAudio());if(this.playerAdapter.isMarusiaTrack())return void l.marusiaAudioStats.onPlay(this.playerAdapter);if(!this.canOperate())return;const e=this.playerAdapter.getAudio();if(!e)return;const t=e.fullId,o=this.currentAudioId===t||!this.currentAudioId,n=this.currentAudioId!==this.pausedAudioId;let i=this.playerAdapter.getListenedTime();!o&&n&&this.onTrackSwitch(this.currentAudio,this.currentPlaylistId),this.playedTime=Date.now(),this.currentAudioId=t,this.currentAudio=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode(),this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,i=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=i,this.sendCurrentAudioEvent({type:g,subtype:this.getPlaySubtype(),position:this.currentPosition,listened:i}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1,this.listenOnBeforeUnload()},this.handlePause=()=>{if(!this.playerAdapter)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOff(this.playerAdapter.getAudio());if(this.playerAdapter.isMarusiaTrack())return void l.marusiaAudioStats.onPause(this.playerAdapter);const e=this.playerAdapter.getAudioId();if(!this.canOperate()||!e)return;const t=this.collectListenedData();this.sendListenedDataDelayed(1e3,t),setTimeout((()=>{if(this.currentAudio&&e!==this.currentAudio.fullId)return;if(Date.now()-this.playedTime<150)return;if(!this.playerAdapter)return;this.pausedAudioId=e;const t=this.playerAdapter.getPausedBy();this.sendCurrentAudioEvent({type:v,subtype:t?t===S?S:O:k})}),100),this.stopListenOnBeforeUnload()},this.handleProgress=()=>{this.playerAdapter&&(this.playerAdapter.getProgress()<.01||!this.playerAdapter.isPlaying()||(this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&Date.now()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:g,subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1)))},this.handleVolume=(0,r.debounce)((()=>{this.canOperate()&&this.sendCurrentAudioEvent({type:y,subtype:A})}),300),this.handleSeek=()=>{if(!this.canOperate()||!this.playerAdapter)return;const e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent((0,n._)({type:E,subtype:A},e))},this.handlePlaylistChanged=()=>{this.canOperate()&&(this.playlistChanged=!0)},this.handleEnded=()=>{this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason=B),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:v,subtype:T}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)},this.handlePlayNext=({audioFullId:e})=>{if(!this.canOperate()||!e)return;const[t,o]=e.split("_");this.sendAudioEvent({type:w,subtype:A,ownerId:Number(t),audioId:Number(o)})},this.handleAdCompleted=()=>{this.adsCompleted=!0},this.handleBroadcastStatusToggled=({status:e,targetOwnerId:t})=>{this.sendCurrentAudioEvent({type:b,subtype:e?L:R,targetOwnerId:t.toString()})},this.playerAdapter=e,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudio=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,window.vk.id)this.uniqueUserId=null;else{const e=_.ls.get(W);e?this.uniqueUserId=e:(this.uniqueUserId=(0,a.default)(),_.ls.set(W,this.uniqueUserId))}this.debug=e.isDebug(),this.playerAdapter.events.on("play",this.handlePlay).on("pause",this.handlePause).on("stop",this.handlePause).on("progress",this.handleProgress).on("volume",this.handleVolume).on("seekLegacy",this.handleSeek).on("playlistChanged",this.handlePlaylistChanged).on("ended",this.handleEnded).on("playNext",this.handlePlayNext).on("adCompleted",this.handleAdCompleted).on("broadcastStatusToggled",this.handleBroadcastStatusToggled),this.onPageClose=this.onPageClose.bind(this),this.productionStatCollector=new c.ProductionStatCollector,this.actionStatCollector=new c.ActionStatCollector(this.productionStatCollector)}}},53155:(e,t,o)=>{"use strict";o.d(t,{AudioStatsPlayerAdapter:()=>l,FULL_SCREEN_STATE:()=>_,UNKNOWN_STATE:()=>a});var n=o(51508),i=o(33751),r=o(92450),s=o(13613);const a=0,_=2;class l{destory(){this.unlistenPlayer()}get events(){return this.emitter.listenable}getPausedBy(){return null}getState(){return document.hidden?1:3}getProgress(){return this.player.playerGetProgress()}getProgressInSeconds(){return this.player.getProgressInSeconds()}getVolume(){return this.player.getVolume()}getAudioId(){return this.player.getAudioId()}getAudio(){return this.player.getAudio()}getAudioTrackCode(){return this.player.getAudioTrackCode()}getPrevAudioId(){return this.player.getPrevAudioId()}getPrevPlaylistId(){return this.player.getPrevPlaylistId()}getPlaylistId(){return this.player.getPlaylistId()}getContext(){return this.player.getContext()}getSequence(){return this.player.getSequence()}getType(){return this.player.getType()}getListenedTime(){return isNaN(this.player.getListenedTime())?0:Math.round(this.player.getListenedTime())}getSearchParams(){return this.player.getSearchParams()}isPlaying(){return this.player.isPlaying()}isPaused(){return this.player.isPaused()}isAutoPlayed(){return this.player.isAutoPlayed()}isRepeatCurrentAudio(){return this.player.isRepeatCurrentAudio()}isRepeatAll(){return this.player.isRepeatAll()}isShuffledPlaylist(){return this.player.isShuffledPlaylist()}isRealPlaylist(){return this.player.isRealPlaylist()}isRealPrevPlaylist(){return this.player.isRealPrevPlaylist()}isPodcast(){return this.player.isPodcast()}isExternalStream(){return this.player.isExternalStream()}isRadio(){return this.player.isRadio()}isMarusiaTrack(){return this.player.isMarusiaTrack()}isAdPlaying(){return this.player.ads.isActive}isLastTrack(){return this.player.isLastTrack()}getTrackPosition(){return this.player.getTrackPosition()}hasPrevAudio(){return this.player.hasPrevAudio()}hasPrevPlaylist(){return this.player.hasPrevPlaylist()}hasPlaylist(){return this.player.hasPlaylist()}hasSearchParams(){return this.player.hasSearchParams()}isDebug(){return!1}sendListenedData(e){return this.player.sendListenedData(e)}getPlaylistQueue(){return null}getCurrentAudio(){return this.player.getCurrentAudioData()}getPlayingAudio(){return this.isPlaying()||this.isPaused()?this.getCurrentAudio():null}listenPlayer(){var e;this.player.subscribe(r.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.subscribe(r.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.subscribe(r.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.subscribe(r.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.subscribe(r.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.subscribe(r.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.subscribe(r.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.subscribe(r.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.subscribe(r.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.subscribe(r.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const t=this.player.nextEvents;(null==(e=t)?void 0:e.on)&&(t.on("playAudio",this.handlePlayerPlayMarked),t.on("pauseAudio",this.handlePlayerPauseMarked),t.on("stopAudio",this.handlePlayerStopMarked),t.on("playAdv",this.handlePlayerPlayAdv),t.on("pauseAdv",this.handlePlayerPauseAdv),t.on("stopAdv",this.handlePlayerStopAdv),t.on("seek",this.handlePlayerSeek),t.on("stateRestore",this.handlePlayerStateRestore),t.on("broadcastStatusToggled",this.handlePlayerBroadcastStatusToggled))}unlistenPlayer(){var e;this.player.unsubscribe(r.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.unsubscribe(r.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.unsubscribe(r.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.unsubscribe(r.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.unsubscribe(r.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.unsubscribe(r.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.unsubscribe(r.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.unsubscribe(r.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.unsubscribe(r.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.unsubscribe(r.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const t=this.player.nextEvents;(null==(e=t)?void 0:e.off)&&(t.off("playAudio",this.handlePlayerPlayMarked),t.off("pauseAudio",this.handlePlayerPauseMarked),t.off("stopAudio",this.handlePlayerStopMarked),t.off("playAdv",this.handlePlayerPlayAdv),t.off("pauseAdv",this.handlePlayerPauseAdv),t.off("stopAdv",this.handlePlayerStopAdv),t.off("seek",this.handlePlayerSeek),t.off("stateRestore",this.handlePlayerStateRestore))}constructor(e){this.emitter=new n.Emitter({catchListener:i.logError}),this.handlePlayerPlay=()=>{this.emitter.emit("play")},this.handlePlayerPlayMarked=e=>{const{audio:t,reason:o,progressTime:n}=e;h(t),function(e){if(!c.includes(e))throw new Error(`Invalid play reason: ${e}`)}(o),m(n),this.emitter.emit("playAudio",{audio:t,reason:o,progressTime:n})},this.handlePlayerPause=()=>{this.emitter.emit("pause")},this.handlePlayerPauseMarked=e=>{const{audio:t,reason:o,progressTime:n}=e;h(t),function(e){if(!u.includes(e))throw new Error(`Invalid pause reason: ${e}`)}(o),m(n),this.emitter.emit("pauseAudio",{audio:t,reason:o,progressTime:n})},this.handlePlayerStop=()=>{this.emitter.emit("stop")},this.handlePlayerStopMarked=e=>{const{audio:t,reason:o,progressTime:n}=e;h(t),function(e){if(!d.includes(e))throw new Error(`Invalid stop reason: ${e}`)}(o),m(n),this.emitter.emit("stopAudio",{audio:t,reason:o,progressTime:n})},this.handlePlayerProgress=()=>{this.emitter.emit("progress")},this.handlePlayerVolume=()=>{this.emitter.emit("volume")},this.handlePlayerSeekLegacy=()=>{this.emitter.emit("seekLegacy")},this.handlePlayerSeek=e=>{const{audio:t,reason:o,progressTime:n,fromTime:i}=e;h(t),function(e){if(!p.includes(e))throw new Error(`Invalid seek reason: ${e}`)}(o),m(n),m(i),this.emitter.emit("seek",{audio:t,reason:o,progressTime:n,fromTime:i})},this.handlePlayerPlaylistChanged=()=>{this.emitter.emit("playlistChanged")},this.handlePlayerEnded=()=>{this.emitter.emit("ended")},this.handlePlayerPlayNext=(e,t)=>{this.emitter.emit("playNext",{currentAudio:e,audioFullId:t})},this.handlePlayerAdCompleted=()=>{this.emitter.emit("adCompleted")},this.handlePlayerPlayAdv=e=>{this.emitter.emit("playAdv",e)},this.handlePlayerPauseAdv=e=>{this.emitter.emit("pauseAdv",e)},this.handlePlayerStopAdv=e=>{this.emitter.emit("stopAdv",e)},this.handlePlayerStateRestore=e=>{const{audio:t,progressTime:o}=e;t&&h(t),m(o),this.emitter.emit("stateRestore",{audio:t,progressTime:o})},this.handlePlayerBroadcastStatusToggled=e=>{this.emitter.emit("broadcastStatusToggled",e)},this.player=e,this.listenPlayer()}}const c=Object.values(s.AudioPlayerPlayAudioEventReason),u=Object.values(s.AudioPlayerPauseAudioEventReason),d=Object.values(s.AudioPlayerStopAudioEventReason),p=Object.values(s.AudioPlayerSeekEventReason);function h(e){if(!(e&&"object"==typeof e&&Number.isFinite(e.id)&&Number.isFinite(e.ownerId)&&"string"==typeof e.trackCode))throw new Error("Value is not AnyTrackedAudioData")}function m(e){if("number"!=typeof e)throw new Error(`Value is not number (given: ${typeof e})`)}},1779:(e,t,o)=>{"use strict";o.d(t,{AudioStatsPlayerAdapter:()=>n.AudioStatsPlayerAdapter,FULL_SCREEN_STATE:()=>n.FULL_SCREEN_STATE,UNKNOWN_STATE:()=>n.UNKNOWN_STATE});var n=o(53155)},11749:(e,t,o)=>{"use strict";o.d(t,{AudioTaskManager:()=>r,TaskName:()=>n});var n,i=o(73242);!function(e){e.URL="url",e.PLAYBACK_RATE="playback_rate",e.DELAY="delay",e.SEEK="seek",e.PAUSE="pause",e.PLAY="play",e.VOL_SET="vol_set",e.VOL_UP="vol_up",e.VOL_DOWN="vol_down"}(n||(n={}));class r{newTask(e,t){let o,n;const i=new Promise(((e,t)=>{o=e,n=t}));return this.tasks.push({name:e,fn:()=>t().then(o).catch(n),id:`${e}_${this.taskIDCounter++}`}),this.doTasks(),i}clearAllTasks(){this.taskAbort=this.taskInProgress,this.taskInProgress=null,this.tasks=[]}clearTask(e){this.tasks=this.tasks||[],this.tasks=this.tasks.filter((t=>t.name!==e))}doTasks(){if(this.taskInProgress)return;const e=this.tasks.shift();e&&(this.taskInProgress=e.id,this.ensureImplReady().then((()=>e.fn())).then((()=>{this.taskAbort!==e.id?(this.taskInProgress=null,this.doTasks()):this.taskAbort=null})))}ensureImplReady(){return new Promise((e=>this.impl.onReady(e)))}delay(e){return this.newTask("delay",(()=>new Promise((t=>(0,i.setWorkerTimeout)(t,e)))))}setUrl(e){return this.newTask("url",(()=>new Promise((t=>this.impl.setUrl(e,t)))))}seekImmediate(e){this.impl.seek(e)}seek(e){return this.clearTask("seek"),this.newTask("seek",(()=>new Promise((t=>{this.seekImmediate(e),t()}))))}pause(){return this.newTask("pause",(()=>new Promise((e=>{this.impl.pause(),e()}))))}play(){return window.browser.safari&&this.impl.play(),this.newTask("play",(()=>new Promise(((e,t)=>{this.impl.play().then(e).catch(t)}))))}setVolume(e,t,o=null){if(t){const t=e?"vol_up":"vol_down";return this.newTask(t,(()=>new Promise((t=>this.impl.fadeVolume(e,o,(()=>t()))))))}return this.newTask("vol_set",(()=>new Promise((t=>{this.impl.setVolume(e),t()}))))}updatePlaybackRate(e){return this.newTask("playback_rate",(()=>new Promise((t=>{this.impl.setPlaybackRate(e),t()}))))}constructor(e){this.impl=e,this.taskIDCounter=1,this.tasks=[],this.taskInProgress=null,this.taskAbort=null}}},46948:(e,t,o)=>{"use strict";o.d(t,{AutoplayQueue:()=>u});var n=o(11010),i=o(34788),r=o(59397),s=o(92414),a=o(92450),_=o(99794),l=o(47524),c=o(67951);class u{get list(){return this._list}get length(){return this._list.length}get enabled(){return this.service.$enabled.getState()}hasSource(e){const t=(0,c.clearObject)((0,i._)({},e,{offset:void 0}));return this.sources.some((e=>(0,r.isEqual)(t,(0,c.clearObject)((0,i._)({},e,{offset:void 0})))))}setSource(e){this.hasSource(e)||(this.sources=[(0,c.clearObject)(e)],this.nextFrom=null,this._list=[],this.hasMore=!0,this.fetchNextAudios())}fetchNextAudios(){var e=this;return(0,n._)((function*(){try{var t;const o=null!=(t=e.nextFrom)?t:e.sources[0];if(!o)return[];const n=yield e.fetchService.getAutoplayAudioIdsBySource(o);if(!n)return[];const{next_from:i,audios:r}=n;if(e.nextFrom=i,e.hasSource(i)||e.sources.push(i),!r||!r.length)return e.hasMore=!1,[];const a=r.map((e=>e.audio_raw_id)).join(","),l=yield e.fetchService.reloadAudios(a),c=e.getCurrentQueueAudioIds(),u=l.map(((e,t)=>{var o,n;return e[s.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=(null==(o=r[t])?void 0:o.access_key)||"",e[s.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=(null==(n=r[t])?void 0:n.track_code)||"",e[s.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]="autoplay",e})).filter((e=>!c.some((t=>t.includes((0,_.getAudioFullId)(e))))));return e._list.push(...u),u}catch(e){console.log(e)}}))()}getNextAudios(e=0){var t=this;return(0,n._)((function*(){const o=Math.min(e+10,t._list.length);if(e>t._list.length-1){const o=yield t.fetchNextAudios();return o&&o.length>0?t.getNextAudios(e):[]}return t._list.slice(e,o)}))()}getAudioById(e){return this._list.find((t=>e.includes((0,_.getAudioFullId)(t))))}indexOf(e){const t=(0,_.getAudioFullId)(e);return this._list.findIndex((e=>(0,_.getAudioFullId)(e)===t))}spliceHead(e){return this._list.splice(0,e+1)}clean(){this._list=[],this.sources=[],this.nextFrom=null,this.hasMore=!1,this.eventBus.emit(a.AudioPlayerEventType.CLEAN_AUTOPLAY_QUEUE)}constructor(e,t,o){this._list=[],this.sources=[],this.nextFrom=null,this.service=(0,l.ensureAutoplayService)(),this.hasMore=!0,this.fetchService=e,this.getCurrentQueueAudioIds=o,this.eventBus=t,this.service.init()}}},98022:(e,t,o)=>{"use strict";o.d(t,{EventBus:()=>n});class n{subscribe(e,t){return Array.isArray(e)&&e.forEach((e=>this.subscribe(e,t))),this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:()=>this.unsubscribe(e,t)}}unsubscribe(e,t){if(this.subscriptions[e]){const o=this.subscriptions[e].indexOf(t);o>=0&&this.subscriptions[e].splice(o,1)}}emit(e,...t){this.precheck&&!this.precheck(e,...t)||(this.onAnyCallBack&&setTimeout((()=>this.onAnyCallBack(e,...t))),this.subscriptions[e]&&this.subscriptions[e].forEach((e=>setTimeout((()=>e(...t))))))}constructor(){this.subscriptions={}}}},99631:(e,t,o)=>{"use strict";var n,i;o.d(t,{PlaylistSourceType:()=>n,isAutoplayEnabledForPlaylist:()=>s}),function(e){e.CATALOG="catalog",e.MESSAGE="im",e.FEED="feed",e.WALL="wall",e.ALBUM="album",e.CURATOR="curator",e.PLAYLIST="playlist",e.VKMIX="vkmix"}(n||(n={})),function(e){e.TYPE_CURRENT="current",e.TYPE_PLAYLIST="playlist",e.TYPE_MY="my",e.TYPE_ALBUM="album",e.TYPE_TEMP="temp",e.TYPE_RECOM="recoms",e.TYPE_SEARCH="search",e.TYPE_LIVE="live",e.TYPE_WALL="wall",e.TYPE_RECENT="recent",e.TYPE_RADIO="radio",e.TYPE_ARTICLE_TTS="article_tts"}(i||(i={}));const r=["radio","article_tts"],s=e=>!r.includes(e.getType())},9476:(e,t,o)=>{"use strict";o.d(t,{PlaylistQueue:()=>k});var n=o(11010),i=o(34788),r=o(68949),s=o(59397),a=o(48041),_=o(34892),l=o(29280),c=o(92414),u=o(76849),d=o(46948),p=o(92450),h=o(99631),m=o(30806),f=o(67017),g=o(24199),v=o(20562),y=o(99794),E=o(87866),w=o(48269);const{AUDIO_ITEM_INDEX_OWNER_ID:b,AUDIO_ITEM_INDEX_TRACK_CODE:A,AUDIO_ITEM_INDEX_ID:P,AUDIO_QUEUE_MAX_AUDIOS_COUNT:I,AUDIO_ITEM_INDEX_URL:T,AUDIO_ITEM_INDEX_TITLE:O,AUDIO_ITEM_INDEX_PERFORMER:C,AUDIO_ITEM_INDEX_EXTRA:M,AUDIO_ITEM_ACCESS_KEY:D,AUDIO_ITEM_INDEX_CONTEXT:S}=c.AUDIO_PLAYER_ENUMS;class k{get isAutoplayEnabled(){var e,t;return null!=(t=null==(e=this._autoplayQueue)?void 0:e.enabled)&&t}get list(){return this._list}get shuffled(){return this._shuffled}get eventBus(){return this._eventBus}get source(){return this._source}get autoplayQueue(){return this.isAutoplaySupported?this._autoplayQueue:null}setSortedQueue(e,t){Array.isArray(e)&&(this._shuffled=!1,this._list=[],this.originalList=[],this.addToList(e),t&&this.setSource(t))}setSortedQueueByPlaylist(e){var t=this;return(0,n._)((function*(){return t.clean(),t.addPlaylist(e)}))()}setSource(e){this._source=e}setAutoplaySourceFromPlaylist(e){if(!this.isAutoplaySupported)return;const t=(0,m.getPlaylistRawSource)(e),o=(0,g.getAutoplayPlaylistSource)(t);this.setAutoplaySource(o)}setAutoplaySource(e){var t;null==(t=this._autoplayQueue)||t.setSource((0,i._)({},e,{offset:0}))}getAudioIds(e){return"string"==typeof e?e.split("_"):"object"!=typeof e||Array.isArray(e)?[e[b],e[P]]:[e.ownerId,e.id]}compareAudiosIds(e,t){return!(!Array.isArray(e)||e.length<2||!t)&&(e[0]==t[b]&&e[1]==t[P])}fetchAudios(e){let t=e;return Array.isArray(t)&&(t=t.join(",")),this.fetchService.reloadAudios(t)}findAndFetchEmptyAudiosFrom(e){const t=[],o=[],n=this._list;let i=e+I;i=i<n.length?i:n.length-1;for(let r=e;r<=i;r++){const e=n[r];if(this.isEmptyAudio(e)&&e){const n=`${e[b]}_${e[P]}_${e[D]}`;t.push(n),o.push(r)}}return t.length<1?Promise.resolve(!0):this.fetchAudios(t).then((e=>!!e&&(o.forEach(((t,o)=>{if(e[o]){const i=(0,E.getAudioExtra)(e[o]);if(i){const r=(0,E.getAudioExtra)(n[t]);if(r){const t=(0,w.mergeAudioExtra)(r,i);t&&(e[o][M]=t)}else e[o][M]=n[t][M]}else e[o][M]=n[t][M];e[o][A]=n[t][A],n[t]=e[o]}})),!0))).catch((()=>!1))}getAudio(e){if(!e)return Promise.resolve(null);let t=null,o=null;const n=this.getAudioIds(e);return this._list.find(((e,i)=>!!this.compareAudiosIds(n,e)&&(o=i,t=e,!0))),t&&null!==o?this.isEmptyAudio(t)?this.findAndFetchEmptyAudiosFrom(o).then((e=>e&&null!==o?Promise.resolve(this._list[o]):Promise.resolve(null))).catch((()=>Promise.resolve(null))):Promise.resolve(t):Promise.resolve(null)}getFirstAudio(e){var t=this;return(0,n._)((function*(){const o=yield t.getAudioAt(0);return o&&e&&(0,u.audioTupleToAudioObject)(o).isClaimed?t.getNextAudio(o,{repeat:!1,ignoreClaimed:e}):o}))()}getLastAudio(e){var t=this;return(0,n._)((function*(){const o=t.length-1;if(o<0)return null;const n=yield t.getAudioAt(o);return n&&e&&(0,u.audioTupleToAudioObject)(n).isClaimed?t.getPrevAudio(n,{repeat:!1,ignoreClaimed:e}):n}))()}getPrevAudio(e,t={}){var o=this;return(0,n._)((function*(){const{ignoreClaimed:n}=t,i=o.indexOfAudio(e);if(i<0)return null;const r=i-1;if(r<0)return t.repeat?o.getLastAudio(n):null;const s=yield o.getAudioAt(r);return s&&n&&(0,u.audioTupleToAudioObject)(s).isClaimed?o.getPrevAudio(s,t):s}))()}getNextAudio(e,t={}){var o=this;return(0,n._)((function*(){const{autoplayQueue:n}=o,{ignoreClaimed:i}=t,r=o.indexOfAudio(e);if(r<0)return null;const s=r+1;if(s>=o.length){var a;if(t.repeat)return o.getFirstAudio(i);if(null==(a=n)?void 0:a.enabled){const e=n.list;if(e.length>0)return e[0]}return null}const _=yield o.getAudioAt(s);return _&&i&&(0,u.audioTupleToAudioObject)(_).isClaimed?o.getNextAudio(_,t):_}))()}indexOfAudio(e){if(!e)return-1;let t=this.getAudioIds(e);return this._list?this._list.findIndex((e=>this.compareAudiosIds(t,e))):-1}getAudioAt(e){return!Array.isArray(this._list)||this._list.length<=e?Promise.resolve(null):e<0?this.findAndFetchEmptyAudiosFrom(0).then((()=>this._list[0])):this.findAndFetchEmptyAudiosFrom(e).then((()=>this._list[e]))}getPrevAndNextAudios(e){var t=this;return(0,n._)((function*(){if(!e)return[null,null];let o=null,n=null;const i=t._list.findIndex((t=>t[A]===e[A]));let r=i-1,s=i+1;if(r>=0&&(o=t._list[r]),s<t._list.length&&(n=t._list[s]),o&&t.isEmptyAudio(o)||n&&t.isEmptyAudio(n))try{yield t.findAndFetchEmptyAudiosFrom(r>0?r:i)}catch(e){}return[o,n]}))()}getAudios(e,t){return Number.isInteger(e)&&Number.isInteger(t)?(e<0&&(e=0),e>this._list.length?Promise.resolve(null):(t-e>I&&(t=e+I),t>this._list.length&&(t=this._list.length),this.findAndFetchEmptyAudiosFrom(e).then((()=>this._list.slice(e,t+1))))):Promise.resolve(null)}removeAudio(e){let t=this.indexOfAudio(e);return t>=0?(this._list.splice(t,1),t):-1}addToList(e,t,o){const n=this._list;let i=e;void 0!==t||o?i.forEach((e=>{const t=this.indexOfAudio(e);t>=0&&n.splice(t,1)})):i=i.filter((e=>-1===this.indexOfAudio(e))),i.forEach((e=>{null===e[M]&&(e[M]="[]"),e[O]=(0,_.clean)((0,_.replaceEntities)(e[O]).replace(/(<em>|<\/em>)/g,"")),e[C]=(0,_.clean)((0,_.replaceEntities)(e[C]).replace(/(<em>|<\/em>)/g,""))})),void 0===t?(this.shuffled&&this.originalList.push(...i),n.push(...i)):(this.shuffled&&this.originalList.push(...i),n.splice(t,0,...i))}addAudio(e,t){var o;this.isArrayOfAudioTuples(e)?this.addToList(e,t):(null==(o=e)?void 0:o.length)&&this.addToList([e],t)}isArrayOfAudioTuples(e){return Array.isArray(e)&&Array.isArray(e[0])}addEmptyAudios(e){const t=e.map((e=>{const{audio_raw_id:t,access_key:o,track_code:n}=e,[i,r]=t.split("_"),s=[];return s[b]=i,s[P]=r,s[D]=o,s[A]=n,s}));this.addToList(t,void 0,!0)}addNoConsecutivePlaylist(e,t){var o=this;return(0,n._)((function*(){var n;const i=(0,m.getPlaylistRawSource)(e),r=(0,f.getPlaylistSource)(i),s=(0,g.getAutoplayPlaylistSource)(i,(0,y.getAudioFullId)(t));return"autoplay"===t[S]||(null==(n=o._autoplayQueue)?void 0:n.hasSource(s))||(o.setSource(r),o.setAutoplaySource(s),o._list=[],o.addToList([t])),!0}))()}addPlaylist(e){var t=this;return(0,n._)((function*(){var o;if(t.isAutoplayEnabledForPlaylist=(0,h.isAutoplayEnabledForPlaylist)(e),!t.isAutoplayEnabledForPlaylist){var n;t.clean();const o=e.getAudiosList();return t.addToList(o),null==(n=t._autoplayQueue)||n.clean(),!0}const{isAutoplaySupported:i}=t,r=(0,m.getPlaylistRawSource)(e),a=(0,f.getPlaylistSource)(r);if((0,s.isEqual)(a,t._source)){if(i&&t.length){const e=(0,g.getAutoplayPlaylistSource)(r);t.setAutoplaySource(e)}return!0}if(t.setSource(a),a.source===h.PlaylistSourceType.VKMIX){var _;t.clean();const o=e.getAudiosList();return t.addToList(o),null==(_=t._autoplayQueue)||_.clean(),!0}var l;if(e.isLive()||(null==(o=e)?void 0:o.isLoadable()))return null==(l=t._autoplayQueue)||l.clean(),!0;if(i){const o=(0,g.getAutoplayPlaylistSource)(r);if(!t._source)return!1;try{const n=yield t.fetchService.getAudioIdsBySource(a);if(!Array.isArray(n)||0===n.length){const o=e.getAudiosList();return t.addToList(o),!0}return t.addEmptyAudios(n),t.setAutoplaySource(o),!0}catch(e){return!1}}try{const o=yield e.getAudioIds();if(!Array.isArray(o)||0===o.length){const o=e.getAudiosList();return t.addToList(o),!0}return t.addEmptyAudios(o),!0}catch(e){return!1}}))()}moveAudio(e,t){let o=this._list.splice(e,1);e<t&&(t-=1),this._list.splice(t,0,o[0])}clean(){this._list=[],this.originalList=[],this._shuffled=!1,this._source=null}moveAudioAtFirstPosition(e){let t=this.indexOfAudio(e);-1!==t?(this._list.splice(t,1),this._list.unshift(e)):this._list.unshift(e)}removeSortedList(){this.originalList&&(this._list=[].concat(this.originalList)),this._shuffled=!1}get length(){return this.list.length}isEmpty(){return!this.length}shuffle(e,t){if(!(e&&this.shuffled||!e&&!this.shuffled)){if(e){const[e]=this._list;this.originalList=[...this._list],this._list=function(e){let t=e.length;for(;t>0;){const o=Math.floor(Math.random()*t);t--;const n=e[t];e[t]=e[o],e[o]=n}return e}([...this._list]),!t&&e&&this.moveAudioAtFirstPosition(e),this._shuffled=!0}else this._list=[...this.originalList],this._shuffled=!1;return!0}}resetShuffle(){this.shuffle(!1)}constructor(e,t){if(this._autoplayQueue=null,this.isAutoplaySupported=(0,a.partConfigEnabled)("autoplay_web")&&!(0,v.isMvk)(),this.isEmptyAudio=e=>!(e&&(e[T]||(0,l.isClaimedAudio)(e))),k.instance)return k.instance;if(this.fetchService=e,this._list=[],this.originalList=[],this._source=null,this._shuffled=!1,this._eventBus=t,this.isAutoplaySupported){const o=new d.AutoplayQueue(e,t,(()=>this._list.map(y.getAudioFullId)));this._autoplayQueue=o,this.isAutoplayEnabledForPlaylist=!0,this._eventBus.subscribe(p.AudioPlayerEventType.PLAY_TRACK_FROM_AUTOPLAY,(e=>{const t=o.indexOf(e);if(t>=0){const e=o.spliceHead(t);this.addToList(e)}}))}k.instance=this,(0,a.partConfigEnabled)("audio_mobx")&&(0,r.makeObservable)(this,{_list:r.observable,_shuffled:r.observable,setSortedQueue:r.action,setSortedQueueByPlaylist:r.action,shuffle:r.action,resetShuffle:r.action,clean:r.action,removeAudio:r.action,addPlaylist:r.action,moveAudio:r.action,removeSortedList:r.action})}}},50316:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectController:()=>l});var n,i=o(11010),r=o(31153),s=o(29132),a=o(64922);let _;!function(e){e.Opened="opened",e.Closed="closed"}(n||(n={}));class l{static get(){if(!_)throw new Error("SpecialProjectController must be initialized.");return _}static init(e){if(!e)throw new Error("SpecialProjectController must be initialized with showModal.");return _||(_=new l(e),_)}showModal(e,t){this.showCurrentModal&&this.showCurrentModal(t,this.tryToSendCloseReason(e))}constructor(e){this.projects={},this.statCollector=null,this.wasProjectShown=e=>!!this.projects[e];var t=this;this.tryModal=(0,i._)((function*(e,o){if(!t.wasProjectShown(e))try{var n;const i=yield t.getSpecialProject(e);t.showModal(e,i),null==(n=t.statCollector)||n.open(+e,o)}catch(e){}finally{t.projects[e]="opened"}})),this.tryToSendCloseReason=e=>t=>{var o;"closed"!==this.projects[e]&&(this.consumeSpecialProject(e,t),null==(o=this.statCollector)||o.close(),this.projects[e]="closed")},this.getSpecialProject=(0,i._)((function*(e){const t=yield(0,r.getSpecialProject)({special_project_id:e});return(0,a.mapSpecialProjectData)(t)})),this.consumeSpecialProject=(e,t)=>(0,r.consumeSpecialProject)({special_project_id:e,reason:t}),this.statCollector=new s.SpecialProjectStatCollector,this.showCurrentModal=e}}},29132:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectStatCollector:()=>r});var n=o(56525),i=o(68312);class r{open(e,t){if(this.openedModal)throw new Error("Modal must be closed before opening");this.openedModal={id:e,trackCode:t,startView:this.productCollector.getCurrentTime()}}close(){const{openedModal:e}=this;if(!e)throw new Error("Modal must be open before closing");this.sendView(e),this.openedModal=null}sendView(e){const t={end_view:this.productCollector.getCurrentTime(),start_view:e.startView,type:n.ViewProductionStatEventTypes.TYPE_CATALOG_SPECIAL_PROJECT_ITEM},o={type:n.EventItemType.AUDIO_SPECIAL_PROGECT_MODAL,id:e.id,track_code:e.trackCode};this.viewCollector.logEvent(t,o)}constructor(){this.openedModal=null,this.productCollector=new i.ProductionStatCollector,this.viewCollector=new i.ViewStatCollector(this.productCollector)}}},60501:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectHeader:()=>l});var n=o(85893),i=o(67294),r=o(1320),s=o(59397),a=o(22589);const _=e=>{const[t]=e.filter((e=>!!e&&!!e.url)).map((e=>e.url));return t},l=(0,i.memo)((({style:e,image:t=[],className:o,backgroundImage:i=[]})=>{const l=_(i),c=_(t);return(0,n.jsx)("div",{className:(0,s.classNames)(a.default.root,o,{[a.default.singleImage]:"image"===e}),style:{backgroundImage:`url(${"avatar"===e?l:c})`},children:"avatar"===e&&(0,n.jsx)(r.Avatar,{src:c,size:72})})}))},64922:(e,t,o)=>{"use strict";o.d(t,{mapSpecialProjectData:()=>i});var n=o(34788);const i=e=>(0,n._)({},e,{backgroundImage:e.background_image})},25901:(e,t,o)=>{"use strict";function n(e){var t;const o=null==(t=e)?void 0:t.options;if(!o)return[];const n=[];for(const e of o)switch(e.type){case"copy":{const{name:t,copyText:o}=e;if(!t||!o)break;const i=()=>{navigator.clipboard.writeText(o)};n.push({type:"action",label:t,action:i});break}case"default":{const{name:t,clickLink:o}=e;if(!t)break;if(o){n.push({type:"link",label:t,href:o});break}break}}return n}o.d(t,{makeChoicesFromAdman:()=>n})},14683:(e,t,o)=>{"use strict";o.d(t,{makeAudioAdFromAdman:()=>i});var n=o(25901);function i(e){return{id:e.banner_id,choices:(0,n.makeChoicesFromAdman)(e.adChoices)}}},81095:(e,t,o)=>{"use strict";function n(e){return new Promise(((t,o)=>{window.ajax.post("al_audio.php",{act:"get_lyrics",aid:e.audio_id},{onDone:t,onFail(e){return o(e),!0}})}))}o.d(t,{getLyrics:()=>n})},31153:(e,t,o)=>{"use strict";o.d(t,{consumeSpecialProject:()=>r,getSpecialProject:()=>i});var n=o(84309);const i=(0,n.createMethod)("audio.getSpecialProject"),r=(0,n.createMethod)("audio.consumeSpecialProject")},84309:(e,t,o)=>{"use strict";o.d(t,{createMethod:()=>i});var n=o(36181);function i(e){return t=>(0,n.api)(e,t)}},92414:(e,t,o)=>{"use strict";var n,i;o.d(t,{AUDIO_PLAYER_ENUMS:()=>r,EAudioFlagBit:()=>i,EAudioTupleIndex:()=>n}),function(e){e[e.ID=0]="ID",e[e.OWNER_ID=1]="OWNER_ID",e[e.URL=2]="URL",e[e.TITLE=3]="TITLE",e[e.PERFORMER=4]="PERFORMER",e[e.DURATION=5]="DURATION",e[e.ALBUM_ID=6]="ALBUM_ID",e[e.AUTHOR_LINK=8]="AUTHOR_LINK",e[e.LYRICS=9]="LYRICS",e[e.FLAGS=10]="FLAGS",e[e.CONTEXT=11]="CONTEXT",e[e.EXTRA=12]="EXTRA",e[e.HASHES=13]="HASHES",e[e.COVER_URL=14]="COVER_URL",e[e.ADS=15]="ADS",e[e.SUBTITLE=16]="SUBTITLE",e[e.MAIN_ARTISTS=17]="MAIN_ARTISTS",e[e.FEAT_ARTISTS=18]="FEAT_ARTISTS",e[e.ALBUM=19]="ALBUM",e[e.TRACK_CODE=20]="TRACK_CODE",e[e.RESTRICTION=21]="RESTRICTION",e[e.ALBUM_PART=22]="ALBUM_PART",e[e.ACCESS_KEY=24]="ACCESS_KEY",e[e.CHART_INFO=25]="CHART_INFO",e[e.TRACK_PAGE_ID=26]="TRACK_PAGE_ID",e[e.IS_ORIGINAL_SOUND=27]="IS_ORIGINAL_SOUND",e[e.ADMIN_URL=28]="ADMIN_URL",e[e.UMA_QUERY_URL=29]="UMA_QUERY_URL"}(n||(n={})),function(e){e[e.HAS_LYRICS=1]="HAS_LYRICS",e[e.CAN_ADD=2]="CAN_ADD",e[e.CLAIMED=4]="CLAIMED",e[e.QUEUE=8]="QUEUE",e[e.HQ=16]="HQ",e[e.LONG_PERFORMER=32]="LONG_PERFORMER",e[e.UMA=128]="UMA",e[e.REPLACEABLE=512]="REPLACEABLE",e[e.EXPLICIT=1024]="EXPLICIT",e[e.SHOW_INFO=8192]="SHOW_INFO"}(i||(i={}));const r={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_CHART_INFO_INDEX:25,AUDIO_ITEM_INDEX_TRACK_PAGE_ID:26,AUDIO_ITEM_INDEX_IS_ORIGINAL_SOUND:27,AUDIO_ITEM_INDEX_ADMIN_URL:28,AUDIO_ITEM_INDEX_UMA_QUERY_URL:29,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_QUEUE_BIT:8,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ITEM_SHOW_INFO_BIT:8192,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<button class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</button>',AUDIO_QUEUE_MAX_AUDIOS_COUNT:35,LOG_LS_KEY:"audiolog",ONBOARDING_ARTISTS_LS_KEY:"artists_onboarding",AUDIO_RECOMS_ONBOARDING_NEED_SKIP_LS_KEY:"audio_recoms_onboarding_need_skip"};var s;!function(e){e.USER_WALL="user_wall",e.GROUP_WALL="group_wall",e.WALL="wall",e.FEED="feed"}(s||(s={}))},47524:(e,t,o)=>{"use strict";o.d(t,{ensureAutoplayService:()=>a});var n=o(98116),i=o(90432),r=o(48041);let s;function a(){return s||(s=function(){const e=(0,n.createDomain)("audio/autoplay"),t=(0,i.ensureAccountInfoService)(),{$accountInfo:o,setInfoFx:s}=t,a=(0,r.partConfigEnabled)("autoplay_web_toggle"),_=e.createStore(a),l=e.createStore(!1),c=e.createEffect((e=>s({query:{name:"audio_autoplay",value:e}})));return{$toggleSupported:_,$enabled:l,setEnabledFx:c,init:function(){_.on(o,((e,{audio_autoplay:t})=>a&&void 0!==t)),(0,n.sample)({source:{accountInfo:o,toggleSupported:_},fn:({accountInfo:e,toggleSupported:t})=>{return!t||null!=(o=e.audio_autoplay)&&o;var o},target:l}),t.initEvent()}}}()),s}},65061:(e,t,o)=>{"use strict";o.d(t,{checkIsDownloadedUrl:()=>i});var n=o(32663);function i(e){return(0,n.audioUnmaskSource)(e).includes("blob:http")}},67951:(e,t,o)=>{"use strict";o.d(t,{clearObject:()=>r});var n=o(8856),i=o(49360);function r(e){return(0,n.default)(e,i.default)}},54337:(e,t,o)=>{"use strict";o.d(t,{decodeHTML:()=>r});var n=o(59397);const i={"amp;":"&","#38;":"&","lt;":"<","#60;":"<","gt;":">","#62;":">","apos;":"'","#39;":"'","quot;":'"',"#34;":'"',"copy;":"©"};function r(e){return(0,n.decodeHTMLEntities)(e,i)}},87866:(e,t,o)=>{"use strict";o.d(t,{getAudioExtra:()=>r});var n=o(34892),i=o(92414);function r(e){if(!e)return null;let t;if((0,n.isObject)(e)){t=e.extra}else{t=e[i.EAudioTupleIndex.EXTRA]}if((0,n.isObject)(t))return t;try{return JSON.parse(t||"{}")}catch(e){return null}}},99794:(e,t,o)=>{"use strict";o.d(t,{getAudioFullId:()=>i});var n=o(92414);const i=e=>e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]},24199:(e,t,o)=>{"use strict";o.d(t,{getAutoplayPlaylistSource:()=>r});var n=o(34788),i=o(20224);const r=(e,t="")=>{const{entity_id:o}=e,r=(0,i._)(e,["entity_id"]);return(0,n._)({},r,{audio_id:t})}},15378:(e,t,o)=>{"use strict";o.d(t,{getCurrentAudio:()=>r});var n=o(76849),i=o(20562);function r(){const e={id:0,ownerId:0};try{return(0,i.isMvk)()?window.audio.getCurrent()||e:(0,n.audioTupleToAudioObject)(window.getAudioPlayer().getCurrentAudio())||e}catch(t){return e}}},30806:(e,t,o)=>{"use strict";o.d(t,{getPlaylistRawSource:()=>i});var n=o(99631);const i=e=>{const t=e.getContext(),o=e.getBlockId(),i=e.getFullId();if(o)return{source:n.PlaylistSourceType.CATALOG,section_id:o,entity_id:o,playlist_id:i};if(e.getType()===n.PlaylistSourceType.CURATOR)return{source:n.PlaylistSourceType.CURATOR,section_id:o,entity_id:o,playlist_id:i};const{sourceType:r,id:s}=(e=>{if(e){const[t,o]=e.split(":");return{sourceType:t,id:o}}return{sourceType:"",id:""}})(t);if(r.includes("wall"))return{source:n.PlaylistSourceType.WALL,entity_id:s,owner_id:s};switch(r){case n.PlaylistSourceType.CATALOG:return{source:n.PlaylistSourceType.CATALOG,section_id:s,entity_id:s,playlist_id:i,block_id:o};case n.PlaylistSourceType.MESSAGE:return{source:n.PlaylistSourceType.MESSAGE,entity_id:`_${s}`};case n.PlaylistSourceType.FEED:return{source:n.PlaylistSourceType.FEED,entity_id:s,owner_id:s};case n.PlaylistSourceType.ALBUM:return{source:n.PlaylistSourceType.ALBUM,entity_id:s};case n.PlaylistSourceType.VKMIX:return{source:n.PlaylistSourceType.VKMIX,entity_id:s};default:return{source:n.PlaylistSourceType.PLAYLIST,entity_id:i,playlist_id:i}}}},67017:(e,t,o)=>{"use strict";o.d(t,{getPlaylistSource:()=>i});var n=o(99631);const i=e=>{let t;return t=e.source===n.PlaylistSourceType.CATALOG&&!1===e.block_id?{source:n.PlaylistSourceType.PLAYLIST,entity_id:e.playlist_id}:{source:e.source||"",entity_id:e.entity_id||""},t}},53698:(e,t,o)=>{"use strict";o.d(t,{getSpecialProjectId:()=>i});var n=o(87866);function i(e){var t;var o;return null!=(o=null==(t=(0,n.getAudioExtra)(e))?void 0:t.specialProjectId)?o:null}},27026:(e,t,o)=>{"use strict";o.d(t,{isArticleTts:()=>i});var n=o(87866);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.articleTts}},39956:(e,t,o)=>{"use strict";o.d(t,{isAudioPWAFeature:()=>i});var n=o(48041);function i(){return(0,n.partConfigEnabled)("mvk_music_pwa")}},29280:(e,t,o)=>{"use strict";o.d(t,{isClaimedAudio:()=>r});var n=o(76849),i=o(92414);function r(e){return!!e&&!!((e=(0,n.audioTupleToAudioObject)(e)).flags&i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT)}},80143:(e,t,o)=>{"use strict";o.d(t,{isExternalStream:()=>i});var n=o(87866);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.externalStream}},93398:(e,t,o)=>{"use strict";o.d(t,{isMarusiaTale:()=>i});var n=o(87866);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.marusiaTale}},89190:(e,t,o)=>{"use strict";o.d(t,{isMarusiaTrack:()=>i});var n=o(87866);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.voiceAssistant}},59672:(e,t,o)=>{"use strict";o.d(t,{isRadio:()=>i});var n=o(87866);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.radio}},48269:(e,t,o)=>{"use strict";o.d(t,{mergeAudioExtra:()=>i});var n=o(34788);function i(e,t){return e&&t?(0,n._)({},e,t):null}},75109:(e,t,o)=>{"use strict";o.d(t,{mergeAudioTupleWithoutContext:()=>i});var n=o(92414);function i(e,t){const o=[...e];return Object.assign(o,t),o[n.EAudioTupleIndex.CONTEXT]=e[n.EAudioTupleIndex.CONTEXT],o}},1036:(e,t,o)=>{"use strict";o.d(t,{AudioLyricsProvider:()=>u});var n=o(11010),i=o(17733),r=o(73497),s=o(81095),a=o(65028),_=o(76849),l=o(42637),c=o(52460);class u{get(e){return this.lyrics.get(e)||{status:c.EAudioLyricsStatus.Pending}}listen(e,t){return this.eventEmitter.on(e,t),()=>{this.eventEmitter.off(e,t)}}setLoading(e){const t={status:c.EAudioLyricsStatus.Loading};this.lyrics.set(e,t),this.eventEmitter.emit(e,t)}setLoaded(e,t){const o={status:c.EAudioLyricsStatus.Loaded,data:t};this.lyrics.set(e,o),this.eventEmitter.emit(e,o)}setError(e,t){const o={status:c.EAudioLyricsStatus.Error,errorMessage:t};this.lyrics.set(e,o),this.eventEmitter.emit(e,o)}constructor(){this.lyrics=new Map,this.eventEmitter=new i.default;var e=this;this.fetch=(0,r.dedupeAsyncCallback)((0,n._)((function*(t){const o=(0,_.audioTupleToAudioObject)(t),{fullId:n,hasLyrics:i}=o;try{const t=e.lyrics.get(n);if(t&&t.status===c.EAudioLyricsStatus.Loaded)return t.data||null;if(!i)return e.setLoaded(n,null),null;e.setLoading(n);const o=yield(0,s.getLyrics)({audio_id:n}),r=(0,l.mapLyricsResponse)(o);return e.setLoaded(n,r),r}catch(t){throw e.setError(n,t.message||"unknown"),t}})),(e=>(0,a.getAudioTupleFullId)(e)))}}},42637:(e,t,o)=>{"use strict";o.d(t,{mapLyricsResponse:()=>s});var n=o(34788),i=o(20224),r=o(54337);function s(e){var t,o,s;if(Array.isArray(e))return null;const{credits:a,lyrics:_}=e;if(!_)return null;const{text:l,timestamps:c,ugc:u}=_||{},d={};return c&&(d.karaoke=function(e){return e.map((e=>{const{line:t}=e,o=(0,i._)(e,["line"]);return t?(0,n._)({},o,{text:(0,r.decodeHTML)(t)}):o}))}(c)),l&&(d.static=l.map((e=>({text:(0,r.decodeHTML)(e)})))),u&&(d.ugc=u.map((e=>({text:(0,r.decodeHTML)(e)})))),(null==(t=d.karaoke)?void 0:t.length)||(null==(o=d.static)?void 0:o.length)||(null==(s=d.ugc)?void 0:s.length)?{lines:d,credits:a&&(0,r.decodeHTML)(a)}:null}},52460:(e,t,o)=>{"use strict";var n;o.d(t,{EAudioLyricsStatus:()=>n}),function(e){e[e.Pending=0]="Pending",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error"}(n||(n={}))},76849:(e,t,o)=>{"use strict";o.d(t,{audioTupleToAudioObject:()=>c});var n=o(34892),i=o(92414),r=o(37637),s=o(65028),a=o(48041),_=o(59672);const l=Symbol("audioObjectSymbol");function c(e){if(!e)return null;if("string"==typeof e)return{id:e};if(!Array.isArray(e))return e.__audioObject!==l&&console.warn("audioTupleToAudioObject get audio object that not marked as audioObjectSymbol",{audio:e}),e;const t=e[i.EAudioTupleIndex.FLAGS],o=(e[i.EAudioTupleIndex.HASHES]||"").split("/"),c=(e[i.EAudioTupleIndex.COVER_URL]||"").split(/(,(?!\d))/g).filter((e=>","!==e));return c.length<2&&(0,_.isRadio)(e)&&c.push(e[i.EAudioTupleIndex.COVER_URL],e[i.EAudioTupleIndex.COVER_URL]),{id:(0,n.intval)(e[i.EAudioTupleIndex.ID]),owner_id:(0,n.intval)(e[i.EAudioTupleIndex.OWNER_ID]),ownerId:e[i.EAudioTupleIndex.OWNER_ID],fullId:(0,s.getAudioTupleFullId)(e),title:e[i.EAudioTupleIndex.TITLE]||"",subTitle:e[i.EAudioTupleIndex.SUBTITLE],performer:(0,r.getAudioPerformers)(e,!1),mainArtists:e[i.EAudioTupleIndex.MAIN_ARTISTS],featArtists:e[i.EAudioTupleIndex.FEAT_ARTISTS],authorLink:e[i.EAudioTupleIndex.AUTHOR_LINK],duration:(0,n.intval)(e[i.EAudioTupleIndex.DURATION]),lyrics:e[i.EAudioTupleIndex.LYRICS],url:e[i.EAudioTupleIndex.URL],context:e[i.EAudioTupleIndex.CONTEXT],extra:e[i.EAudioTupleIndex.EXTRA],accessKey:e[i.EAudioTupleIndex.ACCESS_KEY],addHash:o[0]||"",editHash:o[1]||"",actionHash:o[2]||"",deleteHash:o[3]||"",replaceHash:o[4]||"",urlHash:o[5]||"",restoreHash:o[6]||"",canEdit:!!o[1],canDelete:o[3]===e[i.EAudioTupleIndex.ACCESS_KEY]?window.vk.id===e[i.EAudioTupleIndex.OWNER_ID]:Boolean(o[3]),flags:t,isOriginalSound:e[i.EAudioTupleIndex.IS_ORIGINAL_SOUND],hasLyrics:!!(t&i.EAudioFlagBit.HAS_LYRICS),isLongPerformer:!!(t&i.EAudioFlagBit.LONG_PERFORMER),isClaimed:!!(t&i.EAudioFlagBit.CLAIMED),isFromQueue:!!(t&i.EAudioFlagBit.QUEUE),isExplicit:!!(t&i.EAudioFlagBit.EXPLICIT),isUMA:!!(t&i.EAudioFlagBit.UMA),isReplaceable:!!(t&i.EAudioFlagBit.REPLACEABLE),canAdd:!!(t&i.EAudioFlagBit.CAN_ADD),showInfo:!!(t&i.EAudioFlagBit.SHOW_INFO),coverUrl_s:(0,a.partConfigEnabled)("audio_longtap_web")?c[1]:c[0],coverUrl_p:c[1],coverUrl_l:c[0],hasTrackPage:!!e[i.EAudioTupleIndex.TRACK_PAGE_ID],trackPageId:e[i.EAudioTupleIndex.TRACK_PAGE_ID],ads:e[i.EAudioTupleIndex.ADS],album:e[i.EAudioTupleIndex.ALBUM],albumId:(0,n.intval)(e[i.EAudioTupleIndex.ALBUM_ID]),albumPart:(0,n.intval)(e[i.EAudioTupleIndex.ALBUM_PART]),trackCode:e[i.EAudioTupleIndex.TRACK_CODE],restrictionStatus:e[i.EAudioTupleIndex.RESTRICTION],chartInfo:e[i.EAudioTupleIndex.CHART_INFO],adminUrl:e[i.EAudioTupleIndex.ADMIN_URL]||"",umaQueryUrl:e[i.EAudioTupleIndex.UMA_QUERY_URL]||"",__audioObject:l}}},65028:(e,t,o)=>{"use strict";o.d(t,{getAudioTupleFullId:()=>i});var n=o(92414);function i(e){return`${e[n.EAudioTupleIndex.OWNER_ID]}_${e[n.EAudioTupleIndex.ID]}`}},86591:(e,t,o)=>{"use strict";o.d(t,{toTrackedAudioData:()=>n.toTrackedAudioData});var n=o(30655);o(30456)},30655:(e,t,o)=>{"use strict";o.d(t,{toTrackedAudioData:()=>s});var n=o(34788),i=(o(20224),o(68922)),r=o(76849);function s(e){if(!e||"object"!=typeof e)return;const t=Array.isArray(e)?(0,r.audioTupleToAudioObject)(e):e;return t?function(e){var t;const o=null!=(t=e.extra)?t:"{}",r="string"==typeof o?JSON.parse(o):o,s={id:e.id,ownerId:e.ownerId,accessKey:e.accessKey};var a;let _=(0,n._)({},s,{identity:s,title:e.title,author:{raw:e.performer,main:[],feat:[]},url:e.url,duration:e.duration,isExplicit:e.isExplicit,trackCode:null!=(a=e.trackCode)?a:"",artwork:[]});if(r.podcast)return(0,n._)({},_,{type:i.AudioType.PodcastEpisode,podcastId:_.ownerId});if(r.radio)return(0,n._)({},_,{type:i.AudioType.Radio});var l;return(0,n._)({},_,{type:i.AudioType.MusicTrack,hasLyrics:null!=(l=e.hasLyrics)&&l})}(t):void 0}},30456:(e,t,o)=>{"use strict";o(64940),o(92414)},17818:(e,t,o)=>{"use strict";o.d(t,{AudioPlayersSwitch:()=>u});var n=o(70912),i=o(15816),r=o(34788),s=o(90426),a=o(13613),_=o(71627);const l=(0,s.makeSharedState)("audio-players-switch",(()=>({instance:null})),{version:3});var c=(0,i._)("_resume");class u{static ensure(){const e=l();return e.instance||(e.instance=new u),e.instance}connect(e){const t=new _.AudioPlayersSwitchChannel(e),o=this.handlePlay.bind(this,t),n=this.handleStop.bind(this,t);t.events.on("play",o),t.events.on("stop",n);return{emit:t.emitter.emit.bind(t.emitter),disconnect:()=>{t.events.off("play",o),t.events.off("stop",n),this.activeChannel===t&&(this.activeChannel=null)}}}resume(e={reason:a.AudioPlayerPlayAudioEventReason.Unknown}){var t;return(0,n._)(this,c)[c]((0,r._)({},e,{reason:null!=(t=e.reason)?t:a.AudioPlayerPlayAudioEventReason.Unknown}))}autoResume(e){(0,n._)(this,c)[c]((0,r._)({},e,{reason:a.AudioPlayerPlayAudioEventReason.ChannelAutoResume}))}pause(e={}){this.activeChannel&&!this.activeChannel.state.isPaused&&(e.initiatedByCalls?this.activeChannel.pauseByCalls(e):this.activeChannel.pause(e))}stop(e={}){this.activeChannel&&(this.activeChannel.stop(e),this.activeChannel=null)}handlePlay(e){var t;e!==this.activeChannel&&(null==(t=this.activeChannel)?void 0:t.state.isPlaying)&&this.activeChannel.pause({}),this.activeChannel=e}handleStop(e){e===this.activeChannel&&(this.activeChannel=null)}constructor(){Object.defineProperty(this,c,{value:d}),this.activeChannel=null}}function d(e){this.activeChannel&&!this.activeChannel.state.isPlaying&&this.activeChannel.resume(e)}},71627:(e,t,o)=>{"use strict";o.d(t,{AudioPlayersSwitchChannel:()=>u});var n=o(70912),i=o(15816),r=o(34788),s=o(51508),a=(0,i._)("_connectEvents"),_=(0,i._)("_handlePlay"),l=(0,i._)("_handlePause"),c=(0,i._)("_handleStop");class u{get events(){return this.emitter.listenable}get state(){return this._state}set state(e){this._state=(0,r._)({},this._state,e),(this._state.isPlaying||this._state.isPaused||this._state.isPausedByCalls)&&(this._state.isIdle=!1)}pauseByCalls(e){this.state={isPausedByCalls:!0},this.pause(e)}constructor(e){Object.defineProperty(this,a,{value:d}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),this.emitter=new s.Emitter,this._state={isIdle:!0,isPlaying:!1,isPaused:!1,isPausedByCalls:!1},(0,n._)(this,_)[_]=()=>{this.state={isPlaying:!0,isPaused:!1,isPausedByCalls:!1}},(0,n._)(this,l)[l]=()=>{this.state={isPlaying:!1,isPaused:!0}},(0,n._)(this,c)[c]=()=>{this.state={isPlaying:!1,isPaused:!1,isPausedByCalls:!1}},this.resume=e.resume,this.pause=e.pause,this.stop=e.stop,(0,n._)(this,a)[a]()}}function d(){const{events:e}=this;e.on("play",(0,n._)(this,_)[_]),e.on("pause",(0,n._)(this,l)[l]),e.on("stop",(0,n._)(this,c)[c])}},49254:(e,t,o)=>{"use strict";o.d(t,{AudioPlayersSwitch:()=>n.AudioPlayersSwitch});var n=o(17818)},54504:(e,t,o)=>{"use strict";o.d(t,{QueueListener:()=>n});class n{constructor(e){this.queueHandler=e}}},34544:(e,t,o)=>{"use strict";var n,i,r,s;o.d(t,{AudioPlayerPauseAudioEventReason:()=>i,AudioPlayerPlayAudioEventReason:()=>n,AudioPlayerSeekEventReason:()=>s,AudioPlayerStopAudioEventReason:()=>r}),function(e){e.PlayButton="PLAY_BUTTON",e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.NextMediaSession="NEXT_MEDIA_SESSION",e.PrevMediaSession="PREV_MEDIA_SESSION",e.MixAndPlayButton="MIX_AND_PLAY_BUTTON",e.ListButton="LIST_BUTTON",e.AudioButton="AUDIO_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.QueueContinuationAfterError="QUEUE_CONTINUATION_AFTER_ERROR",e.Autoplay="AUTOPLAY",e.Repeat="REPEAT",e.Voice="VOICE",e.NextVoice="NEXT_VOICE",e.PrevVoice="PREV_VOICE",e.ChannelAutoResume="CHANNEL_AUTO_RESUME",e.Unknown="UNKNOWN"}(n||(n={})),function(e){e.PauseButton="PAUSE_BUTTON",e.MediaSession="MEDIA_SESSION",e.ChannelAutoPause="CHANNEL_AUTO_PAUSE",e.Voice="VOICE",e.Paywall="PAYWALL",e.Unknown="UNKNOWN"}(i||(i={})),function(e){e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.Adv="ADV",e.Repeat="REPEAT",e.ChangeQueue="CHANGE_QUEUE",e.Clear="CLEAR",e.Error="ERROR",e.Unknown="UNKNOWN"}(r||(r={})),function(e){e.SliderForward="SLIDER_FORWARD",e.SliderBack="SLIDER_BACK",e.TapForward="TAP_FORWARD",e.TapBack="TAP_BACK",e.DoubleTapForward="DOUBLE_TAP_FORWARD",e.DoubleTapBack="DOUBLE_TAP_BACK",e.Unknown="UNKNOWN"}(s||(s={}))},19612:(e,t,o)=>{"use strict";o.d(t,{createAudioPlayerEventEmitter:()=>i});var n=o(51508);function i(){return new n.Emitter({catchListener:e=>{console.error(e)}})}},72373:(e,t,o)=>{"use strict";o.d(t,{getStopReasonForPlayReason:()=>i});var n=o(34544);function i(e){switch(e){case n.AudioPlayerPlayAudioEventReason.QueueContinuation:return n.AudioPlayerStopAudioEventReason.QueueContinuation;case n.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError:return n.AudioPlayerStopAudioEventReason.Error;case n.AudioPlayerPlayAudioEventReason.NextButton:case n.AudioPlayerPlayAudioEventReason.NextMediaSession:case n.AudioPlayerPlayAudioEventReason.NextVoice:return n.AudioPlayerStopAudioEventReason.NextButton;case n.AudioPlayerPlayAudioEventReason.PrevButton:case n.AudioPlayerPlayAudioEventReason.PrevMediaSession:case n.AudioPlayerPlayAudioEventReason.PrevVoice:return n.AudioPlayerStopAudioEventReason.PrevButton;case n.AudioPlayerPlayAudioEventReason.MixAndPlayButton:case n.AudioPlayerPlayAudioEventReason.ListButton:case n.AudioPlayerPlayAudioEventReason.AudioButton:case n.AudioPlayerPlayAudioEventReason.Voice:return n.AudioPlayerStopAudioEventReason.ChangeQueue;case n.AudioPlayerPlayAudioEventReason.Repeat:return n.AudioPlayerStopAudioEventReason.Repeat;default:return}}},8506:(e,t,o)=>{"use strict";o.d(t,{createAudioPlayerEventEmitter:()=>n.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>i.getStopReasonForPlayReason});var n=o(19612),i=o(72373)},13613:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerPauseAudioEventReason:()=>n.AudioPlayerPauseAudioEventReason,AudioPlayerPlayAudioEventReason:()=>n.AudioPlayerPlayAudioEventReason,AudioPlayerSeekEventReason:()=>n.AudioPlayerSeekEventReason,AudioPlayerStopAudioEventReason:()=>n.AudioPlayerStopAudioEventReason,createAudioPlayerEventEmitter:()=>i.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>i.getStopReasonForPlayReason});var n=o(34544),i=o(8506)},81044:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerStatsListener:()=>O});var n=o(70912),i=o(15816),r=o(34788),s=o(5112),a=o(33790),_=o(78189),l=(0,i._)("_stats"),c=(0,i._)("_lastEvents"),u=(0,i._)("_handlePlayAudio"),d=(0,i._)("_handlePlayAdv"),p=(0,i._)("_handlePauseAudio"),h=(0,i._)("_handlePauseAdv"),m=(0,i._)("_handleStopAudio"),f=(0,i._)("_handleStopAdv"),g=(0,i._)("_handleSeek"),v=(0,i._)("_handleStateRestore"),y=(0,i._)("_handlePageClose"),E=(0,i._)("_makeAdvEventData"),w=(0,i._)("_makeAudioEventData"),b=(0,i._)("_makeEventData"),A=(0,i._)("_canOperate"),P=(0,i._)("_getPlayedTime"),I=(0,i._)("_getAudioKey"),T=(0,i._)("_getAdvKey");class O{destroy(){window.removeEventListener("beforeunload",(0,n._)(this,y)[y]),this.playerAdapter.events.off("playAudio",(0,n._)(this,u)[u]).off("pauseAudio",(0,n._)(this,p)[p]).off("stopAudio",(0,n._)(this,m)[m]).off("playAdv",(0,n._)(this,d)[d]).off("pauseAdv",(0,n._)(this,h)[h]).off("stopAdv",(0,n._)(this,f)[f]).off("seek",(0,n._)(this,g)[g]).off("stateRestore",(0,n._)(this,v)[v])}constructor(e){Object.defineProperty(this,E,{value:C}),Object.defineProperty(this,w,{value:M}),Object.defineProperty(this,b,{value:D}),Object.defineProperty(this,A,{value:S}),Object.defineProperty(this,P,{value:k}),Object.defineProperty(this,I,{value:L}),Object.defineProperty(this,T,{value:R}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),this.playerAdapter=e,(0,n._)(this,l)[l]=new a.AudioPlayerStatsCollector,(0,n._)(this,c)[c]=new Map,(0,n._)(this,u)[u]=({reason:e,audio:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,w)[w](t,o);(0,n._)(this,l)[l].play((0,_.mapPlayReasonToSubtype)(e),i),(0,n._)(this,c)[c].set((0,n._)(this,I)[I](t),i)},(0,n._)(this,d)[d]=({reason:e,advId:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,E)[E](t,o);(0,n._)(this,l)[l].play((0,_.mapPlayReasonToSubtype)(e),i),(0,n._)(this,c)[c].set((0,n._)(this,T)[T](t),i)},(0,n._)(this,p)[p]=({reason:e,audio:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,w)[w](t,o);(0,n._)(this,l)[l].pause((0,_.mapPauseReasonToSubtype)(e),i),(0,n._)(this,c)[c].set((0,n._)(this,I)[I](t),i)},(0,n._)(this,h)[h]=({reason:e,advId:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,E)[E](t,o);(0,n._)(this,l)[l].pause((0,_.mapPauseReasonToSubtype)(e),i),(0,n._)(this,c)[c].set((0,n._)(this,T)[T](t),i)},(0,n._)(this,m)[m]=({reason:e,audio:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,w)[w](t,o);(0,n._)(this,l)[l].end((0,_.mapStopReasonToSubtype)(e),i),(0,n._)(this,c)[c].delete((0,n._)(this,I)[I](t))},(0,n._)(this,f)[f]=({reason:e,advId:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,E)[E](t,o);(0,n._)(this,l)[l].end((0,_.mapStopReasonToSubtype)(e),i),(0,n._)(this,c)[c].delete((0,n._)(this,T)[T](t))},(0,n._)(this,g)[g]=({reason:e,audio:t,progressTime:o,fromTime:i})=>{if(!(0,n._)(this,A)[A]())return;const r=(0,n._)(this,I)[I](t),s=(0,n._)(this,w)[w](t,i),a=(0,n._)(this,w)[w](t,o);(0,n._)(this,l)[l].pause((0,_.mapSeekPauseReasonToSubtype)(e),s),(0,n._)(this,c)[c].set(r,s),(0,n._)(this,l)[l].play((0,_.mapSeekPlayReasonToSubtype)(e),a),(0,n._)(this,c)[c].set(r,a)},(0,n._)(this,v)[v]=({audio:e,progressTime:t})=>{if(!e||!(0,n._)(this,A)[A]())return;const o=(0,n._)(this,w)[w](e,t);(0,n._)(this,l)[l].pause(a.PauseEventSubtype.StateRestore,o),(0,n._)(this,c)[c].set((0,n._)(this,I)[I](e),o)},(0,n._)(this,y)[y]=()=>{const e=this.playerAdapter.getPlayingAudio();if(!e||!(0,n._)(this,A)[A]())return;const t=(0,n._)(this,w)[w](e,(0,n._)(this,P)[P]());(0,n._)(this,l)[l].end(a.StopEventSubtype.Close,t),(0,n._)(this,c)[c].delete((0,n._)(this,I)[I](e))},this.playerAdapter=e,window.addEventListener("beforeunload",(0,n._)(this,y)[y]),this.playerAdapter.events.on("playAudio",(0,n._)(this,u)[u]).on("pauseAudio",(0,n._)(this,p)[p]).on("stopAudio",(0,n._)(this,m)[m]).on("playAdv",(0,n._)(this,d)[d]).on("pauseAdv",(0,n._)(this,h)[h]).on("stopAdv",(0,n._)(this,f)[f]).on("seek",(0,n._)(this,g)[g]).on("stateRestore",(0,n._)(this,v)[v])}}function C(e,t){var o;const i=(0,n._)(this,c)[c].get((0,n._)(this,T)[T](e)),s=(0,a.makeAdvListeningData)(e),_=Math.round(t/1e3);var l;const u=null!=(l=null==(o=i)?void 0:o.timeline)?l:0;return(0,r._)({},(0,n._)(this,b)[b](),{timeline:_,timelineFrom:u,trackCode:""},s)}function M(e,t){var o;const i=(0,n._)(this,c)[c].get((0,n._)(this,I)[I](e)),s=(0,_.mapAudioDataToListeningData)(e),a=Math.round(t/1e3);var l;const u=null!=(l=null==(o=i)?void 0:o.timeline)?l:0;return(0,r._)({},(0,n._)(this,b)[b](),{trackCode:e.trackCode,timeline:a,timelineFrom:u},s)}function D(){return{shuffle:Boolean(this.playerAdapter.isShuffledPlaylist()),repeatMode:this.playerAdapter.isRepeatCurrentAudio()?a.RepeatMode.One:this.playerAdapter.isRepeatAll()?a.RepeatMode.All:a.RepeatMode.Off,volume:this.playerAdapter.getVolume(),speed:100,streamingType:a.StreamingType.Online,playerInitId:null,layer:!0,autorecoms:!0}}function S(){return!this.playerAdapter.isMarusiaTrack()}function k(){return 1e3*Math.round(this.playerAdapter.getListenedTime())||0}function L(e){return`${(0,s.getAudioFullId)(e)}:${e.trackCode}`}function R(e){return`adv:${e}`}},6613:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerStatsCollector:()=>d});var n=o(70912),i=o(15816),r=o(68312),s=o(48041),a=o(56705),_=o(90109),l=(0,i._)("_actionCollector"),c=(0,i._)("_debug"),u=(0,i._)("_logEvent");class d{play(e,t){const o=(0,_.makeEventItem)({category:a.EventCategory.Play,type:a.PlayEventType.Start,subtype:e},t);(0,n._)(this,u)[u](o)}pause(e,t){const o=(0,_.makeEventItem)({category:a.EventCategory.Stop,type:a.StopEventType.Pause,subtype:e},t);(0,n._)(this,u)[u](o)}end(e,t){const o=(0,_.makeEventItem)({category:a.EventCategory.Stop,type:a.StopEventType.End,subtype:e},t);(0,n._)(this,u)[u](o)}constructor(){Object.defineProperty(this,u,{value:p}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=new r.ActionStatCollector(new r.ProductionStatCollector),(0,n._)(this,c)[c]=(0,s.partConfigEnabled)("audio_player_stats_debug")}}function p(e){const t={type:a.EVENT_ITEM_TYPE,[a.EVENT_ITEM_TYPE]:e};if((0,n._)(this,c)[c]){const t=e.event.type,o=e.event[t];console.log(`event_category: ${t};\nevent_type: ${o.type};\nevent_subtype: ${o.subtype}\n`,e)}(0,n._)(this,l)[l].logEvent(t)}},48444:(e,t,o)=>{"use strict";var n,i,r,s,a,_,l,c;o.d(t,{ListeningType:()=>n,MusicContentType:()=>i,PauseEventSubtype:()=>l,PlayEventSubtype:()=>_,PodcastContentType:()=>r,RepeatMode:()=>s,StopEventSubtype:()=>c,StreamingType:()=>a}),function(e){e.Music="type_audio_audio_listening_item",e.Podcast="type_audio_podcast_listening_item",e.Book="type_audio_book_listening_item",e.Adv="type_audio_adv_listening_item",e.Radio="type_audio_radio_listening_item"}(n||(n={})),function(e){e.Track="music_track",e.Snippet="music_snippet"}(i||(i={})),function(e){e.Episode="podcast_episode",e.Trailer="podcast_trailer"}(r||(r={})),function(e){e.Off="off",e.One="one",e.All="all"}(s||(s={})),function(e){e.Online="online",e.OnlineCache="online_cache"}(a||(a={})),function(e){e.PlayButton="play_btn",e.NextButton="next_btn",e.PrevButton="prev_btn",e.NextMediaSession="next_by_system",e.PrevMediaSession="prev_by_system",e.MixAndPlayButton="mix_and_play_btn",e.FastplayListButton="fastplay_list_btn",e.FastplayAudioButton="fastplay_audio_btn",e.QueueContinuation="autoplay",e.QueueContinuationAfterError="autoplay_error",e.Autoplay="autoplay",e.Repeat="repeat",e.Voice="voice",e.NextVoice="next_voice",e.PrevVoice="prev_voice",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.ChannelAutoResume="session_terminated_autostart",e.Heartbeat="heartbeat",e.Unknown="unhandled_on_client"}(_||(_={})),function(e){e.PauseButton="pause_btn",e.MediaSession="pause_by_system",e.ChannelAutoPause="session_terminated",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.Voice="voice",e.Paywall="paywall_pause",e.StateRestore="client_restore",e.Error="error",e.Unknown="unhandled_on_client"}(l||(l={})),function(e){e.NextButton="next",e.PrevButton="prev",e.Autoplay="autoplay",e.Adv="adv",e.Repeat="repeat",e.ChangeSource="change_source",e.Close="close",e.Error="error",e.Unknown="unhandled_on_client"}(c||(c={}))},46002:(e,t,o)=>{"use strict";o.d(t,{makeAdvListeningData:()=>n.makeAdvListeningData});var n=o(88404)},88404:(e,t,o)=>{"use strict";o.d(t,{makeAdvListeningData:()=>i});var n=o(48444);function i(e){return{listeningType:n.ListeningType.Adv,contentType:"audio_adv",advId:e}}},33790:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerStatsCollector:()=>n.AudioPlayerStatsCollector,ListeningType:()=>i.ListeningType,MusicContentType:()=>i.MusicContentType,PauseEventSubtype:()=>i.PauseEventSubtype,PlayEventSubtype:()=>i.PlayEventSubtype,PodcastContentType:()=>i.PodcastContentType,RepeatMode:()=>i.RepeatMode,StopEventSubtype:()=>i.StopEventSubtype,StreamingType:()=>i.StreamingType,makeAdvListeningData:()=>r.makeAdvListeningData});var n=o(6613),i=o(48444),r=o(46002)},56705:(e,t,o)=>{"use strict";o.d(t,{AppState:()=>p,AudioEventLayer:()=>c,Autorecoms:()=>d,EVENT_ITEM_TYPE:()=>s,EventCategory:()=>a,PLAYER_INIT_ID:()=>r,PlayEventType:()=>_,Shuffle:()=>u,StopEventType:()=>l});var n=o(72045),i=o(91686);const r=(()=>{const e="AUDIO_PLAYER_INIT_ID",t=(0,i.getSessionStorage)();let o=t.getItem(e);return o||(o=(0,n.default)(),t.setItem(e,o)),o})(),s="type_audio_listening_item";var a,_,l,c,u,d,p;!function(e){e.Play="play",e.Stop="stop"}(a||(a={})),function(e){e.Start="start"}(_||(_={})),function(e){e.Pause="pause",e.End="end"}(l||(l={})),function(e){e.Not="not",e.Layer="layer"}(c||(c={})),function(e){e.Off="off",e.On="on"}(u||(u={})),function(e){e.Off="off",e.On="on"}(d||(d={})),function(e){e.Active="active",e.Inactive="inactive"}(p||(p={}))},90109:(e,t,o)=>{"use strict";o.d(t,{makeEventItem:()=>n.makeEventItem});o(42332);var n=o(13874)},13874:(e,t,o)=>{"use strict";o.d(t,{makeEventItem:()=>a});var n=o(34788),i=o(48041),r=o(56705),s=o(42332);function a(e,t){const o=_(),i=function({category:e,type:t,subtype:o}){const i={type:e};return(0,n._)({[e]:{type:t,subtype:o}},i)}(e);return(0,n._)({event:i,client_time:o,client_server_time:l(o),layer:t.layer?r.AudioEventLayer.Layer:r.AudioEventLayer.Not,autorecoms:t.autorecoms?r.Autorecoms.On:r.Autorecoms.Off,track_code:t.trackCode,timeline:t.timeline,timeline_from:t.timelineFrom,player_init_id:r.PLAYER_INIT_ID,volume:t.volume,speed:t.speed,shuffle:t.shuffle?r.Shuffle.On:r.Shuffle.Off,app_state:document.hidden?r.AppState.Inactive:r.AppState.Active,streaming_type:t.streamingType,repeat_mode:t.repeatMode},(0,s.mapListeningData)(t))}function _(){return Math.floor(Date.now()/1e3)}function l(e=_()){var t;return e-(Number.isFinite(null==(t=window.vk)?void 0:t.dt)?window.vk.dt:(0,i.calculateTimeOffsets)())}},42332:(e,t,o)=>{"use strict";o.d(t,{mapListeningData:()=>r});var n=o(20224),i=o(48444);function r(e){switch(e.listeningType){case i.ListeningType.Music:return function(e){var{listeningType:t}=e,o=(0,n._)(e,["listeningType"]);return{listening_type:t,[t]:{audio_id:o.audioId,audio_owner_id:o.ownerId,content_type:o.contentType}}}(e);case i.ListeningType.Podcast:return function(e){var{listeningType:t}=e,o=(0,n._)(e,["listeningType"]);return{listening_type:t,[t]:{podcast_id:o.podcastId,podcast_owner_id:o.ownerId,episode_id:o.episodeId,podcast_authors_ids:o.authorIds,content_type:o.contentType}}}(e);case i.ListeningType.Book:return function(e){var{listeningType:t}=e,o=(0,n._)(e,["listeningType"]);return{listening_type:t,[t]:{book_id:o.bookId,chapter_id:o.chapterId,content_type:"audiobook_chapter"}}}(e);case i.ListeningType.Radio:return function(e){var{listeningType:t}=e,o=(0,n._)(e,["listeningType"]);return{listening_type:t,[t]:{radio_id:o.radioId,content_type:"radio"}}}(e);case i.ListeningType.Adv:return function(e){var{listeningType:t}=e,o=(0,n._)(e,["listeningType"]);return{listening_type:t,[t]:{adv_id:o.advId,content_type:"audio_adv"}}}(e)}}},78189:(e,t,o)=>{"use strict";o.d(t,{mapAudioDataToListeningData:()=>n.mapAudioDataToListeningData,mapPauseReasonToSubtype:()=>i.mapPauseReasonToSubtype,mapPlayReasonToSubtype:()=>i.mapPlayReasonToSubtype,mapSeekPauseReasonToSubtype:()=>i.mapSeekPauseReasonToSubtype,mapSeekPlayReasonToSubtype:()=>i.mapSeekPlayReasonToSubtype,mapStopReasonToSubtype:()=>i.mapStopReasonToSubtype});var n=o(76474),i=o(81784)},76474:(e,t,o)=>{"use strict";o.d(t,{mapAudioDataToListeningData:()=>a});var n=o(68922),i=o(33790);const r={[n.AudioType.MusicTrack]:i.MusicContentType.Track,[n.AudioType.MusicSnippet]:i.MusicContentType.Snippet},s={[n.AudioType.PodcastEpisode]:i.PodcastContentType.Episode,[n.AudioType.PodcastTrailer]:i.PodcastContentType.Trailer};function a(e){const{id:t,ownerId:o,type:a}=e;switch(a){case n.AudioType.MusicTrack:case n.AudioType.MusicSnippet:return{listeningType:i.ListeningType.Music,contentType:r[a],audioId:t,ownerId:o};case n.AudioType.PodcastEpisode:case n.AudioType.PodcastTrailer:return{listeningType:i.ListeningType.Podcast,contentType:s[a],episodeId:t,ownerId:o,podcastId:e.podcastId};case n.AudioType.Radio:return{listeningType:i.ListeningType.Radio,contentType:"radio",radioId:t}}}},81784:(e,t,o)=>{"use strict";o.d(t,{mapPauseReasonToSubtype:()=>u,mapPlayReasonToSubtype:()=>c,mapSeekPauseReasonToSubtype:()=>p,mapSeekPlayReasonToSubtype:()=>h,mapStopReasonToSubtype:()=>d});var n=o(13613),i=o(33790);const r={[n.AudioPlayerPlayAudioEventReason.PlayButton]:i.PlayEventSubtype.PlayButton,[n.AudioPlayerPlayAudioEventReason.NextButton]:i.PlayEventSubtype.NextButton,[n.AudioPlayerPlayAudioEventReason.PrevButton]:i.PlayEventSubtype.PrevButton,[n.AudioPlayerPlayAudioEventReason.NextMediaSession]:i.PlayEventSubtype.NextMediaSession,[n.AudioPlayerPlayAudioEventReason.PrevMediaSession]:i.PlayEventSubtype.PrevMediaSession,[n.AudioPlayerPlayAudioEventReason.MixAndPlayButton]:i.PlayEventSubtype.MixAndPlayButton,[n.AudioPlayerPlayAudioEventReason.ListButton]:i.PlayEventSubtype.FastplayListButton,[n.AudioPlayerPlayAudioEventReason.AudioButton]:i.PlayEventSubtype.FastplayAudioButton,[n.AudioPlayerPlayAudioEventReason.QueueContinuation]:i.PlayEventSubtype.QueueContinuation,[n.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError]:i.PlayEventSubtype.QueueContinuationAfterError,[n.AudioPlayerPlayAudioEventReason.Autoplay]:i.PlayEventSubtype.Autoplay,[n.AudioPlayerPlayAudioEventReason.Repeat]:i.PlayEventSubtype.Repeat,[n.AudioPlayerPlayAudioEventReason.Voice]:i.PlayEventSubtype.Voice,[n.AudioPlayerPlayAudioEventReason.NextVoice]:i.PlayEventSubtype.NextVoice,[n.AudioPlayerPlayAudioEventReason.PrevVoice]:i.PlayEventSubtype.PrevVoice,[n.AudioPlayerPlayAudioEventReason.ChannelAutoResume]:i.PlayEventSubtype.ChannelAutoResume,[n.AudioPlayerPlayAudioEventReason.Unknown]:i.PlayEventSubtype.Unknown},s={[n.AudioPlayerPauseAudioEventReason.PauseButton]:i.PauseEventSubtype.PauseButton,[n.AudioPlayerPauseAudioEventReason.MediaSession]:i.PauseEventSubtype.MediaSession,[n.AudioPlayerPauseAudioEventReason.ChannelAutoPause]:i.PauseEventSubtype.ChannelAutoPause,[n.AudioPlayerPauseAudioEventReason.Voice]:i.PauseEventSubtype.Voice,[n.AudioPlayerPauseAudioEventReason.Paywall]:i.PauseEventSubtype.Paywall,[n.AudioPlayerPauseAudioEventReason.Unknown]:i.PauseEventSubtype.Unknown},a={[n.AudioPlayerStopAudioEventReason.NextButton]:i.StopEventSubtype.NextButton,[n.AudioPlayerStopAudioEventReason.PrevButton]:i.StopEventSubtype.PrevButton,[n.AudioPlayerStopAudioEventReason.QueueContinuation]:i.StopEventSubtype.Autoplay,[n.AudioPlayerStopAudioEventReason.Adv]:i.StopEventSubtype.Adv,[n.AudioPlayerStopAudioEventReason.Repeat]:i.StopEventSubtype.Repeat,[n.AudioPlayerStopAudioEventReason.ChangeQueue]:i.StopEventSubtype.ChangeSource,[n.AudioPlayerStopAudioEventReason.Clear]:i.StopEventSubtype.Close,[n.AudioPlayerStopAudioEventReason.Error]:i.StopEventSubtype.Error,[n.AudioPlayerStopAudioEventReason.Unknown]:i.StopEventSubtype.Unknown},_={[n.AudioPlayerSeekEventReason.SliderForward]:i.PauseEventSubtype.PullSliderForward,[n.AudioPlayerSeekEventReason.SliderBack]:i.PauseEventSubtype.PullSliderBack,[n.AudioPlayerSeekEventReason.TapForward]:i.PauseEventSubtype.SeekTapForward,[n.AudioPlayerSeekEventReason.TapBack]:i.PauseEventSubtype.SeekTapBack,[n.AudioPlayerSeekEventReason.DoubleTapForward]:i.PauseEventSubtype.NextDoubleTap,[n.AudioPlayerSeekEventReason.DoubleTapBack]:i.PauseEventSubtype.PrevDoubleTap,[n.AudioPlayerSeekEventReason.Unknown]:i.PauseEventSubtype.Unknown},l={[n.AudioPlayerSeekEventReason.SliderForward]:i.PlayEventSubtype.PullSliderForward,[n.AudioPlayerSeekEventReason.SliderBack]:i.PlayEventSubtype.PullSliderBack,[n.AudioPlayerSeekEventReason.TapForward]:i.PlayEventSubtype.SeekTapForward,[n.AudioPlayerSeekEventReason.TapBack]:i.PlayEventSubtype.SeekTapBack,[n.AudioPlayerSeekEventReason.DoubleTapForward]:i.PlayEventSubtype.NextDoubleTap,[n.AudioPlayerSeekEventReason.DoubleTapBack]:i.PlayEventSubtype.PrevDoubleTap,[n.AudioPlayerSeekEventReason.Unknown]:i.PlayEventSubtype.Unknown};function c(e){return r[null!=e?e:n.AudioPlayerPlayAudioEventReason.Unknown]}function u(e){return s[null!=e?e:n.AudioPlayerPauseAudioEventReason.Unknown]}function d(e){return a[null!=e?e:n.AudioPlayerStopAudioEventReason.Unknown]}function p(e){return _[null!=e?e:n.AudioPlayerPauseAudioEventReason.Unknown]}function h(e){return l[null!=e?e:n.AudioPlayerPauseAudioEventReason.Unknown]}},84163:(e,t,o)=>{"use strict";function n(e){const t={};return e&&e.length&&e.filter((e=>!!e)).map((e=>e.queues&&e.queues[0])).forEach((e=>t[e.type]=e)),t}o.d(t,{unpackQueues:()=>n})},54508:(e,t,o)=>{"use strict";o.d(t,{CaptchaType:()=>n,createCaptchaPopupService:()=>c});var n,i=o(34788),r=o(98116),s=o(4190),a=o(72045),_=o(77900),l=o(25806);!function(e){e[e.IMAGE=0]="IMAGE",e[e.AUDIO=1]="AUDIO"}(n||(n={}));const c=()=>{const e=(0,s.createGate)(),t=(0,r.createEvent)(),o=(0,r.createEvent)(),n=(0,r.createEvent)(),c=(0,r.createEvent)(),u=(0,r.createEvent)(),d=(0,r.createEvent)(),p=(0,r.createEvent)(),h=(0,r.createEvent)(),m=(0,r.createEvent)(),f=(0,r.createEvent)(),g=(0,r.createEvent)();(0,r.forward)({from:e.close,to:g});const v=(0,r.createStore)("");v.on(e.open,((e,{captchaImage:t})=>t));const y=(0,r.createStore)("");y.on(e.open,((e,{captchaTrack:t})=>t));const E=(0,r.createStore)("");E.on(e.open,((e,{deviceId:t})=>t));const w=(0,r.createStore)(null);w.on(e.open,(()=>"CAPTCHA_MODAL_ACTIVE")),w.on(f,(()=>null));const b=(0,r.createStore)(null);b.on(e.open,((e,t)=>t.platform));const A=(0,r.createStore)("");A.reset(e.close),A.on(e.open,((e,{sid:t})=>t));const P=(0,r.createStore)("");P.reset(e.close),P.on([p,h],(()=>(0,a.default)()));const I=(0,r.createStore)(0);I.on(d,(e=>e+1)),I.reset(e.close);const T=(0,r.createStore)("");T.reset(e.close),T.on(t,((e,t)=>t));const O=(0,r.createStore)(!0);O.reset([e.close,d,p]),O.on(c,(()=>!0)),O.on(p,(()=>!0)),O.on(u,(()=>!1)),O.on(m,(()=>!1));const C=(0,r.createStore)(0);C.on(d,(e=>0===e?1:0));const M=(0,r.createStore)(!1);M.reset(e.close),M.on(o,(()=>!0)),M.on(n,(()=>!1));const D=(0,r.createStore)(!1);D.reset([e.close,d,p,h]),D.on(m,(()=>!0));const S=(0,r.createStore)("");S.reset([e.close,p]);const k=(0,r.createStore)(0);k.reset([e.close,g]),k.on(p,(()=>5));const{tick:L,isRunning:R}=(0,_.interval)({timeout:1e3,start:p,stop:g});k.on(L,(e=>e-1));const x=(0,r.createStore)(!1);x.reset(e.close);const B=(0,r.createStore)(!1);B.reset(e.close);const N=(0,r.createStore)(!0);N.reset(e.close),N.on(t,((e,t)=>""===t.trim()));const U=(0,r.createStore)(!0);return U.reset(e.close),U.on(d,(()=>!1)),(0,r.sample)({source:k,filter:e=>0===e,target:g}),(0,r.sample)({source:{isAudioPlaying:M,refreshCountdownRunning:R},fn:({isAudioPlaying:e,refreshCountdownRunning:t})=>e||t,target:[x,B]}),(0,r.sample)({clock:[e.open,h,d],source:{sid:A,hash:P,type:C,swapCount:I,platform:b,captchaImage:v,captchaTrack:y,deviceId:E,isFirst:U},fn:e=>(0,l.getCaptchaLink)(e),target:S}),(0,r.sample)({clock:p,source:{sid:A,hash:P,type:C,swapCount:I,platform:b,captchaImage:v,captchaTrack:y,deviceId:E},fn:e=>(0,l.getCaptchaLink)((0,i._)({},e,{isRefresh:!0})),target:S}),{Gate:e,answerChanged:t,audioPlaying:o,audioPaused:n,captchaLoadingStarts:c,captchaLoadingEnds:u,captchaTypeToggled:d,captchaRefreshed:p,captchaReloaded:h,captchaLoadingErrorSet:m,closeCaptcha:f,$answer:T,$captchaLoading:O,$captchaType:C,$isAudioPlaying:M,$hasLoadCaptchaError:D,$captchaSrc:S,$refreshCountdown:k,$isRefreshButtonDisabled:x,$isCaptchaTypeToggleDisabled:B,$isSubmitButtonDisabled:N,$isCaptchaModalActive:w}}},36849:(e,t,o)=>{"use strict";o.d(t,{CaptchaType:()=>n.CaptchaType,Platform:()=>i.Platform,createCaptchaPopupService:()=>n.createCaptchaPopupService});var n=o(54508),i=o(25806)},25806:(e,t,o)=>{"use strict";o.d(t,{Platform:()=>n,getCaptchaLink:()=>s});var n,i=o(54508),r=o(69930);!function(e){e[e.VK_WEB=0]="VK_WEB",e[e.VK_M_WEB=1]="VK_M_WEB"}(n||(n={}));const s=({sid:e,hash:t,type:o,isRefresh:n,swapCount:s,platform:a,isFirst:_,captchaImage:l,captchaTrack:c,deviceId:u})=>{const d=t?`&v=${t}`:"",p=n?"&refresh=1":"",h=!n&&s>0?"&swap_type=1":"",m=_?"&first=1":"";let f;switch(a){case 0:default:f=r.VK_WEB_APP_ID;break;case 1:f=r.VK_MVK_APP_ID}switch(o){case i.CaptchaType.IMAGE:{let t="";if(l){const e=new URLSearchParams(l);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${l}&s=1&width=400&resized=1`:`${l.replace("device_id=",`device_id=${u}`)}&s=1&width=400&resized=1`:`${l}&resized=1&width=400&app_id=${f}&device_id=${u}`}else t=`/captcha.php?sid=${e}&s=1&resized=1&width=400&app_id=${f}&device_id=${u}`;return`${t}${d}${p}${h}${m}`}case i.CaptchaType.AUDIO:{let t="";if(c){const e=new URLSearchParams(c);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${c}`:`${c.replace("device_id=",`device_id=${u}`)}`:`${c}&app_id=${f}&device_id=${u}`}else t=`/sound_captcha.php?act=get&captcha_sid=${e}&app_id=${f}&device_id=${u}`;return`${t}${d}${p}${h}${m}`}default:return""}}},19191:(e,t,o)=>{"use strict";o.d(t,{renderAvatarToString:()=>_});var n=o(85893),i=o(73935),r=o(97476),s=o(7659),a=o(3853);function _(e,t,o,_="",l,c,u,d,p,h){let m;l&&(m="online"),s.mobPlatforms[l]&&(m="online-mobile");const f=null!==o&&o?"a":"span",g=document.createElement(f);void 0!==c&&g.setAttribute("onclick",c),h&&g.classList.add("nft_avatar_wrap"),_&&(Array.isArray(_)?g.classList.add(..._):g.classList.add(_)),o&&(g.href=o),i.render((0,n.jsxs)(r.RichAvatar,{className:a.default.root,alt:p,src:e,size:t,nft:h,children:[u&&(0,n.jsx)(r.RichAvatar.Outline,{"data-outline-id":d,appearance:"accent"}),m&&(0,n.jsx)(r.RichAvatar.BadgeWithPreset,{preset:m})]}),g);const v=g.outerHTML;return i.unmountComponentAtNode(g),v}},54261:(e,t,o)=>{"use strict";var n,i,r;o.d(t,{ColorSchemeMode:()=>n,ColorSchemeName:()=>i,SchemeColors:()=>r}),function(e){e.Light="light",e.Dark="dark",e.Auto="auto"}(n||(n={})),function(e){e.Dark="space_gray",e.Light="bright_light",e.WebDark="vkcom_dark",e.WebLight="vkcom_light"}(i||(i={})),function(e){e.Dark="#222222",e.Light="#ffffff"}(r||(r={}))},82018:(e,t,o)=>{"use strict";o.d(t,{OUR_DOMAINS:()=>s,TOP_DOMAINS:()=>i,VK_DOMAIN:()=>a});var n=o(20562);const i=[..."aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),..."бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),..."qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((e=>"xn--"+e))],r=n.VK_HOST_REGEX_GROUP_UNSAFE.source,s=new RegExp(`^([a-zA-Z0-9\\.\\_\\-]+\\.)?(${r}|vk\\.cc)$`),a=new RegExp(`^(?:https?:\\/\\/)?(?:${n.VK_SITES_REGEX_SOURCE_UNSAFE})?\\/([a-zA-Z0-9\\._]+)\\??$`)},31712:(e,t,o)=>{"use strict";o.d(t,{EMAIL:()=>i});var n=o(82671);const i=new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@("+n.RE_URL_DOMAIN_NAME+n.RE_URL_DOMAIN_TOP+"))","ig")},21338:(e,t,o)=>{"use strict";o.d(t,{MENTION:()=>n});const n=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g},82089:(e,t,o)=>{"use strict";o.d(t,{PLATFORM_MVK:()=>n});const n="mvk"},82671:(e,t,o)=>{"use strict";o.d(t,{RE_URL_DOMAIN_NAME:()=>i,RE_URL_DOMAIN_TOP:()=>r,RE_URL_PATTERN:()=>s});const n="\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј",i="((?:["+n+"\\—\\-\\_]+\\.){1,5})",r="([A-Za-zа-яА-Я\\-\\d]{2,22})",s="(https?:\\/\\/)?"+("("+i+r+"(?:\\:(\\d{2,5}))?)")+("(([\\/?#])(?:\\&amp;|\\&#\\d{2,6};|,[_%]|!|,*[\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$.~=;:'ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯*]+|"+("(?:\\(|\\[)["+n+"\\d&#%;,]+(?:\\)|\\])")+"){0,200})?")},75754:(e,t,o)=>{"use strict";o.d(t,{TIMESPENT_SCREEN_COUNTER_IDS:()=>n,getScreenTimespentCollector:()=>u});var n,i,r=o(34788),s=o(90426),a=o(69910),_=o(70956),l=o(68312);!function(e){e[e.FEED=5]="FEED",e[e.MESSENGER=7]="MESSENGER",e[e.MINI_APPS=75]="MINI_APPS",e[e.VIDEO_SHOWCASE_VIEW=63]="VIDEO_SHOWCASE_VIEW",e[e.VIDEO_VIEW=20]="VIDEO_VIEW",e[e.DATING=67]="DATING",e[e.SHORT_VIDEOS=3]="SHORT_VIDEOS",e[e.SHORT_VIDEOS_ENGAGEMENT_3_ITEMS=76]="SHORT_VIDEOS_ENGAGEMENT_3_ITEMS"}(n||(n={})),function(e){e[e.MUSIC_ENGAGEMENT_30S=1]="MUSIC_ENGAGEMENT_30S",e[e.CALLS_IN_CALL=21]="CALLS_IN_CALL",e[e.VIDEO_VIEW_30S=77]="VIDEO_VIEW_30S"}(i||(i={}));class c{startVisibilityChangeListener(){document.addEventListener("visibilitychange",(()=>{document.hidden?this.onScreenHide():this.onScreenShow()}))}startPageCloseListener(){window.addEventListener("beforeunload",(()=>{this.active.forEach(((e,t)=>{this.finish(t)}))}))}get isDebug(){return!1}warn(...e){this.isDebug||console.warn("[MyTrackerTimespent]",...e)}onScreenHide(){if("service"===this.type)return;const e=Date.now();this.startData.forEach(((t,o)=>{var n;var i;const s=(null!=(n=this.timespent.get(o))?n:0)+(e-(null!=(i=t.span_ts)?i:t.start_ts));this.timespent.set(o,s),this.startData.set(o,(0,r._)({},t,{span_ts:Date.now()})),this.hideTimestamp=Date.now()}))}onScreenShow(){"service"!==this.type&&(this.hideTimestamp=null,this.startData.forEach(((e,t)=>{this.startData.set(t,(0,r._)({},e,{span_ts:Date.now()}))})))}start(e){this.active.has(e)?this.isDebug&&this.warn("Запись таймспента #%s уже началась. Проверьте механизм записи.",e):(this.active.add(e),this.startData.set(e,(0,r._)({},this.getCurrentTimingMetadata(),{start_ts:Date.now()})),this.tmrTimespentUtils.tmrStartTimespent(e,"service"===this.type))}finish(e){if(!this.active.has(e))return void(this.isDebug&&this.warn("Не удалось завершить запись таймспента #%s. Проверьте механизм записи.",e));this.active.delete(e),this.tmrTimespentUtils.tmrFinishTimespent(e,"service"===this.type);const t=this.startData.get(e);if(!t)return;var o;this.startData.delete(e);const n=null!=(o=t.span_ts)?o:t.start_ts;var i;const r=null!=(i=this.hideTimestamp)?i:Date.now(),s=r-n;var a;const l=(null!=(a=this.timespent.get(e))?a:0)+s;(0,_.saveStatlogEvents)({name:"tmp_tmr_timespent",value:l,keys:[this.type,e]}),this.collector.logEvent({activity_id:e,counter_id:this.counterId,start_time:Math.floor(n/1e3),end_time:Math.floor(r/1e3)}),this.timespent.delete(e)}getCurrentTimingMetadata(){var e,t;return{module:(null==(e=window.cur)?void 0:e.module)||"unknown",screen:(null==(t=window.cur)?void 0:t.screen)||"unknown"}}constructor(e,t){this.active=new Set,this.startData=new Map,this.timespent=new Map,this.collector=new l.MTTimespentStatCollector,this.hideTimestamp=null,this.type=e;const{tmrFinishTimespent:o=a.tmrFinishTimespent,tmrStartTimespent:n=a.tmrStartTimespent}=t?(0,a.getCustomCounterIdTmrUtils)(t):{};this.tmrTimespentUtils={tmrFinishTimespent:o,tmrStartTimespent:n},this.counterId=parseInt(null!=t?t:a.counterId),this.startVisibilityChangeListener(),this.startPageCloseListener()}}const u=(0,s.makeSharedState)("myTrackerScreenTimespentCollector",(()=>new c("screen")),{version:1});(0,s.makeSharedState)("myTrackerServiceTimespentCollector",(()=>new c("service")),{version:1})},88609:(e,t,o)=>{"use strict";var n;o.d(t,{MY_TRACKER_COUNT_EVENT_IDS:()=>n}),function(e){e[e.COMMUNITY_SUBSCRIBE=11]="COMMUNITY_SUBSCRIBE",e[e.POST_PUBLISH=13]="POST_PUBLISH",e[e.MESSAGE_SEND=26]="MESSAGE_SEND"}(n||(n={}))},74479:(e,t,o)=>{"use strict";o.d(t,{MY_TRACKER_COUNT_EVENT_IDS:()=>i.MY_TRACKER_COUNT_EVENT_IDS,tmrSendTimespentEvent:()=>n.tmrSendTimespentEvent,tmrTrackPage:()=>n.tmrTrackPage,tmrUpdateUserId:()=>n.tmrUpdateUserId});var n=o(69910),i=(o(56520),o(88609));o(75754)},56520:(e,t,o)=>{"use strict";o.d(t,{handleModuleChanged:()=>s});var n=o(75754);const i={feed:n.TIMESPENT_SCREEN_COUNTER_IDS.FEED,mini_apps_catalog:n.TIMESPENT_SCREEN_COUNTER_IDS.MINI_APPS,im:n.TIMESPENT_SCREEN_COUNTER_IDS.MESSENGER,mail:n.TIMESPENT_SCREEN_COUNTER_IDS.MESSENGER};let r="";function s(e){if(e===r)return;const t=(0,n.getScreenTimespentCollector)(),o=i[r];o&&t.finish(o),r=e;const s=i[e];s&&t.start(s)}},93880:(e,t,o)=>{"use strict";o.d(t,{CustomStatCollector:()=>r});var n=o(33751),i=o(70956);class r{getCurrentTime(e=!0){const t=Date.now().toString(10);return e?t+"000":t}getIntId(){return Math.floor(Math.random()*r.MAX_INT32)}getBaseEvent(){return{id:this.getIntId(),timestamp:this.getCurrentTime()}}logEvent(e){e.type&&e[e.type]?(0,i.saveCustomStats)(e):(0,n.logError)(new Error("CustomStatCollector: invalid event."))}}r.MAX_INT32=2147483647},78123:(e,t,o)=>{"use strict";o.d(t,{DevNullStatCollector:()=>r});var n=o(34788),i=o(59458);class r{logEvent(e){const t=(0,n._)({},this.customStatCollector.getBaseEvent(),{type:i.CustomStatEventTypes.TYPE_DEV_NULL_ITEM,[i.CustomStatEventTypes.TYPE_DEV_NULL_ITEM]:e});this.customStatCollector.logEvent(t)}constructor(e){this.customStatCollector=e}}},39108:(e,t,o)=>{"use strict";o.d(t,{CustomStatCollector:()=>n.CustomStatCollector,DevNullStatCollector:()=>i.DevNullStatCollector});var n=o(93880),i=o(78123)},59458:(e,t,o)=>{"use strict";var n;o.d(t,{CustomStatEventTypes:()=>n}),function(e){e.TYPE_DEV_NULL_ITEM="type_dev_null_item"}(n||(n={}))},70568:(e,t,o)=>{"use strict";var n,i,r,s,a;o.d(t,{AddToCartEventType:()=>i}),function(e){e.TYPE_CLICK="type_market_click",e.TYPE_VIEW="type_market_view",e.TYPE_ACTION="type_market_action"}(n||(n={})),function(e){e.ADD_ITEM="add_item",e.SET_ITEM_AMOUNT="set_item_amount"}(i||(i={})),function(e){e.ALL="all",e.SET_ITEM_AMOUNT="set_item_amount"}(r||(r={})),function(e){e.MARKETPLACE_SEARCH="marketplace_search",e.MARKETPLACE_MAIN="marketplace_main",e.MARKETPLACE_SECTION="marketplace_section",e.MARKETPLACE_MY_ORDERS="marketplace_my_orders",e.MARKET_CART="market_cart",e.MARKET_ITEM="market_item",e.MARKET="market",e.GROUP_MENU="group_menu",e.FAVE_PRODUCTS="fave_products",e.MARKET_IM_CHAT="im_chat"}(s||(s={})),function(e){e.TRANSITION_TO_CARTS_LIST="type_marketplace_transition_to_carts_list_click",e.TRANSITION_TO_CHECKOUT="type_marketplace_transition_to_checkout_click_item",e.TRANSITION_TO_CART="type_marketplace_transition_to_cart_click",e.VIEW_ITEM="type_market_view_item",e.ADD_ITEM_TO_BOOKMARKS="type_market_add_item_to_bookmarks",e.ADD_ITEM_TO_CART="type_add_item_to_cart",e.REMOVE_ITEM_FROM_CART="type_remove_item_from_cart_item",e.REMOVE_ITEM_FROM_BOOKMARKS="type_market_remove_item_from_bookmark"}(a||(a={}))},40587:(e,t,o)=>{"use strict";o.d(t,{AdminsClickAnalytics:()=>s});var n=o(82161),i=o(28767),r=o(94614);class s{logControlClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_ITEMS_CONTROL_CLICK,screen:e,id:t.id,itemType:t.itemType}})}logEditItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_END_EDIT_ITEM,screen:e,ownerId:t.ownerId,id:t.id,itemType:t.itemType,difference:t.difference,status:t.status,attachedPhotoCount:t.attachedPhotoCount}})}logModerationEditItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_MODERATION_EDIT_ITEM_CLICK,screen:e,id:t.id,ownerId:t.ownerId,itemType:"market_item"}})}logModerationDeleteItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_MODERATION_DELETE_ITEM_CLICK,screen:e,id:t.id,ownerId:t.ownerId,itemType:"market_item"}})}logImportsGoodsEvent({ownerId:e,eventName:t}){this.collector.logEvent({params:{type:t,screen:i.CustomScreen.MARKET_ITEMS,id:n.Ranges.convertOwnerIdToGroupId(e),ownerId:e,itemType:"market_item"}})}logAddItemGoodsEvent({id:e,eventName:t,screen:o}){this.collector.logEvent({params:{screen:o,type:t,id:n.Ranges.convertOwnerIdToGroupId(e),itemType:"market_item"}})}constructor(e=new r.ClickEventCollector){this.collector=e}}},94614:(e,t,o)=>{"use strict";o.d(t,{ClickEventCollector:()=>s});var n=o(68312),i=o(56525),r=o(28767);class s{logEvent({params:e}){const t=this.constructEvent({params:e});this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({params:e}){const t=this.statCollector.getBaseEvent();return{id:t.id,timestamp:t.timestamp,type:i.ProductionStatEventTypes.TYPE_CLICK,prev_nav_id:this.lastNavEventId,prev_event_id:t.prev_id||0,screen:e.screen,[i.ProductionStatEventTypes.TYPE_CLICK]:{item:{type:e.itemType,id:e.id,owner_id:e.ownerId,community_id:e.ownerId},type:r.EventType.TYPE_CLICK,[r.EventType.TYPE_CLICK]:{type:e.type,[e.type]:{changed_parameters:e.difference,attached_photo_count:e.attachedPhotoCount,status:e.status}}}}}constructor(e=new n.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},28767:(e,t,o)=>{"use strict";var n,i,r,s,a,_;o.d(t,{CustomScreen:()=>i,EventName:()=>_,EventType:()=>a}),function(e){e.AUTO="auto",e.SEARCH="search",e.MARKET="market",e.GROUP="group",e.MAIN="main"}(n||(n={})),function(e){e.MARKET_ITEM="market_item",e.MARKET_ITEMS="market_items",e.MARKET_ALBUMS="market_albums"}(i||(i={})),function(e){e.GROUP="group",e.MARKET_ITEM="market_item"}(r||(r={})),function(e){e.CANCEL_EDIT_ITEM="cancel_edit_item",e.CANCEL_CREATE_ITEM="cancel_create_item"}(s||(s={})),function(e){e.TYPE_CLICK="type_market_click"}(a||(a={})),function(e){e.TYPE_MARKET_ITEMS_CONTROL_CLICK="type_market_items_control_click",e.TYPE_MARKET_END_EDIT_ITEM="type_market_end_edit_item",e.TYPE_MARKET_MODERATION_EDIT_ITEM_CLICK="type_market_items_moderation_edit_click",e.TYPE_MARKET_MODERATION_DELETE_ITEM_CLICK="type_market_items_moderation_delete_click",e.TYPE_MARKET_IMPORT_GOODS="type_market_import_goods",e.TYPE_MARKET_IMPORT_GOODS_START="type_market_import_goods_start",e.TYPE_MARKET_IMPORT_GOODS_FAIL="type_market_import_goods_fail",e.TYPE_MARKET_TRANSITION_TO_IMPORT_GOODS="type_market_transition_to_import_goods",e.TYPE_MARKET_TRANSITION_TO_ADD_GOODS="type_market_transition_to_add_goods",e.TYPE_MARKET_TRANSITION_TO_MANUAL_ADD_GOODS="type_market_transition_to_manual_add_goods"}(_||(_={}))},86392:(e,t,o)=>{"use strict";o.d(t,{ClickAnalytics:()=>_});var n=o(34788),i=o(20224),r=o(70568),s=o(91050),a=o(93760);class _{logAddToBookmarksClick({screen:e,params:t,refSource:o,previousScreen:n,sourceUrl:i,trackCode:r}){this.collector.logEvent({params:{type:s.EventName.ADD_ITEM_TO_BOOKMARKS,screen:e,previous_screen:n,ref_source:o,item:{track_code:r},source_url:i,[s.EventName.ADD_ITEM_TO_BOOKMARKS]:t}})}logRemoveFromBookmarksClick({screen:e,params:t,refSource:o,previousScreen:n,sourceUrl:i,trackCode:r}){this.collector.logEvent({params:{type:s.EventName.REMOVE_ITEM_FROM_BOOKMARKS,screen:e,previous_screen:n,ref_source:o,source_url:i,item:{track_code:r},[s.EventName.REMOVE_ITEM_FROM_BOOKMARKS]:t}})}logTransitionToItemClick({screen:e,params:t,refSource:o}){const{source_url:n="",previous_screen:r,track_code:a}=t,_=(0,i._)(t,["source_url","previous_screen","track_code"]);this.collector.logEvent({params:{type:s.EventName.TRANSITION_TO_ITEM,previous_screen:r,ref_source:o,source_url:n,screen:e,item:{track_code:a},[s.EventName.TRANSITION_TO_ITEM]:_}})}logTransitionToSimilarClick({screen:e,previousScreen:t,sourceUrl:o="",refSource:n,params:i}){this.collector.logEvent({params:{type:s.EventName.TRANSITION_TO_SIMILARS,previous_screen:t,screen:e,source_url:o,ref_source:n,[s.EventName.TRANSITION_TO_SIMILARS]:i||{}}})}logSendMessageToOwnerClick({screen:e,params:t,refSource:o,previousScreen:n}){this.collector.logEvent({params:{type:s.EventName.SEND_MESSAGE_TO_OWNER,ref_source:o,screen:e,previous_screen:n,[s.EventName.SEND_MESSAGE_TO_OWNER]:t}})}logTransitionToMarketClick({ownerId:e,screen:t,refSource:o,previousScreen:n}){this.collector.logEvent({params:{type:s.EventName.TRANSITION_TO_MARKET,screen:t,previous_screen:n,ref_source:o,item:{owner_id:e}}})}logMarketCtaButtonClick({itemId:e,ownerId:t,screen:o,refSource:n,previousScreen:i,params:r}){this.collector.logEvent({params:{type:s.EventName.CLICK_MARKET_CTA_BUTTON,screen:o,previous_screen:i,ref_source:n,item:{id:e,owner_id:t},[s.EventName.CLICK_MARKET_CTA_BUTTON]:r}})}logHideMarketItemClick({itemId:e,ownerId:t,screen:o,refSource:n,itemIdx:i,trackCode:r}){this.collector.logEvent({params:{type:s.EventName.HIDE_ITEM,screen:o,ref_source:n,item:{id:e,owner_id:t,track_code:r},[s.EventName.HIDE_ITEM]:{item_idx:i}}})}logOpenMarketplaceClick({screen:e,previousScreen:t,refSource:o}){this.collector.logEvent({params:{type:s.EventName.CLICK_OPEN_MARKETPLACE,screen:e,previous_screen:t,ref_source:o}})}logTransitionToCartsListClick({screen:e,previousScreen:t,refSource:o}){this.collector.logEvent({params:{type:s.EventName.TRANSITION_TO_CARTS_LIST,screen:e,previous_screen:t,ref_source:o,ref_screen:e}})}addItemToCart({screen:e,previousScreen:t,params:o}){this.collector.logEvent({params:{type:s.EventName.ADD_ITEM_TO_CART,screen:e,previous_screen:t,ref_screen:e,ref_source:s.RefSource.BOOKMARKS,[s.EventName.ADD_ITEM_TO_CART]:(0,n._)({event_type:r.AddToCartEventType.ADD_ITEM},o)}})}constructor(e=new a.ClickEventCollector){this.collector=e}}},93760:(e,t,o)=>{"use strict";o.d(t,{ClickEventCollector:()=>_});var n=o(34788),i=o(68312),r=o(56525),s=o(91050),a=o(57569);class _{logEvent({params:e}){const t=this.constructEvent({params:e});this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({params:e}){const t=this.statCollector.getBaseEvent();return{id:t.id,timestamp:t.timestamp,type:r.ProductionStatEventTypes.TYPE_CLICK,prev_nav_id:this.lastNavEventId,prev_event_id:t.prev_id||0,screen:e.screen,[r.ProductionStatEventTypes.TYPE_CLICK]:{item:(0,n._)({type:"market_item"},"item"in e?e.item:{}),type:s.EventType.TYPE_CLICK,[s.EventType.TYPE_CLICK]:(0,a.getValidatedParams)((0,n._)({},e,{analytics_version:1}))}}}constructor(e=new i.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},96821:(e,t,o)=>{"use strict";o.d(t,{clickAnalytics:()=>s});var n=o(86392),i=o(40587),r=o(57965);const s=new n.ClickAnalytics;new i.AdminsClickAnalytics,new r.ViewAnalytics},91050:(e,t,o)=>{"use strict";var n,i,r,s,a;o.d(t,{EventName:()=>a,EventType:()=>s,RefSource:()=>r}),function(e){e.AUTO="auto",e.SEARCH="search",e.MARKET="market",e.GROUP="group"}(n||(n={})),function(e){e.MARKET_ITEM="market_item",e.MARKET_CARTS_LIST="market_carts_list",e.MARKET_CHECKOUT="market_checkout",e.FAVE_PRODUCTS="fave_products"}(i||(i={})),function(e){e.COMMUNITY_GOODS="community_goods",e.COMMUNITY_GROUP_GOODS="community_group_goods",e.COMMUNITY_SHOWCASE="community_showcase",e.SEARCH_GLOBAL="search_global",e.SEARCH_GOODS="search_goods",e.SEARCH_RECOMMENDATIONS="search_recommendations",e.SEARCH_RECOMMENDATIONS_WITH_GOODS="search_communities_with_goods",e.GLUBS="messages",e.POST="post",e.PHOTO="photo",e.VIDEO="video",e.STORIES="stories",e.CLIPS="clips",e.CART="cart",e.BOOKMARKS="bookmarks",e.MARKETPLACE="marketplace",e.VIDEO_CAROUSEL_ITEMS="video_carousel_items",e.ARTIST_GOODS="artist_goods",e.FEED_PORTLET_GOODS="feed_portlet_goods",e.OTHER="other"}(r||(r={})),function(e){e.TYPE_CLICK="type_market_click",e.TYPE_VIEW="type_market_view"}(s||(s={})),function(e){e.ADD_ITEM_TO_BOOKMARKS="type_market_add_item_to_bookmarks",e.REMOVE_ITEM_FROM_BOOKMARKS="type_market_remove_item_from_bookmark",e.VIEW_ITEM="type_market_view_item",e.TRANSITION_TO_ITEM="type_market_transition_to_item",e.SEND_MESSAGE_TO_OWNER="type_market_send_message_to_owner_click",e.TRANSITION_TO_SIMILARS="type_market_transition_to_similars",e.TRANSITION_TO_MARKET="type_market_transition_to_market",e.CLICK_MARKET_CTA_BUTTON="type_market_cta_button_click",e.HIDE_ITEM="type_market_hide_item",e.CLICK_OPEN_MARKETPLACE="type_market_open_marketplace",e.TRANSITION_TO_CARTS_LIST="type_market_transition_to_carts_list",e.ADD_ITEM_TO_CART="type_add_item_to_cart"}(a||(a={}))},57965:(e,t,o)=>{"use strict";o.d(t,{ViewAnalytics:()=>r});var n=o(91050),i=o(47363);class r{logMarketItemView({screen:e,previous_screen:t,params:o,view:i,ref_source:r,source_url:s,track_code:a}){this.collector.logEvent({screen:e,view:i,params:{type:n.EventName.VIEW_ITEM,previous_screen:t,ref_source:r,source_url:s,track_code:a,[n.EventName.VIEW_ITEM]:o}})}constructor(e=new i.ViewEventCollector){this.collector=e}}},47363:(e,t,o)=>{"use strict";o.d(t,{ViewEventCollector:()=>_});var n=o(34788),i=o(68312),r=o(56525),s=o(57569),a=o(91050);class _{logEvent(e){const t=this.constructEvent(e);this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({screen:e,view:t,params:o}){const i=this.statCollector.getBaseEvent();return{id:i.id,timestamp:i.timestamp,type:r.ProductionStatEventTypes.TYPE_VIEW,prev_nav_id:this.lastNavEventId,prev_event_id:i.prev_id||0,screen:e,[r.ProductionStatEventTypes.TYPE_VIEW]:{item:{type:"market_item"},start_view:t.start_view,end_view:t.end_view,type:a.EventType.TYPE_VIEW,[a.EventType.TYPE_VIEW]:(0,n._)({},(0,s.getValidatedParams)(o),{analytics_version:1})}}}constructor(e=new i.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},36748:(e,t,o)=>{"use strict";o.d(t,{clone:()=>n});const n=e=>{let t={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&("object"==typeof e[o]&&(t[o]=n(e[o])),t[o]=e[o]);return t}},57569:(e,t,o)=>{"use strict";o.d(t,{getValidatedParams:()=>r});var n=o(36748),i=o(50722);const r=e=>{const t=(0,n.clone)(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if("autofill_info"===e&&Array.isArray(t[e]))continue;var o;if("object"!=typeof t[e]||Object.is(null,t[e])||(t[e]=r(t[e])),"owner_id"===e&&"number"==typeof t[e]&&i.Ranges.isUserId(t[e])&&(t[e]=-t[e]),"search_query_id"===e&&"number"!=typeof t[e])t[e]=Number(null!=(o=t[e])?o:"")}return delete t.screen,t}},53105:(e,t,o)=>{"use strict";o.d(t,{classNames:()=>n.classNames});var n=o(59397)},94428:(e,t,o)=>{"use strict";o.d(t,{TaskQueue:()=>s});var n,i=o(94795),r=o.n(i);!function(e){e.EV_GC_START="ev_gc_start",e.EV_GC_END="ev_gc_end",e.EV_PAUSED="ev_paused",e.EV_RESTARTED="ev_restarted",e.EV_NEW_HANDLER="ev_new_handler",e.EV_RM_HANDLER="ev_rm_handler",e.EV_TASK_START="ev_task_start"}(n||(n={}));class s{get events(){return this._emitter}static migrate(e,t=(()=>{})){const o=new s(t);return o.pause(),e&&e.destroy&&e._handlers&&e._q&&(e.destroy(),Object.keys(e._handlers).forEach((t=>{const n=e._handlers[t];o.setHandler(t,n,n.once)})),e._q.forEach((e=>o.push(e)))),o.restart(),o}setupGc(e){this._gcTimer&&clearInterval(this._gcTimer),this._gcTimer=setInterval(this._gcTask.bind(this),e||s._gcDefaultInterval)}_next(e=!1){this._timer=setTimeout(this._processNext.bind(this),e?0:this._timerInterval)}_gcTask(){this.pause(),this._emitter.emit("ev_gc_start");const e=this._q.filter((e=>e.postponed));this._q=this._q.filter((e=>!e.postponed)),this._emitter.emit("ev_gc_end",e),this.restart()}_processNext(){var e;const[t]=this._q.splice(0,1);if(!t)return void this.pause();const o=this._handlers[t.selector];if((null==(e=o)?void 0:e.once)&&this.removeHandler(t.selector),!o)return t.postponed||(t.postponed=!0),this._q.push(t),void(this._timer&&this._next());let n;this._emitter.emit("ev_task_start",t.selector),window._tqVerbose&&console.info("Running evbus task",t.selector);try{n=Promise.resolve(o(t))}catch(e){n=Promise.reject(e)}n.then((()=>{this._next(!0)}),(e=>{this._errorHandler&&this._errorHandler(t,e),this._next(!0)}))}constructor(e=(()=>{})){this._errorHandler=e,this._timerInterval=15,this._handlers=Object.create(null),this._emitter=new(r()),this._q=[],this.destroy=()=>{this.pause(),clearInterval(this._gcTimer)},this.pause=()=>{this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._emitter.emit("ev_paused"))},this.restart=()=>{this._timer||(this._next(),this._emitter.emit("ev_restarted"))},this.push=e=>{this._q.push(e),this.restart()},this.setHandler=(e,t,o=!1)=>{t.once=o,this._handlers[e]=t,this._emitter.emit("ev_new_handler",e)},this.removeHandler=e=>{delete this._handlers[e],this._emitter.emit("ev_rm_handler",e)},this._next()}}s._gcDefaultInterval=5e3},42885:(e,t,o)=>{"use strict";o.d(t,{init:()=>n.init,processExecData:()=>i.processExecData,tq:()=>n.tq});var n=o(92449),i=o(74863)},92449:(e,t,o)=>{"use strict";o.d(t,{init:()=>c,tq:()=>d,tqi:()=>p,tqs:()=>h});var n=o(94428),i=o(74863),r=o(33751),s=o(47987);const a=(e,t)=>{const o={message:"Task execution error",data:{taskName:e.selector,type:void 0===e.payload.dataAttrs?"startup_task":"interactive_task",params:JSON.stringify(void 0===e.payload.dataAttrs?e.payload.data:e.payload.dataAttrs)}};(0,r.logError)(t,{environment:"task_queue",breadcrumb:o}),console.error(t)},_=()=>{if(!document.head)throw new Error("Document must be loaded before queue init");return document.head},l=e=>e((()=>{(0,i.unregisterGlobalTqHandlers)(document.body,_()._tqhl),_()._tqhl=(0,i.registerGlobalTqHandlers)(document.body)})),c=(e=s.onDomReady)=>{const t=_();_()._tq?(t._tqi=n.TaskQueue.migrate(t._tqi,a),t._tqs=n.TaskQueue.migrate(t._tqs,a),l(e)):(e=>{const t=_();t._tqs=new n.TaskQueue(a),t._tqi=new n.TaskQueue(a),l(e),t._tq={setInteractiveHandler:(e,o,n=!1)=>t._tqi.setHandler(e,o,n),setStartupHandler:(o,n,i=!1)=>{t._tqs.setHandler(o,n,i),e((()=>{t._tqs.setupGc(),t._tqs.restart()}))}},e((()=>{t._tqi.setupGc(),(0,i.initMutationObserver)(),(0,i.processTreeOfNodes)(document)}))})(e)},u=e=>()=>{const t=_();if(!t["_"+e])throw new Error(e+" not initialized");return t["_"+e]},d=u("tq"),p=u("tqi"),h=u("tqs")},74863:(e,t,o)=>{"use strict";o.d(t,{initMutationObserver:()=>d,processExecData:()=>_,processTreeOfNodes:()=>u,registerGlobalTqHandlers:()=>p,unregisterGlobalTqHandlers:()=>h});var n=o(92449),i=o(74866);const r={click:1,mouseover:1,mouseout:1,keyup:1,keydown:1,change:1,paste:1},s=["focus","mouseenter","mouseleave"],a=e=>t=>{if(t.type!==e||!t.target||!e)return;let o;if(o=t.target.nodeType===Node.TEXT_NODE?t.target.parentNode:t.target,(0,i.isReactHTMLElement)(o)||!o.dataset)return;let r=o.dataset[`task${e.toUpperCase()[0]+e.slice(1)}`];if(!r){if("click"!==t.type)return;const n=o.closest("[data-task-click]");if(!n)return;o=n,r=n.dataset[`task${e.toUpperCase()[0]+e.slice(1)}`]}if(r){if(o.dataset.prevent&&t instanceof MouseEvent&&"A"===o.tagName){const e=o.hasAttribute("href"),n=t.ctrlKey||t.metaKey;if(e&&n)return}if((0,n.tqi)().push({selector:r,payload:{target:o,dataAttrs:o.dataset,event:t},postponed:!1,createTime:Date.now()}),o.dataset.prevent)return 2&Number(o.dataset.prevent)&&t.stopPropagation(),t.preventDefault(),!1}},_=(e,t)=>{let o={};try{o=JSON.parse(e)}catch(t){console.error("Failed to parse JSON: ",e)}for(let e in o)o.hasOwnProperty(e)&&(0,n.tqs)().push({selector:e,payload:{target:t,data:o[e]},postponed:!1,createTime:Date.now()})},l=e=>{if(e.matches("[data-exec]")){const t=e.dataset.exec||"{}";e.removeAttribute("data-exec"),_(t,e)}},c=e=>{for(const o of s){const i=`data-task-${o}`;if(e.hasAttribute(i)){var t;const r=null!=(t=e.getAttribute(i))?t:"";e.removeAttribute(i),e.addEventListener(o,(t=>{const o=(0,n.tqi)()._handlers[r];Promise.resolve(null).then((()=>{var n;return null==(n=o)?void 0:n({selector:r,payload:{dataAttrs:e.dataset,target:e,event:t},postponed:!1,createTime:Date.now()})})).catch((e=>console.error(e)))}),{passive:!0})}}},u=(e=document)=>{for(const t of e.querySelectorAll("[data-exec]"))(t instanceof HTMLElement||t instanceof SVGElement)&&l(t);for(const t of s)for(const o of e.querySelectorAll(`[data-task-${t}]`))(o instanceof HTMLElement||o instanceof SVGElement)&&c(o)},d=()=>{window._obs=new MutationObserver((function(e){for(let t of e)for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(l(e),c(e),u(e))})),window._obs.observe(document,{subtree:!0,childList:!0,attributes:!0})},p=e=>{const t={};for(let o in r){if(!r.hasOwnProperty(o))continue;const n=a(o);e.addEventListener(o,n),t[o]=n}return t},h=(e,t)=>{for(let o in t)t.hasOwnProperty(o)&&e.removeEventListener(o,t[o])}},81487:(e,t,o)=>{"use strict";o.d(t,{usePageBlockOffset:()=>i});var n=o(67802);const i=()=>(0,n.useNumericVariableValue)(document.body,"--page-block-offset")},35664:(e,t,o)=>{"use strict";o.d(t,{convertKludgesToAttaches:()=>_,isMarusiaPeer:()=>l});var n=o(34892);o(40586),o(20562),o(28539);function i(e,t=[]){const[o,n]=e.split("_");return[o,n,t]}function r(e,t,o=0,n=0){if(n>50)return[[],e.length];const s=[];let a="";for(;o<e.length;){const _=e[o];if("id"===_)a=t[o];else if(","===_&&a)s.push(i(a)),a="";else if("("===_){const[_,l]=r(e,t,o+1,n+1);o=l,s.push(i(a,_)),a=""}else if(")"===_)return""!==a&&s.push(i(a)),[s,o];o++}return a&&s.push(i(a)),[s,o]}let s={};function a(e){if(s[e])return s[e];const t=e?e.length:0,o=[],n=[];let i="";for(let r=0;r<t;r++){const t=e[r],s=t.charCodeAt(0);s>=48&&s<=57||"_"===t||"-"===t?i+=t:"("!==t&&")"!==t&&":"!==t&&","!==t||(""!==i&&(n.push(i),o.push("id"),i=""),n.push(t),o.push(t))}i.length>0&&(n.push(i),o.push("id"));const[a]=r(o,n);return Object.keys(s).length>300&&(s={}),s[e]=a,a}function _(e,t){const o=[];e.fwd_count?o.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&o.push({type:"mail",id:-t,object:{fwd_count:a(e.fwd).length}});for(let t=1;e[`attach${t}_type`];++t)switch(e[`attach${t}_type`]){case"call":o.push({type:e[`attach${t}_type`],id:e[`attach${t}`],initiatorId:(0,n.intval)(e[`attach${t}_call_initiator_id`]),state:e[`attach${t}_call_state`],duration:(0,n.intval)(e[`attach${t}_call_duration`]),receiverId:(0,n.intval)(e[`attach${t}_call_receiver_id`])});break;case"doc":if("audiomsg"===e[`attach${t}_kind`]){const n=e.attachments?JSON.parse(e.attachments)[0]:{};o.push({type:e[`attach${t}_type`],kind:"audio_message",id:e[`attach${t}`],audio_message:n.audio_message});break}default:o.push({type:e[`attach${t}_type`],id:e[`attach${t}`],kind:e[`attach${t}_kind`],productId:e[`attach${t}_product_id`]})}return e.geo&&o.push({type:"geo",id:e.geo}),o}function l(e){return-194070336===e}},73520:(e,t,o)=>{"use strict";o.d(t,{getMessageFromTuple:()=>s});var n=o(93226),i=o(35664),r=o(50722);const s=([e,t,o,s,a,_,l,c,u,d])=>{const p=Object.assign({},_||{},l||{});return Array.isArray(p.marked_users)&&(p.marked_users=p.marked_users.filter((e=>Object.values(n.MARKED_TYPE).includes(e[0])))),{messageId:e,flags:t,peerId:o,date:s,attaches:(0,i.convertKludgesToAttaches)(p,e),subject:p.title||"",text:a,kludges:p,randomId:c,userId:r.Ranges.isChatOrChannelPeer(o)?Number(p.from)||0:o,update_time:d,chat_local_id:u}}},28539:(e,t,o)=>{"use strict";o.d(t,{ADD_MESSAGE:()=>n,FLAG_OUTBOUND:()=>i});o(34788),o(48041),o(73520),o(34892);const n="event_add_message",i=2},93226:(e,t,o)=>{"use strict";var n,i;o.d(t,{MARKED_TYPE:()=>n}),function(e){e[e.MENTIONS=1]="MENTIONS",e[e.CASPER=2]="CASPER"}(n||(n={})),function(e){e.REPLY="reply",e.DOCUMENT="doc",e.MAIL="mail",e.CALL="call",e.STICKER="sticker",e.UGC_STICKER="ugc_sticker"}(i||(i={}))},43844:(e,t,o)=>{"use strict";o.d(t,{ColorScheme:()=>_,ColorSchemeMode:()=>a.ColorSchemeMode,ColorSchemeName:()=>a.ColorSchemeName,colorScheme:()=>l});var n,i=o(82079),r=o(20562),s=o(57458),a=o(54261);!function(e){e.DARK="dark",e.LIGHT="light"}(n||(n={}));class _{init(e){if(this.isExecuted)return;if(this.schemesMap=e.schemesMap,this.setMode(e.mode),this.initSubscribers.forEach((e=>{e()})),(0,s.statlogsValueEvent)("web_dark_theme",this.getMode(),this.getScheme(),Number(this.isDarkScheme())),!_.isSchemesAutoSwitchingSupported())return;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{this.currentMode===a.ColorSchemeMode.Auto&&this.setScheme(e.matches)})),this.isExecuted=!0}setScheme(e){var t,o;_.isSchemesSupported()&&(this.applyScheme(document.body,e?a.ColorSchemeName.Dark:a.ColorSchemeName.Light),this.currentIsDark=e,null==(t=document.querySelector("meta[name=theme-color]"))||t.setAttribute("content",e?a.SchemeColors.Dark:a.SchemeColors.Light),null==(o=document.querySelector("meta[name=color-scheme]"))||o.setAttribute("content",e?"dark":"light"),this.isSchemeSavingAllowed&&(0,i.setCookie)("remixdark_color_scheme",Number(e),365),this.subscribers.forEach((e=>{e()})))}static getAppearanceByScheme(){switch(document.body.getAttribute("scheme")){case a.ColorSchemeName.Dark:case a.ColorSchemeName.WebDark:return"dark"}return"light"}isDarkScheme(){return this.currentIsDark}getMode(){return this.currentMode}setMode(e){let t=!1;switch(e){case a.ColorSchemeMode.Light:t=!1;break;case a.ColorSchemeMode.Dark:t=!0;break;case a.ColorSchemeMode.Auto:if(_.isSchemesAutoSwitchingSupported()){t=window.matchMedia("(prefers-color-scheme: dark)").matches}else e=a.ColorSchemeMode.Light}this.currentMode=e,this.setScheme(t),this.isModeSavingAllowed&&(0,i.setCookie)("remixcolor_scheme_mode",e,365)}getScheme(){return(0,r.isMvk)()?this.getMVKScheme():this.getWebScheme()}getMVKScheme(){return this.isDarkScheme()?a.ColorSchemeName.Dark:a.ColorSchemeName.Light}getWebScheme(){return this.isDarkScheme()?a.ColorSchemeName.WebDark:a.ColorSchemeName.WebLight}applyScheme(e,t){var o;const n=(null==(o=this.schemesMap)?void 0:o[t])||t;e.setAttribute("scheme",n)}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter((t=>e!==t))}}onInit(e){return this.initSubscribers.push(e),()=>{this.initSubscribers=this.initSubscribers.filter((t=>e!==t))}}static isSchemesSupported(){return window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")}static isSchemesAutoSwitchingSupported(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches}constructor(){this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}}let l;l=window.colorScheme?window.colorScheme:new _,window.colorScheme=l,window.isSchemesSupported=_.isSchemesSupported.bind(null)},56329:(e,t,o)=>{"use strict";o.d(t,{processWaf:()=>h});var n=o(48041),i=o(20562);const r=429,s="429.html",a="X-WAF-Redirect",_="waf_ajax_request_enabled",l="mvk_waf_ajax_request_enabled";function c(){return(0,n.partConfigEnabled)((0,i.isMvk)()?l:_)}function u(e=""){return c()&&""!==e}let d=!1;function p(){d||(d=!0,location.reload())}function h(e){if(!c())return!1;let t=!1;if(e instanceof XMLHttpRequest){let o;try{o=e.getResponseHeader(a)}catch(e){}t=u(o||"")}else e&&(t=function(e){return c()&&e.status===r&&e.source===s}(e));return t&&p(),t}},11672:(e,t,o)=>{"use strict";o.d(t,{asyncComponent:()=>r});var n=o(67294),i=o(59397);function r(e,t){return(0,n.lazy)((()=>(0,i.asyncImportLoader)(e,3).then((e=>({default:t(e)})))))}},57570:(e,t,o)=>{"use strict";o.d(t,{processBookmakers:()=>c});var n=o(98236),i=o(20562),r=o(48041);function s(e,t){const{protocol:o}=window.location;return`${o}//${[t,(0,i.getHostName)()].filter(Boolean).join(".")}/${e}`}function a(){const e=window.location.host.split(".");if(!(e.length<3))return e.splice(-3,1).pop()}function _(e,t){return a()!==e&&(window.location.href=s(t,e),!0)}function l(e){const t=a();if(t){const o=function(e){return(0,r.getConfigValue)("bookmaker_groups").find((t=>t[1]===e))}(t);if(o)return window.location.href=s(e),!0}return!1}function c(e,t){for(let e of(0,r.getConfigValue)("bookmaker_groups")){const[,o,n]=e;if(t===n)return _(o,t)}for(let[,o]of Object.entries(e)){const[e,i]=(0,n.matcher)(o,`/${t}`);if(e&&(i.ownerId||i.groupId||i.screenName))for(let e of(0,r.getConfigValue)("bookmaker_groups")){const[o,n,r]=e;if((i.ownerId?Number(i.ownerId):i.groupId?-Number(i.groupId):void 0)===o||i.screenName===r)return _(n,t)}}return l(t)}},9274:(e,t,o)=>{"use strict";function n(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e)}(e):(i(e),Promise.resolve())}function i(e){const t=document.createElement("input"),o=document.activeElement;t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),o.focus()}o.d(t,{_copyWithFakeElement:()=>i,copyToClipboard:()=>n})},85164:(e,t,o)=>{"use strict";function n(e,t){let o;e=Math.max(e,0);const n=Math.floor(e%60);o=n<10?"0"+n:n;const i=(e=Math.floor(e/60))%60;return o=i+":"+o,((e=Math.floor(e/60))>0||t)&&(i<10&&(o="0"+o),o=e+":"+o),o}o.d(t,{formatTime:()=>n})},73497:(e,t,o)=>{"use strict";o.d(t,{dedupeAsyncCallback:()=>i});var n=o(59397);function i(e,t=((...e)=>e)){const o=new Map;return(...i)=>{const r=t(...i);for(const[e,t]of o.entries())if((0,n.isEqual)(r,e))return t;const s=e(...i);return o.set(r,s),s.finally((()=>{o.delete(r)})),s}}},56648:(e,t,o)=>{"use strict";o.d(t,{NarrativeAnalyticEventType:()=>n,sendNarrativeAnalytic:()=>a});var n,i,r=o(57458),s=o(48041);function a(e,t,o="other"){var n,i,a,_,l,c,u,d;const p=(null==(n=t)?void 0:n.title)||void 0,h=(null==(i=t)?void 0:i.customCover)?0:(null==(a=t)?void 0:a.coverStoryId)||0,m=(null==(_=t)?void 0:_.id)||0,f=(null==(l=t)?void 0:l.ownerId)||0,g=null==(u=t)||null==(c=u.stories)?void 0:c.map((e=>e.id)),v={event_type:e,nav_screen:o,narrative_owner_id:f,narrative_id:m,narrative_title:p,story_ids:(null==(d=g)?void 0:d.length)?g:void 0,cover_story_id:h};(0,r.statlogsValueEvent)("narrative_product_analytic",v),(0,s.partConfigEnabled)("narratives_web_analytic_debug")&&console.log("-- narrative analytic",v)}!function(e){e.clickToAddToNarrative="click_to_add_to_narrative",e.addStoryToNarrative="add_story_to_narrative",e.openNarrativeList="open_narrative_list",e.close="close",e.changeSort="change_sort",e.publishNarrative="publish_narrative",e.createNarrative="create_narrative",e.deleteNarrative="delete_narrative",e.clickToEditNarrative="click_to_edit_narrative",e.editNarrative="edit_narrative",e.addToBookmarks="add_to_bookmarks",e.shareNarrative="share_narrative",e.seeMore="see_more",e.addToNarrativeFromActionSheet="add_to_narrative_from_action_sheet"}(n||(n={})),function(e){e.storyArchive="story_archive",e.storyViewer="story_viewer",e.profile="profile",e.feedBlock="narratives_feed_block",e.club="club",e.other="other"}(i||(i={}))},74497:(e,t,o)=>{"use strict";function n(){return location.hostname}o.d(t,{currentHostname:()=>n})},81254:(e,t,o)=>{"use strict";o.d(t,{isRelativeURL:()=>a,isSameSubdomainHostname:()=>_,isVKSiteURLAnySubdomainTarget:()=>u,isVKSiteURLForNav:()=>p,isVKSiteURLSameSubdomainTarget:()=>c});var n=o(20562),i=o(74497);const r=new RegExp(`^(([a-zA-Z0-9\\.\\_\\-]+)\\.)?(${n.VK_HOST_REGEX_UNSAFE.source})$`);function s(e){const t=e.match(r);if(!t)return;const[,,o,n]=t;return{baseDomain:n,subDomain:o}}function a(e){return!/^https?:\/\//i.test(e)}function _(e,t){return!(!n.VK_DOMAIN_REGEX.test(e)||!n.VK_DOMAIN_REGEX.test(t))&&function(e,t){var o,n;const i=null==(o=s(e))?void 0:o.subDomain,r=null==(n=s(t))?void 0:n.subDomain;return i===r}(e,t)}function l(e,t){const o=h(e);return!!o&&(!(!t||!_(function(){const e=(0,i.currentHostname)(),t=s(e);if(!t)return e;return t.baseDomain}(),o.url.hostname))||_((0,i.currentHostname)(),o.url.hostname))}function c(e,t){return!!p(e)&&l(e,t)}function u(e){return p(e)}function d(e){const t=function(e){var t;const o=h(e);if(o)return null==(t=s(o.url.hostname))?void 0:t.baseDomain}(e);return void 0!==t&&n.VK_POSSIBLE_SITE_HOSTS.includes(t)}function p(e){return d(e)}function h(e){if(n.VK_URL_REGEX_STRICT.test(e))try{return{url:new URL(e)}}catch(e){console.error(e)}}},89084:(e,t,o)=>{"use strict";function n(e){window.cur&&window.cur.destroy&&window.cur.destroy.push(e)}o.d(t,{pushNavDestroy:()=>n})},19571:(e,t,o)=>{"use strict";o.d(t,{isVKSiteURLForNav:()=>i.isVKSiteURLForNav,stripVKSiteURLOrigin:()=>_,toMaybeVKSiteURLRelativeName:()=>r});var n=o(20562),i=(o(74497),o(81254));function r(e,t){return a(e,"",t)}function s(e,t){return a(e,"/",t)}function a(e,t,o={}){const{allowAnySubdomainAsCurrent:r=!1,allowWebBaseDomainAsCurrent:s=!1}=o,a=r?(0,i.isVKSiteURLAnySubdomainTarget)(e):(0,i.isVKSiteURLSameSubdomainTarget)(e,s);if(!((0,i.isRelativeURL)(e)||a))return e;const _=new RegExp(`(${n.VK_ORIGIN_PREFIX_REGEX.source})?/?`);return e.replace(new RegExp(_),t)}function _(e){return(0,i.isVKSiteURLForNav)(e)?s(e,{allowWebBaseDomainAsCurrent:!0}):e}},88419:(e,t,o)=>{"use strict";o.d(t,{parseJSON:()=>r});var n=o(33751),i=o(54121);function r(e){try{return JSON.parse(e)}catch(t){const o={environment:"parseJsonError",breadcrumb:{message:"Uncaught json parse error",data:{json:e},category:i.customBreadcrumbCategory}};return(0,n.logError)(t,o),{}}}},17601:(e,t,o)=>{"use strict";o.d(t,{logQuestionError:()=>n});const n=(0,o(24275).createSentryLogger)({debugPrefix:"[Questions Sentry Logger]"})},96269:(e,t,o)=>{"use strict";o.d(t,{QuestionsStatCollector:()=>_});var n=o(68312),i=o(56525),r=o(48041),s=o(18714),a=o(56543);class _{logClickEvent(e,t={}){const o={type:i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM,[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM]:{type:e,screen:t.navScreen||window.cur.module||""}};t.questionReceiverId&&(o[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_receiver_id=t.questionReceiverId),t.questionAuthorId&&(o[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_author_id=t.questionAuthorId),t.questionText&&(o[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_text=t.questionText);const n={type:i.EventItemType.QUESTION,id:t.questionId||0};(0,r.partConfigEnabled)("profile_questions_analytic_debug")&&console.log(`--${e}`,o,n),this.clickStatCollector.logEvent(o,n)}logOpeningEvent(e,t,o){let n;switch(t){case a.QuestionsBoxRef.STORY:n=o===s.QuestionAnalyticBoxName.askQuestion?s.QuestionAnalyticEventType.openAskQuestionFromStory:s.QuestionAnalyticEventType.openMyQuestionsFromStory;break;case a.QuestionsBoxRef.SNIPPET:n=o===s.QuestionAnalyticBoxName.askQuestion?s.QuestionAnalyticEventType.openAskQuestionFromSnippet:s.QuestionAnalyticEventType.openMyQuestionsFromSnippet;break;default:n=o===s.QuestionAnalyticBoxName.askQuestion?s.QuestionAnalyticEventType.openAskQuestionFromUrl:s.QuestionAnalyticEventType.openMyQuestionsFromUrl}const i={questionReceiverId:e};o===s.QuestionAnalyticBoxName.askQuestion&&(i.questionAuthorId=window.vk.id),this.logClickEvent(n,i)}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.clickStatCollector=new n.ClickStatCollector(this.productionStatCollector)}}},13781:(e,t,o)=>{"use strict";o.d(t,{logQuestionsOpeningEvent:()=>i});const n=new(o(96269).QuestionsStatCollector);function i(e,t,o){n.logOpeningEvent(e,t,o)}},18714:(e,t,o)=>{"use strict";var n,i;o.d(t,{QuestionAnalyticBoxName:()=>i,QuestionAnalyticEventType:()=>n}),function(e){e.clickToQuestion="click_to_question",e.reply="reply",e.replyAgain="reply_again",e.sharing="sharing",e.shareToStory="share_to_story",e.shareToWall="share_to_wall",e.shareToGroup="share_to_group",e.shareToIm="share_to_im",e.copyLink="copy_link",e.openStory="open_story",e.callFriends="call_friends",e.openSettings="open_settings",e.openProfile="open_profile",e.block="block",e.unblock="unblock",e.deleteAllQuestions="delete_all_questions",e.delete="delete",e.cancelDelete="cancel_delete",e.cancelDeleteAllAuthorQuestions="cancel_delete_all_author_questions",e.cancelDeleteAllAnonymousQuestions="cancel_delete_all_anonymous_questions",e.next="next",e.close="close",e.clickToSend="click_to_send",e.sendQuestion="send_question",e.cancelSendQuestion="cancel_send_question",e.cancelWriteAnswer="cancel_write_answer",e.closeMyQuestions="close_my_questions",e.openMyQuestionsFromUrl="open_my_questions_from_url",e.openAskQuestionFromUrl="open_ask_question_from_url",e.openMyQuestionsFromSnippet="open_my_questions_from_snippet",e.openAskQuestionFromSnippet="open_ask_question_from_snippet",e.openMyQuestionsFromStory="open_my_questions_from_story",e.openAskQuestionFromStory="open_ask_question_from_story"}(n||(n={})),function(e){e[e.askQuestion=0]="askQuestion",e[e.myQuestions=1]="myQuestions"}(i||(i={}))},2204:(e,t,o)=>{"use strict";o.d(t,{createReactInitiator:()=>n.createReactInitiator});var n=o(61736)},61736:(e,t,o)=>{"use strict";o.d(t,{createReactInitiator:()=>n.createReactInitiator});var n=o(35075)},35075:(e,t,o)=>{"use strict";o.d(t,{createReactInitiator:()=>s});o(11010);var n=o(34788),i=o(85893),r=o(34972);o(48041);function s(e,t=null,o){const s=(0,r.createBasicReactInitiator)(t,o);return(0,n._)({},s,{render:function(t){return s.render((0,i.jsx)(e,(0,n._)({},t)))}})}},34972:(e,t,o)=>{"use strict";o.d(t,{createBasicReactInitiator:()=>s});var n=o(73935),i=o(89084),r=o(64161);function s(e=null,t={}){const{onRendered:o,onMounted:s,onUpdated:a,onUnmounted:_,destroyAfterNavigation:l=!0}=t,c=!e;let u=null;function d(){var e;if(!u)return!1;const t=n.unmountComponentAtNode(u);return c&&u.remove(),u=null,null==(e=_)||e(t),t}return{render:function(t,_={}){var c;let p=!1;try{u||(p=!0,u=function(e){if("function"!=typeof e)return e;const t=e();if(!t)throw new Error("Target container not found. Verify that it exists before render.");return t}(function(){if(e)return e;const t=(0,r.createReactContainer)();return document.body.appendChild(t),t}())),n.render(t,u)}catch(e){throw _.asyncBaseError?new Error(e.message,{cause:_.asyncBaseError}):e}if(null==(c=o)||c(d),p){var h;const e=u;l&&(0,i.pushNavDestroy)((()=>{e===u&&d()})),null==(h=s)||h(d)}else{var m;null==(m=a)||m(d)}},unmount:d,getContainer:function(){return u},isMounted:function(){return!!u}}}},64161:(e,t,o)=>{"use strict";function n(){const e=document.createElement("div");return e.id=`${i}_${r++}`,e}o.d(t,{createReactContainer:()=>n});const i=`rc_${(0,o(34892).srand)()}`;let r=0},50442:(e,t,o)=>{"use strict";o.d(t,{parseReactWikiLinks:()=>c});var n=o(85893),i=o(67294),r=o(84688);const s={target:"_self",withVKUILink:!1,withNewRegex:!1},a=new RegExp(`\\[?(${/(?:http(s)?:\/\/)/.source}?${/[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+/.source})${/(?:\|([\wёЁА-я ]{1,}))/.source}?\\]?`),_=new RegExp(`(${a.source}|${/\[(id|public|club|event)-?[\d]{1,}\|[\wёЁА-я ]{1,}\]/.source})`,"gi"),l=/^(http(s)?:\/\/)?vk.(com|ru)/gi;function c(e,t=s){const{target:o=s.target,withVKUILink:a=s.withVKUILink}=t,c=e.match(t.withNewRegex?_:/\[(.*?)\]/g),u=c?c.map((e=>e.replace(/\[|(.*?)\]/g,"$1"))):[];if(!c||!u.length)return(0,n.jsx)(i.Fragment,{children:e});const d=a?r.Link:"a",p=u.map(((e,i)=>{var r,s;const[a,_]=e.split("|"),c=(null==(r=t.hrefMap)?void 0:r[a])||(l.test(a)?a.replace(l,""):a),u=null==(s=t.onClickMap)?void 0:s[a];return(0,n.jsx)(d,{href:c,target:o,onClick:u,children:_||a},i)})),h=[];return c.forEach(((t,o)=>{const n=e.indexOf(t);h.push(e.substr(0,n)),h.push(p[o]),e=e.slice(n+t.length)})),h.push(e),(0,n.jsx)(i.Fragment,{children:h})}},84779:(e,t,o)=>{"use strict";function n(e,t){let o,n=t.timeout,i=t.onLoad,r=t.onError,s=document.createElement("script");if(s.addEventListener("load",a),s.addEventListener("readystatechange",a),s.addEventListener("error",_),t.attributes)for(const[e,o]of Object.entries(t.attributes))null==o||("boolean"==typeof o?s.toggleAttribute(e,o):s.setAttribute(e,o));function a(){s.readyState&&"loaded"!==s.readyState&&"complete"!==s.readyState||(l(),i&&i())}function _(){l(),r&&r()}function l(){clearTimeout(o),s.removeEventListener("load",a),s.removeEventListener("readystatechange",a),s.removeEventListener("error",_)}return s.src=e,document.head.appendChild(s),n&&(o=setTimeout(_,n)),{destroy:function(){l()}}}o.d(t,{loadScript:()=>n})},15551:(e,t,o)=>{"use strict";o.d(t,{onMarketItemCardOpen:()=>a});o(23294),o(82089),o(91686);var n=o(57576),i=o(96821),r=o(68312),s=o(95950);function a({refSource:e,itemIdx:t,screen:o,trackCode:a}){!function(e){(0,n.setStatData)({ref_source:e})}(e),o&&(0,s.setCurrentScreen)(o);var _;const l=null!=(_=new URLSearchParams(window.location.search).get("w"))?_:"",[c,u]=l.slice(8).replace(/[^\d_]/g,"").split("_"),d=isNaN(Number(window.cur.query_id))?0:Number(window.cur.query_id);i.clickAnalytics.logTransitionToItemClick({screen:o||(0,n.getStatScreen)(),refSource:e,params:{owner_id:Number(c),item_id:Number(u),item_idx:null!=t?t:0,previous_screen:(0,r.getScreen)()||void 0,search_query_id:d,track_code:a}})}},23294:(e,t,o)=>{"use strict";o.d(t,{marketDebug:()=>a});o(34041);var n=o(48041),i=o(91686);const r="extended_client_logging",s="market_extended_client_logging";function a(e,t,...o){((0,n.partConfigEnabled)(r)||i.vkLocalStorage.getItem(s))&&("error"===e?console.error(`[market ${t}]: `,o):"warn"===e?console.warn(`[market ${t}]: `,o):"info"===e?console.info(`[market ${t}]: `,o):console.debug(`[market ${t}]: `,o))}},57576:(e,t,o)=>{"use strict";o.d(t,{getStatScreen:()=>_,setStatData:()=>a});var n=o(34788),i=o(91686);const r="market_stat_data";function s(){const e=i.vkSessionStorage.getItem(r);return e?JSON.parse(e):{}}function a(e){const t=s();i.vkSessionStorage.setItem(r,JSON.stringify((0,n._)({},t,e)))}function _(){const{screen:e}=s();return e||window.cur.module}},12022:(e,t,o)=>{"use strict";o.d(t,{marusiaAudioStats:()=>_});var n=o(48041),i=o(87866),r=o(39778),s=o(21155);class a{startLoop(){this.stopLoop(),this.sendIsPlayingInterval=setInterval(this.sendTrackPlaying.bind(this),a.SEND_IS_PLAYING_INTERVAL),this.currentTrackStartPlayTimeMs=this.getCurrentTime()}getCurrentTime(){return(new Date).getTime()}stopLoop(){this.sendIsPlayingInterval&&(clearInterval(this.sendIsPlayingInterval),this.sendIsPlayingInterval=null),this.currentTrackStartPlayTimeMs=null}sendTrackPlaying(){if(!this.playerAdapter)return void this.stopLoop();if(!this.playerAdapter.isMarusiaTrack())return void this.stopLoop();const e=this.playerAdapter.getAudio();e?(this.sendDeviceStatEvent(s.PlayerDeviceStatEventType.TRACK_PLAYING,s.ActivationSource.playback,e),this.sendPlayerStatusEvent("PLAY",e)):this.stopLoop()}sendPlayerStatusEvent(e,t){var o,n,r;if(!this.playerAdapter||!this.currentTrackStartPlayTimeMs)return;const s=null==(o=(0,i.getAudioExtra)(t))?void 0:o.voiceAssistant;if(!s)return;var _;const l=null!=(_=null==(n=s.source)?void 0:n.url)?_:t.url;var c;const u=null!=(c=null==(r=s.source)?void 0:r.skill_name)?c:a.GLOBAL,d={meta:{source:s.source,title:t.title,url:l},url:l,volume:this.playerAdapter.getVolume(),repeat:this.playerAdapter.isRepeatCurrentAudio(),state:e,updated:(new Date).getTime()/1e3,position:this.playerAdapter.getTrackPosition(),elapsed:this.playerAdapter.getProgressInSeconds(),duration:t.duration,created:this.currentTrackStartPlayTimeMs,skill:u,random:this.playerAdapter.isShuffledPlaylist()};this.api.sendPlayerStatus(u,d)}sendDeviceStatEvent(e,t,o){var n,r,s,a;if(!o||!this.playerAdapter)return;const _=null==(n=(0,i.getAudioExtra)(o))?void 0:n.voiceAssistant;if(!_)return;var l,c,u,d,p;const h={type:e,phrase_id:null!=(l=null==(r=_.source)?void 0:r.phrase_id)?l:"",timestamp:Math.round((new Date).getTime()/1e3),data:{track_id:null!=(c=_.track_id)?c:"",position:this.playerAdapter.getProgress(),duration:this.playerAdapter.getAudio().duration,activated_by:t,source_type:null!=(u=null==(s=_.source)?void 0:s.type)?u:"",flags:null!=(d=_.flags)?d:"",playback_duration:this.playerAdapter.getListenedTime(),audio_type:null!=(p=null==(a=_.source)?void 0:a.media_type)?p:""}};this.api.sendDeviceStat([h])}getActivatedBy(e,t){switch(e){case s.PlayerDeviceStatEventType.TRACK_STOP:return s.ActivationSource.os_system;case s.PlayerDeviceStatEventType.TRACK_START:case s.PlayerDeviceStatEventType.TRACK_RESUME:if(t.isAutoPlayed())return s.ActivationSource.playback;return t.getSequence()?s.ActivationSource.playback:s.ActivationSource.app_ui;default:return s.ActivationSource.os_system}}onPlay(e){if(!(0,n.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();if(!t)return;const o=t.fullId,i=this.currentAudioId===o;this.currentAudioId=o,!i&&this.currentAudio&&this.onEnded(e,this.currentAudio),this.currentAudio=t;const r=i?s.PlayerDeviceStatEventType.TRACK_RESUME:s.PlayerDeviceStatEventType.TRACK_START,a=e.isAutoPlayed()?s.ActivationSource.playback:s.ActivationSource.app_ui;this.sendDeviceStatEvent(r,a,t),this.sendPlayerStatusEvent("PLAY",t),this.startLoop()}onPause(e){if(!(0,n.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();t&&(this.sendDeviceStatEvent(s.PlayerDeviceStatEventType.TRACK_PAUSE,s.ActivationSource.os_system,t),this.sendPlayerStatusEvent("PAUSE",t),this.stopLoop())}onEnded(e,t){(0,n.partConfigEnabled)("marusia_web_music_stats")&&(this.playerAdapter=e,t&&(this.sendDeviceStatEvent(s.PlayerDeviceStatEventType.TRACK_STOP,s.ActivationSource.os_system,t),this.sendPlayerStatusEvent("STOP",t),this.stopLoop()))}constructor(){this.api=new r.MarusiaSharedApi,this.sendIsPlayingInterval=null,this.playerAdapter=null,this.currentTrackStartPlayTimeMs=null,this.currentAudioId=null,this.currentAudio=null}}a.SEND_IS_PLAYING_INTERVAL=15e3,a.GLOBAL="__global__";const _=new a},39778:(e,t,o)=>{"use strict";o.d(t,{MarusiaSharedApi:()=>u});var n=o(11010),i=o(34788),r=o(36181),s=o(29629),a=o(28527),_=o(71619),l=o(31461);const c="https://vc.go.mail.ru";class u{generateDeviceId(){return(0,a.generateDeviceId)("vk_web",this.debug)}processBackendCommands(e,t){const o={phrase_id:e,command_ids:JSON.stringify(t)};return(0,r.api)("marusia.processCommands",o)}getSuggests(e){const t={has_unread_messages:Number(e)};return(0,r.api)("marusia.getSuggests",t)}getWebStatic(){return(0,r.api)("marusia.getWebStatic",{})}getWebSession(e){const t={device_id:e};return(0,r.api)("marusia.getWebSession",t)}revokeWebSession(e){const t={device_id:e};return(0,r.api)("marusia.revokeWebSession",t)}getLastMessageCommands(){return(0,r.api)("marusia.getLastMessageCommands",{})}sendStartSessionEvent(){return(0,r.api)("marusia.sendStartSessionEvent",{})}getOnboarding(){return(0,r.api)("marusia.getOnboarding",{})}isBackendCommand(e){var t=this;return(0,n._)((function*(){var o;const n=null==(o=(yield t.getInitConfig()).marusiaBackendCommands)?void 0:o.commands;return!n||n.some((t=>{var o,n,i,r,s;if("media"===e.type)return"vk"===(null==(n=e.meta)||null==(o=n.source)?void 0:o.type)&&(e.type===t.type&&e.media_type===t.media_type);if("playlist"===e.type&&"vk"!==(null==(s=e.tracks[0])||null==(r=s.meta)||null==(i=r.source)?void 0:i.type))return!1;return e.type===t.type}))}))()}getInitConfig(){return null===this.initConfigCache&&(this.initConfigCache=(0,r.api)("marusia.getInitConfig",{device_id:this.generateDeviceId(),tts_type:"mp3"})),this.initConfigCache}sendMessage(e,t,o){return(0,r.api)("messages.send",{peer_id:e,random_id:Math.round(2147483647*Math.random()),payload:JSON.stringify(o),message:t})}reloadAudios(e){return Promise.resolve([])}getApiHost(){return this.getInitConfig().then((e=>e.marusiaServerType?e.marusiaServerType:{server_url:c,skill:""}))}makeRequest(e,t={},o={}){var r=this;return(0,n._)((function*(){const n=yield(0,s.getSession)(r),a=yield r.getApiHost(),l=a.server_url,u=r.generateDeviceId(),d=(yield r.getInitConfig()).maskedChatId,p=(0,i._)({},t,{dialog_mode:"vk_bot",session_id:n.session_id,device_id:u,chat_id:":vk:chat:"+d});l!==c&&(p.skillserver_type=a.skill);const h=new URLSearchParams(p).toString();let m=!0,f=null;try{f=yield fetch(`${l}/${e}?${h}`,(0,i._)({method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.session_secret}`}},o)),400===f.status&&(m=!1,f=null)}catch(e){}if(!m)return yield(0,s.revokeSession)(r),r.makeRequest(e,t,o);if(!f)throw new Error(_.MarusiaError.API_ERROR);return f.json()}))()}getPreparedCapabilities(){var e=this;return(0,n._)((function*(){const t=(yield e.getInitConfig()).capabilities.capabilities2;let o={};return t&&(o=t.reduce(((e,t)=>(0,i._)({},e,{[t.capability]:t.enabled})),{})),o}))()}getDefaultOptions(e){var t=this;return(0,n._)((function*(){const o=yield t.getPreparedCapabilities();return{body:JSON.stringify((0,i._)({},e,{capabilities2:{capabilities:o}}))}}))()}addChunk(e,t,o=!1,i,r){var s=this;return(0,n._)((function*(){const n={last:o?1:0,phrase_id:e,chunk_num:t},a={signal:r,body:i};return(yield s.makeRequest("phrase/add",n,a)).result}))()}createAsrPhrase(e,t){var o=this;return(0,n._)((function*(){const n={};e&&(n.player_data=e);const i=yield o.getDefaultOptions(n);return t&&(i.signal=t),o.makeRequest("phrase/create",{no_kw:1},i)}))()}phraseCreateText(e,t,o){var i=this;return(0,n._)((function*(){const n={text:e,refuse_tts:1},r=null!=t?t:{};o&&(r.player_data=o);const s=yield i.getDefaultOptions(r);return i.makeRequest("phrase/create/text",n,s)}))()}phraseCreateEvent(e,t,o){var i=this;return(0,n._)((function*(){const n={event:e,refuse_tts:1},r=null!=t?t:{};o&&(r.player_data=o);const s=yield i.getDefaultOptions(r);return i.makeRequest("phrase/create/event",n,s)}))()}getPhraseResult(e){var t=this;return(0,n._)((function*(){const o={phrase_id:e,capabilities2:JSON.stringify({capabilities:yield t.getPreparedCapabilities()})};return t.makeRequest("phrase/result",o,{method:"GET"})}))()}upgradeToken(e){var t=this;return(0,n._)((function*(){const o={app_id:l.MARUSIA_APP_ID},n={body:JSON.stringify({phrase_info:e.phrase_info})};return t.makeRequest("account/vk/upgrade_token",o,n)}))()}sendDeviceStat(e){const t={body:JSON.stringify({events:e})};return this.makeRequest("device/stat",{},t)}sendPlayerStatus(e,t){const o={as_global:1,skill_id:e},n={body:JSON.stringify(t)};return this.makeRequest("player/status",o,n)}skillList(e){const t={category:e,size:10,page:0,use_all_platforms:0};return this.makeRequest("skill_list",t,{method:"GET"})}skillListCategories(){return this.makeRequest("skill_list/categories",{add_featured:1,use_all_platforms:0},{method:"GET"})}constructor(e){this.debug=!1,this.initConfigCache=null,this.debug=!!e}}},28536:(e,t,o)=>{"use strict";o.d(t,{marusiaStats:()=>r});var n=o(68312),i=o(39108);const r=new class{logChatOpen(e){const t={type:n.NavigationProductionStatEventTypes.TYPE_MARUSIA_NAVGO,subtype:n.NavigationProductionStatEventTypes.GO,screen:"im",screen_prev:e};this.navStatCollector.logEvent(t)}logModuleLoadError(e){var t,o;this.devNullStatCollector.logEvent({key:"marusia_web_load_error",value_str:e,value:(null==(o=window.vk)||null==(t=o.statsMeta)?void 0:t.st)?1:0})}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.navStatCollector=new n.NavigationStatCollector(this.productionStatCollector),this.devNullStatCollector=new i.DevNullStatCollector(new i.CustomStatCollector)}}},31461:(e,t,o)=>{"use strict";o.d(t,{MARUSIA_APP_ID:()=>n});const n=6463690},28527:(e,t,o)=>{"use strict";o.d(t,{generateDeviceId:()=>s});var n=o(59397),i=o(61286);const r="marusia-device-id";function s(e,t){let o=n.localStorage.getItem(r);if(!o){o=`:${t?"d":"c"}:${"chat"}:${e}:${(0,i.uuid)(32)}`,n.localStorage.setItem(r,o)}return o}},29629:(e,t,o)=>{"use strict";o.d(t,{getSession:()=>s,revokeSession:()=>l});var n=o(11010);let i,r=3;function s(e){return a.apply(this,arguments)}function a(){return(a=(0,n._)((function*(e){if(!i){const t=e.generateDeviceId();i=e.getWebSession(t)}try{return yield i}catch(t){if(console.error("get session error",t),r<3)return r+=1,_(),s(e);throw new Error("get session error")}}))).apply(this,arguments)}function _(){i=void 0}function l(e){return _(),e.revokeWebSession(e.generateDeviceId())}},71619:(e,t,o)=>{"use strict";var n,i;o.d(t,{MarusiaError:()=>i}),function(e){e.kws="kws",e.listen_command="listen_command",e.button="button",e.text="text",e.suggest="suggest",e.skill="skill",e.widget="widget",e.other="other"}(n||(n={})),function(e){e.HIDDEN="HIDDEN",e.BACKEND_COMMAND_TIMEOUT="BACKEND_COMMAND_TIMEOUT",e.USER_INTERRUPT="USER_INTERRUPT",e.ATTACH_LOAD_TIMEOUT="ATTACHES_LOAD_TIMEOUT",e.API_ERROR="API_ERROR"}(i||(i={}))},84002:(e,t,o)=>{"use strict";var n;o.d(t,{MarusiaMediaType:()=>n}),function(e){e[e.music=1]="music",e[e.radio=2]="radio",e[e.noise=3]="noise",e[e.tale=4]="tale",e[e.podcast=5]="podcast",e[e.books=6]="books",e[e.video=8]="video"}(n||(n={}))},21155:(e,t,o)=>{"use strict";var n,i;o.d(t,{ActivationSource:()=>i,PlayerDeviceStatEventType:()=>n}),function(e){e.TRACK_START="player.track_start",e.TRACK_STOP="player.track_stop",e.TRACK_RESUME="player.track_resume",e.TRACK_PAUSE="player.track_pause",e.TRACK_PLAYING="player.track_playing"}(n||(n={})),function(e){e.playback="playback",e.backend_new_media="backend_new_media",e.backend_controls="backend_controls",e.os_ui="os_ui",e.os_system="os_system",e.app_ui="app_ui",e.playback_limit="playback_limit"}(i||(i={}))},61286:(e,t,o)=>{"use strict";o.d(t,{uuid:()=>n});o(84002),o(28539);function n(e=32){return[...Array(e).keys()].reduce((e=>`${e}${Math.floor(16*Math.random()).toString(16)}`),"")}},82531:(e,t,o)=>{"use strict";var n;o.d(t,{METRICS_SCOPE:()=>n}),function(e){e.USER_INFO_STATS="USER_INFO_STATS",e.PERFORMANCE_STATS="PERFORMANCE_STATS",e.ADBLOCK_STATS="ADBLOCK_STATS",e.MODULE_NAVIGATION_STATS="MODULE_NAVIGATION_STATS",e.BROWSER_CERTIFICATE_SUPPORT="CERT_STATS",e.WASM_SUPPORT="WASM_STATS"}(n||(n={}))},86574:(e,t,o)=>{"use strict";o.d(t,{CooldownManager:()=>r});var n=o(34788),i=o(91686);class r{getMetricsState(){const e=i.vkLocalStorage.getItem(this.storageName);return e?JSON.parse(e):{timestamps:{}}}getMetricName(e){if("number"==typeof this.cooldown)return null!=e?e:"default";if(!e)throw new Error("The metric name is required for a complex cooldown configuration.");return e}getMetricTTL(e){return"number"==typeof this.cooldown?this.cooldown:this.cooldown[e]}checkMetricCooldown(e,t){var o;return(!(null==(o=this.options.invalidationReasons)?void 0:o.dateChange)||new Date(t).toDateString()===(new Date).toDateString())&&t+this.getMetricTTL(e)>Date.now()}isMetricOnCoolDown(e){const t=this.getMetricName(e);var o;const n=null!=(o=this.getMetricsState().timestamps[t])?o:0;return this.scheduleCleanOutdatedMetrics(),this.checkMetricCooldown(t,n)}updateMetricTimestamp(e){const t=this.getMetricName(e),o=this.getMetricsState();o.timestamps[t]=Date.now(),i.vkLocalStorage.setItem(this.storageName,JSON.stringify(o)),this.scheduleCleanOutdatedMetrics()}cleanOutdatedMetrics(){const e=this.getMetricsState(),t=(0,n._)({},e);Object.entries(e.timestamps).forEach((([e,o])=>{this.checkMetricCooldown(e,o)||delete t.timestamps[e]})),i.vkLocalStorage.setItem(this.storageName,JSON.stringify(t))}scheduleCleanOutdatedMetrics(){this.options.cleanOutdatedMetrics&&!this.isOutdatedMetricsCleanScheduled&&(this.isOutdatedMetricsCleanScheduled=!0,requestIdleCallback((()=>{this.isOutdatedMetricsCleanScheduled=!1,this.cleanOutdatedMetrics()}),{timeout:5e3}))}constructor(e,t,o,n={}){this.id=e,this.scope=t,this.cooldown=o,this.options=n,this.isOutdatedMetricsCleanScheduled=!1,this.storageName=`@METRICS_${e||"GUEST"}_${t}`}}},98870:(e,t,o)=>{"use strict";var n=o(83092),i=o(98116);const r=(0,i.createEvent)(),s=(0,i.createEvent)();r.watch((()=>(0,n.handleDataLoadingStart)())),s.watch((()=>(0,n.handleDataLoadingFinish)()))},83092:(e,t,o)=>{"use strict";o.d(t,{handleDataLoadingFinish:()=>d,handleDataLoadingStart:()=>u,handlePageLoadingFinish:()=>c,handlePageLoadingStart:()=>l});var n=o(88066),i=o(54600),r=o(48041);o(98870);const s=new i.ModuleNavigationStatCollector(n.NetworkStatCollectorInstance);function a(){return"performance"in window&&"mark"in window.performance&&(0,r.partConfigEnabled)("measure_module_navigation_stats")}function _(){window.performance.clearMarks(i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START),window.performance.clearMarks(i.ModuleNavigationStatMarks.PERF_MARK_DATA_START),window.performance.clearMeasures(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE),window.performance.clearMeasures(i.ModuleNavigationStatMarks.PERF_MEASURE_DATA),window.performance.clearMeasures(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE_WITH_DATA)}function l(){a()&&(_(),window.performance.mark(i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START))}function c(){if(a())try{const e=window.performance.measure(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE,i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);s.logEvent({step:"page",value:Math.round(e.duration).toString()})}catch(e){0}}function u(){a()&&window.performance.mark(i.ModuleNavigationStatMarks.PERF_MARK_DATA_START)}function d(){if(a()){try{const e=window.performance.measure(i.ModuleNavigationStatMarks.PERF_MEASURE_DATA,i.ModuleNavigationStatMarks.PERF_MARK_DATA_START);s.logEvent({step:"data",value:Math.round(e.duration).toString()})}catch(e){0}try{const e=window.performance.measure(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE_WITH_DATA,i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);s.logEvent({step:"page_with_data",value:Math.round(e.duration).toString()})}catch(e){0}}}},85229:(e,t,o)=>{"use strict";o.d(t,{initNavigationStats:()=>r});var n=o(56520),i=o(58424);const r=()=>{var e;let t=!1;i.navigationStat.sendTabOpen(),(0,n.handleModuleChanged)((null==(e=window.cur)?void 0:e.module)||""),document.hidden||i.navigationStat.sendShow(),window.addEventListener("visibilitychange",(()=>{t||(document.hidden?i.navigationStat.sendHide():i.navigationStat.sendShow())})),window.addEventListener("beforeunload",(()=>{t=!0,document.hidden||i.navigationStat.sendHide(),i.navigationStat.sendTabClose()}))}},6226:(e,t,o)=>{"use strict";o.d(t,{createDebugConsole:()=>i,createStorageKey:()=>r});const n=(0,o(90426).makeSharedState)("debug-console-flags",(()=>({})),{version:0}),i=e=>new Proxy(console,{get(t,o,i){switch(o){case"debug":case"dir":case"error":case"info":case"log":case"table":case"trace":case"warn":{var r,s;const i=t[o];var a;const _=null!=(a=null==(s=window.nav)||null==(r=s.objLoc)?void 0:r[e])?a:n()[e];return _!==n()[e]&&(n()[e]=_),(...e)=>{_&&i.call(t,...e)}}default:return Reflect.get(t,o,i)}}}),r=({module:e,page:t,entity:o})=>[e,t,o].filter(Boolean).join("-")},24825:(e,t,o)=>{"use strict";o.d(t,{shouldBeMeasured:()=>r});o(91686);var n=o(58424);o(59397);const i=["app","wall_donut","unknown","invite","wall_archive","support","helpdesk","abuse","noSpam","sf"],r=()=>{const e=n.navigationStat.getModule();return!i.includes(e)}},58424:(e,t,o)=>{"use strict";o.d(t,{navigationStat:()=>r});var n=o(62174);const i=new(o(26654).ProductionStatCollector),r=new n.NavigationStatCollector(i)},67852:(e,t,o)=>{"use strict";o.d(t,{AudioNetworkStatCollector:()=>i});var n=o(66003);class i{logEvent(e,t,o){const i={network_type:t,network_effective_type:o,type:n.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM,[n.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM]:e};this.networkStatCollector.logEvent(i)}constructor(e){this.networkStatCollector=e}}},88066:(e,t,o)=>{"use strict";o.d(t,{AudioNetworkStatCollector:()=>i.AudioNetworkStatCollector,AudioNetworkType:()=>r.AudioNetworkType,NetworkStatCollector:()=>n.NetworkStatCollector,NetworkStatCollectorInstance:()=>n.NetworkStatCollectorInstance});var n=o(25747),i=o(67852),r=o(66003)},54600:(e,t,o)=>{"use strict";o.d(t,{ModuleNavigationStatCollector:()=>u,ModuleNavigationStatMarks:()=>c});var n=o(34788),i=o(82531),r=o(86574),s=o(66003),a=o(31495),_=o(58424),l=o(24825);const c={PERF_MARK_PAGE_START:"__navpagemark",PERF_MEASURE_PAGE:"__navpagemeasure",PERF_MEASURE_ASYNC_PAGE_RENDER:"__navasyncpagerendermeasure",PERF_MARK_DATA_START:"__navdatamark",PERF_MEASURE_DATA:"__navdatameasure",PERF_MEASURE_PAGE_WITH_DATA:"__navpagewithdatameasure"};class u{makeCooldownKey(e){return[e.screen,e.step].join("_")}logEvent(e){const t=a.default.getConnectionEffectiveType(),o=_.navigationStat.getModule(),i=_.navigationStat.getScreen("")||o,r=(0,n._)({module:o,screen:i},e),c=this.makeCooldownKey(r);if(r.value&&(0,l.shouldBeMeasured)()&&!this.cooldownManager.isMetricOnCoolDown(c))return this.cooldownManager.updateMetricTimestamp(c),this.moduleNavigationStatCollector.logEvent({network_type:"UNKNOWN",network_effective_type:t,type:s.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM,[s.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM]:r})}constructor(e){var t;this.cooldownManager=new r.CooldownManager(null==(t=window.vk)?void 0:t.id,i.METRICS_SCOPE.MODULE_NAVIGATION_STATS,288e5,{cleanOutdatedMetrics:!0}),this.moduleNavigationStatCollector=e}}},25747:(e,t,o)=>{"use strict";o.d(t,{NetworkStatCollector:()=>r,NetworkStatCollectorInstance:()=>s});var n=o(33751),i=o(70956);class r{logEvent(e){e.type&&e[e.type]?(0,i.saveNetworkStats)(e):(0,n.logError)(new Error("NetworkStatCollector: invalid event."))}}const s=new r},66003:(e,t,o)=>{"use strict";var n,i;o.d(t,{AudioNetworkType:()=>i,NetworkStatEventTypes:()=>n}),function(e){e.TYPE_NETWORK_AUDIO_ITEM="type_network_audio_item",e.TYPE_MODULE_NAVIGATION_STATS_ITEM="type_module_navigation_stats_item"}(n||(n={})),function(e){e.FRAGMENT_LOADED="fragment_loaded",e.FRAGMENT_STALLED="fragment_stalled"}(i||(i={}))},95824:(e,t,o)=>{"use strict";o.d(t,{feedOpenItemCollector:()=>s});var n=o(34788),i=o(56525),r=o(68312);const s=new class{logEvent(e,t,o){const r=(0,n._)({},this.productionStatCollector.getBaseEvent(o),{type:i.ClickProductionStatEventTypes.TYPE_FEED_OPEN_ITEM,[i.ClickProductionStatEventTypes.TYPE_FEED_OPEN_ITEM]:e});this.clickStatCollector.logEvent(r,t)}constructor(){this.productionStatCollector=new r.ProductionStatCollector,this.clickStatCollector=new r.ClickStatCollector(this.productionStatCollector)}}},96825:(e,t,o)=>{"use strict";o.d(t,{feedInteractionItemStatCollector:()=>r});var n=o(56525),i=o(68312);const r=new class{logEvent(e,t){const o={type:n.ClickProductionStatEventTypes.TYPE_FEED_INTERACTION_ITEM,[n.ClickProductionStatEventTypes.TYPE_FEED_INTERACTION_ITEM]:e},i={type:t};this.clickStatCollector.logEvent(o,i)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},63549:(e,t,o)=>{"use strict";o.d(t,{getImageMinWidth:()=>n});const n=e=>Math.ceil(e*Math.max(window.devicePixelRatio,1))},48542:(e,t,o)=>{"use strict";o.d(t,{ASK_QUESTION_BOX_URL_PREFIX:()=>i,MY_QUESTIONS_BOX_URL_PARAMETER:()=>n});const n="question",i="ask_question"},83399:(e,t,o)=>{"use strict";o.d(t,{getQuestions:()=>i,getUsers:()=>r});var n=o(36181);function i(e="",t=15){return(0,n.api)("questions.get",{owner_id:window.vk.id,start_from:e,limit:t,extended:1,fields:"photo_50,photo_100,first_name_gen,last_name_gen,domain"})}function r(e){return(0,n.api)("users.get",{user_ids:e.join(","),fields:"photo_50,photo_100,can_ask_anonymous,can_ask_question,first_name_nom,first_name_dat,first_name_gen,last_name_gen,sex"})}},56543:(e,t,o)=>{"use strict";var n;o.d(t,{QuestionsBoxRef:()=>n}),function(e){e.SNIPPET="snippet",e.URL="url",e.STORY="story"}(n||(n={}))},50722:(e,t,o)=>{"use strict";o.d(t,{Ranges:()=>n.Ranges});o(33751),o(48041);var n=o(82161)},68826:(e,t,o)=>{"use strict";o.d(t,{SECOND:()=>n});o(3895);const n=1e3},28612:(e,t,o)=>{"use strict";o.d(t,{UnauthorizedSourceType:()=>n});const n={COMMON:"common",PHOTO:"photo",VIDEO:"video",AUDIO:"audio",COMMENTS:"comments",MESSAGE:"message",ADD_TO_FRIENDS:"add_to_friends",UPLOAD_VIDEO:"upload_video",SUBSCRIBE_VIDEO_AUTHOR:"subscribe_video_author",SUBSCRIBE_VIDEO_PLAYLIST:"subscribe_video_playlist",ADD_PRODUCT_TO_BOOKMARKS:"add_product_to_bookmarks"}},77027:(e,t,o)=>{"use strict";o.d(t,{articleURLPattern:()=>n,isArticleURL:()=>i});const n=/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/,i=e=>{const t=e.startsWith("/")?e.substring(1):e;return n.test(t)}},24275:(e,t,o)=>{"use strict";o.d(t,{createSentryLogger:()=>s});var n=o(34788),i=o(68963),r=o(33751);const s=({debugPrefix:e="[Sentry Logger]",isConsoleEnabled:t=!1,environment:o,catchNetworkError:s})=>{function a(t,o){return`${e} `+(o?`${o}: ${t}`:t)}return function(_){const{error:l,additionalText:c,extra:u,environment:d}=_,p=d||o;if(t&&console.error(e,{error:l,additionalText:c||"Some error happened",extra:u,environment:p}),s&&function(e){return!(!e||"object"!=typeof e)&&e.type===i.APIErrorType.NETWORK_ERROR}(l)&&s(_))return;const h=u?{environment:d,breadcrumb:{data:{extra:u}}}:{environment:p};if(l instanceof Error){const e=new Error(a(l.message,c));return e.name=l.name,e.stack=l.stack,void(0,r.logError)(e,h)}if("string"!=typeof l){var m;if(l instanceof Object)return(null==(m=h.breadcrumb)?void 0:m.data)?h.breadcrumb.data.object=l:h.breadcrumb=(0,n._)({},h.breadcrumb,{data:{object:l}}),void(0,r.logError)(new Error(a("Error as object",c)),h);l||!c?(0,r.logError)(new Error(a("Unknown error")),h):(0,r.logError)(new Error(a(c)),h)}else(0,r.logError)(new Error(a(l,c)),h)}}},11718:(e,t,o)=>{"use strict";o.d(t,{getOwnerName:()=>n});const n=(e,t=!0,o)=>{let n="";return e&&("name"in e?n=e.name||"":!t&&"first_name"in e?n=o?e[`first_name_${o}`]||"":e.first_name||"":("first_name"in e||"last_name"in e)&&(n=o?`${e[`first_name_${o}`]} ${e[`last_name_${o}`]}`:`${e.first_name} ${e.last_name}`)),n}},54291:(e,t,o)=>{"use strict";o.d(t,{getOwnerUrl:()=>n});const n=(e,t="/")=>e?"domain"in e&&"id"in e?`/artist/${e.domain||e.id||""}`:"screen_name"in e&&e.screen_name?`${t}${e.screen_name}`:"first_name"in e?`${t}id${e.id}`:`${t}club${e.id}`:""},48791:(e,t,o)=>{"use strict";o.d(t,{getVideoCopyLink:()=>a,getVideoUrl:()=>s});var n=o(97275),i=o(20562),r=o(48487);const s=e=>{const{owner_id:t,id:o}=e;if(void 0===t)return"/video";if(void 0===o)return`/video/@id${t}`;return"/"+("short_video"===e.type?"clip":"video")+(0,n.joinRawId)({ownerId:t,itemId:o})+(e.access_key?`?list=${e.access_key}`:"")},a=(e,t)=>{var o;const n=new URL(s(e),"https://"+(0,i.getHostName)());return t&&n.searchParams.set("t",(0,r.toString)(t)),(null==(o=e.access_key)?void 0:o.startsWith("ln-"))?n.searchParams.set("list",e.access_key):n.searchParams.delete("list"),n.toString()}},74866:(e,t,o)=>{"use strict";function n(e){return Object.keys(e).some((e=>e.startsWith("_react")||e.startsWith("__react")))}o.d(t,{isReactHTMLElement:()=>n})},47987:(e,t,o)=>{"use strict";o.d(t,{onDomReady:()=>n});const n=e=>{"loading"!==window.document.readyState?e():window.document.addEventListener("DOMContentLoaded",(()=>e()),{once:!0})};new Promise((e=>{n(e)}))},39870:(e,t,o)=>{"use strict";o.d(t,{replaceEmailLinks:()=>i});var n=o(31712);function i(e,t){return e.replace(n.EMAIL,t||function(e){return`<a href="mailto:${e}">${e}</a>`})}},77035:(e,t,o)=>{"use strict";o.d(t,{linksReplacer:()=>d,replaceHyperLinks:()=>c});var n=o(34892),i=o(20562),r=o(82671),s=o(82018);o(35734);function a(e){if(!e[0]||!e[6])return e;const t=e[0].length-1,o=e[6].length-1;return"."===e[0][t]&&"."===e[6][o]&&(e[0]=e[0].slice(0,t),e[6]=e[6].slice(0,o)),e}function _(e){return{full:e[0],protocol:e[1]||"http://",url:e[2],domain:e[4],query:e[6]||""}}function l(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,t){const o=new RegExp(r.RE_URL_PATTERN,"ig"),n=s.TOP_DOMAINS.reduce(((e,t)=>Math.max(e,t.length)),0);let i,l=0,c=e;for(;null!==(i=o.exec(e));){i=a(i);const o=i[0].length,r=i.index+o,u=e[i.index-1],d=e[r-1];if("@"===e[r]&&(!i[0]||i[0]&&!i[0].toLowerCase().includes("http")))continue;const p=void 0!==u&&/([\w\$А-Яа-яёЁєЄҐґЇїІіЈј\—\-\_@;.])/i.test(u),h=void 0!==d&&/([:;$])/i.test(d);if(!p&&!h){const e=_(i),a=e.domain.toLowerCase();if(a.length<=n&&s.TOP_DOMAINS.includes(a)){const n=t(e);c=c.slice(0,i.index+l)+n+c.slice(r+l),l+=n.length-o}}}return c}function u(e,t){try{e=decodeURIComponent(e)}catch(e){}return e.length>t&&(e=e.substr(0,t-2)+".."),e=l(e).replace(/\n/g," ")}function d(e,t=55){var o,r;let{full:a}=e;const{url:_,protocol:c,query:d}=e;a=u(a,t);const p=(0,n.replaceEntities)(_+d);if(s.OUR_DOMAINS.test(_)){let e="";const t=a.match(s.VK_DOMAIN);if(t){const o=t[1];e=(0,i.isMvk)()?"":` mention_id="${o}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`}return`<a href="${l(c+_+d)}" target="_blank" rel="noopener"${e}>${a}</a>`}const h=null==(r=window.nav)||null==(o=r.strLoc)?void 0:o.startsWith("video"),m=`${(0,i.isPWA)()||h?`https://${(0,i.getHostName)()}/`:""}away.php?utf=1&to=${encodeURIComponent(c+p)}`,f=(0,n.clean)((c+_+d).replace(/'/g,"\\'"));return`<a href="${m}" target="_blank" rel="noopener" ${(0,i.isMvk)()?"":`onclick="return goAway('${f}', {}, event);"`}>${a}</a>`}},8169:(e,t,o)=>{"use strict";o.d(t,{replaceMentions:()=>s});var n=o(21338),i=o(34892),r=o(20562);function s(e,t){return e.replace(n.MENTION,t||function(e,t,o,n,s){const a=(0,r.isMvk)()?"":` mention_id="${(0,i.clean)(t+o)}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`;return`<a href="/${t+o}" class="mem_link" mention="${(0,i.clean)(n||"")}"${a}>${s}</a>`})}},46536:(e,t,o)=>{"use strict";o(34788),o(85893),o(67294),o(93353)},84200:(e,t,o)=>{"use strict";o(34788),o(20224),o(85893),o(67294),o(86894),o(10837)},68621:(e,t,o)=>{"use strict";o(84200),o(46536)},7806:(e,t,o)=>{"use strict";o.d(t,{getAdditionalInfo:()=>_});var n=o(59397),i=o(78729),r=o(33174),s=o(3895),a=o(68826);const _=e=>{var t;const{partner_text:o,date:_,type:l,release_date:c,genres:u,views:d=1}=e;if("music_video"===l&&(null==(t=u)?void 0:t.length)&&c)return`${new Date(c*a.SECOND).getFullYear()} · ${u[0].name}`;if(o)return(0,n.decodeHTMLEntities)(o);const p=e=>(0,n.decodeHTMLEntities)((0,r.getFormattedViews)(e));return _?_>Date.now()/a.SECOND?(0,s.getLang)("video_postponed_publication"):(0,i.isLiveVideo)(e)?p(d):`${p(d)} · ${(0,n.decodeHTMLEntities)((0,i.getFormattedUpdatedTime)(_,!0))}`:p(d)}},60236:(e,t,o)=>{"use strict";o.d(t,{getFormattedPostponePublishDateTime:()=>a,getFormattedUpdatedTime:()=>s});var n=o(34892),i=o(3895);const r=(e,[t,o],r)=>{return r?(0,i.langNumeric)((0,n.intval)(e),o):(s=(0,n.intval)(e),a=t,_=o,(0,n.isArray)(a)&&s<a.length?a[s]:(0,i.langNumeric)(s,_));var s,a,_},s=(e,t)=>{const o=Date.now()/1e3-e;if(o<5)return((e,t)=>t?(0,i.langNumeric)((0,n.intval)(e),(0,i.getLang)("video_added_less_than_a_minute_ago")):(0,i.getLang)("video_added_now","raw")[0])(o,t);if(o<60)return((e,t)=>t?(0,i.langNumeric)((0,n.intval)(e),(0,i.getLang)("video_added_less_than_a_minute_ago","raw")):(0,i.getLang)("video_added_less_than_a_minute_ago"))(o,t);if(o<3600){const e=[(0,i.getLang)("video_word_mins_ago","raw"),(0,i.getLang)("video_mins_ago","raw")];return r(o/60,e,t)}if(o<86400){const e=[(0,i.getLang)("video_word_hours_ago","raw"),(0,i.getLang)("video_hours_ago","raw")];return r(o/3600,e,t)}if(o<2592e3){const e=[(0,i.getLang)("video_word_days_ago","raw"),(0,i.getLang)("video_days_ago","raw")];return r(o/86400,e,t)}if(o<31536e3){const e=[(0,i.getLang)("video_word_months_ago","raw"),(0,i.getLang)("video_months_ago","raw")];return r(o/2592e3,e,t)}const s=[(0,i.getLang)("video_word_years_ago","raw"),(0,i.getLang)("video_years_ago","raw")];return r(o/31363200,s,t)},a=e=>{const t=1e3*e,o=new Date,n=new Date(t);return(0,i.langDate)(t,o.getFullYear()===n.getFullYear()?(0,i.getLang)("video_postponed_publication_date","raw"):(0,i.getLang)("video_postponed_publication_full_date","raw"),0,(0,i.getLang)("months_sm_of"))}},33174:(e,t,o)=>{"use strict";o.d(t,{getFormattedViews:()=>r});var n=o(3895),i=o(78729);function r(e){return e>999?(0,i.getFormattedBigViewsToShortCase)(e):(0,n.getLang)("video_N_views_list",e||1,!0)}},78729:(e,t,o)=>{"use strict";o.d(t,{getFormattedBigViewsToShortCase:()=>r.getFormattedBigViewsToShortCase,getFormattedPostponePublishDateTime:()=>n.getFormattedPostponePublishDateTime,getFormattedUpdatedTime:()=>n.getFormattedUpdatedTime,isLiveVideo:()=>i.isLiveVideo});o(68621),o(7806);var n=o(60236),i=(o(33174),o(78131),o(90355),o(86170),o(45247),o(24092)),r=o(17771)},34615:(e,t,o)=>{"use strict";o.d(t,{isPrivacyLocked:()=>n});const n=e=>{var t,o,n,i,r,s,a,_,l;return!!e&&Boolean((e=>e.category&&!["all","any"].includes(e.category))(e)||(null==(t=e.excluded_category)?void 0:t.length)||(null==(n=e.lists)||null==(o=n.allowed)?void 0:o.length)||(null==(r=e.lists)||null==(i=r.excluded)?void 0:i.length)||(null==(a=e.owners)||null==(s=a.allowed)?void 0:s.length)||(null==(l=e.owners)||null==(_=l.excluded)?void 0:_.length))}},80346:(e,t,o)=>{"use strict";o.d(t,{isUpcomingLiveVideo:()=>n});const n=({liveStatus:e,type:t})=>"live"===t&&"upcoming"===e},83163:(e,t,o)=>{"use strict";o.d(t,{isVideoExternal:()=>n});const n=e=>{var t;return Boolean(e&&e.player&&((null==(t=e.files)?void 0:t.external)||"YouTube"===e.platform))}},44830:(e,t,o)=>{"use strict";o.d(t,{mapVideoToFeaturedArtists:()=>s});o(34788);var n=o(11718),i=o(54291);const r=e=>({name:(0,n.getOwnerName)(e),href:(0,i.getOwnerUrl)(e)}),s=e=>{var t;return(null==(t=e)?void 0:t.featured_artists)?e.featured_artists.map(r):void 0}},78131:(e,t,o)=>{"use strict";o(59397),o(63549),o(24092),o(34615)},90355:(e,t,o)=>{"use strict";o(59397),o(3895),o(63549),o(68826),o(48791),o(80346),o(44830),o(24092),o(7806),o(33174),o(60236)},86170:(e,t,o)=>{"use strict";o(11010),o(36181),o(91686)},45247:(e,t,o)=>{"use strict";var n=o(48041),i=o(57458);(0,n.partConfigEnabled)("video_player_track_onestat_errors")},24092:(e,t,o)=>{"use strict";o.d(t,{getPlaylistURL:()=>n,isLiveVideo:()=>i});o(34892),o(77035),o(8169),o(39870),o(83163);const n=(e,t)=>`/video/playlist/${e}_${t}`,i=({live_status:e})=>Boolean(e&&!["postlive","finished"].includes(e))},17771:(e,t,o)=>{"use strict";o.d(t,{getFormattedBigViewsToShortCase:()=>a});var n=o(3895),i=o(34892);const r=({count:e,localeOptions:t})=>{var o;const{getMinNumbersLocale:n,getThousandLocale:r,getMillionLocale:s}=t,a=(null==(o=window.langConfig)?void 0:o.locale)||"ru";if(e<1e3)return n?n(e):e.toString();let _=1e3,l=r();e>999999&&(_=1e6,l=s());const[c="",u=""]=(e/_).toString().split("."),d=e>=1e5&&e<1e6||0===u.length?0:(0,i.intval)(u.substring(0,1)),p=(0,i.intval)(d)>0?`${c}.${d}`:c;return`${Number(p).toLocaleString(a)}${l}`},s={getMinNumbersLocale:e=>(0,n.getLang)("video_N_views_list",e),getThousandLocale:()=>(0,n.getLang)("video_N_views_thousand"),getMillionLocale:()=>(0,n.getLang)("video_N_views_million")},a=e=>r({count:e,localeOptions:s})},24100:(e,t,o)=>{"use strict";o.d(t,{Skeleton:()=>a});var n=o(85893),i=(o(67294),o(53105));const r={default:"SkeletonIso--borderRadiusDefault",paper:"SkeletonIso--borderRadiusPaper",promo:"SkeletonIso--borderRadiusPromo"};function s(e){return"string"==typeof e&&Object.keys(r).includes(e)}const a=({className:e,width:t,height:o,children:a,borderRadius:_,circle:l,colorFrom:c,colorTo:u,noAnimation:d=!1,duration:p,fontSize:h,noShrink:m})=>{const f={},g=a;t&&(f.width=t),o&&(f.height=o),h&&(f.fontSize=h),_&&(f.borderRadius=_),l&&(f.borderRadius="50%",f.width&&!f.height&&(f.height=f.width),f.height&&!f.width&&(f.width=f.height)),c&&(f["--skeleton-from"]=c),u&&(f["--skeleton-to"]=u),p&&(f["--animation-duration"]=`${p}s`);const v=!!a||!f.height||!f.width;return(0,n.jsx)("span",{className:(0,i.classNames)("SkeletonIso",d&&"SkeletonIso--noAnimation",m&&"SkeletonIso--noShrink",s(_)&&r[_],e),"data-testid":"loading-skeleton","aria-live":"polite","aria-busy":!d,style:f,children:v&&(0,n.jsx)("span",{className:"SkeletonIso__in",children:g})})}},49015:(e,t,o)=>{"use strict";o.d(t,{initVkId:()=>r});var n=o(88882);const i=7913379;function r(){const{loginDomain:e,connectDomain:t}=window.vk.apiConfigDomains;n.Config.init({appId:i,loginDomain:e,connectDomain:t})}},44151:(e,t,o)=>{"use strict";o.d(t,{logSavedUsersAuthStart:()=>a,logSavedUsersDropAccount:()=>_,logSwitcherAccounts:()=>l});var n=o(68312);const i=new n.ProductionStatCollector,r=new n.ActionStatCollector(i),s=new n.RegistrationItemStatCollector(r);function a(e){s.logEvent(n.RegistrationItemEventTypes.AUTH_SAVED_START,n.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:n.RegistrationFieldItemNames.SAVED_SOURCE,value:n.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}],e)}function _(e){s.logEvent(n.RegistrationItemEventTypes.DROP_ACCOUNT_FROM_SAVED,n.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:n.RegistrationFieldItemNames.SAVED_SOURCE,value:n.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}],e)}function l(){s.logEvent(n.RegistrationItemEventTypes.POPUP_OPEN,n.EventScreens.MAIN,n.EventScreens.MULTI_ACC_SWITCHER,{force:!0})}},46026:(e,t,o)=>{"use strict";var n;o.d(t,{AuthAppId:()=>n}),function(e){e[e.VK=7913379]="VK",e[e.MVK=7934655]="MVK"}(n||(n={}))},38475:(e,t,o)=>{"use strict";o.d(t,{AudioPageProxy:()=>d});var n=o(70912),i=o(15816),r=o(34788),s=o(51508),a=o(90426),_=o(77226),l=(0,i._)("_emitter"),c=(0,i._)("_globalStorage"),u=(0,i._)("_audioPage");class d{get emitter(){return(0,n._)(this,l)[l]}get events(){return(0,n._)(this,l)[l].listenable}get isInitialized(){return Boolean((0,n._)(this,u)[u])}get data(){var e;return(null==(e=(0,n._)(this,u)[u])?void 0:e._data)||null}get readyAudio(){var e,t;return null!=(t=null==(e=(0,n._)(this,u)[u])?void 0:e._readyAudio)?t:null}get currentPlaylist(){var e;return null==(e=(0,n._)(this,u)[u])?void 0:e.getPageCurrentPlaylist()}get currentSection(){var e,t;return null!=(t=null==(e=(0,n._)(this,u)[u])?void 0:e._currentSection)?t:null}get audioStartReadyAudio(){var e,t;return null!=(t=null==(e=(0,n._)(this,c)[c])?void 0:e.audioStartReadyAudio)&&t}set audioStartReadyAudio(e){(0,n._)(this,c)[c]={audioStartReadyAudio:e}}get ownerId(){var e,t;return null!=(t=null==(e=(0,n._)(this,u)[u])?void 0:e.getOwnerId())?t:null}get canAddToGroup(){var e;return Boolean(null==(e=(0,n._)(this,u)[u])?void 0:e.canAddToGroup())}get canEditGroup(){var e;return Boolean(null==(e=(0,n._)(this,u)[u])?void 0:e.canEditGroup())}get contentBlock(){var e,t,o;return null!=(o=null==(t=(0,n._)(this,u)[u])||null==(e=t._els)?void 0:e.contentBlock)?o:null}destroyReadyAudio(){var e;null==(e=(0,n._)(this,u)[u])||e._destroyReadyAudio()}initAudioRowsAutoList(e){var t;null==(t=(0,n._)(this,u)[u])||t._initAudioRowsAutoList(e)}reloadGeneralSectionData(e){var t;null==(t=(0,n._)(this,u)[u])||t.reloadGeneralSectionData(e)}onUserAction(e,t){var o;null==(o=(0,n._)(this,u)[u])||o.onUserAction(e,t)}constructor(){Object.defineProperty(this,c,{get:p,set:h}),Object.defineProperty(this,u,{get:m,set:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=new s.Emitter}}function p(){var e;return null!=(e=window.cur)?e:null}function h(e){(0,_.default)(window.cur)&&(window.cur=(0,r._)({},window.cur,e))}function m(){var e,t;return null!=(t=null==(e=(0,n._)(this,c)[c])?void 0:e.audioPage)?t:null}d.ensure=(0,a.makeSharedState)("AudioPageProxy",(()=>new d),{version:5})},20752:(e,t,o)=>{"use strict";var n;!function(e){e.VibeRecommendationsPlaylistPlayButton="VIBE_RECOMMENDATIONS_PLAYLIST_PLAY_BUTTON",e.RecommendationsPlaylistOpenButton="RECOMMENDATIONS_PLAYLIST_OPEN_BUTTON",e.RecommendationsPlaylistPlayButton="RECOMMENDATIONS_PLAYLIST_PLAY_BUTTON",e.SnippetsBannerOpenSnippetsPageLink="SNIPPETS_BANNER_SNIPPETS_PAGE_LINK",e.Navigation="NAVIGATION",e.AudioPageInit="AUDIO_PAGE_INIT",e.Unknown="UNKNOWN"}(n||(n={}))},17013:(e,t,o)=>{"use strict";var n;o.d(t,{AudioPageEventType:()=>n}),function(e){e.Updated="updated",e.RadioStationFollowed="radioStationFollowed",e.PodcastAddedToFavorites="podcastAddedToFavorites",e.AudioLinkCopied="audioLinkCopied",e.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested"}(n||(n={}))},4801:(e,t,o)=>{"use strict";o.d(t,{AudioPageEventType:()=>i.AudioPageEventType,AudioPageProxy:()=>n.AudioPageProxy});var n=o(38475),i=o(17013);o(20752)},94271:(e,t,o)=>{"use strict";o.d(t,{FetchService:()=>r});var n=o(34788),i=o(55878);class r{constructor(){this.reloadAudios=e=>new Promise(((t,o)=>{i.ajax.post("al_audio.php?act=reload_audios",{audio_ids:e},{onDone:e=>{t(e)},onFail:e=>(o(e),!1)})})),this.getAutoplayAudioIdsBySource=e=>new Promise(((t,o)=>{i.ajax.post("al_audio.php?act=get_next_audios",(0,n._)({},e),{onDone:e=>{t(e)},onFail:e=>(o(e),!1)})})),this.getAudioIdsBySource=e=>new Promise((t=>{i.ajax.post("al_audio.php?act=get_audio_ids_by_source",(0,n._)({},e),{onDone:e=>{t(e)},onFail:()=>(t([]),!1)})})),this.followRadiostation=(e,t)=>new Promise(((o,n)=>{i.ajax.post("al_audio.php?act=follow_radiostation",{id:e,hash:t},{onDone:e=>{o(e)},onFail:e=>(n(e),!0)})})),this.unfollowRadiostation=(e,t)=>new Promise(((o,n)=>{i.ajax.post("al_audio.php?act=unfollow_radiostation",{id:e,hash:t},{onDone:e=>{o(e)},onFail:e=>(n(e),!0)})}))}}},93938:(e,t,o)=>{"use strict";o.d(t,{hideCatalogBlock:()=>s});var n=o(49957),i=o(92450),r=o(55878);function s(e,t){r.ajax.post("/al_audio.php?act=hide_catalog_block",{block_id:e});const o=t.closest(".CatalogBlock__content");o&&(0,n.getAudioPlayer)().notify(i.events.PLACEHOLDER_REMOVE,o.dataset.id)}},13412:(e,t,o)=>{"use strict";o.d(t,{showAudioLongtapModal:()=>u});var n=o(34788),i=o(85893),r=o(11672),s=o(80541),a=o(35539),_=o(80323),l=o(48293);const c=(0,r.asyncComponent)((()=>Promise.all([o.e(4322),o.e(3513),o.e(5394)]).then(o.bind(o,67578))),(({AudioLongtapModal:e})=>e)),u=(e,t)=>{const o=_.AudioLongtapModalService.ensure(),r=(0,l.ensureMyMusicService)();o.setAudioElement(t),(0,s.showMessageBoxModalSuspense)((t=>(0,i.jsx)(c,(0,n._)({},t,{audioLongtapService:o,previewsService:a.audioPreviewsService,myMusicService:r,audio:e}))),{width:380,onDestroy:()=>{o.onCloseModal("click_outside")}})}},6819:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectModal:()=>h});var n=o(85893),i=o(67294),r=o(12865),s=o(58739),a=o(4047),_=o(60126),l=o(36671),c=o(86894),u=o(60501),d=o(50442);const p="SpecialProjectModal__subheader",h=({title:e,text:t,button:o,style:h,image:m,backgroundImage:f,sendCloseReason:g,onClose:v})=>{const y=e=>{"A"===e.target.tagName&&g("link")};return(0,i.useEffect)((()=>{const[e]=document.getElementsByClassName(p);return e.addEventListener("click",y),()=>{e.removeEventListener("click",y)}}),[]),(0,n.jsxs)(r.ModalBox,{children:[(0,n.jsx)(c.ModalDismissButton,{onClick:v}),(0,n.jsx)(u.SpecialProjectHeader,{backgroundImage:f,image:m,style:h}),(0,n.jsxs)(s.ModalBody,{insetLevel:1,children:[(0,n.jsx)(a.ModalTextLayout,{subheader:(0,n.jsx)("span",{className:p,children:(0,d.parseReactWikiLinks)(t)}),subheaderMode:"primary",children:e}),(0,n.jsx)(_.ButtonLayout,{children:(0,n.jsx)(l.Button,{onClick:()=>{var e;g("button"),(null==(e=o.action)?void 0:e.url)&&window.nav.go(o.action.url)},size:"l",mode:"primary",children:o.title},"special-project-submit-button")})]})]})}},29538:(e,t,o)=>{"use strict";o.d(t,{showWebSpecialProjectModal:()=>a});var n=o(34788),i=o(85893),r=o(80541),s=o(6819);const a=(e,t)=>{(0,r.showMessageBoxModal)((o=>(0,i.jsx)(s.SpecialProjectModal,(0,n._)({},o,e,{sendCloseReason:t}))),{width:420,onDestroy:()=>{t("close")}})}},95650:(e,t,o)=>{"use strict";o.d(t,{AUDIO_STORAGE_KEYS_ENUM:()=>n});const n={AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME:"audio_preview_tooltip_show_date_time"}},60180:(e,t,o)=>{"use strict";o.d(t,{createAudioDislikesInMyMusicWebService:()=>P});var n=o(11010),i=o(34788),r=o(20224),s=o(86539),a=o(51508),_=o(55673),l=o(99708),c=o(5112),u=o(98116),d=o(85349),p=o(44239),h=o(11455),m=o(92450),f=o(49577),g=o(38032),v=o(82097),y=o(97066),E=o(56401),w=o(72236),b=o(64538),A=o(7867);function P(e){const t=(0,s.getEffectorServiceDomain)(e),o=new a.Emitter,E=(0,p.ensureAudioPlayerService)(),w=(0,_.ensureMyAudioDislikesService)(),b=(0,h.ensureMyAudioMusicWebService)(),A=(0,u.createEvent)(),{$fullIdsMap:P,fullIdsMapApi:T}=(0,l.createFullIdsMap)(t),{$fullIdsMap:C,fullIdsMapApi:M}=(0,l.createFullIdsMap)(t),{$fullIdsMap:D,fullIdsMapApi:S}=(0,l.createFullIdsMap)(t),k=(0,u.restore)(A,null),L=(0,u.attach)({source:k,effect(e){return(0,n._)((function*(){if(!e)throw new Error("Audio not exists");const t=(0,c.getAudioFullId)(e);yield Promise.all([b.addFx({audio:e,isNotificationDisabled:!0}),w.removeFx({identity:e})]),S.remove(t),E.updateAudioDislikeStatusFx({audioFullId:t,hasDislike:!1}),E.notifyFx({eventType:m.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[t]}),o.emit(y.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestored,{audio:e})}))()}}),R=(0,u.attach)({source:(0,u.combine)({dislikesIdentitiesMap:w.$identitiesMap,myMusicIdentitiesMap:b.$identitiesMap,dislikeActionInitializedIdentitiesMap:P,myMusicActionInitializedIdentitiesMap:b.$initializedIdentitiesMap,isFinitePlaylist:(0,g.not)((0,v.equals)(E.$currentPlaylist.map((e=>{var t,o;return Boolean((null==(t=e)?void 0:t.isLive())||(null==(o=e)?void 0:o.isLoadable()))})),!0)),playerCurrentAudio:E.$currentAudio,playerProgress:E.$progress}),effect({dislikeActionInitializedIdentitiesMap:e,myMusicActionInitializedIdentitiesMap:t,dislikesIdentitiesMap:r,myMusicIdentitiesMap:s,isFinitePlaylist:a,playerCurrentAudio:_,playerProgress:l},{audio:u,audioEl:d=null,skipDeletionAudioFromMyMusic:p,needReloadTrackCode:g}){return(0,n._)((function*(){if(!u)throw new Error("Audio not exists");const n=(0,c.getAudioFullId)(u),v=_&&n===(0,c.getAudioFullId)(_)?l:0,P=Boolean(e[n]);if((0,f.hasDislike)({audio:u,dislikesIdentitiesMap:r,isDislikeActionInitialized:P}))throw new Error("Audio already disliked");const T=yield I({playerService:E,audio:u,audioEl:d});try{var C,M,D,k;let e=u;if(g){const t=yield O(u,d);t&&(e=(0,i._)({},u,{trackCode:t}))}yield w.addFx({identity:u});if(!p&&(0,h.isMy)({identity:u,myMusicIdentitiesMap:s,isMyMusicActionInitialized:Boolean(t[n]),userId:window.vk.id}))try{yield b.deleteFx({audio:u}),A(u),o.emit(y.AudioDislikesInMyMusicWebServiceEventType.AudioDislikedInMyMusic,{audio:e,playlistIdentity:T,playerProgress:v}),S.add(n),E.updateAudioDislikeStatusFx({audioFullId:n,hasDislike:!0}),E.notifyFx({eventType:m.AudioPlayerEventType.AUDIO_DELETE_BY_DISLIKE_ACTION,params:[n]})}catch(e){throw new Error("Failed to delete audio from MyMusic",{cause:e})}else o.emit(y.AudioDislikesInMyMusicWebServiceEventType.AudioDisliked,{audio:e,playlistIdentity:T,playerProgress:v});const r=E.getPlaylistQueue();if(a&&r&&(null==(M=r)||null==(C=M.indexOfAudio)?void 0:C.call(M,u))===(null==(D=r)?void 0:D.length)-1)return;(null==(k=E.getCurrentAudio())?void 0:k.id)===u.id&&E.playNextFx()}catch(e){throw new Error("Failed to add dislike to audio",{cause:e})}}))()}}),x=(0,u.attach)({source:(0,u.combine)({dislikesIdentitiesMap:w.$identitiesMap,initializedIdentitiesMap:P,lastDislikedAudioInMyMusic:k,isCancelDeletionLastDislikedAudioInMyMusicFxPending:L.pending,dislikedAudiosInMyMusicMap:D,playerCurrentAudio:E.$currentAudio,playerProgress:E.$progress}),effect({initializedIdentitiesMap:e,dislikesIdentitiesMap:t,lastDislikedAudioInMyMusic:r,isCancelDeletionLastDislikedAudioInMyMusicFxPending:s,dislikedAudiosInMyMusicMap:a,playerCurrentAudio:_,playerProgress:l},{audio:u,audioEl:d=null,needReloadTrackCode:p}){return(0,n._)((function*(){var n;if(!u)throw new Error("Audio not exists");const h=(0,c.getAudioFullId)(u),g=Boolean(e[h]);if(!(0,f.hasDislike)({audio:u,dislikesIdentitiesMap:t,isDislikeActionInitialized:g}))throw new Error("Audio not disliked");const v=yield I({playerService:E,audio:u,audioEl:d}),P=Boolean(r)&&(null==(n=r)?void 0:n.id)===u.id;let T=u;if(p){const e=yield O(u,d);e&&(T=(0,i._)({},u,{trackCode:e}))}try{!g||!(h in a)||s&&P?yield w.removeFx({identity:u}):(P&&(o.emit(y.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton,{audio:u}),A(null)),yield Promise.all([b.addFx({audio:u,isNotificationDisabled:!0}),w.removeFx({identity:u})]),S.remove(h),E.notifyFx({eventType:m.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[h]})),o.emit(y.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemoved,{audio:T,playlistIdentity:v,playerProgress:_&&h===(0,c.getAudioFullId)(_)?l:0}),E.updateAudioDislikeStatusFx({audioFullId:h,hasDislike:!1})}catch(e){throw new Error("Failed to remove dislike from audio",{cause:e})}}))()}}),B=(0,u.attach)({source:(0,u.combine)({dislikesIdentitiesMap:w.$identitiesMap,dislikeActionInitializedIdentitiesMap:P,playerCurrentAudio:E.$currentAudio,playerProgress:E.$progress}),effect(e,t){return(0,n._)((function*(){var{dislikesIdentitiesMap:n,dislikeActionInitializedIdentitiesMap:s,playerCurrentAudio:a,playerProgress:_}=e,{audio:l,audioEl:u,needReloadTrackCode:d}=t,p=(0,r._)(t,["audio","audioEl","needReloadTrackCode"]);if(!l)throw new Error("Audio not exists");const h=yield I({playerService:E,audio:l,audioEl:u}),m=(0,c.getAudioFullId)(l),g=(0,f.hasDislike)({audio:l,dislikesIdentitiesMap:n,isDislikeActionInitialized:m in s});let v=l;if(d){const e=yield O(l,u);e&&(v=(0,i._)({},l,{trackCode:e}))}g?(yield Promise.all([w.removeFx({identity:l}),b.addFx((0,i._)({audio:v,needReloadTrackCode:!1},p))]),E.updateAudioDislikeStatusFx({audioFullId:m,hasDislike:!1}),o.emit(y.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemovedByAddToMyMusicButton,{audio:v,playlistIdentity:h,playerProgress:a&&m===(0,c.getAudioFullId)(a)?_:0})):yield b.addFx((0,i._)({audio:v,audioEl:u},p))}))()}});return(0,u.sample)({clock:[R.done,x.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,c.getAudioFullId)(e),target:T.add}),(0,u.sample)({clock:[R,x],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,c.getAudioFullId)(e),target:M.add}),(0,u.sample)({clock:[R.finally,x.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,c.getAudioFullId)(e),target:M.remove}),(0,d.reset)({clock:L.done,target:k}),{$dislikesIdentitiesMap:w.$identitiesMap,$dislikesInitializedIdentitiesMap:P,$dislikesLoadingIdentitiesMap:C,addDislikeFx:R,removeDislikeFx:x,$myMusicIdentitiesMap:b.$identitiesMap,$myMusicInitializedIdentitiesMap:b.$initializedIdentitiesMap,$myMusicLoadingIdentitiesMap:b.$loadingIdentitiesMap,addToMyMusicFx:B,deleteFromMyMusicFx:b.deleteFx,cancelDeletionLastDislikedAudioInMyMusicFx:L,events:o.listenable}}function I(e){return T.apply(this,arguments)}function T(){return(T=(0,n._)((function*({playerService:e,audio:t,audioEl:o}){if(t.album)return{id:t.album[A.AudioPlaylistTupleKeys.Id],ownerId:t.album[A.AudioPlaylistTupleKeys.OwnerId]};const n=e.getCurrentAudio();if(n&&(0,c.getAudioFullId)(n)===(0,c.getAudioFullId)(t)){const t=yield e.getCurrentPlaylistFx();if(t){var i,r;const e=null==(i=t)?void 0:i.getPlaylistId(),o=null==(r=t)?void 0:r.getPlaylistId();if(e&&o)return{id:+e,ownerId:+o}}}if(o){var s;let e=E.AudioUtils.getContextPlaylist(o);if(null==(s=e)?void 0:s.playlist){var a,_;const t=null==(a=e.playlist)?void 0:a.getPlaylistId(),o=null==(_=e.playlist)?void 0:_.getPlaylistId();if(t&&o)return{id:+t,ownerId:+o}}}return null}))).apply(this,arguments)}function O(e,t){return C.apply(this,arguments)}function C(){return(C=(0,n._)((function*(e,t){var o;const n=(0,w.getContextPlaylist)(t);if(!n)return null;const i=yield(0,b.getAudioTrackCodeFromPlaylist)(null==(o=n)?void 0:o.playlist,e);return null!=i?i:null}))).apply(this,arguments)}},97066:(e,t,o)=>{"use strict";var n;o.d(t,{AudioDislikesInMyMusicWebServiceEventType:()=>n}),function(e){e.AudioDisliked="audioDisliked",e.AudioDislikedInMyMusic="audioDislikedInMyMusic",e.LastDislikedAudioInMyMusicRestored="lastDislikedAudioInMyMusicRestored",e.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton="lastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton",e.AudioDislikeRemoved="audioDislikeRemoved",e.AudioDislikeRemovedByAddToMyMusicButton="audioDislikeRemovedByAddToMyMusicButton"}(n||(n={}))},53902:(e,t,o)=>{"use strict";o.d(t,{ensureAudioDislikesInMyMusicWebService:()=>a,hasDislike:()=>s.hasDislike});var n=o(90426),i=o(98116),r=o(60180),s=o(49577);o(97066);const a=(0,n.makeSharedState)("global/web/audio/dislikesInMyMusic",(()=>(0,r.createAudioDislikesInMyMusicWebService)({domain:(0,i.createDomain)("global/web/audio/dislikesInMyMusic"),name:"global/web/audio/dislikesInMyMusic"})),{version:3})},33588:(e,t,o)=>{"use strict";o.d(t,{hasDislike:()=>r});var n=o(5112),i=o(87866);function r({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:o}){var r,s;return!!e&&(!!t[(0,n.getAudioFullId)(e)]||!o&&(null!=(s=null==(r=(0,i.getAudioExtra)(e))?void 0:r.dislike)&&s))}},49577:(e,t,o)=>{"use strict";o.d(t,{hasDislike:()=>n.hasDislike});var n=o(33588)},64685:(e,t,o)=>{"use strict";o.d(t,{createAudioLongtapFetchService:()=>r});var n=o(98116),i=o(48293);function r(e){const t=(0,n.createDomain)("AudioLongtapModal"),o=(0,i.ensureMyMusicService)(),r=t.createStore(!1),s=t.createStore(!1),a=(0,n.attach)({effect:e.fetchAudioPreviewFx}),_=(0,n.attach)({effect:o.addFx}),l=t.createEvent();return s.reset(l),(0,n.sample)({clock:a.failData,fn:()=>!0,target:r}),(0,n.sample)({clock:a,fn:()=>!1,target:r}),(0,n.sample)({clock:_.doneData,fn:()=>!0,target:s}),(0,n.sample)({clock:_,fn:()=>!1,target:s}),{$failFetch:r,$successAddAudio:s,resetAddSuccessResult:l,fetchAudioPreviewFx:a,addAudioFx:_}}},80323:(e,t,o)=>{"use strict";o.d(t,{AudioLongtapModalService:()=>E});var n=o(11010),i=o(34788),r=o(92450),s=o(56525),a=o(49957),_=o(29633),l=o(65148),c=o(56401),u=o(73078),d=o(35539),p=o(93036),h=o(64940),m=o(48293),f=o(5112),g=o(64685),v=o(48041);let y=null;class E{static ensure(){return y||(y=new E,y)}fetchPreview(e){var t=this;return(0,n._)((function*(){yield t.fetcher.fetchAudioPreviewFx({identity:(0,h.mapAPIRawIdToAudioIdentity)(e.fullId)}),t.previewPlayer.timelinePosition=0,t.previewPlayer.setCurrentAudio(e)}))()}play(e){var t=this;return(0,n._)((function*(){const o=(0,i._)({},t.getStatData(),{audio:t.previewPlayer.currentAudio});t.statCollector.openModal(o),t.commonAudioWasPlaying=t.commonAudioPlayer.isPlaying(),yield t.previewPlayer.play(e,t.commonAudioPlayer.getVolume()),t.commonAudioWasPlaying&&t.commonAudioPlayer.pauseByChangeChannel();const n=l.AudioLongtapTooltip.ensure();t.statCollector.start(t.getStatData()),n.canShow()&&n.disable()}))()}setAudioElement(e){this.audioElement=e}stop(){const e=this.commonAudioPlayer.getCurrentAudio();if(this.previewPlayer.stop(),this.commonAudioWasPlaying&&e){const t=this.commonAudioPlayer.getCurrentPlaylist();this.commonAudioPlayer.resumeChannel({audio:e,playlist:t,context:void 0}),this.commonAudioWasPlaying=!1}}subscribeStop(e){this.previewPlayer.subscribe.call(this.previewPlayer,r.events.STOP_PREVIEW,e),this.previewPlayer.subscribe.call(this.previewPlayer,r.events.END_PREVIEW,e)}unsubscribeStop(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,r.events.STOP_PREVIEW,e),this.previewPlayer.unsubscribe.call(this.previewPlayer,r.events.END_PREVIEW,e)}subscribeProgress(e){this.previewPlayer.subscribe.call(this.previewPlayer,r.events.PROGRESS_PREVIEW,e)}unsubscribeProgress(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,r.events.PROGRESS_PREVIEW,e)}onCloseModal(e){if(this.audioElement)switch(e){case"click_exit":this.statCollector.closeBy(s.EventItemSubType.AUDIO_LONGTAP_CLICK_EXIT,this.getStatData());break;case"click_outside":this.statCollector.closeBy(s.EventItemSubType.AUDIO_LONGTAP_CLICK_OUTSIDE,this.getStatData());break;case"auto_finish":this.statCollector.closeBy(s.EventItemSubType.AUDIO_LONGTAP_AUTO_FINISH,this.getStatData())}this.audioElement=null,this.stop(),this.commonAudioWasPlaying=!1,this.previewPlayer.unsubscribe(r.events.STOP_PREVIEW,this.stop),this.previewPlayer.unsubscribe(r.events.END_PREVIEW,this.stop)}get currentAudio(){return this.previewPlayer.currentAudio}get timelinePosition(){return this.previewPlayer.timelinePosition}get playbackDuration(){return this.previewPlayer.playbackDuration}addAudio(e){var t=this;return(0,n._)((function*(){const o=(0,v.partConfigEnabled)("add_audio_to_effector_web");yield t.fetcher.addAudioFx({trackedIdentity:{id:e.id,ownerId:e.owner_id,accessKey:e.accessKey,trackCode:e.trackCode},userId:window.vk.id});const n=(0,m.ensureMyMusicService)().$identitiesMap.getState()[(0,f.getAudioFullId)({id:e.id,ownerId:e.ownerId})];(0,a.getAudioPlayer)().notify(r.events.ADDED,e,n.id);const s=(0,i._)({},t.getStatData(),{audioAddedId:n.id||void 0});if(t.audioElement&&t.audioElement.classList.add("audio_row__added"),!o){c.AudioUtils.getAddRestoreInfo()[e.fullId]={state:"added",addedFullId:(0,f.getAudioFullId)({id:n.id,ownerId:n.ownerId}),audio:e}}t.statCollector.addTrack(s)}))()}getStatData(){var e;var t;const o=null!=(t=null==(e=this.commonAudioPlayer.getCurrentPlaylist())?void 0:e.getPlaylistId())?t:void 0;return{audio:this.currentAudio,timelinePosition:this.timelinePosition,playlistId:o,playbackDuration:this.playbackDuration,volume:(0,p.unLogF)(this.commonAudioPlayer.getVolume()),snippetLength:this.previewPlayer.previewLength}}goToTrack(e){e&&(this.statCollector.goToTrack(this.getStatData()),window.nav.go(`audio${e}`))}goToArtist(e){e&&(this.statCollector.goToArtist(this.getStatData()),window.nav.go(`artist/${e}`))}constructor(){this.previewPlayer=_.PreviewAudioPlayer.ensure(),this.commonAudioPlayer=(0,a.getAudioPlayer)(),this.statCollector=u.AudioLongtapStatCollector.ensure(),this.previewPlayer.subscribe(r.events.STOP_PREVIEW,(()=>this.stop())),this.previewPlayer.subscribe(r.events.END_PREVIEW,(()=>this.stop())),this.fetcher=(0,g.createAudioLongtapFetchService)(d.audioPreviewsService)}}},73078:(e,t,o)=>{"use strict";o.d(t,{AudioLongtapStatCollector:()=>_});var n=o(34788),i=o(56525),r=o(68312);const s=e=>{if(!e.audio)return{event_category:e.eventCategory};const{trackCode:t,id:o,ownerId:n,albumId:i}=e.audio;return{track_code:t,audio_id:o,audio_owner_id:n,playlist_id:i,playlist_owner_id:void 0,audio_id_new:e.audioAddedId||void 0,timeline_position:e.timelinePosition,playback_duration:e.playbackDuration,volume:Math.round(100*e.volume),audio_length:e.snippetLength,event_category:e.eventCategory}};let a=null;class _{static ensure(){return a||(a=new _,a)}start(e){const t=s((0,n._)({},e,{eventCategory:i.LongtapEventCategory.play}));this.actionStatCollector.logEvent({type:i.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[i.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:(0,n._)({event_type:i.EventItemType.START,event_subtype:i.EventItemSubType.AUDIO_LONGTAP},t)})}openModal(e){this.audio=e.audio;const t=s(e);this.sendView(i.EventItemType.OPEN,i.EventItemSubType.AUDIO_LONGTAP_OPEN,i.LongtapEventCategory.view,t)}addTrack(e){const t=s((0,n._)({},e,{eventCategory:i.LongtapEventCategory.action}));this.actionStatCollector.logEvent({type:i.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[i.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:(0,n._)({event_type:i.EventItemType.ADDED,event_subtype:i.EventItemSubType.AUDIO_ADD_AFTER_LONGTAP},t)})}tipHasShown(){this.sendView(i.EventItemType.HINT,i.EventItemSubType.AUDIO_LONGTAP_HINT,i.LongtapEventCategory.view)}closeBy(e,t){if(!this.audio)return;const o=s((0,n._)({},t,{audio:this.audio,eventCategory:i.LongtapEventCategory.play}));this.actionStatCollector.logEvent({type:i.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[i.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:(0,n._)({event_type:i.EventItemType.STOP,event_subtype:e},o)}),this.audio=null}goToTrack(e){this.audio=e.audio;const t=s(e);this.sendView(i.EventItemType.LONGTAP_DRILLDOWN,i.EventItemSubType.AUDIO_LONGTAP_GO_TO_TRACK,i.LongtapEventCategory.nav,t)}goToArtist(e){this.audio=e.audio;const t=s(e);this.sendView(i.EventItemType.LONGTAP_DRILLDOWN,i.EventItemSubType.AUDIO_LONGTAP_GO_TO_ARTIST,i.LongtapEventCategory.nav,t)}sendView(e,t,o,r){var s;const a={type:i.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[i.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:(0,n._)({},r,{event_type:e,event_subtype:t,event_category:o})},_={type:e,track_code:null==(s=r)?void 0:s.track_code};this.viewCollector.logEvent(a,_)}constructor(){this.audio=null,this.productCollector=new r.ProductionStatCollector,this.viewCollector=new r.ViewStatCollector(this.productCollector),this.actionStatCollector=new r.ActionStatCollector(this.productCollector)}}},65148:(e,t,o)=>{"use strict";o.d(t,{AudioLongtapTooltip:()=>w});var n=o(11010),i=o(70912),r=o(15816),s=o(13870),a=o(91686),_=o(95650),l=o(73078),c=o(10837),u=o(4093),d=o(90426),p=o(4801);var h=(0,r._)("_audioPage"),m=(0,r._)("_hint"),f=(0,r._)("_tooltip"),g=(0,r._)("_isOpen"),v=(0,r._)("_disabled"),y=(0,r._)("_isUserAuthorized"),E=(0,r._)("_getTooltip");class w{getHints(){(0,i._)(this,y)[y]&&(0,i._)(this,h)[h].isInitialized&&(0,c.ensureAccountHelpHintsService)().getHelpHintsFx()}getHint(){const e=(0,c.ensureAccountHelpHintsService)().$helpHints.getState()[u.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB];return(0,i._)(this,m)[m]=e||null,(0,i._)(this,m)[m]}canShow(){if((0,i._)(this,v)[v])return!1;let e=!1;if(this.getHint()){const n=a.vkLocalStorage.getItem(_.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME),i=n?JSON.parse(n):null,r=i?i.firstShow:null;if(r){var t,o;const n=new Date(+r).getTime(),s=(new Date).getTime(),l=Math.abs(s-n),c=Math.ceil(l/864e5);if(c<=3&&(null==(t=i)?void 0:t.disabledDay)!==c){e=!0;const t={firstShow:r,disabledDay:c};a.vkLocalStorage.setItem(_.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}(null==(o=i)?void 0:o.disabledDay)===c&&(e=!1)}else{e=!0;const t={firstShow:(new Date).getTime(),disabledDay:1};a.vkLocalStorage.setItem(_.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}}return e}show(e){var t=this;return(0,n._)((function*(){e&&((0,i._)(t,f)[f]=(0,i._)(t,E)[E](e),(0,i._)(t,f)[f]&&((0,i._)(t,f)[f].show(),(0,i._)(t,g)[g]=!0,l.AudioLongtapStatCollector.ensure().tipHasShown()))}))()}disable(){this.getHint()&&(0,c.ensureAccountHelpHintsService)().hideHelpHint({hintId:u.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB}),(0,i._)(this,v)[v]=!0}get isOpen(){return(0,i._)(this,g)[g]}constructor({audioPage:e}){Object.defineProperty(this,y,{get:b,set:void 0}),Object.defineProperty(this,E,{value:A}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),(0,i._)(this,g)[g]=!1,(0,i._)(this,v)[v]=!1,(0,i._)(this,h)[h]=e}}function b(){var e,t;return Boolean(null==(t=window)||null==(e=t.vk)?void 0:e.id)}function A(e){var t,o,n;const r={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_info_tooltip audio_snippet_tooltip",content:null==(t=(0,i._)(this,m)[m])?void 0:t.title,align:"right",centerShift:8,appendTo:document.body,autoAdjustToViewport:!0,noAutoHideOnWindowClick:!0,autoHide:!0,onHide:()=>{var e;(0,i._)(this,g)[g]=!1,null==(e=(0,i._)(this,f)[f])||e.destroy()},width:286},a=new s.ElementTooltip(e,r);return null==(n=window.cur)||null==(o=n.destroy)||o.push((()=>{var e;null==(e=a)||e.destroy()})),a}w.ensure=(0,d.makeSharedState)("AudioLongtapTooltip",(()=>new w({audioPage:p.AudioPageProxy.ensure()})),{version:1})},18720:(e,t,o)=>{"use strict";var n=o(11010),i=o(34788),r=o(98116),s=o(86539),a=o(36496),_=o(58038),l=o(26127);(0,o(90426).makeSharedState)("global/audio/audioPage/myPlaylists",(()=>function({config:e,myAudioPlaylistsService:t}){const o=(0,s.getEffectorServiceDomain)(e),r=o.createStore({}),l=o.createEffect((0,n._)((function*(e){return yield t.createFx((0,i._)({},e))}))),c=o.createEffect((0,n._)((function*(e){yield t.deleteFx((0,i._)({},e))})));return r.on(l.done,((e,{params:t,result:o})=>(0,a.addPairToMap)(e,{key:t.blockId,value:o}))),r.on(c.done,((e,{params:t})=>(0,_.removePairFromMap)(e,t.blockId))),{createFx:l,deleteFx:c,setUserId:t.setUserId,$myAudioPlaylistsIdentitiesMap:r}}({config:{domain:(0,r.createDomain)("global/audio/audioPage/myPlaylists"),name:"global/audio/audioPage/myPlaylists"},myAudioPlaylistsService:(0,l.ensureMyAudioPlaylistsService)()})),{version:1})},41385:(e,t,o)=>{"use strict";o(18720)},39348:(e,t,o)=>{"use strict";o.d(t,{createAudioPageService:()=>P});var n=o(11010),i=o(86539),r=o(99708),s=o(5112),a=o(88535),_=o(82161),l=o(96065),c=o(53902),u=o(98116),d=o(11455),p=o(4801),h=o(34892),m=o(56401),f=o(70027),g=o(44734),v=o(3895),y=o(39586),E=o(1959),w=o(49957),b=o(55878),A=o(76815);function P(e){const t=(0,i.getEffectorServiceDomain)(e),o=p.AudioPageProxy.ensure(),_=(0,c.ensureAudioDislikesInMyMusicWebService)(),P=(0,l.ensureGroupsAudioMusicWebService)(),O=t.createEvent(),C=(0,u.restore)(O,null),{$fullIdsMap:M,fullIdsMapApi:D}=(0,r.createFullIdsMap)(t),{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:S,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:k}=(0,A.createDeleteAudiosFromMyMusicForLastWeekDataIdentities)(t),L=t.createEffect((({audioEl:e,inProgress:t})=>{e&&(e.dataset["in-progress"]=(0,h.intval)(t).toString())})),R=(0,u.attach)({source:(0,u.combine)({myMusicIdentitiesMap:_.$myMusicIdentitiesMap,myMusicInitializedIdentitiesMap:_.$myMusicInitializedIdentitiesMap,deletedFromMyMusicAudiosIdentitiesMap:M,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:S}),effect({myMusicIdentitiesMap:e,myMusicInitializedIdentitiesMap:t,deletedFromMyMusicAudiosIdentitiesMap:i,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:r},{audio:a,audioEl:l,playlist:c,audioRef:u}){return(0,n._)((function*(){if(!a)throw new Error("Audio not exists");const n=(0,s.getAudioFullId)(a),p=(0,d.isMy)({identity:a,myMusicIdentitiesMap:e,isMyMusicActionInitialized:n in t,userId:window.vk.id});try{p?yield _.deleteFromMyMusicFx({audioEl:l,audio:a,audioRef:u,needReloadTrackCode:!0}):(c&&o.onUserAction(a,c),yield _.addToMyMusicFx({audioEl:l,audio:a,audioRef:u,isNotificationDisabled:!0,needReloadTrackCode:!0}),p?D.add(n):(n in i&&D.remove(n),n in r&&k.remove(n)),!p&&n in i?D.remove(n):p&&D.add(n))}catch(e){throw new Error(`${p?'Failed to delete audio from "My Music"':'Failed to add audio to "My music"'}`,{cause:e})}}))()}}),x=(0,u.attach)({source:P.$identitiesMap,effect(e,{audioEl:t,audio:i,groupId:r,playlist:s}){return(0,n._)((function*(){if(!i)throw new Error("Audio not exists");const n=(0,l.isAddedToGroup)({identity:i,groupsMusicIdentitiesMap:e,groupId:r});try{n?yield P.deleteFx({audioEl:t,groupId:r,audio:i}):(s&&o.onUserAction(i,s),yield P.addFx({audioEl:t,groupId:r,audio:i}))}catch(e){throw new Error(`${n?"Failed to delete audio from group with id":"Failed to add audio to group with id"} ${r}`,{cause:e})}}))()}}),B=(0,u.attach)({source:C,effect(e,{audioEl:t,audio:i,audioRef:r=""}){return(0,n._)((function*(){if(!I(e))return window.vk&&window.vk.widget&&window.Widgets?void window.Widgets.oauth():void console.error("The user is not authorized, it is impossible to add or delete audio");if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(T(t))return;const n=i||m.AudioUtils.getAudioFromEl(i,!0);if(!n)throw new Error("Audio not exists");const s=o.currentPlaylist,_=function(e){if(!(0,a.isNumber)(e.ownerId))return null;const t=Boolean(e.ownerId&&(0,a.isNumber)(e.ownerId)&&e.ownerId<0&&e.canAddToGroup);return t?-e.ownerId:null}(o);(0,a.isNumber)(_)?yield x({audioEl:t,audio:n,groupId:_,playlist:s}):yield R({audioEl:t,audio:n,playlist:s,audioRef:r})}))()}}),N=(0,u.attach)({source:S,effect(e,{audioEl:t,audio:o}){return(0,n._)((function*(){if(!o)throw new Error("Audio not exists");const n=(0,s.getAudioFullId)(o),i=e[n];if(!i)throw new Error("Audio is not ready to delete all audio from the last week in My Music");(0,g.showFastBox)({title:(0,v.getLang)("audio_delete_all_title"),onHide:()=>{L({audioEl:t,inProgress:!1})}},i.message||"",(0,v.getLang)("global_delete"),(function(e){let t=(0,y.extend)({act:"delete_all"},i.data);b.ajax.post("al_audio.php",t,{showProgress:()=>(0,E.lockButton)(e),onDone:function(){let e=(0,w.getAudioPlayer)().getPlaylist(f.AudioPlaylist.TYPE_PLAYLIST,i.data.from_id,f.AudioPlaylist.DEFAULT_PLAYLIST_ID);(0,w.getAudioPlayer)().deletePlaylist(e),D.remove(n),window.nav.reload()},onFail:()=>!0})}),(0,v.getLang)("global_cancel"))}))()}}),U=(0,u.attach)({source:(0,u.combine)({userId:C,myMusicInitializedIdentitiesMap:_.$myMusicInitializedIdentitiesMap,myMusicIdentitiesMap:_.$myMusicIdentitiesMap,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:S}),effect({userId:e,myMusicIdentitiesMap:t,myMusicInitializedIdentitiesMap:o,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:i},{audio:r,audioEl:a}){return(0,n._)((function*(){if(!I(e))return void console.error("The user is not authorized, it is impossible to add or delete audio");if(!r)throw new Error("Audio not exists");if(T(a))return;window.tooltips&&window.tooltips.hideAll();const n=(0,s.getAudioFullId)(r);if(n in i)return void(yield N({audioEl:a,audio:r}));if(!(0,d.isMy)({identity:r,myMusicIdentitiesMap:t,isMyMusicActionInitialized:n in o,userId:e}))throw new Error('Audio not found in "My Music"');var l;r.isClaimed&&(null==(l=a)||l.remove());const[c,u]=yield b.ajax.promisifiedPost("al_audio.php",{act:"delete_audio",oid:r.ownerId,aid:r.id,hash:r.deleteHash,restore:1,track_code:r.trackCode});c&&k.add({audioFullId:n,value:{data:c,message:u||""}}),yield _.deleteFromMyMusicFx({audio:r,audioEl:a,forceRemoveFromStoreParams:{oldIdentity:r,newIdentity:r}}),D.add(n),r.isClaimed&&m.AudioUtils.deleteDeletedAudios(),L({audioEl:a,inProgress:!1})}))()}});return(0,u.sample)({clock:[B,U],fn:({audioEl:e})=>({audioEl:e,inProgress:!0}),target:L}),(0,u.sample)({clock:B.finally,fn:({params:{audioEl:e}})=>({audioEl:e,inProgress:!1}),target:L}),{$myMusicIdentitiesMap:_.$myMusicIdentitiesMap,$deletedFromMyMusicAudiosIdentitiesMap:M,$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:S,toggleAddAudioFx:B,deleteAudioFromMyMusicLegacyFx:U,setUserId:O}}function I(e){return(0,a.isNumber)(e)&&_.Ranges.isUserId(e)}function T(e){var t,o;return Boolean(null==(o=e)||null==(t=o.dataset)?void 0:t["in-progress"])}},94113:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPageService:()=>s});var n=o(90426),i=o(98116),r=o(39348);const s=(0,n.makeSharedState)("global/audio/audioPage/service",(()=>(0,r.createAudioPageService)({domain:(0,i.createDomain)("global/audio/audioPage/service"),name:"global/audio/audioPage/service"})),{version:1})},76815:(e,t,o)=>{"use strict";o.d(t,{createDeleteAudiosFromMyMusicForLastWeekDataIdentities:()=>s});var n=o(98116),i=o(36496),r=o(58038);function s(e){const t=e.createStore({});return{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:t,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:(0,n.createApi)(t,{add:(e,t)=>(0,i.addPairToMap)(e,{key:t.audioFullId,value:t.value}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},44142:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPageService:()=>n.ensureAudioPageService});o(41385);var n=o(94113)},59440:(e,t,o)=>{"use strict";o.d(t,{createAudioPlayerService:()=>p});var n=o(11010),i=o(98116),r=o(49957),s=o(92450),a=o(73674),_=o(76849),l=o(86539),c=o(99763),u=o(93943),d=o(59397);function p(e){const t=(0,l.getEffectorServiceDomain)(e),o=t.createEvent(),p=()=>{const e=(0,r.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");var t;return null!=(t=e.getPlaylistQueue())?t:null},h=t.createEvent(),m=t.createEvent(),f=t.createEvent(),g=t.createEvent(),v=t.createEvent(),y=t.createEvent(),E=t.createEvent(),w=t.createEvent(),b=t.createEvent(),A=t.createEvent(),P=t.createEvent(),I=t.createEvent(),T=t.createEvent(),O=t.createEvent(),C=t.createEvent(),M=t.createEvent(),D=t.createEvent(),S=t.createEvent(),k=(0,i.restore)(h,null),L=t.createStore(null,{updateFilter:(e,t)=>!(0,d.isEqual)(e,t)}),R=L.map((e=>e&&(0,_.audioTupleToAudioObject)(e)||null)),x=(0,i.restore)(m,!1),B=(0,i.restore)(A,!1),N=(0,i.restore)(P,null),U=(0,i.restore)(f,null),W=(0,i.restore)(v,0),F=(0,i.restore)(y,0),K=(0,i.restore)(E,0),j=(0,i.restore)(w,0),V=(0,i.restore)(b,1),H=(0,i.restore)(I,!1),q=(0,i.restore)(T,!1),G=(0,i.restore)(O,!1),$=(0,i.restore)(C,!1),z=t.createEffect((()=>{var e;const t=(0,r.getAudioPlayer)();if(!t)throw new Error("Audio player does not initialize");var o,n;m(t.isPlaying()),A(t.ads.isActive||!1),P(t.ads.getCurrentAd()||null),f(t.getCurrentPlaylist()||null),g(t.getCurrentAudio()||null),v(null!=(o=t.getCurrentProgress())?o:0),y(0),E(null!=(n=t.getCurrentBuffered())?n:0),w(t.getVolume()||0),b(a.AudioPlayer.podcastGetPlaybackRate()||1),I(Boolean(a.AudioPlayer.getDurationType())),T(Boolean(null==(e=p())?void 0:e.shuffled)),O(Boolean(t.isRepeatCurrentAudio())),C(Boolean(t.isRepeatAll())),t.subscribe(s.AudioPlayerEventType.PLAYER_IS_PLAYING_CHANGED,(e=>{m(e)})),t.subscribe(s.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{f(t.getCurrentPlaylist()||null)})),t.on(this,s.AudioPlayerEventType.PLAYLIST_CLEAR_REQUESTED,(()=>{D()})),t.on(this,s.AudioPlayerEventType.PLAYLIST_CLEARED,(()=>{var e,o;f(t.getCurrentPlaylist()||null),I(Boolean(a.AudioPlayer.getDurationType())),T(null!=(o=null==(e=p())?void 0:e.shuffled)&&o),b(a.AudioPlayer.podcastGetPlaybackRate()||1),O(Boolean(t.isRepeatCurrentAudio())),C(Boolean(t.isRepeatAll()))})),t.subscribe(this,s.AudioPlayerEventType.PLAYER_IS_AD_CHANGED,(e=>{A(e||!1),P(t.ads.getCurrentAd()||null)})),t.on(this,[s.AudioPlayerEventType.AD_STARTED,s.AudioPlayerEventType.AD_READY,s.AudioPlayerEventType.AD_DEINITED,s.AudioPlayerEventType.AD_COMPLETED],(()=>{A(t.ads.isActive||!1),P(t.ads.getCurrentAd()||null)})),t.on(this,[s.AudioPlayerEventType.PLAY,s.AudioPlayerEventType.PLAY_REQUESTED],(()=>{M()})),t.on(this,[s.AudioPlayerEventType.PLAY,s.AudioPlayerEventType.PLAY_REQUESTED,s.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,s.AudioPlayerEventType.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE,s.AudioPlayerEventType.PLAYLIST_CLEARED,s.AudioPlayerEventType.CURRENT_CHANGED,s.AudioPlayerEventType.UPDATE],(e=>{g(e||null)})),t.subscribe(s.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,(e=>{S(e)})),t.subscribe(s.AudioPlayerEventType.CURRENT_CHANGED,(()=>{v(0)})),t.subscribe(s.AudioPlayerEventType.PROGRESS,((e,o)=>{var n;v((null==(n=t.ads)?void 0:n.isActive)?t.ads.getCurrentProgress():e),y(o)})),t.subscribe(s.AudioPlayerEventType.BUFFERED,(e=>{var o;E((null==(o=t.ads)?void 0:o.isActive)?0:e)})),t.subscribe(s.AudioPlayerEventType.VOLUME,(e=>{w(e)})),t.on(this,s.AudioPlayerEventType.UPDATE,(()=>{I(Boolean(a.AudioPlayer.getDurationType()))})),h(t)})),Y=(0,u.attachPlayer)(k,(0,n._)((function*(e,t){if(!t)return void e.playAudioItem();const{audio:o,playlist:n,context:i,byPlayerButton:r=!1}=t;e[r?"playByButton":"playAudioItem"].bind(e)({audio:o,playlist:n,context:i})}))),Q=(0,u.attachPlayer)(k,((e,t)=>{if(!t)return void e.pauseByButton();const{byChangeChannel:o=!1}=t;e[o?"pauseByChangeChannel":"pauseByButton"].bind(e)()})),X=(0,u.attachPlayer)(k,(e=>{e.resume()})),J=(0,u.attachPlayer)(k,(e=>{e.playNext()})),Z=(0,u.attachPlayer)(k,(e=>{e.playPrev()})),ee=(0,u.attachPlayer)(k,((e,{audioEl:t,audio:o})=>{e.setNext(t,o)})),te=(0,u.attachPlayer)(k,((e,t)=>{e.seek(t)})),oe=(0,u.attachPlayer)(k,((e,t)=>{e.setVolume(t)})),ne=(0,u.attachPlayer)(k,(e=>{e.toggleDurationType()})),ie=t.createEffect((()=>{var e,t;T(null!=(t=null==(e=p())?void 0:e.shuffled)&&t)})),re=(0,u.attachPlayer)(k,(e=>{e.toggleRepeatCurrentAudio(),O(Boolean(e.isRepeatCurrentAudio())),C(Boolean(e.isRepeatAll()))})),se=(0,u.attachPlayer)(k,(e=>{e.toggleRepeatAll(),O(Boolean(e.isRepeatCurrentAudio())),C(Boolean(e.isRepeatAll()))})),ae=(0,i.attach)({source:(0,i.combine)({ap:k,prevSpeed:V}),effect({ap:e,prevSpeed:t},o){if(!e)throw new Error("Audio player does not initialize");var n;t!==o&&(e.podcastChangePlaybackRate(1!==o&&o<t),b(null!=(n=a.AudioPlayer.podcastGetPlaybackRate())?n:1))}}),_e=(0,u.attachPlayer)(k,(e=>{var t;return null!=(t=e.getCurrentPlaylist())?t:null})),le=(0,u.attachPlayer)(k,((e,{audio:t,actionType:o,ref:n="",refEl:i=null})=>{e.podcastSetActionRef(t,o,n,i)})),ce=(0,u.attachPlayer)(k,((e,{audioFullId:t,hasDislike:o})=>{e.updateAudioDislikeStatus(t,o)})),ue=(0,u.attachPlayer)(k,((e,t)=>{var o,n;return null==(n=e)||null==(o=n.emitter)?void 0:o.emit(t.eventName,t.data)})),de=(0,u.attachPlayer)(k,((e,{eventType:t,params:o})=>e.notify(t,...o)));return(0,i.sample)({clock:(0,c.once)(o),target:z}),(0,i.sample)({clock:g,target:L}),{$isPlaying:x,$isAd:B,$currentAd:N,$currentPlaylist:U,$currentAudio:R,$currentAudioTuple:L,$progress:W,$duration:F,$loadingProgress:K,$volume:j,$negativeDurationTypeEnabled:H,$isShuffled:q,$isRepeatCurrentAudio:G,$isRepeatAll:$,$playbackSpeed:V,playFx:Y,pauseFx:Q,resumeFx:X,playNextFx:J,playPrevFx:Z,setNextFx:ee,seekFx:te,updateVolumeFx:oe,toggleNegativeDurationTypeFx:ne,updatedIsShuffledFx:ie,toggleRepeatCurrentAudioFx:re,toggleRepeatAllFx:se,updatePlaybackSpeedFx:ae,getCurrentPlaylistFx:_e,podcastSetActionRefFx:le,updateAudioDislikeStatusFx:ce,emitFx:ue,notifyFx:de,notifyAudioStartedPlaying:M,notifyPlaylistClearRequested:D,notifyCurrentRadioStationFollowStatusUpdate:S,init:o,getCurrentAudio:()=>{const e=(0,r.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");const t=e.getCurrentAudio();return t?(0,_.audioTupleToAudioObject)(t):null},getPlaylistQueue:p,getPlaylist:({type:e,ownerId:t,albumId:o,accessHash:n,blockId:i})=>{const s=(0,r.getAudioPlayer)();if(!s)throw new Error("Audio player does not initialize");return s.getPlaylist(e,t,o,n,i)||null}}}},44239:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPlayerService:()=>s});var n=o(90426),i=o(98116),r=o(59440);o(81259);const s=(0,n.makeSharedState)("global/web/audio/player",(()=>(0,r.createAudioPlayerService)({domain:(0,i.createDomain)("global/web/audio/player"),name:"audio/web/audio/player"})),{version:3})},93943:(e,t,o)=>{"use strict";o.d(t,{attachPlayer:()=>i});var n=o(98116);function i(e,t){return(0,n.attach)({source:e,effect(e,o){if(!e)throw new Error("Audio player does not initialize");return t(e,o)}})}},81259:(e,t,o)=>{"use strict";var n,i=o(28021);!function(e){e[e.Play=i.ACTION_PLAY]="Play",e[e.Pause=i.ACTION_PAUSE]="Pause",e[e.Seek=i.ACTION_SEEK]="Seek",e[e.TimeMaker=i.ACTION_TIME_MARKER]="TimeMaker",e[e.Heartbeat=i.ACTION_HEARTBEAT]="Heartbeat"}(n||(n={}))},35539:(e,t,o)=>{"use strict";o.d(t,{audioPreviewsService:()=>n});const n=(0,o(51624).ensureAudioPreviewsService)()},10077:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicWebService:()=>h});var n=o(11010),i=o(86539),r=o(60486),s=o(99708),a=o(5112),_=o(84109),l=o(98116),c=o(96193),u=o(44239),d=o(92450),p=o(70027);function h(e){const t=(0,i.getEffectorServiceDomain)(e),o=(0,r.ensureGroupsMusicService)(),h=(0,u.ensureAudioPlayerService)(),{$fullIdsMap:m,fullIdsMapApi:f}=(0,s.createFullIdsMap)(t),g=(0,l.attach)({source:(0,l.combine)({groupsMusicIdentitiesMap:o.$identitiesMap}),effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:i,audioEl:r=null}){return(0,n._)((function*(){if(!t)throw new Error("Audio not exists");if((0,c.isAddedToGroup)({identity:t,groupsMusicIdentitiesMap:e,groupId:i}))throw new Error(`Audio already in group with id ${i}`);const n=(0,a.getAudioFullId)(t);let s=document.querySelector(`._audio_row_${n}`);s=s==r?null:s;try{r&&r.classList.add("audio_row__added"),s&&s.classList.add("audio_row__added"),h.notifyFx({eventType:d.AudioPlayerEventType.ADDED,params:[n]}),yield o.addFx({groupId:i,trackedIdentity:t}),h.notifyFx({eventType:d.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[t,Boolean(r)&&{audioElement:r}]})}catch(e){throw r&&r.classList.remove("audio_row__added"),s&&s.classList.remove("audio_row__added"),new Error(`Failed to add audio to group with id ${i}`,{cause:e})}}))()}}),v=(0,l.attach)({source:(0,l.combine)({groupsMusicIdentitiesMap:o.$identitiesMap}),effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:i,audioEl:r=null}){return(0,n._)((function*(){if(!t)throw new Error("Audio not exists");const n=(0,_.getGroupAudioFullId)(t,i),s=(0,c.isAddedToGroup)({identity:t,groupsMusicIdentitiesMap:e,groupId:i}),l=e[n];if(!s&&!l)throw new Error(`Audio not found in group with id ${i}`);const u=(0,a.getAudioFullId)(t),m=(0,a.getAudioFullId)(null!=l?l:t);let f=document.querySelector(`._audio_row_${u}`);f=f==r?null:f;try{r&&r.classList.remove("audio_row__added"),f&&f.classList.remove("audio_row__added"),h.notifyFx({eventType:d.AudioPlayerEventType.REMOVED,params:[u,m]}),yield o.deleteFx({groupId:i,audioId:l?l.id:t.id});const e=h.getPlaylist({type:p.AudioPlaylist.TYPE_PLAYLIST,ownerId:i,albumId:p.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(m),h.notifyFx({eventType:d.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[t,Boolean(r)&&{audioElement:r}]})}catch(e){throw r&&r.classList.add("audio_row__added"),f&&f.classList.add("audio_row__added"),new Error(`Failed to delete audio from group with id ${i}`,{cause:e})}}))()}});return(0,l.sample)({clock:[g,v],filter:({audio:e})=>Boolean(e),fn:({audio:e,groupId:t})=>(0,_.getGroupAudioFullId)(e,t),target:f.add}),(0,l.sample)({clock:[g.finally,v.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e,groupId:t}})=>(0,_.getGroupAudioFullId)(e,t),target:f.remove}),{$loadingIdentitiesMap:m,$identitiesMap:o.$identitiesMap,addFx:g,deleteFx:v}}},96065:(e,t,o)=>{"use strict";o.d(t,{ensureGroupsAudioMusicWebService:()=>a,isAddedToGroup:()=>s.isAddedToGroup});var n=o(90426),i=o(98116),r=o(10077),s=o(96193);const a=(0,n.makeSharedState)("global/web/audio/groupsMusic",(()=>(0,r.createGroupsMusicWebService)({domain:(0,i.createDomain)("global/web/audio/groupsMusic"),name:"global/web/audio/groupsMusic"})),{version:2})},96193:(e,t,o)=>{"use strict";o.d(t,{isAddedToGroup:()=>r});var n=o(88535),i=o(84109);function r({identity:e,groupsMusicIdentitiesMap:t,groupId:o}){if(!e||!(0,n.isNumber)(o))return!1;return(0,i.getGroupAudioFullId)(e,o)in t}},68854:(e,t,o)=>{"use strict";o.d(t,{createMusicAudioMyDislikesService:()=>a});var n=o(11010),i=o(5112),r=o(98116),s=o(53902);function a({domain:e,$audio:t,$audioEl:o}){const a=(0,s.ensureAudioDislikesInMyMusicWebService)(),_=null!=o?o:e.createStore(null),l=t.map((e=>e&&e.id&&e.ownerId?{id:e.id,ownerId:e.ownerId,trackCode:e.trackCode}:null)),c=(0,r.combine)({identity:l,fullIdsMap:a.$dislikesInitializedIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,i.getAudioFullId)(e)])));return{$isAudioDisliked:(0,r.combine)({audio:t,myAudioDislikesIdentitiesMap:a.$dislikesIdentitiesMap,isDislikeActionInitialized:c}).map((({audio:e,myAudioDislikesIdentitiesMap:t,isDislikeActionInitialized:o})=>(0,s.hasDislike)({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:o}))),$isDislikeActionLoading:(0,r.combine)({identity:l,fullIdsMap:a.$dislikesLoadingIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,i.getAudioFullId)(e)]))),addFx:(0,r.attach)({source:(0,r.combine)({audio:t,audioEl:_}),effect({audio:e,audioEl:t},o){return(0,n._)((function*(){var n,i;yield a.addDislikeFx({audio:e,audioEl:t,skipDeletionAudioFromMyMusic:null==(n=o)?void 0:n.skipDeletionAudioFromMyMusic,needReloadTrackCode:null==(i=o)?void 0:i.needReloadTrackCode})}))()}}),removeFx:(0,r.attach)({source:(0,r.combine)({audio:t,audioEl:_}),effect({audio:e,audioEl:t},o){return(0,n._)((function*(){var n;yield a.removeDislikeFx({audio:e,audioEl:t,needReloadTrackCode:null==(n=o)?void 0:n.needReloadTrackCode})}))()}})}}},76103:(e,t,o)=>{"use strict";o.d(t,{createMusicAudioMyDislikesService:()=>n.createMusicAudioMyDislikesService});var n=o(68854)},23821:(e,t,o)=>{"use strict";o.d(t,{createMyMusicWebService:()=>w});var n=o(11010),i=o(34788),r=o(86539),s=o(48293),a=o(51508),_=o(99708),l=o(5112),c=o(98116),u=o(44239),d=o(92450),p=o(34925),h=o(80896),m=o(70027),f=o(56401),g=o(80971),v=o(90600),y=o(64538),E=o(72236);function w(e){const t=(0,r.getEffectorServiceDomain)(e),o=(0,s.ensureMyMusicService)(),y=(0,u.ensureAudioPlayerService)(),E=new a.Emitter,{$fullIdsMap:w,fullIdsMapApi:A}=(0,_.createFullIdsMap)(t),{$fullIdsMap:P,fullIdsMapApi:I}=(0,_.createFullIdsMap)(t),T=(0,c.attach)({source:(0,c.combine)({myMusicIdentitiesMap:o.$identitiesMap,initializedIdentitiesMap:w}),effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:t},{audio:r,audioEl:s=null,isNotificationDisabled:a,forceAddToStoreParams:_,needReloadTrackCode:c,audioRef:u}){return(0,n._)((function*(){if(!r)throw new Error("Audio not exist");const n=Boolean(t[(0,l.getAudioFullId)(r)]);if((0,p.isMy)({identity:r,myMusicIdentitiesMap:e,isMyMusicActionInitialized:n,userId:window.vk.id}))throw new Error('Audio already in "My Music"');const m=(0,l.getAudioFullId)(r);let g=document.querySelector(`._audio_row_${m}`);g=g==s?null:g;let v=!1,w=!1;s&&(s.closest(".CatalogBlock__my_audios_block")||s.closest(".CatalogBlock__my_audios"))&&(v=!0),g&&(g.closest(".CatalogBlock__my_audios_block")||g.closest(".CatalogBlock__my_audios"))&&(w=!0);try{s&&!v&&s.classList.add("audio_row__added"),g&&!w&&g.classList.add("audio_row__added"),y.notifyFx({eventType:d.AudioPlayerEventType.ADDED,params:[m]});let e=r.trackCode;if(c){const t=yield b(r,s,u);t&&(e=t)}_?o.addToStore(_):yield o.addFx({userId:window.vk.id,trackedIdentity:(0,i._)({},r,{trackCode:e})}),s&&v&&(s.classList.remove("audio_row__deleted"),f.AudioUtils.onRowOver(s,!1,!0)),g&&w&&(g.classList.remove("audio_row__deleted"),f.AudioUtils.onRowOver(g,!1,!0)),a||E.emit(h.MyMusicWebServiceEventType.AudioAddedToMyMusic),y.notifyFx({eventType:d.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[r,Boolean(s)&&{audioElement:s}]})}catch(e){throw s&&(s.classList.remove("audio_row__added"),v&&(s.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(s,!1,!0))),g&&(g.classList.remove("audio_row__added"),w&&(g.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(s,!1,!0))),new Error('Failed to add audio to "My Music"',{cause:e})}}))()}}),O=(0,c.attach)({source:(0,c.combine)({myMusicIdentitiesMap:o.$identitiesMap,initializedIdentitiesMap:w}),effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:t},{audio:i,audioEl:r=null,forceRemoveFromStoreParams:s,audioRef:a,needReloadTrackCode:_}){return(0,n._)((function*(){if(!i)throw new Error("Audio not exist");const n=(0,l.getAudioFullId)(i),c=Boolean(t[n]),u=(0,p.isMy)({identity:i,myMusicIdentitiesMap:e,isMyMusicActionInitialized:c,userId:window.vk.id}),h=e[n];if(!u&&!h)throw new Error('Audio not found in "My Music"');let E=document.querySelector(`._audio_row_${n}`);E=E==r?null:E;let w=!1,A=!1;r&&(r.closest(".CatalogBlock__my_audios_block")||r.closest(".CatalogBlock__my_audios"))&&(w=!0),E&&(E.closest(".CatalogBlock__my_audios_block")||E.closest(".CatalogBlock__my_audios"))&&(A=!0);const P=(0,l.getAudioFullId)(null!=h?h:i);try{r&&r.classList.remove("audio_row__added"),E&&E.classList.remove("audio_row__added"),y.notifyFx({eventType:d.AudioPlayerEventType.REMOVED,params:[n,P]}),s?o.removeFromStore(s):yield o.deleteFx({identity:null!=h?h:i}),_?b(i,r,a).then((e=>{(0,g.onAdditionalEvent)(r,i,{type:v.TYPE_REMOVED,trackCode:e||i.trackCode})})):(0,g.onAdditionalEvent)(r,i,{type:v.TYPE_REMOVED,trackCode:i.trackCode}),r&&w&&(r.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(r,!1,!0)),E&&A&&(E.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(E,!1,!0));const e=y.getPlaylist({type:m.AudioPlaylist.TYPE_PLAYLIST,ownerId:window.vk.id,albumId:m.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(P),y.notifyFx({eventType:d.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[i,Boolean(r)&&{audioElement:r}]})}catch(e){throw r&&(w?(r.classList.remove("audio_row__deleted"),f.AudioUtils.onRowOver(r,!1,!0)):r.classList.add("audio_row__added")),E&&(A?(E.classList.remove("audio_row__deleted"),f.AudioUtils.onRowOver(r,!1,!0)):E.classList.add("audio_row__added")),new Error('Failed to delete audio from "My Music"',{cause:e})}}))()}});return(0,c.sample)({clock:[T.done,O.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,l.getAudioFullId)(e),target:A.add}),(0,c.sample)({clock:[T,O],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,l.getAudioFullId)(e),target:I.add}),(0,c.sample)({clock:[T.finally,O.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,l.getAudioFullId)(e),target:I.remove}),{$initializedIdentitiesMap:w,$loadingIdentitiesMap:P,$identitiesMap:o.$identitiesMap,addFx:T,deleteFx:O,events:E.listenable}}function b(e,t,o){return A.apply(this,arguments)}function A(){return(A=(0,n._)((function*(e,t,o){var n,i;const r=null!=(i=(0,E.getContextPlaylist)(t))?i:{context:o,playlist:null},s=yield(0,y.getAudioTrackCodeFromPlaylist)(null==(n=r)?void 0:n.playlist,e);return null!=s?s:null}))).apply(this,arguments)}},80896:(e,t,o)=>{"use strict";var n;o.d(t,{MyMusicWebServiceEventType:()=>n}),function(e){e.AudioAddedToMyMusic="audioAddedToMyMusic"}(n||(n={}))},11455:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioMusicWebService:()=>a,isMy:()=>s.isMy});var n=o(90426),i=o(98116),r=o(23821),s=o(34925);const a=(0,n.makeSharedState)("global/web/audio/myMusic",(()=>(0,r.createMyMusicWebService)({domain:(0,i.createDomain)("global/web/audio/myMusic"),name:"global/web/audio/myMusic"})),{version:3})},34925:(e,t,o)=>{"use strict";o.d(t,{isMy:()=>i});var n=o(5112);function i({identity:e,myMusicIdentitiesMap:t,isMyMusicActionInitialized:o,userId:i}){if(!e)return!1;return(0,n.getAudioFullId)(e)in t||!o&&e.ownerId===i}},22880:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipApplication:()=>s});var n=o(85893),i=o(82930),r=o(95212);function s({target:e,portalRoot:t,onShownChange:o}){return(0,n.jsx)(i.AppRootProvider,{children:(0,n.jsx)(r.AudioRowMoreTooltipContainer,{onShownChange:o,target:e,portalRoot:t})})}},49168:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipController:()=>m});var n=o(70912),i=o(15816),r=o(2204),s=o(22880),a=o(51508),_=o(90426),l=o(48498),c=(0,i._)("_initiator"),u=(0,i._)("_emitter"),d=(0,i._)("_target"),p=(0,i._)("_checkIsMounted"),h=(0,i._)("_handleShownChange");class m{get isMounted(){return(0,n._)(this,p)[p]()}get events(){return(0,n._)(this,u)[u].listenable}mount(e,t){(0,n._)(this,p)[p](e)||((0,n._)(this,d)[d]=e),(0,n._)(this,c)[c].render({target:e,portalRoot:t,onShownChange:(0,n._)(this,h)[h]})}unmount(){(0,n._)(this,p)[p]()&&(0,n._)(this,c)[c].unmount(),(0,n._)(this,d)[d]=null,(0,n._)(this,u)[u].emit(l.AudioRowMoreTooltipControllerEventType.Closed)}constructor(){Object.defineProperty(this,p,{value:f}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=(0,r.createReactInitiator)(s.AudioRowMoreTooltipApplication),(0,n._)(this,u)[u]=new a.Emitter,(0,n._)(this,d)[d]=null,(0,n._)(this,h)[h]=e=>{this.isShown=e,e||(0,n._)(this,u)[u].emit(l.AudioRowMoreTooltipControllerEventType.Closed)}}}function f(e){return(!e||e===(0,n._)(this,d)[d])&&(0,n._)(this,c)[c].isMounted()}m.ensure=(0,_.makeSharedState)("audio/audioPage/audioRow/moreTooltip/controller",(()=>new m),{version:2})},47612:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipController:()=>n.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>i.AudioRowMoreTooltipControllerEventType});var n=o(49168),i=o(48498)},48498:(e,t,o)=>{"use strict";var n;o.d(t,{AudioRowMoreTooltipControllerEventType:()=>n}),function(e){e.Closed="closed"}(n||(n={}))},36404:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipContainer:()=>D});var n=o(85893),i=o(70028),r=o(89665),s=o(45360),a=o(13720),_=o(50163),l=o(20140),c=o(11930),u=o(39743),d=o(32184),p=o(61539),h=o(7729),m=o(69064),f=o(4190),g=o(58231),v=o(67294),y=o(3895),E=o(48041),w=o(56623),b=o(63002),A=o(88535),P=o(88446);const I=(0,E.partConfigEnabled)("audio_longtap_web"),T=(0,E.partConfigEnabled)("audio_tooltip_copy_link_web"),O=(0,E.partConfigEnabled)("dislikes_web_enabled")||(0,E.partConfigEnabled)("redesign_audio_player_tooltip_dislikes_web_enabled"),C=(0,g.ensureAudioRowMoreTooltipService)(),{dislikesService:M}=C;function D({target:e,portalRoot:t=null,onShownChange:o}){var g;const E=(0,f.useUnit)(C.setIsShowTooltip),D=(0,f.useUnit)(C.$audio),S=(0,f.useUnit)(C.$isAudioClaimed),k=(0,f.useUnit)(C.$isEpisode),L=(0,f.useUnit)(C.$isAlbum),R=(0,f.useUnit)(C.$isCurrentAlbumSnippet),x=(0,f.useUnit)(C.$isAudioHasSnippet),B=(0,f.useUnit)(C.$audioPlaylists),N=(0,f.useUnit)(C.$isShowAllPlaylists),U=(0,f.useUnit)(C.$isAudioPlaylistsFetching),W=(0,f.useUnit)(C.$loadingAddToPlaylistFullIdsMap),F=(0,f.useUnit)(C.$addedPlaylistsFullIdsMap),K=(0,f.useUnit)(C.$initializedPlaylistsFullIdsMap),j=(0,f.useUnit)(C.$currentGroupId),V=(0,f.useUnit)(M.$isAudioDisliked),H=(0,f.useUnit)(M.$isDislikeActionLoading),q=(0,f.useUnit)(C.copyAudioLinkFx),G=(0,f.useUnit)(C.shareAudioFx),$=(0,f.useUnit)(C.openEpisodeFx),z=(0,f.useUnit)(C.openAlbumFx),Y=(0,f.useUnit)(C.setNextInPlayerQueueFx),Q=(0,f.useUnit)(M.addFx),X=(0,f.useUnit)(M.removeFx),J=(0,f.useUnit)(C.addAudioToNewPlaylistFx),Z=(0,f.useUnit)(C.toggleAddAudioToPlaylistFx),ee=(0,f.useUnit)(C.showAllPlaylistsFx),te=(0,v.useMemo)((()=>V?"audio-show-more-tooltip-remove-dislike-button":"audio-show-more-tooltip-add-dislike-button"),[V]);return(0,v.useEffect)((()=>()=>{E(!1),o(!1)}),[]),(0,n.jsx)(i.DropdownActionSheet,{portalRoot:t,action:"hover",restoreFocus:!1,content:(0,n.jsxs)(n.Fragment,{children:[I&&x&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(a.Icon20ListPlayOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>{var e;return(0,P.logSearchAudioClick)(P.SearchClickActionMap.LISTEN_NEXT,null==(e=D)?void 0:e.trackCode),Y()},"data-testid":"audio-row-more-tooltip-set-next-audio",children:(0,y.getLang)("audio_set_next_audio")}),T&&!S&&!k&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(_.Icon20CopyOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>{var e;return(0,P.logSearchAudioClick)(P.SearchClickActionMap.COPY_LINK,null==(e=D)?void 0:e.trackCode),q()},"data-testid":"audio-row-more-tooltip-copy-audio-link",keepOpen:!0,children:(0,y.getLang)("audio_copy_audio_link")}),k&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(l.Icon20PodcastOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:$,"data-testid":"audio-row-more-tooltip-podcast-open-episode",children:(0,y.getLang)("audio_podcast_open_episode")}),!S&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(c.Icon20ShareOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>{var e;return(0,P.logSearchAudioClick)(P.SearchClickActionMap.SHARE,null==(e=D)?void 0:e.trackCode),G()},"data-testid":"audio-row-more-tooltip-share-audio",children:(0,y.getLang)("audio_share_audio")}),O&&!S&&!k&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:V?(0,n.jsx)(u.Icon20ThumbsDown,{className:(0,r.getColorClass)("color_icon_secondary")}):(0,n.jsx)(d.Icon20ThumbsDownOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),keepOpen:V,onClick:()=>{var e,t;if(V)return(0,P.logSearchAudioClick)(P.SearchClickActionMap.REMOVE_DISLIKE,null==(t=D)?void 0:t.trackCode),void X({needReloadTrackCode:!0});(0,P.logSearchAudioClick)(P.SearchClickActionMap.DISLIKE,null==(e=D)?void 0:e.trackCode),Q({skipDeletionAudioFromMyMusic:(0,A.isNumber)(j),needReloadTrackCode:!0})},disabled:H,"data-testid":te,children:(0,y.getLang)("audio_action_dislike")}),!S&&L&&!R&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(p.Icon20VinylOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>{var e;return(0,P.logSearchAudioClick)(P.SearchClickActionMap.OPEN_ALBUM,null==(e=D)?void 0:e.trackCode),z()},"data-testid":"audio-row-more-tooltip-open-album",children:(0,y.getLang)("audio_open_album")}),!S&&!k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.DropdownActionSheet.Separator,{}),(0,n.jsx)(s.DropdownActionSubSheet,{before:(0,n.jsx)(a.Icon20ListPlayOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),loading:U,disabled:U,sheet:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.DropdownActionSubSheet.Item,{disabled:U,before:(0,n.jsx)(h.Icon24Add,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>{var e;return(0,P.logSearchAudioClick)(P.SearchClickActionMap.ADD_TO_PLAYLIST,null==(e=D)?void 0:e.trackCode),J()},"data-testid":"audio-row-more-tooltip-add-to-new-playlist",children:(0,y.getLang)("audio_add_to_new_pl")}),null==(g=B)?void 0:g.map(((e,t)=>{if(!D||!e)return null;const o=(0,w.getAudioPlaylistId)(D.id,e.id),i=o in K?o in F:e.hasTargetAudio;var a;return(0,n.jsx)(v.Fragment,{children:(0,n.jsx)(s.DropdownActionSubSheet.Item,{keepOpen:!0,loading:!!D&&o in W,before:i?(0,n.jsx)(m.Icon20Check,{className:(0,r.getColorClass)("color_icon_secondary")}):null,onClick:()=>{var t;return(0,P.logSearchAudioClick)(P.SearchClickActionMap.ADD_TO_PLAYLIST,null==(t=D)?void 0:t.trackCode),Z(e)},"data-testid":"audio-row-more-tooltip-add-to-playlist",children:null!=(a=e.title)?a:""})},null===e.id?t:e.id)})),N&&(0,n.jsx)(s.DropdownActionSubSheet.Item,{onClick:ee,"data-testid":"audio-row-more-tooltip-show-all-playlists",children:(0,y.getLang)("audio_row_show_all_playlists")})]}),children:(0,y.getLang)("audio_add_to_playlist")})]})]}),onShownChange:e=>{E(e),o(e)},children:(0,n.jsx)(b.ForwardElementRef,{element:e})})}},40654:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipContainer:()=>n.AudioRowMoreTooltipContainer});var n=o(36404)},95212:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipContainer:()=>n.AudioRowMoreTooltipContainer});var n=o(40654)},1033:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipController:()=>n.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>n.AudioRowMoreTooltipControllerEventType,ensureAudioRowMoreTooltipService:()=>i.ensureAudioRowMoreTooltipService});var n=o(47612),i=o(58231)},97813:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDataService:()=>w});var n=o(11010),i=o(55878),r=o(4801),s=o(59397),a=o(98116),_=o(49294),l=o(26127),c=o(5112),u=o(99708),d=o(51717),p=o(7867),h=o(56401),m=o(80971),f=o(90600),g=o(44734),v=o(65740),y=o(56623),E=o(85349);function w({domain:e,$audio:t,$audioTuple:o,$audioEl:p,$isShowTooltip:w}){const P=r.AudioPageProxy.ensure(),I=(0,l.ensureMyAudioPlaylistsService)(),T=e.createEvent(),O=t.map((e=>e&&e.id&&e.ownerId?(0,c.getAudioFullId)({id:e.id,ownerId:e.ownerId}):null)),{$audioPlaylistsDataMap:C,audioPlaylistsDataMapApi:M}=(0,_.createAudioPlaylistsDataMap)(e),{$fullIdsMap:D,fullIdsMapApi:S}=(0,u.createFullIdsMap)(e),{$fullIdsMap:k,fullIdsMapApi:L}=(0,u.createFullIdsMap)(e),{$fullIdsMap:R,fullIdsMapApi:x}=(0,u.createFullIdsMap)(e),{$fullIdsMap:B,fullIdsMapApi:N}=(0,u.createFullIdsMap)(e),U=(0,a.combine)({audioFullId:O,audioPlaylistsDataMap:C}).map((({audioFullId:e,audioPlaylistsDataMap:t})=>{var o;return Boolean(e)&&(0,s.isString)(e)&&null!=(o=t[e])?o:null})),{$audioPlaylists:W,$isShowAllPlaylists:F,$newPlaylistHash:K}=(0,d.reshape)({source:U,shape:{$audioPlaylists:e=>{var t;return(null==(t=e)?void 0:t.playlists)||[]},$isShowAllPlaylists:e=>{var t;return(null==(t=e)?void 0:t.isShowAllPlaylists)||!1},$newPlaylistHash:e=>{var t;return(null==(t=e)?void 0:t.newPlaylistHash)||null}}}),j=(0,a.combine)({audioFullId:O,loadingFetchingFullIdsMap:D}).map((({audioFullId:e,loadingFetchingFullIdsMap:t})=>!!e&&Boolean(t[e]))),V=e.createEffect((0,n._)((function*(e){if(!e)throw new Error("Audio not exists");const t=A(P);try{const o=yield i.ajax.promisifiedPost("al_audio.php",{act:"playlists_by_audio",owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id});if(!o)throw new Error("Unknown error when fetching playlists by audio");const[n,r,s]=o;return{playlists:(n||[]).map(b),isShowAllPlaylists:r||!1,newPlaylistHash:s||null}}catch(e){throw new Error("Error when fetching playlists by audio",{cause:e})}}))),H=(0,a.attach)({source:t,effect(e){return(0,n._)((function*(){return V(e)}))()}}),q=(0,a.attach)({source:(0,a.combine)({audioTuple:o,newPlaylistHash:K}),effect({audioTuple:e,newPlaylistHash:t}){if(!e)throw new Error("Audio not exists");if(!t)throw new Error("Playlist hash not exists");const o=A(P);h.AudioUtils.editPlaylist(o,!1,"edit",{addAudio:e,newPlaylistHash:t,onSavePlaylistDone(){T()}})}}),G=(0,a.attach)({source:(0,a.combine)({audioEl:p,addedPlaylistsFullIdsMap:R,initializedPlaylistsFullIdsMap:B}),effect({audioEl:e,addedPlaylistsFullIdsMap:t,initializedPlaylistsFullIdsMap:o},{audio:i,playlist:r}){return(0,n._)((function*(){if(!i||!e)throw new Error("Audio not exists");const n=(0,y.getAudioPlaylistId)(i.id,r.id),s=n in o?n in t:r.hasTargetAudio;I.setUserId(window.vk.id),s?yield I.deleteAudioFx({audioIdentity:i,playlistId:r.id}):yield I.addAudioFx({audioIdentity:i,playlistId:r.id}),(0,m.onAdditionalEvent)(e,i,{type:s?f.TYPE_REMOVED:f.TYPE_ADDED,subtype:f.SUBTYPE_PLAYLIST})}))()}}),$=(0,a.attach)({source:t,effect(e,t){return(0,n._)((function*(){yield G({audio:e,playlist:t})}))()}}),z=(0,a.attach)({source:W,effect(e,t){return(0,n._)((function*(){if(e&&t){for(const o of e){const e=(0,y.getAudioPlaylistId)(t.id,o.id);L.remove(e),x.remove(e),N.remove(e)}M.remove((0,c.getAudioFullId)(t))}}))()}}),Y=(0,a.attach)({source:t,effect(e){if(!e)throw new Error("Audio not exists");const t=A(P);(0,g.showBox)("al_audio.php?act=more_playlists_add",{owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id},{params:{bodyStyle:"padding: 0px",width:560},onDone(){z(e)}})}});return(0,a.sample)({source:U,clock:(0,a.combine)({audio:t,isShowTooltip:w}),filter:(e,{isShowTooltip:t,audio:o})=>t&&!e&&Boolean(o),target:H}),(0,a.sample)({source:O,clock:H.doneData,filter:e=>Boolean(e),fn:(e,t)=>({audioFullId:e,playlistsData:t}),target:M.add}),(0,a.sample)({clock:V,filter:e=>Boolean(e),fn:e=>(0,c.getAudioFullId)({id:e.id,ownerId:e.ownerId}),target:S.add}),(0,a.sample)({clock:V.finally,filter:({params:e})=>Boolean(e),fn:({params:e})=>{const t=e;return(0,c.getAudioFullId)({id:t.id,ownerId:t.ownerId})},target:S.remove}),(0,a.sample)({clock:G,filter:({audio:e,playlist:t})=>Boolean(e)&&Boolean(t),fn:({audio:e,playlist:t})=>(0,y.getAudioPlaylistId)(e.id,t.id),target:L.add}),(0,a.sample)({clock:G.finally,filter:({params:{audio:e,playlist:t}})=>Boolean(e)&&Boolean(t),fn:({params:e})=>{const{audio:t,playlist:o}=e;return(0,y.getAudioPlaylistId)(t.id,o.id)},target:L.remove}),(0,a.sample)({source:(0,a.combine)({addedPlaylistsFullIdsMap:R,initializedPlaylistsFullIdsMap:B}),clock:G.done,filter:(e,{params:{audio:t,playlist:o}})=>Boolean(t)&&Boolean(o),fn:({addedPlaylistsFullIdsMap:e,initializedPlaylistsFullIdsMap:t},{params:o})=>{const{audio:n,playlist:i}=o,r=(0,y.getAudioPlaylistId)(n.id,i.id);return{added:r in t?r in e:i.hasTargetAudio,audioPlaylistId:r}},target:[N.add.prepend((({audioPlaylistId:e})=>e)),(0,v.condition)({if:({added:e})=>e,then:x.remove.prepend((({audioPlaylistId:e})=>e)),else:x.add.prepend((({audioPlaylistId:e})=>e))})]}),(0,E.reset)({clock:T,target:[C,D,k,B,R]}),{$audioPlaylists:W,$isShowAllPlaylists:F,$isAudioPlaylistsFetching:j,$loadingAddToPlaylistFullIdsMap:k,$addedPlaylistsFullIdsMap:R,$initializedPlaylistsFullIdsMap:B,addAudioToNewPlaylistFx:q,toggleAddAudioToPlaylistFx:$,showAllPlaylistsFx:Y}}function b(e){return{ownerId:+e[p.AudioPlaylistTupleKeys.OwnerId],id:+e[p.AudioPlaylistTupleKeys.Id],title:e[p.AudioPlaylistTupleKeys.Title]||null,hasTargetAudio:e[p.AudioPlaylistTupleKeys.HasTargetAudio]||!1,actionHash:e[p.AudioPlaylistTupleKeys.ActionHash]||null}}function A(e){let t;return t=(0,s.isNumber)(e.ownerId)&&e.ownerId<0&&e.canEditGroup?e.ownerId:window.vk.id,t}},56623:(e,t,o)=>{"use strict";function n(e,t){return`${e}_${t}`}o.d(t,{getAudioPlaylistId:()=>n})},99356:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDataService:()=>n.createAudioPlaylistsDataService});var n=o(97813)},49294:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDataMap:()=>s});var n=o(98116),i=o(36496),r=o(58038);function s(e){const t=e.createStore({});return{$audioPlaylistsDataMap:t,audioPlaylistsDataMapApi:(0,n.createApi)(t,{add:(e,{audioFullId:t,playlistsData:o})=>(0,i.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},7867:(e,t,o)=>{"use strict";var n;o.d(t,{AudioPlaylistTupleKeys:()=>n}),function(e){e[e.OwnerId=0]="OwnerId",e[e.Id=1]="Id",e[e.Title=2]="Title",e[e.HasTargetAudio=3]="HasTargetAudio",e[e.ActionHash=4]="ActionHash"}(n||(n={}))},74698:(e,t,o)=>{"use strict";o.d(t,{createAudioRowMoreTooltipService:()=>m});var n=o(11010),i=o(86539),r=o(51508),s=o(88535),a=o(98116),_=o(21247),l=o(56401),c=o(4801),u=o(76103),d=o(99356),p=o(44239),h=o(34663);function m(e){const t=(0,i.getEffectorServiceDomain)(e),o=c.AudioPageProxy.ensure(),m=(0,p.ensureAudioPlayerService)(),g=new r.Emitter,v=(0,a.createEvent)(),y=t.createEvent(),E=t.createEvent(),w=(0,a.restore)(y,!1),b=t.createStore(null),A=t.createStore(null),P=t.createStore(null),I=t.createStore(null),T=t.createStore(null),O=(0,a.restore)(E,null),{$audioPlaylists:C,$isShowAllPlaylists:M,$isAudioPlaylistsFetching:D,$loadingAddToPlaylistFullIdsMap:S,$addedPlaylistsFullIdsMap:k,$initializedPlaylistsFullIdsMap:L,addAudioToNewPlaylistFx:R,toggleAddAudioToPlaylistFx:x,showAllPlaylistsFx:B}=(0,d.createAudioPlaylistsDataService)({domain:t,$audio:A,$audioEl:b,$audioTuple:P,$isShowTooltip:w}),N=A.map((e=>{var t;return!!e&&Boolean(null==(t=e)?void 0:t.isClaimed)})),U=A.map((e=>!!e&&Boolean(l.AudioUtils.isPodcast(e)))),W=A.map((e=>{var t;return!!e&&Boolean(null==(t=e)?void 0:t.album)})),F=A.map((e=>{var t;return!!e&&Boolean(null==(t=e)?void 0:t.isCurrentAlbumSnippet)})),K=(0,a.combine)({audioEl:b,audio:A}).map((({audioEl:e,audio:t})=>{var o;if(!e||!t)return!1;const n=l.AudioUtils.getContextPlaylist(e,!0),[i,r]=l.AudioUtils.contextSplit(n);var s;if(!i||"my_audios_block"===r)return Boolean(null==(s=t)?void 0:s.isInSnippet);switch(i){case"search_results":case"catalog":case"album_page":case"my":case"module":case"user_list":case"group_list":case"edit_playlist":return!0}return Boolean(null==(o=t)?void 0:o.isInSnippet)})),j=(0,u.createMusicAudioMyDislikesService)({domain:t,$audio:A,$audioEl:b}),V=(0,a.attach)({source:(0,a.combine)({audio:A,audioLinkPathname:I,audioAccessKey:T}),effect({audio:e,audioLinkPathname:t,audioAccessKey:o}){return(0,n._)((function*(){if(!e)throw new Error("Audio not exist");t?yield l.AudioUtils.copyAudioLink(t):yield l.AudioUtils.copyAudioLinkByIdentity(e,null!=o?o:""),g.emit(h.AudioRowMoreTooltipServiceEventType.AudioLinkCopied,e)}))()}}),H=(0,a.attach)({source:(0,a.combine)({audioEl:b,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const n=t||o.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&l.AudioUtils.shareAudio(null!=e&&e,n)}}),q=(0,a.attach)({source:(0,a.combine)({audioEl:b,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const n=t||o.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&l.AudioUtils.openEpisode(null!=e&&e,n)}}),G=(0,a.attach)({source:(0,a.combine)({audioEl:b,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const n=t||o.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&l.AudioUtils.showAudioAlbum(null!=e&&e,n)}}),$=(0,a.attach)({source:(0,a.combine)({audioEl:b,audio:A}),effect:({audioEl:e,audio:t})=>{if(!e||!t)throw new Error("Audio not exist");t&&m.setNextFx({audioEl:e,audio:t})}}),z=(0,a.attach)({source:A,effect(e){return(0,n._)((function*(){if(!e)throw new Error("Audio not exists");const t=o.ownerId&&(0,s.isNumber)(o.ownerId)&&o.ownerId<0&&o.canAddToGroup&&o.ownerId!==e.ownerId;E(t?-o.ownerId:null)}))()}});return(0,_.spread)({source:v.map(f),targets:{audioEl:b,audioTuple:P,audio:A,audioLinkPathname:I,audioAccessKey:T}}),o.events.on(c.AudioPageEventType.Updated,(()=>{z()})),{init:v,$audio:A,$audioEl:b,$isAudioClaimed:N,$isEpisode:U,$isAlbum:W,$isCurrentAlbumSnippet:F,$isAudioHasSnippet:K,$audioPlaylists:C,$isShowAllPlaylists:M,$isAudioPlaylistsFetching:D,$loadingAddToPlaylistFullIdsMap:S,$addedPlaylistsFullIdsMap:k,$initializedPlaylistsFullIdsMap:L,$currentGroupId:O,setIsShowTooltip:y,copyAudioLinkFx:V,shareAudioFx:H,openEpisodeFx:q,openAlbumFx:G,setNextInPlayerQueueFx:$,addAudioToNewPlaylistFx:R,toggleAddAudioToPlaylistFx:x,showAllPlaylistsFx:B,dislikesService:j,events:g.listenable}}function f(e){var t,o,n,i,r;return{audioEl:null!=(i=e.audioEl)?i:null,audio:null!=(r=e.audio)?r:null,audioTuple:e.audioTuple,audioLinkPathname:(null==(t=e)?void 0:t.audioLinkPathname)||(null==(o=e.audio)?void 0:o.trackPageId)||null,audioAccessKey:(null==(n=e)?void 0:n.audioAccessKey)||null}}},34663:(e,t,o)=>{"use strict";var n;o.d(t,{AudioRowMoreTooltipServiceEventType:()=>n}),function(e){e.AudioLinkCopied="audioLinkCopied"}(n||(n={}))},58231:(e,t,o)=>{"use strict";o.d(t,{ensureAudioRowMoreTooltipService:()=>s});var n=o(90426),i=o(98116),r=o(74698);const s=(0,n.makeSharedState)("audio/audioPage/audioRow/moreTooltip",(()=>(0,r.createAudioRowMoreTooltipService)({domain:(0,i.createDomain)("audio/audioPage/audioRow/moreTooltip"),name:"audio/audioPage/audioRow/moreTooltip"})),{version:3})},63002:(e,t,o)=>{"use strict";o.d(t,{ForwardElementRef:()=>n});const n=(0,o(67294).forwardRef)((function({element:e,getRootRef:t},o){return t&&i(t,e),i(o,e),null}));function i(e,t){e&&("function"==typeof e?e(t):e.current=t)}},88207:(e,t,o)=>{"use strict";o.d(t,{SaveUserForQuickLoginBox:()=>h});var n=o(85893),i=o(67294),r=o(3895),s=o(68312),a=o(80541),_=o(12865),l=o(6758),c=o(58739),u=o(65526),d=o(74667),p=o(36671);const h=({logoutUrl:e,onLogout:t,onClose:o})=>{const[h,m]=(0,i.useState)(!0),f=()=>{s.vkConnectNavigationCollector.logCancelOnExit(),o()};return(0,i.useEffect)((()=>{s.vkConnectNavigationCollector.logSaveLoginModalShow()}),[]),(0,n.jsxs)(_.ModalBox,{children:[(0,n.jsx)(l.ModalHeader,{onClose:f,closeAriaLabel:(0,r.getLang)("global_close"),children:(0,r.getLang)("vkconnect_logout_save_user_dialog_title")}),(0,n.jsx)(c.ModalBody,{insetLevel:1,children:(0,n.jsx)(u.Div,{children:(0,n.jsx)(a.SettingsCellSwitch,{description:(0,r.getLang)("vkconnect_logout_save_user_dialog_description_text"),checked:h,onChange:e=>m(e.target.checked),children:(0,r.getLang)("vkconnect_logout_save_user_dialog_description_title")})})}),(0,n.jsx)(d.ModalFooter,{actionButtons:[(0,n.jsx)(p.Button,{size:"s",mode:"secondary",onClick:f,children:(0,r.getLang)("global_cancel")},"close"),(0,n.jsx)(p.Button,{size:"s",mode:"primary",onClick:()=>{let o="&save_user=0";h&&(o="&save_user=1"),t(`${e}${o}`)},children:(0,r.getLang)("global_head_logout")},"logout")]})]})}},55009:(e,t,o)=>{"use strict";o.d(t,{logout:()=>_,logoutWithDialog:()=>c});var n=o(34788),i=o(85893),r=o(36181),s=o(88207),a=o(80541);const _=(e,t)=>{(0,r.removeLoginCache)(e,t)},l=e=>{_(),window.location.href=e},c=e=>{(0,r.login)("check_user_saved").then((t=>{const{feature_enabled:o,is_user_saved:r}=t;o&&!r?(0,a.showMessageBoxModal)((t=>(0,i.jsx)(s.SaveUserForQuickLoginBox,(0,n._)({},t,{logoutUrl:e,onLogout:l}))),{width:420}):l(e)})).catch((()=>{l(e)}))}},43537:(e,t,o)=>{"use strict";o.d(t,{showCaptchaPopup:()=>n.showCaptchaPopup});var n=o(41823)},45195:(e,t,o)=>{"use strict";o.d(t,{CaptchaType:()=>n.CaptchaType,Platform:()=>n.Platform,captchaPopupService:()=>i});var n=o(36849);const i=(0,n.createCaptchaPopupService)()},41823:(e,t,o)=>{"use strict";o.d(t,{showCaptchaPopup:()=>a});var n=o(34788),i=o(85893),r=o(80541),s=o(55812);function a(e){(0,r.showMessageBoxModal)((t=>(0,i.jsx)(s.CaptchaPopup,(0,n._)({},t,e,{onClose:()=>{e.onClose&&e.onClose(),t.onClose()},onSubmit:(o,n)=>{e.onSubmit&&(e.onSubmit(o,n),t.onClose())}}))),{width:300})}},33239:(e,t,o)=>{"use strict";o.d(t,{CaptchaAnswerField:()=>c});var n=o(85893),i=o(67294),r=o(64469),s=o(86894),a=o(45195),_=o(3895),l=o(4190);const c=(0,i.forwardRef)((({captchaType:e},t)=>{const o=(0,l.useStore)(a.captchaPopupService.$answer),i=(0,l.useEvent)(a.captchaPopupService.answerChanged);return(0,n.jsx)(r.FormItem,{mode:"vertical",noPadding:!0,children:(0,n.jsx)(s.Input,{value:o,placeholder:e===a.CaptchaType.IMAGE?(0,_.getLang)("vkconnect_auth_label_captcha"):(0,_.getLang)("vkconnect_auth_label_captcha_audio"),onChange:e=>i(e.target.value),getRef:t,tabIndex:0})})}))},29291:(e,t,o)=>{"use strict";o.d(t,{CaptchaAnswerField:()=>n.CaptchaAnswerField});var n=o(33239)},83662:(e,t,o)=>{"use strict";o.d(t,{CaptchaError:()=>l});var n=o(85893),i=o(86894),r=o(3895),s=o(4190),a=o(45195),_=o(84688);const l=(0,o(67294).forwardRef)((({captchaType:e},t)=>{const o=(0,s.useEvent)(a.captchaPopupService.captchaReloaded);return(0,n.jsxs)(i.Footer,{children:[(0,n.jsx)(n.Fragment,{children:e===a.CaptchaType.IMAGE?(0,r.getLang)("vkconnect_auth_captcha_loading_error_caption"):(0,r.getLang)("vkconnect_auth_audio_captcha_loading_error_caption")}),(0,n.jsx)(_.Link,{onClick:o,getRootRef:t,role:"button","aria-label":e===a.CaptchaType.IMAGE?(0,r.getLang)("vkconnect_auth_captcha_image_loading_error_retry_aria_label"):(0,r.getLang)("vkconnect_auth_captcha_sound_loading_error_retry_aria_label"),children:(0,r.getLang)("vkconnect_auth_captcha_loading_error_refresh_text")})]})}))},80609:(e,t,o)=>{"use strict";o.d(t,{CaptchaError:()=>n.CaptchaError});var n=o(83662)},21383:(e,t,o)=>{"use strict";o.d(t,{CaptchaPopup:()=>w});var n=o(85893),i=o(45195),r=o(4190),s=o(12865),a=o(58739),_=o(949),l=o(68339),c=o(36671),u=o(86894),d=o(67294),p=o(3895),h=o(92366),m=o(80609),f=o(44470),g=o(73799),v=o(29291),y=o(6532),E=o(48041);const w=({is_sound_captcha_available:e,is_refresh_enabled:t,captcha_track:o,captcha_img:w,onSubmit:b,sid:A,onClose:P})=>{(0,r.useGate)(i.captchaPopupService.Gate,{sid:A,platform:i.Platform.VK_WEB,captchaTrack:o,captchaImage:w,deviceId:(0,y.getDeviceId)(i.Platform.VK_WEB)});const I=(0,E.partConfigEnabled)("vkcom_captcha_new_ux"),T=(0,r.useEvent)(i.captchaPopupService.captchaLoadingEnds),O=(0,r.useStore)(i.captchaPopupService.$hasLoadCaptchaError),C=(0,r.useStore)(i.captchaPopupService.$captchaLoading),M=(0,r.useEvent)(i.captchaPopupService.captchaLoadingErrorSet),D=(0,r.useStore)(i.captchaPopupService.$captchaType),S=(0,r.useStore)(i.captchaPopupService.$answer),k=(0,r.useStore)(i.captchaPopupService.$captchaSrc),L=(0,r.useStore)(i.captchaPopupService.$isSubmitButtonDisabled),R=(0,d.useRef)(null),x=(0,d.useRef)(null),B=(0,d.useRef)(null),N=(0,d.useRef)(null),U=(0,d.useRef)(null),W=(0,d.useRef)(null),F=(0,d.useRef)(null),K=e=>{e.preventDefault(),b&&b(S,Number(D===i.CaptchaType.AUDIO))},j=(0,d.useCallback)((t=>{const o=document.activeElement,n=F.current||W.current||x.current,i=B.current,r=N.current,s=R.current,a=U.current;if("Space"===t.code&&[i,r,a,n].some((e=>o===e))){t.preventDefault();o.click()}if(e&&"Tab"===t.key&&!t.shiftKey&&o)switch(t.preventDefault(),o){case n:var _,l,c;if(I||!(null==(_=i)?void 0:_.disabled))null==(l=i)||l.focus();else null==(c=r)||c.focus();break;case i:var u;null==(u=r)||u.focus();break;case r:var d;null==(d=s)||d.focus();break;case s:var p,h,m;if(I||!(null==(p=a)?void 0:p.disabled))null==(m=a)||m.focus();else if(null==(h=i)?void 0:h.disabled){var f;null==(f=r)||f.focus()}else{var g;null==(g=n)||g.focus()}break;case a:var v,y,E;if(I||!(null==(v=i)?void 0:v.disabled))null==(y=n)||y.focus();else null==(E=r)||E.focus()}if(e&&"Tab"===t.key&&t.shiftKey&&o)switch(t.preventDefault(),o){case n:var w,b,A;if(I||!(null==(w=a)?void 0:w.disabled))null==(b=a)||b.focus();else null==(A=s)||A.focus();break;case a:var P;null==(P=s)||P.focus();break;case s:var T;null==(T=r)||T.focus();break;case r:var O,C,M;if(I||!(null==(O=i)?void 0:O.disabled))null==(C=i)||C.focus();else null==(M=a)||M.focus();break;case i:var D;null==(D=n)||D.focus()}}),[]);(0,d.useEffect)((()=>(document.removeEventListener("keydown",j),document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)})),[j]),(0,d.useEffect)((()=>{const e=x.current;D===i.CaptchaType.IMAGE&&e&&(e.tabIndex=0,e.ariaLabel=(0,p.getLang)("vkconnect_auth_captcha_image_aria_label"),e.focus())}),[C,D]),(0,d.useEffect)((()=>{var e;C||D!==i.CaptchaType.IMAGE||(null==(e=x.current)||e.focus())}),[C,D]),(0,d.useEffect)((()=>{O&&W.current&&W.current.focus()}),[O]);const V=()=>{var e;I&&(null==(e=R.current)||e.focus())};return(0,n.jsxs)(s.ModalBox,{children:[(0,n.jsx)(u.ModalDismissButton,{onClick:P}),(0,n.jsxs)(a.ModalBody,{insetLevel:2,children:[(0,n.jsxs)(_.Image,{getRef:x,alt:(0,p.getLang)("vkconnect_auth_captcha_image_aria_label"),src:D===i.CaptchaType.IMAGE?k:"",onLoad:T,onError:M,width:252,height:96,children:[C&&(0,n.jsx)(u.Spinner,{}),!C&&O&&(0,n.jsx)(m.CaptchaError,{ref:W,captchaType:D}),!O&&(0,n.jsx)(h.SoundCaptcha,{ref:F,captchaType:D,onSoundEnds:()=>{var e;I||(null==(e=F.current)||e.focus())},onPlayButtonClick:V})]}),(0,n.jsx)(l.Spacing,{size:6}),(0,n.jsxs)(u.ButtonGroup,{mode:"horizontal",stretched:!0,style:{justifyContent:"space-between"},children:[t&&(0,n.jsx)(f.CaptchaRefreshButton,{ref:B,captchaType:D}),e&&(0,n.jsx)(g.CaptchaTypeButton,{ref:N,captchaType:D,onPlayButtonClick:V})]}),(0,n.jsx)(l.Spacing,{size:16}),(0,n.jsxs)("form",{onSubmit:K,children:[(0,n.jsx)(v.CaptchaAnswerField,{ref:R,captchaType:D}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(u.ButtonGroup,{mode:"vertical",align:"center",stretched:!0,children:(0,n.jsx)(c.Button,{getRootRef:U,size:"l",stretched:!0,disabled:!I&&L,onClick:K,tabIndex:0,children:(0,p.getLang)("vkconnect_auth_captcha_submit_button")})})]})]})]})}},55812:(e,t,o)=>{"use strict";o.d(t,{CaptchaPopup:()=>n.CaptchaPopup});var n=o(21383)},44470:(e,t,o)=>{"use strict";o.d(t,{CaptchaRefreshButton:()=>d});var n=o(85893),i=o(67294),r=o(60293),s=o(36671),a=o(89665),_=o(45195),l=o(3895),c=o(4190),u=o(48041);const d=(0,i.forwardRef)((({captchaType:e},t)=>{const o=(0,u.partConfigEnabled)("vkcom_captcha_new_ux"),i=(0,c.useStore)(_.captchaPopupService.$isRefreshButtonDisabled),d=(0,c.useStore)(_.captchaPopupService.$refreshCountdown),p=(0,c.useEvent)(_.captchaPopupService.captchaRefreshed);return(0,n.jsx)(s.Button,{getRootRef:t,disabled:!o&&i,size:"m",appearance:"neutral",mode:"tertiary",before:(0,n.jsx)(r.Icon24Refresh,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:p,"aria-label":e===_.CaptchaType.IMAGE?(0,l.getLang)("vkconnect_auth_captcha_refresh_button_aria_label"):(0,l.getLang)("vkconnect_auth_captcha_refresh_audio_button_aria_label"),tabIndex:0,children:o||!d?(0,l.getLang)("vkconnect_refresh_captcha"):(0,l.langReplace)((0,l.getLang)("vkconnect_refresh_captcha_via"),{time:String(d)})})}))},75369:(e,t,o)=>{"use strict";o.d(t,{CaptchaTypeButton:()=>p});var n=o(85893),i=o(67294),r=o(45195),s=o(91140),a=o(21046),_=o(36671),l=o(89665),c=o(3895),u=o(4190),d=o(48041);const p=(0,i.forwardRef)((({captchaType:e,onPlayButtonClick:t},o)=>{const i=(0,d.partConfigEnabled)("vkcom_captcha_new_ux"),p=(0,u.useStore)(r.captchaPopupService.$isCaptchaTypeToggleDisabled),h=(0,u.useEvent)(r.captchaPopupService.captchaTypeToggled);return(0,n.jsx)(_.Button,{getRootRef:o,disabled:!i&&p,size:"m",appearance:"neutral",mode:"tertiary",before:e===r.CaptchaType.IMAGE?(0,n.jsx)(s.Icon24Headphones,{className:(0,l.getColorClass)("color_icon_secondary")}):(0,n.jsx)(a.Icon24TextOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),onClick:()=>{h(),t&&t()},"aria-label":e===r.CaptchaType.IMAGE?(0,c.getLang)("vkconnect_auth_captcha_enable_audio_aria_label"):(0,c.getLang)("vkconnect_auth_captcha_enable_image_aria_label"),tabIndex:0})}))},73799:(e,t,o)=>{"use strict";o.d(t,{CaptchaTypeButton:()=>n.CaptchaTypeButton});var n=o(75369)},73858:(e,t,o)=>{"use strict";o.d(t,{SoundCaptcha:()=>h});var n=o(85893),i=o(67294),r=o(2848),s=o(55077),a=o(89665),_=o(91465),l=o(3895),c=o(42420),u=o(4190),d=o(45195),p=o(48041);const h=(0,i.forwardRef)((({onPlayButtonClick:e,captchaType:t,onSoundEnds:o},h)=>{const m=(0,i.useRef)(null),f=(0,p.partConfigEnabled)("vkcom_captcha_new_ux"),g=(0,u.useEvent)(d.captchaPopupService.audioPlaying),v=(0,u.useEvent)(d.captchaPopupService.audioPaused),y=(0,u.useEvent)(d.captchaPopupService.captchaLoadingErrorSet),E=(0,u.useEvent)(d.captchaPopupService.captchaLoadingStarts),w=(0,u.useEvent)(d.captchaPopupService.captchaLoadingEnds),b=(0,u.useStore)(d.captchaPopupService.$isAudioPlaying),A=(0,u.useStore)(d.captchaPopupService.$captchaSrc),P=(0,u.useStore)(d.captchaPopupService.$captchaLoading),I=()=>{var e;null==(e=m.current)||e.play().catch((()=>y()))};return(0,n.jsxs)(n.Fragment,{children:[t===d.CaptchaType.AUDIO&&(0,n.jsx)("audio",{src:A,onLoadStart:E,onLoadedData:()=>{w(),I()},onPlay:g,onPause:v,onError:y,onEnded:()=>{o&&o()},ref:m}),!P&&t===d.CaptchaType.AUDIO&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.IconIllustrationSoundWaveLeft36h,{className:(0,a.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")}),(0,n.jsx)(_.IconButton,{getRootRef:h,size:52,onClick:()=>{e&&e(),I()},disabled:!f&&b,"aria-label":(0,l.getLang)("vkconnect_auth_captcha_play_audio_button_aria_label"),className:(0,a.getColorClass)("color_text_accent_themed"),children:(0,n.jsx)(c.Icon40PlayCircle,{})}),(0,n.jsx)(s.IconIllustrationSoundWaveRight36h,{className:(0,a.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")})]})]})}))},92366:(e,t,o)=>{"use strict";o.d(t,{SoundCaptcha:()=>n.SoundCaptcha});var n=o(73858)},6532:(e,t,o)=>{"use strict";o.d(t,{getDeviceId:()=>a});var n=o(91686),i=o(72045),r=o(45195);const s="vk_web_captcha_device_id",a=e=>{let t;switch(e){case r.Platform.VK_WEB:t=s;break;case r.Platform.VK_M_WEB:t="vk_m_web_captcha_device_id";break;default:t=s}let o=n.vkLocalStorage.getItem(t);return o||(o=(0,i.default)(),n.vkLocalStorage.setItem(t,o)),o}},85793:(e,t,o)=>{"use strict";o.d(t,{UI_GALLERY_CLASSNAME:()=>n,UI_GALLERY_CONTENT_CLASSNAME:()=>r,UI_GALLERY_INNER_CLASSNAME:()=>i});const n="ui_gallery",i="ui_gallery__inner",r="ui_gallery__inner_cont"},96250:(e,t,o)=>{"use strict";o.d(t,{EcoPlateAnalytics:()=>l});var n=o(34788),i=o(56525),r=o(68312),s=o(43844),a=o(67294),_=o(7610);class l{updateThemeField(){this.theme=s.colorScheme.getMode()===s.ColorSchemeMode.Auto?"system":s.colorScheme.getMode()}init(e,t,o,n){this.securityStatus=e===_.AccountSecurityLevelEnumNames.HAVE_ISSUES?"critical_vulnerabilities":e===_.AccountSecurityLevelEnumNames.HAVE_RECOMMENDATIONS?"protection_recommendations":"securely_protected",this.nftAvatar=t,this.isVerified=o,this.multiaccId=n,this.unsubscribeThemeListener=s.colorScheme.subscribe((()=>{this.updateThemeField()}))}getCommonFields(){return{multiacc_id:this.multiaccId,metadata:JSON.stringify({security_status:this.securityStatus,theme:this.theme,nft_avatar:this.nftAvatar,is_verified:this.isVerified}),options:[{names:i.VkidEcosystemNavigationItem.AVATAR,values:i.VkidEcosystemNavigationItemPlace.ECOSYSTEM},{names:i.VkidEcosystemNavigationItem.VKID_LK,values:i.VkidEcosystemNavigationItemPlace.ECOSYSTEM},{names:i.VkidEcosystemNavigationItem.BALANCE,values:i.VkidEcosystemNavigationItemPlace.VK},{names:i.VkidEcosystemNavigationItem.SETTINGS,values:i.VkidEcosystemNavigationItemPlace.VK},{names:i.VkidEcosystemNavigationItem.THEME,values:i.VkidEcosystemNavigationItemPlace.VK},{names:i.VkidEcosystemNavigationItem.HELP,values:i.VkidEcosystemNavigationItemPlace.VK},{names:i.VkidEcosystemNavigationItem.LOGOUT,values:i.VkidEcosystemNavigationItemPlace.VK},{names:i.VkidEcosystemNavigationItem.SWITCHER,values:i.VkidEcosystemNavigationItemPlace.MULTIACCOUNT}]}}logTopNavItemClick(e){e!==i.VkidEcosystemNavigationItemEventType.LOGOUT?r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.TAP,item:e},this.getCommonFields())):r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.LOGOUT},this.getCommonFields()),{force:!0})}logThemeChange(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.THEME_CHANGED,item:i.VkidEcosystemNavigationItem.THEME},this.getCommonFields()))}logTopNavToggle(e){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:e?i.VkidEcosystemNavigationItemEventType.OPEN:i.VkidEcosystemNavigationItemEventType.CLOSE},this.getCommonFields()))}logApiError(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.ERROR_API},this.getCommonFields()))}logSwitcherError(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.ERROR_SWITCHER},this.getCommonFields()))}logMultiaccAddAnotherTap(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.ADD_ANOTHER_ACCOUNT_TAP},this.getCommonFields()))}logMultaccSwitchAccountTap(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.SWITCH_ACCOUNT_TAP},this.getCommonFields()))}logMultaccDropAccountTap(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.DROP_ACCOUNT_TAP},this.getCommonFields()))}logSecurityRecommShow(){r.vkIdEcosystemNavigationCollector.logEvent((0,n._)({event:i.VkidEcosystemNavigationItemEventType.SECURITY_RECCOMENDATION_SHOW},this.getCommonFields()))}unsubscribe(){this.unsubscribeThemeListener()}constructor(){this.updateThemeField()}}(0,a.createContext)(void 0)},11288:(e,t,o)=>{"use strict";o.d(t,{logSwitcherDropAccount:()=>c,logTopNavElements:()=>d,prepareLogSwitchAccountEvent:()=>u});var n=o(68312),i=o(95343);const r=new n.ProductionStatCollector,s=new n.ActionStatCollector(r),a=new n.RegistrationItemStatCollector(s),_=new i.VkConnectNavigationCollector;function l(e){const t=s.productionStatCollector.getCurrentTime(!1);return[{name:n.RegistrationFieldItemNames.TO_SWITCHER_FROM,value:e,start_interaction_time:t,end_interaction_time:t}]}function c(e,t="profile"){e&&(a.logEvent(n.RegistrationItemEventTypes.MULTIACC_DROP_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},l(t),void 0,void 0,e),a.logEvent(n.RegistrationItemEventTypes.MULTIACC_DROP_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},l(t),void 0,void 0,e))}function u(){window.vk.id&&sessionStorage.setItem("LOG_ACC_SWITCH",String(window.vk.id))}function d(e){_.logTopNavElements(e)}},77510:(e,t,o)=>{"use strict";o.d(t,{getFeedPageLoadingState:()=>a});var n=o(90426),i=o(23902),r=o(47254);const s=()=>{const e={requestState:"initial",cancellationToken:null,setRequestStarted:()=>(e.cancellationToken&&(r.debugConsole.error(`FeedPageLoader: cancellationToken is not null, cancel previous request with state '${e.requestState}'`),e.cancellationToken.cancel()),e.cancellationToken=new i.AjaxCancellationToken,e.requestState="loading",e.cancellationToken),setRequestState:t=>{e.cancellationToken=null,e.requestState=t}};return e},a=(0,n.makeSharedState)("feed_page_skeleton",(()=>({content:s(),rightBlock:s(),skeleton:{html:void 0,hasSkeleton:!1}})),{version:1})},77094:(e,t,o)=>{"use strict";var n;o.d(t,{FeedPath:()=>n,checkIsInFeed:()=>i}),function(e){e.feed="feed",e.al_feed="al_feed.php"}(n||(n={}));const i=(e=(()=>{var e;return null==(e=window.nav)?void 0:e.objLoc[0]})())=>new Array("feed","al_feed.php").includes(e)},47254:(e,t,o)=>{"use strict";o.d(t,{debugConsole:()=>n});const n=(0,o(6226).createDebugConsole)("__feed_page_load_debug_logs")},59676:(e,t,o)=>{"use strict";o.d(t,{feedLoadingNavigationHandler:()=>r});var n=o(48041),i=o(77094);function r(e){var t;const{dest:r,where:s,debugLog:a,opts:_}=e;if("string"==typeof r&&(0,i.checkIsInFeed)(r)&&!_.back)return(0,n.partConfigEnabled)("feed_web_skeleton_on_navigation_enabled")&&!(null==(t=s.params)?void 0:t.section)?(a("feed_page_skeleton"),o.e(8872).then(o.bind(o,49424)).then((({handleNavigationWithClientSkeleton:t})=>{t(e)})),!1):(0,n.partConfigEnabled)("feed_web_async_right_block")?(a("feed_page_async_right_block"),o.e(5953).then(o.bind(o,74471)).then((({handleNavigationWithAsyncRightBlock:t})=>{t(e)})),!1):void 0}},89801:(e,t,o)=>{"use strict";o.d(t,{getBaseDataFromPost:()=>s,getTrackCodeFromPost:()=>r,resolveRef:()=>a,resolveRefFromCur:()=>_});var n=o(16288);o(12386);const i=e=>{var t,o;return null!=(o=null==(t=e)?void 0:t.closest(n.WEB_WALL_POST_WITH_TRACK_CODE_SELECTOR))?o:null},r=e=>{var t;const o=null==(t=i(e))?void 0:t.getAttribute("data-post-track-code");return null!=o?o:null},s=e=>{var t,o;const n=i(e);if(!n)return null;const r=null==(t=n)?void 0:t.getAttribute("data-post-track-code"),s=null==(o=n)?void 0:o.getAttribute("data-post-id");return{trackCode:null!=r?r:null,postId:null!=s?s:null}},a=(e,t,o)=>"feed"==e?"search"==t?"feed_search":"news"==t?o?"feed_news_"+o:"feed_news":"recommended"==t?o?"feed_recommended_"+o:"feed_recommended":"friends"==t?o?"feed_friends_"+o:"feed_friends":"groups"==t?o?"feed_groups_"+o:"feed_groups":"videos"==t?o?"feed_videos_"+o:"feed_videos":"photos"==t?o?"feed_photos_"+o:"feed_photos":"podcasts"==t?o?"feed_podcasts_"+o:"feed_podcasts":"list"==t?o?"feed_list_"+o:"feed_list":"feed_other":e,_=()=>a(window.cur.module,window.cur.section,window.cur.subsection)},12386:(e,t,o)=>{"use strict";var n;function i(){setTimeout((()=>{window.dispatchEvent(new CustomEvent("feed_initiated"))}))}o.d(t,{dispatchFeedInitiatedEvent:()=>i}),function(e){e.FEED_INITIATED="feed_initiated",e.SECTION_CHANGED="section_changed",e.QUERY_CHANGED="query_changed"}(n||(n={}))},46460:(e,t,o)=>{"use strict";var n;o.d(t,{GiftRef:()=>n}),function(e){e.PROFILE_BUTTON="profile_button",e.PROFILE_MODULE="profile_module",e.PROFILE_TOOLTIP="profile_tooltip",e.PROFILE_TOOLTIP_ALL="profile_tooltip_all"}(n||(n={}))},79937:(e,t,o)=>{"use strict";o.d(t,{initVKComboIndexPromo:()=>r});var n=o(42885),i=o(10524);function r(){(0,n.tq)().setInteractiveHandler("IndexComboPromo/register",(e=>{const{source:t}=e.payload.dataAttrs||{};i.Unauthorized.showMoreBox(null,0,t)}))}},74368:(e,t,o)=>{"use strict";o.d(t,{showErrorNotification:()=>a});var n=o(85893),i=o(86894),r=o(13996),s=o(80541);function a(e){const t=window.cur;(0,s.showMessageBoxModal)((({onClose:t})=>(0,n.jsx)(i.ModalCardBase,{header:e.title,subheader:e.text,onClose:t})),{hideOnBGClick:!0,onDestroy(){t.zNavInfo&&(0,r.zNav)(t.zNavInfo.info,t.zNavInfo.opts)}})}},8668:(e,t,o)=>{"use strict";o.d(t,{initJoinForm:()=>p});var n=o(1959),i=o(82753),r=o(23434),s=o(73359),a=o(12111),_=o(73656),l=o(68312),c=o(56121),u=o(59427);const d="join_form_sex";function p(e,t){var o;const{from:p,bdateMonths:h,bdateYears:m,proceedAs:f,fbApp:g,fbState:v,fbLocale:y,ref:E,values:w={},onSignInClick:b,onNotNowClick:A}=t,P=window.cur.options||{},I=P.bday||0,T=P.bmonth||0,O=P.byear||0;let C;C="invite"===E?l.EventScreens.REGISTRATION_INVITE_CONFIRM:f?l.EventScreens.START_PROCEED_AS:"box"===E?l.EventScreens.START_BOX:l.EventScreens.START,window.cur.eventScreen=C,c.registrationItemStat.logEvent(l.RegistrationItemEventTypes.SCREEN_PROCEED,l.EventScreens.NOWHERE,C,{force:!0});const M=e.querySelector(".JoinForm__error"),D=e.querySelector('.JoinForm__textInput[name="first_name"]'),S=e.querySelector('.JoinForm__textInput[name="last_name"]'),k=e.querySelector(".JoinForm__birthdateDayInput"),L=e.querySelector(".JoinForm__birthdateMonthInput"),R=e.querySelector(".JoinForm__birthdateYearInput"),x=e.querySelector(".JoinForm__sex"),B=e.querySelectorAll(".JoinForm__sexRadio"),N=e.querySelector(".JoinForm__birthdate"),U=e.querySelector(".JoinForm__submitButton"),W=e.querySelector(".JoinForm__facebookLogin"),F=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button"),K=e.querySelector(".JoinForm__signIn"),j=e.querySelector(".JoinForm__notNowLink");let V,H,q;if(!D||!S||!U)return;const G=()=>{if(u.FlatButton.isLocked(U))return;const e={fname:D.value.trim(),lname:S.value.trim(),bday:V.val(),bmonth:H.val(),byear:q.val(),from:p,frm:1,event_screen:C};(0,i.isVisible)(x)&&(e.sex=Number((0,n.radioval)(d))||0),window.tooltips&&window.tooltips.hideAll();const t=(e,t)=>{e&&t&&window.Index.showRegTT(e,t)};M&&(M.innerHTML=""),window.ajax.post("join.php?act=start",e,{onDone:(e,o)=>{switch(e){case"first_name":return t(D,o),void(0,n.notaBene)(D);case"last_name":return t(S,o),void(0,n.notaBene)(S);case"sex_row":return(0,i.show)(x),void t(x,o);case"birthdate_row":return void t(N,o)}o&&(0,a.showMsg)(M,o,"error",!0)},showProgress:()=>u.FlatButton.lock(U),hideProgress:()=>u.FlatButton.unlock(U)})},$=()=>{const e=Number(V.val())||0,t=Number(H.val())||0,o=Number(q.val())||0,n=new Date(0);e&&n.setDate(e),t&&n.setMonth(t),o&&n.setFullYear(o),c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY,n.getTime().toString())},z=function(){const e=window.cur;e.isJoinFieldDirty||(c.registrationItemStat.logEvent(l.RegistrationItemEventTypes.START_REG_TAP,e.eventScreen,void 0,{force:!0}),e.isJoinFieldDirty=!0)};if(c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME,D.value,!0),D.addEventListener("keyup",(()=>{z(),c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME,D.value)})),c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME,S.value,!0),S.addEventListener("keyup",(()=>{z(),c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME,S.value)})),[D,S].forEach((e=>{(0,s.placeholderInit)(e),e.addEventListener("keydown",(e=>{10!==e.keyCode&&13!==e.keyCode||G()}))})),"index"!==E&&requestAnimationFrame((()=>(0,i.elfocus)(D))),c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY,"",!0),V=new window.Dropdown(k,(0,_.generateDays)(O,T),{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:I,onChange:()=>{z(),$()}}),H=new window.Dropdown(L,h,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:T,onChange:e=>{z(),$(),(0,_.updateDayDropdown)(q.val(),e,V,I)}}),q=new window.Dropdown(R,m,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:O,onChange:e=>{z(),$(),(0,_.updateDayDropdown)(e,H.val(),V,I)}}),window.radioBtns[d]={els:[...B],val:0},c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX,Number((0,n.radioval)(d)).toString(),!0),B.forEach((e=>{e.addEventListener("click",(()=>{const t=Number(e.dataset.sex);(0,n.radiobtn)(e,t,d),z(),c.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX,t.toString())}))})),void 0!==w.sex){const t=w.sex,o=e.querySelector(`.JoinForm__sexRadio[data-sex="${t}"]`);o&&o.click()}if(U.addEventListener("click",(e=>{e.preventDefault(),G()})),g){const e=window.cur;e.fbApp=g,e.fbState=v,e.fbLocale=y,window.Index.fbCheck(g,"",W)}null==(o=F)||o.addEventListener("click",(e=>{e.preventDefault(),window.Index.fbJoin("",F)})),K&&b&&K.addEventListener("click",b),j&&A&&j.addEventListener("click",A);const Y=(0,r.curBox)();Y&&Y.setOptions({onClean:()=>{V&&V.destroy(),H&&H.destroy(),q&&q.destroy()}}),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"]).catch((()=>{}))}},28959:(e,t,o)=>{"use strict";o.d(t,{initVkIdForm:()=>g});var n=o(88882),i=o(68312),r=o(56121),s=(o(1959),o(59427)),a=(o(73359),o(3895)),_=o(13870),l=o(43844),c=o(49015),u=o(89084),d=o(74368),p=o(48041),h=o(46026);let m=i.EventScreens.START;function f(e){const{proceedAs:t,savedUsersCount:o,availableQR:n,saveUserChecked:s}=e;t&&(m=i.EventScreens.START_PROCEED_AS),window.cur.eventScreen=m,n&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.AVAILABLE_AUTH_WITH_QR,"1"),o&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.ACCOUNTS_COUNT,o.toString()),s&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,"1"),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,i.EventScreens.NOWHERE,m,{force:!0})}function g(e,t,o){var g,v;(0,c.initVkId)();let y=l.ColorSchemeName[l.colorScheme.isDarkScheme()?"Dark":"Light"],E=null;(null==(g=o)?void 0:g.proceed_as)&&(m=i.EventScreens.START_PROCEED_AS);const w=l.colorScheme.subscribe((()=>{E&&E.update({scheme:l.colorScheme.isDarkScheme()?l.ColorSchemeName.WebDark:l.ColorSchemeName.Light}),y=l.colorScheme.isDarkScheme()?l.ColorSchemeName.Dark:l.ColorSchemeName.Light}));let b=t;const A=location.search.match(/to=(?:[A-Za-z\d+/]{4})*(?:[A-Za-z\d+/]{3}=|[A-Za-z\d+/]{2}==)?/);if(A){const e=atob(A[0].slice(3)).replace(/\W*/g,"");b=""===e?"main":e}const P=e.querySelector(".VkIdForm__signInButton"),I=e.querySelector(".VkIdForm__signUpButton"),T=e.querySelector(".VkIdForm__businessSignUpButton"),O=e.querySelector(".VkIdForm__signInQRButton"),C=e.querySelector(".VkIdForm__qrPanel"),M=e.querySelector(".VkIdForm__qrPanelStub"),D=e.querySelector(".VkIdForm__input"),S=e.querySelector(".VkIdForm__messageError"),k=null==(v=document.querySelector(".VkIdCheckbox--save"))?void 0:v.querySelector("#index_save_user_checkbox"),L=document.querySelector(".VkIdCheckbox--save .VkIdCheckbox__rightIcon");var R,x,B,N;o&&f({proceedAs:null!=(N=null==(R=o)?void 0:R.proceed_as)&&N,savedUsersCount:null==(x=o)?void 0:x.saved_users_count,availableQR:Boolean(C),saveUserChecked:Boolean(null==(B=k)?void 0:B.checked)});if(!P||!I)return;const U=e=>{D&&D.classList.add("VkIdForm__input--error"),S&&e&&(S.classList.remove("VkIdForm__messageError--hidden"),S.innerHTML=e)},W=()=>{D&&D.classList.remove("VkIdForm__input--error"),S&&S.innerHTML&&(S.classList.add("VkIdForm__messageError--hidden"),S.innerHTML="")},F=e=>{const t={url:e||location.protocol+"//"+location.host+"/join"+location.search,action:{name:"no_password_flow",params:{type:"sign_up"}},entry:{source:b,screen:m},scheme:y};n.Connect.redirectAuth(t)};(()=>{const e=`\n      <div class="VkIdCheckbox__saveTooltipHeader">\n        ${(0,a.getLang)("vkconnect_auth_save_user_tooltip_header")}\n      </div>\n      <div>\n        ${(0,a.getLang)("vkconnect_auth_save_user_tooltip_body")}\n      </div>\n    `;if(L){let t=new _.ElementTooltip(L,{autoShow:!0,width:260,content:e,cls:"feature_intro_tt",align:_.ElementTooltip.ALIGN_CENTER,forceSide:"bottom",appendToParent:!0,withCloseButton:!1,noHideOnClick:!0,offset:[1,0],onWindowClick(){},autoAdjustToViewport:!1,onHide:function(){}});(0,u.pushNavDestroy)((()=>{t&&(t.destroy(),t=null)}))}})(),(()=>{if(!C)return;const e={source:b,screen:m};E=new n.AuthQR({container:C,entry:e}),E.on("VKSDKQRScaned",(t=>{n.Connect.redirectAuth({action:{name:"qr_auth",token:null!=t?t:"qr_auth_scanned"},url:location.href,entry:e,scheme:y})})),E.on("VKSDKQRClicked",(()=>{n.Connect.redirectAuth({action:{name:"qr_auth"},url:location.href,entry:e,scheme:y})})),E.open({scheme:l.colorScheme.isDarkScheme()?l.ColorSchemeName.WebDark:l.ColorSchemeName.Light}).then((()=>{M&&M.remove()})).catch((()=>{E&&E.close(),C.remove()}))})(),I.addEventListener("click",(e=>{e.preventDefault(),w(),F()})),T&&T.addEventListener("click",(e=>{const t=`${location.protocol}//${location.host}/groups_create?type=business&source=registration`;e.preventDefault(),w(),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.CREATE_BUSINESS_START,m,i.EventScreens.NOWHERE,void 0,void 0,h.AuthAppId.VK),F(t)})),D&&(D.addEventListener("focus",(()=>{W()})),D.addEventListener("input",(()=>{W()})),e.addEventListener("submit",(e=>{e.preventDefault(),w(),(()=>{var e,_,l,c,u;const h=location.protocol+"//"+location.host,f={source:b,screen:m},g={url:(null==(e=o)?void 0:e.to_feed)?h+"/feed":h+"/login"+location.search,action:{name:"no_password_flow",params:{type:"sign_in"}},entry:f,scheme:y};if(!D)return void n.Connect.redirectAuth(g);const v=null==(_=D.value)?void 0:_.trim().replace(" ","");if(!v)return void U((0,a.getLang)("vkconnect_auth_empty_login"));g.entry&&(g.entry.source=t);const E=(null==(l=document.querySelector("#index_expire_input"))?void 0:l.checked)?1:0,w=(null==(c=document.querySelector("#index_save_user_checkbox"))?void 0:c.checked)?1:0;s.FlatButton.lock(P),((e,t,o)=>{var _;const l=e.hash||"",c=(null==(_=k)?void 0:_.checked)?1:0;r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,String(c)),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,m,i.EventScreens.NOWHERE,{force:!0}),window.ajax.post("join.php?act=connect",e,{onDone:(e,i)=>{if("error"===e)return U((0,a.getLang)("vkconnect_auth_empty_login")),void s.FlatButton.unlock(o);const r={name:"no_password_flow",token:i,params:{type:"sign_in",csrf_hash:l}};t.action=r,n.Connect.redirectAuth(t)},onFail:e=>("security_error"===e&&(0,d.showErrorNotification)({title:(0,a.getLang)("vkconnect_auth_security_error_title"),text:(0,a.getLang)("vkconnect_auth_security_error_text")}),!1),showProgress:()=>s.FlatButton.lock(o),hideProgress:()=>{(0,p.partConfigEnabled)("vkconnect_auth_flat_button_unlock")&&s.FlatButton.unlock(o)}})})({login:encodeURIComponent(v),hash:null==(u=o)?void 0:u.hash,expire:E,save_user:w},g,P)})()}))),O&&O.addEventListener("click",(e=>{e.preventDefault(),w(),(()=>{var e;const t=location.protocol+"//"+location.host,i={source:b,screen:m},r={url:(null==(e=o)?void 0:e.to_feed)?t+"/feed":t+"/login"+location.search,action:{name:"qr_auth"},entry:i,scheme:y};n.Connect.redirectAuth(r)})()}))}},73656:(e,t,o)=>{"use strict";o.d(t,{generateDays:()=>r,updateDayDropdown:()=>s});var n=o(59397),i=o(3895);function r(e,t){const o=[[0,(0,i.getLang)("index_sel_bday")]],r=(0,n.getLastDayOfMonth)(e,t);for(let e=1;e<=r;++e)o.push([e,String(e)]);return o}function s(e,t,o,i){Number(o.val())>(0,n.getLastDayOfMonth)(e,t)&&o.clear(),o.setData(r(e,t).slice(Number(i)?1:0))}},16851:(e,t,o)=>{"use strict";o.d(t,{_handleResponseExtraPayloads:()=>a});var n=o(90426),i=o(17733),r=o(33751);const s=(0,n.makeSharedState)("ajax-extra-handlers",(()=>new i.default),{version:0}),a=e=>{var t;null!==(t=e)&&"object"==typeof t&&Object.keys(e).forEach((t=>{try{o=t,n=e[t],s().emit(o,n)}catch(e){const o={message:"Extra response error",data:{extraKey:t}};(0,r.logError)(e,{environment:"ajax_request",breadcrumb:o}),console.error(e)}var o,n}))}},54328:(e,t,o)=>{"use strict";o.d(t,{subscribeOnModuleEvaluated:()=>r,triggerSubscribersOnModuleEvaluated:()=>a,unsubscribeOnModuleEvaluated:()=>s});const n=[],i=[];function r(e,t=!1){"function"==typeof e&&(t?i.push(e):n.push(e))}function s(e){const t=n.indexOf(e),o=i.indexOf(e);t>=0&&n.splice(t,1),o>=0&&i.splice(o,1)}function a(){n.forEach((e=>e())),i.forEach((e=>e())),i.splice(0,i.length)}},30586:(e,t,o)=>{"use strict";o.d(t,{authFailed:()=>c});var n,i=o(65076),r=o(55009),s=o(82753),a=o(97092),_=o(49513),l=o(52224);!function(e){e.NEED_REDIRECT="need_redirect"}(n||(n={}));const c=(()=>{let e,t=[];return(o,n,c)=>{t.push((()=>{o.resend(c,(0,l.resetOptionsCache)(o))})),e||(e=(e=>new Promise(((t,o)=>{let n;const r=(0,s.ce)("iframe",{src:`${(0,a.getLoginDomain)()}?${(0,i.toQueryString)({role:"al_frame",_origin:window.location.origin,ip_h:e[0]||window.vk.ip_h,to:e[1]||"",lrt:e[2]||""})}`}),_=(e,o,i)=>{clearTimeout(n),r.remove(),t({toUrl:e,userInfo:o,actionType:i})},l=(e,t)=>{clearTimeout(n),r.remove(),o({toRoot:e,toUrl:t})};n=window.setTimeout((()=>{window.onReLoginDone===_&&(window.onReLoginDone=void 0),window.onReLoginFailed===l&&(window.onReLoginFailed=void 0),o()}),16e3),window.onReLoginDone=_,window.onReLoginFailed=l,window.utilsNode.appendChild(r)})))(n).then((e=>{e.toUrl&&"need_redirect"===e.actionType?_.Nav.go(e.toUrl,null,{hard:!0}):t.forEach((e=>e()))}),(e=>{if(!e)return;const{toUrl:t,toRoot:o}=e;(0,r.logout)(),t?_.Nav.go(t,null,{hard:!0}):-1!==o?o&&_.Nav.go("/"):window.location.href=location.href.replace(/^http:/,"https:")})).finally((()=>{t=[],e=void 0})))}})()},52224:(e,t,o)=>{"use strict";o.d(t,{resetOptionsCache:()=>i});var n=o(34788);const i=e=>e.cache?(0,n._)({},e,{cache:-1}):e},83985:(e,t,o)=>{"use strict";o.d(t,{resetWindowCur:()=>i});var n=o(90426);o(85229);(0,n.makeSharedState)("cur-loading-state",(()=>({isReady:!1,onReadyCallbacks:[]})),{version:1});const i=(e=!1)=>{const t=window.cur;return window.cur={beforeNavigateRequestHandlers:[],destroy:[],nav:[]},e&&(window.cur.lang=t.lang),void 0!==t&&"function"==typeof t.onAfterReset&&t.onAfterReset(t,window.cur),window.cur}},97092:(e,t,o)=>{"use strict";function n(){return window.vk.loginDomain}o.d(t,{getLoginDomain:()=>n})},3559:(e,t,o)=>{"use strict";o.d(t,{navGo:()=>i,subscribeNavLocationChange:()=>r,updateNavLoc:()=>s});var n=o(34788);function i(e,t,o){return window.nav.go(e,t,o)}function r(e){return window.nav.onLocationChange(e)}function s(e){window.nav.setLoc((0,n._)({},window.nav.objLoc,e))}},13996:(e,t,o)=>{"use strict";o.d(t,{PAGE_ID_CLIPS:()=>G,PAGE_ID_MARKET_ORDERS:()=>Y,globalHistoryDestroy:()=>le,handlePageParams:()=>ae,handlePageView:()=>de,processDestroy:()=>ue,reloadCheckFlood:()=>_e,showBackLink:()=>ce,updateHeaderStyles:()=>ne,updateLeftMenu:()=>ie,zNav:()=>pe});var n=o(74479),i=o(82753),r=o(56401),s=o(3895),a=o(99203),_=o(77995),l=o(74752),c=o(11575),u=o(12111),d=o(1959),p=o(25890),h=o(44734),m=o(1774),f=o(23434),g=o(49957),v=o(62425),y=o(50033),E=o(88909),w=o(99602),b=o(34041),A=o(1934),P=o(39586),I=o(69788),T=o(27935),O=o(48041),C=o(75579),M=o(90195),D=o(48542),S=o(15551),k=o(91050),L=o(61311),R=o(50722),x=o(9351),B=o(66925),N=o(21911),U=o(64705);const W=17,F=9,K="msg",j="fr",V="gr",H="ph",q="vid",G="svd",$="ap",z="mk",Y="market_orders",Q="vkp",X="fav",J="doc",Z="ads",ee="apm",te="app",oe="ntf";function ne(e){document.querySelectorAll("#dev_top_nav_wrap, #page_header_wrap").forEach((t=>{(0,i.setStyle)(t,e)}))}function ie(e){window.__leftMenu&&window.__leftMenu.handleUpdateRequest(e)}function re(e,t,o,n,r){if((0,B.updateItemCount)({id:e,count:t,href:n,isHighlighted:r}),!o)return;let s="",l="",c='<span class="inl_bl"></span>';const u="reqs"===e||e&&e.substr&&"spr"===e.substr(0,3)?5:3,d=(0,i.geByClass1)("left_count_wrap",o);d.classList.toggle("left_count_wrap--highlighted",r);const p=(0,i.geByClass1)("left_count",o,"span"),h=(0,i.val)(p);t&&(s=t.toString(),s.length>u&&(l=' title="'+(0,P.stripHTML)((0,a.langNumeric)(t,"%s",!0))+'"',s=".."+s.substr(s.length-u)),c=`<span class="inl_bl left_count" ${l}>${s}</span>`);const m=function(){(0,i.val)(d,c),d.classList.toggle("left_void",!t),(0,i.setStyle)(d,{opacity:""})};h?s?(0,_.animateCount)(p,s,{str:"auto",onDone:m}):(0,_.animate)(d,{opacity:0},100,m):(m(),(0,i.setStyle)(d,{opacity:0}),(0,_.animate)(d,{opacity:1},100))}function se(e,t,o,n,r=!1){const s=(0,P.intval)(t),a=Math.max(0,s);if(e===oe)return window.TopNotifier.setCount(a),void window.TopNotifier.createNewEventsBox(a);if(e===L.MARKET_EVENT_COUNTER_SECTION_ID)return void(0,L.updateMarketMenuEventCounter)(`#${e}`,a);let _="";if(n&&o){const e=s>0&&n?`?${n}`:"";_=(0,x.prepareHref)(o+e)}const l=(0,x.getLegacyLeftMenuItemEl)(e);if(re(e,s,l,_,r&&e===K&&(0,O.partConfigEnabled)("mail_unread_counter_highlight")),l){_&&(l.firstChild.href=_);const t=s>=0;(0,i.toggle)(l,t),e===Y&&(l.style.display="")}}function ae(e){window.vk.id=e.id,(0,n.tmrUpdateUserId)(),e.body_class!==document.body.className&&(document.body.className=e.body_class||""),(0,E.updateSTL)(),ie(!0),window.cur._level=e.level,window.vk.id&&window.vk.id%1e3==1&&setTimeout((function(){(0,l.statlogsValueEvent)("page_scroll",0,window.cur.module,"0")}),300),de(e);const t=document.querySelector("#mvk_footer_lnk");t&&e.mvklnk&&(t.firstChild.href=e.mvklnk),window.vk.nophone=(0,P.intval)(e.nophone),window.vk.staticheader=(0,P.intval)(e.staticheader),"leftads"in e&&0!==e.leftads&&window.__adsSet(e.leftads,e.ads_section||"",e.ads_can_show,e.ads_showed);let o=window.location.protocol+"//"+location.host+"/";e.loc&&(e.loc.startsWith("?")?o+=window.nav.strLoc:o+=e.loc);const i=document.URL===o?"":document.URL;setTimeout((()=>(0,T.updateCounters)(o,i)),10);const r=e.counters;if(!r.length)return;let s="",a="";(0,P.intval)(r[F])>0?(s="adsmarket",a="act=overview&status=-1"):(0,P.intval)(r[F])<-1?(r[F]=1,s="ads",a="act=a_comeback_office_redirect"):s="ads?act=office&last=1";const _=[j,H,q,K,"nts",V,Q,"wsh",$,Z,oe,X,J,ee,z],u=["friends","albums"+window.vk.id,"video","","notes","groups","vkpay","gifts.php?act=wishlist","apps",s,"","pages","docs","apps_manage","market"],d=["","act=added","section=tagged","","act=comments","","tab=invitations","","",a,"","","","",""];for(let e=0;e<_.length;e++){const t=r[e];(0,P.isObject)(t)||se(_[e],t,u[e],d[e])}const p=r[W];(0,P.isObject)(p)&&function(e){Object.entries(e).forEach((([e,t])=>{const o=te+(0,P.intval)(e),n=(0,x.getLegacyLeftMenuItemEl)(o);re(o,(0,P.intval)(t),n)}))}(p),setTimeout(c.updSeenAdsInfo,0)}function _e(e){e=e||{};const t=A.ls.get("last_reloaded")||[];t.unshift(Date.now());let o=t.length;o>5&&(t.splice(5,o-5),o=5),A.ls.set("last_reloaded",t);return!!(5===o&&t[0]-t[4]<2e4)&&((0,u.topError)('\n            <b>Reloading error</b>, please check internet connection, <b><a href="/page-777107_43991681">clear your cache</a></b> and restart your browser.\n            <br>If problem remains, please <a href="/support?act=new">report it here</a>.\n        ',{dt:15,type:6,msg:"Reload error, from "+(e.from||0)+", forced "+(e.force||0)+", url "+(e.url||"")+", query "+(e.query||"")}),!0)}function le(e){for(let t=0,o=window.globalHistory.length;t<o;t++)if(window.globalHistory[t].loc===e){const e=window.globalHistory.splice(t,1)[0];ue(e.cur),e.content.innerHTML="",--t,--o}}function ce(e,t,o){if(!window._tbLink)return;const n=e;if(e=(e||"").replace(/^\//,""),window._tbLink.loc=e,void 0===o&&(o=0,e))for(let t=0;t<window.globalHistory.length;t++)if(window.globalHistory[t].loc===e){o=1;break}if(n){try{window._tbLink.style.maxWidth=window._tbLink.parentNode.offsetWidth-35+"px"}catch(e){}(0,P.extend)(window._tbLink,{href:"/"+e,innerHTML:t,fast:o}),(0,i.show)(window._tbLink),window._stlWas=0}else(0,i.hide)(window._tbLink);(0,d.updSideTopLink)(1)}function ue(e){if(e._back&&e._back.hide&&e===window.cur)for(const t in e._back.hide)if(e._back.hide.hasOwnProperty(t))try{e._back.hide[t]()}catch(e){try{console.log(e.stack)}catch(e){}}if(e.destroy&&e.destroy.length)for(let t=0;t<e.destroy.length;t++)try{e.destroy[t](e)}catch(e){try{console.log(e.stack)}catch(e){}}}function de(e){const t=document.querySelector("#footer_wrap"),o=document.querySelector("#page_layout"),n=document.querySelector(".TopHomeLink"),r=void 0===e.width?window.vk.width:e.width,s=void 0===e.width_dec?window.vk.width_dec:e.width_dec,a=void 0===e.width_dec_footer?window.vk.width_dec_footer:e.width_dec_footer;if(window.vk.noleftmenu===e.noleftmenu&&window.vk.nobottommenu===e.nobottommenu&&window.vk.width===e.width&&window.vk.width_dec_footer===e.width_dec_footer||(window.vk.noleftmenu!==e.noleftmenu&&e.noleftmenu&&(0,i.hide)("side_bar"),window.vk.nobottommenu!==e.nobottommenu&&(e.nobottommenu?(0,i.hide)("bottom_nav"):(0,i.show)("bottom_nav")),e.noleftmenu&&e.nobottommenu?t&&(t.classList.add("simple"),t.style.width="auto"):t&&(t.classList.remove("simple"),t.style.width=Number(r)-Number(a)+"px")),window.vk.notopmenu!==e.notopmenu&&(e.notopmenu?(0,i.hide)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap"):(0,i.show)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap")),n&&e.top_home_link_class&&window.vk.top_home_link_class!==e.top_home_link_class&&(n.className=e.top_home_link_class),o&&(r!==window.vk.width||s!==window.vk.width_dec)){const e=Number(r);(0,b.setGlobalCustomProperty)("--layout-width",r+"px"),document.querySelector("#page_body").style.width=e-Number(s)+"px";const t=document.querySelector("#ts_wrap");t&&t.classList.contains("vk")&&(t.style.width=e-191+"px"),setTimeout((()=>(0,d.updSideTopLink)(!0)),0),setTimeout(E.updateSTL,0),requestAnimationFrame((function(){try{window._tbLink.style.maxWidth=window._tbLink.parentNode.offsetWidth-35+"px"}catch(e){}}))}window.vk.noleftmenu===e.noleftmenu||e.noleftmenu||(0,i.show)("side_bar"),e.to&&document.querySelector("#quick_login_to")&&(0,i.val)("quick_login_to",e.to),window.vk.noleftmenu=e.noleftmenu,window.vk.nobottommenu=e.nobottommenu,window.vk.top_home_link_class=e.top_home_link_class,window.vk.notopmenu=e.notopmenu,window.vk.width=r,window.vk.width_dec=s,window.vk.width_dec_footer=a,window.vk.body_class=e.body_class,window.vk.staticheader=(0,P.intval)(e.staticheader),window.vk.no_ads=e.no_ads,window.vk.ad_preview=e.ad_preview}function pe(e,t,o){const n=e.z,i=e.f,a=e.w,_=(n||"").match(/^([a-z_]+)(-?\d+(?:_(?:-)?\d+)?)\/?(.*)/i);if(delete e.z,delete e.f,delete e.w,t||(t={}),(0,P.isEmpty)(e)){if(i&&((0,w.handleScroll)(i),void 0===n))return!1;var l;if(t.hist)if(n||a){if(window.layerQueue.back("wiki",a,(_||[])[1],(_||[])[2]))return!1}else if(!1===n&&(null==(l=o)?void 0:l.w)&&window.layerQueue.back("wiki",o.w))return!1;if(a){let e="",r="";const s=a.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/),_=a.match(/^donut_payment(-\d+)/);if(!1===n)window.layers.fullhide(!!t.hist&&2);else{if(a.match(/^story([0-9\-]+)_(\d+)/))return(0,p.showStory)(a);if(s){let[,e,t,o]=s;return(0,p.showNarrative)(e,t,Number(o),"",{source:"narrative_link"})}if(_){const{source:e}=window.nav.objLoc,t=Number(_[1]);return(0,g.showDonutSubscribePopup)(null,null,t,e,"",{type:"subscribe",params:{act:"subscribe_popup"}})}if("stories"===a){if(window.cur.storyLayer)return window.cur.storyLayer.doHide(),!1}else if((0,U.isValidVmojiAvatarUrlPath)(a)){const e=(0,U.parseVmojiAvatarUrlPath)(a);if(e){const{ownerId:t,characterId:o,packId:n}=e;return(0,U.showVmojiAvatar)(t,o,n)}}else{if(a===N.wikiModalExampleInitiator.wLayer)return N.wikiModalExampleInitiator.showModal({userId:window.vk.id});o||(o=(0,P.clone)(window.nav.objLoc)),a&&(o.w=a),i&&(o.f=i),delete o.z,window.nav.setLoc(o,t),window.nav.objLoc.ref&&(e=window.nav.objLoc.ref,delete window.nav.objLoc.ref),window.nav.objLoc.ref_source&&(r=window.nav.objLoc.ref_source,delete window.nav.objLoc.ref_source)}}const l={w:a};if(e&&"third_party_profile_buttons"===e&&(0,O.partConfigEnabled)("apps_launch_query_params")){const e=window.nav.objLoc.vk_profile_id;if(!e)return;l.vk_user_id=e}return(0,g.showWiki)(l,"note_new"===a,!1,{onLoaded:()=>{switch(Object.values(k.RefSource).includes(r)&&(0,S.onMarketItemCardOpen)({refSource:r,screen:window.nav.objLoc.ref_screen}),e){case k.RefSource.CLIPS:(0,S.onMarketItemCardOpen)({refSource:k.RefSource.CLIPS,screen:window.nav.objLoc.ref_screen});break;case k.RefSource.STORIES:(0,S.onMarketItemCardOpen)({refSource:k.RefSource.STORIES,screen:window.nav.objLoc.ref_screen})}},isZnav:1,customRef:e}),!1}if("giftbox"===n)return!(0,h.showBox)("/al_gifts.php",{act:"get_gift_box",mid:t.id||0,fr:t.is&&t.id!==window.vk.id?0:1,link:window.nav.objLoc[0]},{stat:["gifts.css","ui_controls.js","ui_controls.css"],cache:1},window.event);if("validatebox"===n)return!(0,m.validateMobileBox)({closeLink:1,onDone:()=>{var e;return null==(e=document.querySelector("#change_phone_wrap"))?void 0:e.remove()}});if("upload_video"===n)return window.VideoUpload.showBox();if(n===D.MY_QUESTIONS_BOX_URL_PARAMETER){let e=window.nav.objLoc.ref;return e?(delete window.nav.objLoc.ref,window.nav.setLoc(window.nav.objLoc,t)):e="url",(0,C.showMyQuestionsBox)({ref:e}),!1}if(!1===n||!1===a){const e=!window.wkcur||!window.wkcur.shown||window.layers.fullhide!==window.WkView.hide;if(window.layers.fullhide&&(e||!1===a)&&!t.asBox){var c,u;const e=o||{};!t.hist||e.z||e.w||(null==(c=e[0])?void 0:c.includes("/"))||(null==(u=e[0])?void 0:u.match(/^(photo|video)(-?\d+_\d+)$/))||window.layerQueue.clear(),window.layers.fullhide({opts:t,noLoc:!!t.hist&&2})}const n=(0,f.curBox)();return n&&n.wkRaw&&n.hide(),!1}if(n&&_){const e=function(){return delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t),!0};switch(_[1]){case"photo":return(0,g.showPhoto)(_[2],_[3],(0,P.extend)(t,{onFail:e,noHistory:!0})),!1;case"albums":return(0,g.showAlbums)(_[2],(0,P.extend)(t,{onFail:e,noHistory:!0})),!1;case"album":return(0,g.showAlbum)(_[2],(0,P.extend)(t,{onFail:e,noHistory:!0})),!1;case"tag":case"photo_tag":return(0,g.showPhotoTags)(_[2],(0,P.extend)(t,{onFail:e,noHistory:!0})),!1;case"video":case"clip":let o=_[3]||window.nav.objLoc.list,i=(0,P.extend)(t,{onFail:e,noLocChange:1,focusPlay:1});if(o){const e=[];let t="";if(o.split("/").forEach((o=>{o.startsWith("pl_")?t=o:e.push(o)})),o=e.join("/"),t){t=t.substr(3);const e=window.cur.currentModule?window.cur.currentModule():window.cur.module;i=(0,P.extend)(i,{playlistId:t,module:e,addParams:{force_no_repeat:1,show_next:1,playlist_id:t,show_all_videos:(0,P.intval)(window.cur.isCatalog&&(!window.VideoPlaylist||!window.VideoPlaylist.getList(t)))}})}}return"clip"===_[1]&&(i.shortVideo=1),(0,v.showVideo)(_[2],o,i),!1;case"single":return void 0===a&&window.stManager.add(["single_pv.css",window.jsc("web/single_pv.js")]).then((()=>{var e,t;null==(t=document.querySelector(`#${n}`))||null==(e=t.onclick)||e.call(t,new MouseEvent("click"))})),!1;case"accept_money":return(0,y.moneyTransferBox)(_[2],_[3]),!1;case"moneysend":const l=I.MoneyTransfer.showMoneyTransferBox({to_id:_[2],from:"public_link"},{},(e=>(l.hide(),setTimeout((0,h.showFastBox)((0,s.getLang)("global_error"),e).hide,2e3),delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t),!0)));return!1;case"audio_playlist":const[c,u]=_[2].split("_"),d=t.context||"";return r.AudioUtils.showAudioPlaylist(c,u,window.nav.objLoc.access_key?window.nav.objLoc.access_key:_[3],d,void 0,t.onDone),!1;case"article_edit":const[p,m]=_[2].split("_");return(0,g.openArticleEditor)(Number(p),Number(m),null,{},{}),!1;case"podcast":return window.stManager.add([window.jsc("web/podcast.js"),"page.css"]).then((()=>{window.Podcast.show(null,_[2],null,"url")})),!1;case"apps_achievements":return window.stManager.add([window.jsc("web/apps_achievements.js")]).then((()=>{var e;null==(e=window.AppsAchievementsPage)||e.showFriendAchievements(Number(_[2]))})),!1;case D.ASK_QUESTION_BOX_URL_PREFIX:const E=Number(_[2]);let w=window.nav.objLoc.ref;return w?(delete window.nav.objLoc.ref,window.nav.setLoc(window.nav.objLoc,t)):w="url",(0,C.showAskQuestionBox)(E,{ref:w}),!1;case"call":const b=()=>{window.stManager.add([window.jsc("web/notifier.js")]).then((()=>{var e;const[o,n]=_[2].split("_"),i=Number(n),r=n&&R.Ranges.isGroupId(i)?i:void 0,s=()=>{var e;return null==(e=window.Calls)?void 0:e.call({vkId:Number(o),entryPoint:M.CallStatSource.LINK,groupId:r})};(null==(e=window.Calls)?void 0:e.initialized)?s():setTimeout((()=>{s()}),1500),delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t)}))};return(0,O.partConfigEnabled)("calls_open_warning_box_on_call_by_link")?(0,h.showFastBox)({title:(0,s.getLang)("global_warning")},(0,s.getLang)("calls_are_you_sure_to_call_this_user"),(0,s.getLang)("global_share_button_call"),(()=>{var e;null==(e=(0,f.curBox)())||e.hide(),b()}),(0,s.getLang)("global_close")):b(),!1}}}}},46218:(e,t,o)=>{"use strict";o(20640),o(1934),o(39586),o(46594)},47214:(e,t,o)=>{"use strict";o.d(t,{LoginBoxForm:()=>a});var n=o(73359),i=o(1959),r=o(44734),s=o(59427);class a{init(){var e;const t=this.rootEl,o=t.querySelector(".LoginBox__form");if(!o)return;const a=t.querySelector(".LoginBox__formExpire"),_=t.querySelector(".LoginBox__buttonSignIn"),l=t.querySelector(".LoginBox__buttonSignUp"),c=t.querySelector('[name="email"]'),u=t.querySelector('[name="pass"]'),d=t.querySelector('[name="ul"]');_&&(c&&(0,n.placeholderInit)(c),u&&(0,n.placeholderInit)(u),null==(e=a)||e.addEventListener("click",(e=>{e.preventDefault(),(0,i.checkbox)(a)})),u&&u.addEventListener("input",(()=>{o.classList.toggle("LoginBox--showExpire",u.value.trim().length>0)})),l&&(l.onclick=()=>((0,r.showBox)("join.php",{act:"box",from:window.nav.strLoc}),!1)),o.onsubmit=()=>{if(s.FlatButton.isLocked(_))return!1;const e=window.submitQuickLoginForm;if(!e)return!0;const t=c?c.value.trim():"",o=u?u.value.trim():"",n=Number((0,i.isChecked)(a));if(c&&!t)return(0,i.notaBene)(c),!1;if(!o)return(0,i.notaBene)(u),!1;const r={expire_input:n};return d&&d.value&&(r.ul=d.value),e(t,o,{prg:"login_button",params:r}),s.FlatButton.lock(_),!1},requestAnimationFrame((()=>{var e;null==(e=c||u)||e.focus()})))}constructor(e){this.rootEl=e,this.init()}}},99898:(e,t,o)=>{"use strict";o.d(t,{LoginRecentUsersGallery:()=>n});class n{init(){this.setIndex(0)}initializeSlides(){var e;this.slides=[...this.layerEl.children].map(((e,t)=>({coordX:t*e.offsetWidth,width:e.offsetWidth,el:e}))),this.viewportEl.style.width=`${null==(e=this.slides[0])?void 0:e.width}px`;const t=this.containerEl.offsetWidth,o=this.viewportEl.offsetWidth;this.layerWidth=this.slides.reduce(((e,t)=>t.width+e),0),this.min=o-(t-o)/2-this.layerWidth,this.max=0}validateIndent(e){const{min:t,max:o}=this;return e<t?t:e>o?o:e}calculateIndent(e){const{slides:t}=this,o=t.length?t[e]:null;if(o){const{coordX:e}=o;return this.validateIndent(-1*e)}return 0}render(){const e=this.calculateIndent(this.currentIndex);requestAnimationFrame((()=>{this.layerEl.style.transform=`translateX(${e}px)`})),[...this.layerEl.children].forEach(((e,t)=>{e.classList.toggle("LoginRecentUsersGallery__slide--prev2",t===this.currentIndex-2),e.classList.toggle("LoginRecentUsersGallery__slide--active",t===this.currentIndex),e.classList.toggle("LoginRecentUsersGallery__slide--next2",t===this.currentIndex+2)}))}setRelativeIndex(e){this.currentIndex=Math.max(0,Math.min(this.currentIndex+e,this.slides.length-1)),this.onChange(this.currentIndex),this.render()}setIndex(e){this.currentIndex=Math.max(0,Math.min(e,this.slides.length-1)),this.onChange(this.currentIndex),this.render()}constructor(e){this.containerEl=e,this.viewportEl=e.firstElementChild,this.layerEl=this.viewportEl.firstElementChild,this.initializeSlides()}}},96238:(e,t,o)=>{"use strict";o.d(t,{ResetSessionsCheckbox:()=>_});var n=o(85893),i=o(67294),r=o(93353),s=o(91919),a=o(3895);const _=({onChange:e,checked:t,showTooltip:o,onTooltipHide:_,onTooltipShow:l})=>((0,i.useEffect)((()=>{o&&l()}),[]),(0,n.jsx)(r.TextTooltip,{shown:null!=o&&o,onClose:_,placement:"top-start",appearance:"accent",text:(0,a.getLang)("login_reset_sessions_tooltip_text"),maxWidth:278,children:(0,n.jsx)(s.Checkbox,{onChange:e,checked:t,children:(0,a.getLang)("login_reset_sessions")})}))},31591:(e,t,o)=>{"use strict";o.d(t,{default:()=>I});var n=o(34788),i=o(85893),r=o(67294),s=o(34892),a=o(96041),_=o(39586),l=o(82753),c=o(1959),u=o(3895),d=o(36671),p=o(94345),h=o(11894),m=o(27482),f=o(47252),g=o(92977),v=o(97092),y=o(99602),E=o(72507),w=o(96238),b=o(81983),A=o(89084);class P extends r.Component{setInitialState(){this.setState({message:"",isError:!1,initialLoading:!0,mainButtonLoading:!1,noCodeButtonLoading:!1,resetUnblockDataButtonLoading:!1,redirectToAuthButtonLoading:!1,isResetSessions:!0})}getPhoneBlockTooltipLabel(){return this.areCallResetsEnabled()?this.props.tooltips.phoneCallReset:this.props.tooltips.phone}constructor(e){super(e),this.componentDidMount=()=>{document.addEventListener("keydown",this.onDocumentKeyDown),this.setInitialState(),this.synchronizeStateWithBackend()},this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onDocumentKeyDown),this.removeResendCodeButtonTimer()},this.componentDidUpdate=(e,t)=>{this.state.initialLoading||this.state.delayedUnblockExplanation||this.state.delayedUnblockFinished||t.phone===this.state.phone&&t.code===this.state.code&&t.codeSent===this.state.codeSent||this.updateFocus()},this.sendEvent=(e,t,o)=>{const n={act:P.acts.sendEvent,event_name:e,screen:t,hash:this.state.processHash,error_info:o};window.ajax.post(P.controller,n,{onFail:e=>{throw new Error(e)}})},this.sendCode=()=>{if(this.isBusy())return;var e;this.resetMessage(),this.sendEvent(P.constants.eventNames.UNBLOCK_CODE_SENT,P.constants.unblockConfirmPhoneScreen);const t=null!=(e=this.getPhonePrefix())?e:"";var o;const n=null!=(o=this.state.newPhone)?o:"",i={act:P.acts.sendCode,phone:t+n,hash:this.state.processHash,sure:1};window.ajax.post(P.controller,i,{onDone:e=>{this.sendEvent(P.constants.eventNames.UNBLOCK_NEW_PHONE_CODE_SENT,P.constants.unblockConfirmNewPhoneScreen),this.setStateByProcess(e),this.setResendCodeButtonTimer()},onFail:e=>(this.setErrorMessage(e),!0),showProgress:()=>this.setState({mainButtonLoading:!0}),hideProgress:()=>this.setState({mainButtonLoading:!1})})},this.sendCodeToBoundPhone=()=>{if(this.isBusy())return;this.resetMessage(),this.sendEvent(P.constants.eventNames.UNBLOCK_CODE_SENT,P.constants.unblockConfirmPhoneScreen);const e={act:P.acts.sendCodeToBoundPhone,hash:this.state.processHash};window.ajax.post(P.controller,e,{onDone:e=>{this.setStateByProcess(e),this.setResendCodeButtonTimer()},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({mainButtonLoading:!0}),hideProgress:()=>this.setState({mainButtonLoading:!1})})},this.resetPhone=e=>{this.isBusy()||(this.removeResendCodeButtonTimer(),e&&this.resetMessage(),this.setState({phonePrefixIndex:P.constants.firstCountryIndex,backendCallResetsEnabled:null,phone:"",code:"",newPhone:"",newCode:"",phonePrefixInputNeeded:!0,codeSent:!1,checkCodeAttemptsAmount:void 0}))},this.resetUnblockForm=()=>{if(this.isBusy())return;const e={act:P.acts.resetUnblockForm,hash:this.state.processHash};window.ajax.post(P.controller,e,{onDone:e=>{this.setStateByProcess(e,{delayedUnblockExplanation:"",delayedUnblockFinished:!1})},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({resetUnblockDataButtonLoading:!0}),hideProgress:()=>this.setState({resetUnblockDataButtonLoading:!1})})},this.checkCode=()=>{if(this.isBusy())return;if(this.state.newCode&&this.state.newCode.length<4)return void(0,c.notaBene)(this.references.validationCodeInput);this.resetMessage();const e={act:P.acts.checkCode,code:this.state.newCode,hash:this.state.processHash};window.ajax.post(P.controller,e,{onDone:e=>{var t;this.setStateByProcess(e),null==(t=this.references.passwordInput)||t.focus(),this.setState({mainButtonLoading:!1})},onFail:e=>(this.synchronizeStateWithBackend((()=>{this.setErrorMessage(e),this.setState({mainButtonLoading:!1})})),!0),showProgress:()=>this.setState({mainButtonLoading:!0})})},this.resendCode=()=>{if(this.isBusy())return;this.resetMessage();const e={act:P.acts.resendCode,hash:this.state.processHash};this.sendEvent(P.constants.eventNames.UNBLOCK_REPEAT_CODE_SENT,P.constants.unblockConfirmPhoneCodeScreen),window.ajax.post(P.controller,e,{onDone:e=>{var t;this.setStateByProcess(e,{newCode:""}),this.setInfoMessage(this.getResentInfoMessageText()),this.setResendCodeButtonTimer(),null==(t=this.references.validationCodeInput)||t.focus()},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({noCodeButtonLoading:!0}),hideProgress:()=>this.setState({noCodeButtonLoading:!1})})},this.unblock=()=>{if(this.isBusy())return;var e;if(P.isBadPassword(null!=(e=this.state.newPassword)?e:""))return void(0,c.notaBene)(this.references.passwordInput);this.resetMessage();const t={act:P.acts.unblock,pass:this.state.newPassword,hash:this.state.unblockHash,reset_sessions:this.state.isResetSessions?1:0};window.ajax.post(P.controller,t,{onDone:e=>{var t;e.delayed_unblock_explanation?this.setState({delayedUnblockExplanation:e.delayed_unblock_explanation,mainButtonLoading:!1}):(this.setState({password:this.state.newPassword}),P.refreshAuthDataAndRedirectToFeed(e.lg_domain_h,e.logout_hash,e.email,null!=(t=this.state.newPassword)?t:""))},onFail:e=>(this.setErrorMessage(e),this.setState({mainButtonLoading:!1}),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({mainButtonLoading:!0})})},this.redirectToAuth=()=>{var e;this.setState({redirectToAuthButtonLoading:!0});const t=null==(e=document.querySelector("#top_logout_link"))?void 0:e.href;t&&(window.location.href=t)},this.synchronizeStateWithBackend=(e=(()=>{}),t=P.constants.statusSyncRetriesCount)=>{const o={act:P.acts.getStatus};window.ajax.post(P.controller,o,{onDone:t=>{e(),this.setStateByProcess(t)},onFail:o=>(this.setErrorMessage(o),t>0?(setTimeout((()=>{this.synchronizeStateWithBackend(e,--t)}),P.constants.statusSyncRetriesTimeoutMicroseconds),!0):(this.props.onClose(),(0,y.showErrorBox)((0,u.getLang)("login_unban_fetch_ban_data_internal_error")),!0))})},this.setStateByProcess=(e,t=!1)=>{let o=this.getStateByProcess(e);this.state.initialLoading&&(o.initialLoading=!1),t&&Object.assign(o,t),this.state.disallow2faPhoneChange&&0===o.checkCodeAttemptsAmount&&!o.canEditPhone&&this.setErrorMessage(o.messageOnNoTriesLeft),0!==this.state.unbanDataId&&void 0!==this.state.unbanDataId&&o.unbanDataId!==this.state.unbanDataId&&this.setErrorMessage((0,u.getLang)("login_unban_data_expired")),this.setState((e=>(0,n._)({},e,o))),o.delayedUnblockExplanation||o.delayedUnblockFinished||(o.codeSent&&o.resendButtonSecondsLeft&&this.setResendCodeButtonTimer(),0===o.checkCodeAttemptsAmount&&this.state.canEditPhone&&this.resetPhone(!1))},this.getStateByProcess=e=>{var t,o;const n=Boolean(null==(t=e)?void 0:t.disallow_2fa_phone_change);return{phone:e.phone,code:e.code,password:e.password,phonePrefixInputNeeded:n?!e.phone&&e.can_edit_phone:!e.phone,canEditPhone:e.can_edit_phone,codeSent:e.code_sent,checkCodeAttemptsAmount:Number(e.check_code_attempts_amount),backendCallResetsEnabled:e.call_resets_enabled,phonePrefixesCallResetsEnabledConfig:e.phone_prefixes_call_resets_enabled_config,phonePrefixesToCountryMapping:e.country_to_phone_prefixes_map,unbanDataId:e.unban_data_id,delayedUnblockExplanation:e.delayed_unblock_explanation,delayedUnblockFinished:e.delayed_unblock_finished,resendCodeTimer:this.state.resendCodeTimer||P.constants.noResetCodeTimerEnabled,resendButtonSecondsLeft:e.sms_resend_delay_timer_left,resendAttemptsAmount:e.resend_attempts_amount,resendCodeDelay:e.sms_resend_delay,phonePrefixIndex:this.getInitialPhonePrefixIndex(e.country_to_phone_prefixes_map,e.phone_prefix),newPhone:e.phone,newCode:e.code,newPassword:"",processHash:e.process_hash,unblockHash:e.unblock_hash,messageOnNoTriesLeft:null==(o=e)?void 0:o.msg_on_no_tries_left,disallow2faPhoneChange:n,showSessionCheckbox:e.show_session_checkbox,showSessionCheckboxTooltip:e.show_session_checkbox_tooltip}},this.is2faTriesExceeded=()=>!!this.state.disallow2faPhoneChange&&(0===this.state.checkCodeAttemptsAmount&&!this.state.canEditPhone),this.areCallResetsEnabled=()=>{var e,t;if(null!==this.state.backendCallResetsEnabled)return this.state.backendCallResetsEnabled;(0,b.assertNotNull)(this.state.phonePrefixIndex);const o=String(null==(e=this.state.phonePrefixesToCountryMapping)?void 0:e[this.state.phonePrefixIndex][0]),n=Number(o.replace("_",""));return!(null==(t=this.state.phonePrefixesCallResetsEnabledConfig)?void 0:t.includes(n))},this.updateFocus=()=>{var e;if(this.state.phone){if(this.state.phone&&!this.state.code&&this.state.codeSent){var t;null==(t=this.references.validationCodeInput)||t.focus()}else if(this.state.phone&&this.state.code){var o;null==(o=this.references.passwordInput)||o.focus()}}else null==(e=this.references.phoneInput)||e.focus()},this.setErrorMessage=e=>{"string"==typeof e&&this.setState({message:e,isError:!0})},this.setInfoMessage=e=>{this.setState({message:e,isError:!1})},this.resetMessage=()=>{this.setState({message:""})},this.isBusy=()=>this.state.mainButtonLoading||this.state.noCodeButtonLoading||this.state.resetUnblockDataButtonLoading,this.onDocumentKeyDown=e=>{var t,o,n;e.keyCode===a.KEY.ENTER&&(null==(n=this.references.mainButton)||null==(o=n.props)||null==(t=o.onClick)||t.call(o),e.stopPropagation(),e.preventDefault())},this.setResendCodeButtonTimer=()=>{if(Number(this.state.resendCodeTimer)!==P.constants.noResetCodeTimerEnabled)return;const e=this.state.resendButtonSecondsLeft||this.state.resendCodeDelay;this.setState({resendCodeTimer:window.setInterval(this.resendCodeButtonTimerTick,h.SECOND),resendButtonSecondsLeft:e})},this.resendCodeButtonTimerTick=()=>{const e=Number(this.state.resendButtonSecondsLeft)-1;this.setState({resendButtonSecondsLeft:e}),0===e&&this.removeResendCodeButtonTimer()},this.removeResendCodeButtonTimer=()=>{clearInterval(this.state.resendCodeTimer),this.setState({resendCodeTimer:P.constants.noResetCodeTimerEnabled,resendButtonSecondsLeft:0})},this.noResendsWereMade=()=>this.state.resendAttemptsAmount===P.constants.noCodeResentAmount,this.isLastResendStep=()=>this.state.resendAttemptsAmount===P.constants.maxCodeResentAmount,this.shouldRenderCallResetsSteps=()=>this.areCallResetsEnabled()?this.noResendsWereMade():this.isLastResendStep(),this.getCodeBlockHeaderLabel=()=>this.shouldRenderCallResetsSteps()?(0,u.getLang)("login_authcheck_called_phone_label"):(0,u.getLang)("login_confirmation_code"),this.getCodeBlockTooltipLabel=()=>this.shouldRenderCallResetsSteps()?this.props.tooltips.codeCallReset:this.props.tooltips.code,this.getResentInfoMessageText=()=>this.shouldRenderCallResetsSteps()?(0,u.getLang)("login_authcheck_call_reset_sent"):(0,u.getLang)("login_authcheck_sms_resent"),this.getResendCodeWaitingLabel=()=>{let e;e=this.areCallResetsEnabled()?this.noResendsWereMade()?(0,u.getLang)("join_send_code_via_sms_time"):(0,u.getLang)("join_resend_code_time"):this.noResendsWereMade()?(0,u.getLang)("join_resend_code_time"):(0,u.getLang)("login_authcheck_send_call_reset_delay");const{resendButtonSecondsLeft:t}=this.state,o=Math.floor(Number(t)/60)+":"+(Number(t)%60<10?"0":"")+Number(t)%60;return e.replace("%s",o)},this.getResendCodeButtonLabel=()=>this.areCallResetsEnabled()?this.noResendsWereMade()?(0,u.getLang)("join_send_code_via_sms"):(0,u.getLang)("join_no_code"):this.noResendsWereMade()?(0,u.getLang)("join_no_code"):(0,u.getLang)("login_authcheck_send_call_reset_message"),this.getInitialPhonePrefixIndex=(e,t)=>{let o=e.findIndex((e=>e[3]==t));return-1===o&&(o=P.constants.firstCountryIndex),o},this.mapPhonePrefixesToOption=()=>{var e;return null==(e=this.state.phonePrefixesToCountryMapping)?void 0:e.map(((e,t)=>({constant:t,name:e[1]})))},this.getPhonePrefix=()=>{var e;return(0,b.assertNotNull)(this.state.phonePrefixIndex),null==(e=this.state.phonePrefixesToCountryMapping)?void 0:e[this.state.phonePrefixIndex][3]},this.onResetSessionsCheckboxChange=e=>{const{checked:t}=e.target;this.setState({isResetSessions:t})},this.onNoAccessLinkClick=()=>{let e=P.constants.unblockConfirmPhoneScreen;this.state.phone||(e=P.constants.unblockConfirmNewPhoneScreen),this.state.codeSent&&(e=P.constants.unblockConfirmPhoneCodeScreen),this.sendEvent(P.constants.eventNames.NO_ACCESS_TO_PHONE,e)},this.renderResendCodeButton=()=>{let e;if(this.state.resendAttemptsAmount===P.constants.maxCodeResentAmount)e=(0,i.jsx)("div",{className:"resend_button resend_button--waiting",children:(0,u.getLang)("reg_code_limit_exceeded")});else if(0===this.state.resendButtonSecondsLeft)e=(0,i.jsx)(d.Button,{size:"m",mode:"link",loading:this.state.noCodeButtonLoading,onClick:this.resendCode,children:(0,i.jsx)("span",{className:"resend_button",children:this.getResendCodeButtonLabel()})});else{const t=this.getResendCodeWaitingLabel();e=(0,i.jsx)("div",{className:"resend_button resend_button--waiting",children:t})}return(0,i.jsx)("div",{className:"resend_button_wrap",children:e})},this.renderPhonePrefixBlock=()=>{if(!this.state.phonePrefixInputNeeded)return"";const e=this.state.phone?P.constants.finishedClass:"";return(0,i.jsxs)("div",{className:`input phone_number_prefix_input ${e}`,children:[(0,i.jsx)("div",{className:"label",children:(0,u.getLang)("join_country_label")}),(0,i.jsx)(m.default,{className:`dark phone_number_prefix _phone_input_tooltip ${e}`,config:{id:"phone_number_prefix",placeholder:"",selected:[this.state.phonePrefixIndex],options:this.mapPhonePrefixesToOption()},singleSelectCrutch:!0,onFilterChange:(e,t)=>{this.setState({phonePrefixIndex:null===t?this.state.phonePrefixIndex:t})},readOnly:Boolean(this.state.phone)})]})},this.renderPhoneBlock=()=>{const e=this.state.phone&&!this.state.code&&this.state.canEditPhone?(0,i.jsx)("a",{className:"_change_phone_button",onClick:()=>(this.sendEvent(P.constants.eventNames.CHANGE_PHONE_TO_UNBLOCK,P.constants.unblockConfirmPhoneScreen),this.resetPhone(!0)),children:(0,u.getLang)("login_unblock_form_change_phone")}):"",t=this.state.phonePrefixInputNeeded?this.getPhonePrefix():"",o=this.state.phone?P.constants.finishedClass:"",n=!this.state.phone&&!this.state.code&&this.state.phonePrefixInputNeeded;let r=this.state.newPhone;return(0,i.jsxs)("div",{className:"input phone_number_input",children:[(0,i.jsx)("div",{className:"label",children:(0,u.getLang)("login_mobile_phone")}),e,(0,i.jsxs)(f.default,{text:this.getPhoneBlockTooltipLabel(),appearance:P.constants.tooltipAppearance,position:P.constants.tooltipPosition,width:P.constants.tooltipWidth,marginLeft:P.constants.tooltipMarginLeft,isShown:n,children:[(0,i.jsxs)("div",{id:"join_phone_prefixed",className:`prefix_input_wrap ${o}`,children:[(0,i.jsx)("div",{id:"join_phone_prefix",className:"prefix_input_prefix",children:(0,i.jsx)("nobr",{children:t})}),(0,i.jsxs)("div",{className:"prefix_input_field",children:[(0,i.jsx)(p.default,{className:`prefix_input phone_number _phone_input_tooltip ${o}`,value:r,readOnly:!!this.state.phone,onChange:e=>this.setState({newPhone:e.target.value}),getRef:e=>{this.references.phoneInput=e}}),(0,i.jsx)("div",{className:"prefix_input_border"})]})]}),(0,i.jsx)("a",{href:"https://id.vk.com/restore?sak_open_external=1&restore_nav=change_phone",className:"after",onClick:this.onNoAccessLinkClick,children:(0,u.getLang)("vkui_blocked_no_phone_access")})]})]})},this.renderCodeBlock=()=>{if(!this.state.phone)return"";if(!this.state.codeSent)return"";const e=this.getCodeBlockHeaderLabel(),t=this.state.code?P.constants.finishedClass:"",o=this.state.phone&&!this.state.code,n=!!this.state.code;return(0,i.jsxs)("div",{className:"input verification_code_input",children:[(0,i.jsx)("div",{className:"label",children:e}),(0,i.jsx)(f.default,{text:this.getCodeBlockTooltipLabel(),appearance:P.constants.tooltipAppearance,position:P.constants.tooltipPosition,width:P.constants.tooltipWidth,marginLeft:P.constants.tooltipMarginLeft,isShown:o,children:(0,i.jsx)(p.default,{className:`verification_code _verification_code_input_tooltip dark ${t}`,getRef:e=>{this.references.validationCodeInput=e},placeholder:(0,u.getLang)("login_authcheck_enter_code"),value:this.state.newCode,readOnly:n,onChange:e=>this.setState({newCode:e.target.value}),disabled:this.is2faTriesExceeded()})})]})},this.renderPasswordBlock=()=>{if(!this.state.phone||!this.state.code)return"";var e;const t=P.checkPasswordStrength(null!=(e=this.state.newPassword)?e:""),o=this.state.newPassword?(0,i.jsx)("div",{id:"blocked_about_pass",className:"blocked_pwd_level"+t}):"",n=[(0,u.getLang)("join_pwd_level0"),(0,u.getLang)("join_pwd_level1"),(0,u.getLang)("join_pwd_level2"),(0,u.getLang)("join_pwd_level3"),(0,u.getLang)("join_pwd_level4"),(0,u.getLang)("join_pwd_level5")],r=this.state.newPassword?(0,i.jsx)("div",{className:"blocked_pass_strength blocked_about_login",children:n[t]}):null;let s=!this.state.password;return(0,i.jsxs)("div",{className:"input new_password_input",children:[(0,i.jsx)("div",{className:"label",children:(0,u.getLang)("login_new_password_label")}),(0,i.jsx)(f.default,{text:this.props.tooltips.password,appearance:P.constants.tooltipAppearance,position:P.constants.tooltipPosition,width:P.constants.tooltipWidth,marginLeft:P.constants.tooltipMarginLeft,isShown:s,children:(0,i.jsx)(p.default,{type:"password",className:"dark new_password _password_input_tooltip",getRef:e=>{this.references.passwordInput=e},placeholder:(0,u.getLang)("login_enter_password"),value:this.state.newPassword,onChange:e=>this.setState({newPassword:e.target.value})})}),(0,i.jsxs)("div",{className:"after",children:[o,r]})]})},this.onResetSessionTooltipShow=()=>{this.sendEvent(P.constants.eventNames.TOOLTIP_RESET_SESSIONS_SHOW,P.constants.unblockCodePwd)},this.onResetSessionsTooltipHide=()=>{this.sendEvent(P.constants.eventNames.TOOLTIP_RESET_SESSIONS_CLOSE,P.constants.unblockCodePwd)},this.renderResetSessionCheckboxBlock=()=>this.state.showSessionCheckbox&&this.state.phone&&this.state.code?(0,i.jsx)("div",{className:"input reset_session_input",children:(0,i.jsx)(w.ResetSessionsCheckbox,{onTooltipShow:this.onResetSessionTooltipShow,onTooltipHide:this.onResetSessionsTooltipHide,showTooltip:this.state.showSessionCheckboxTooltip,onChange:this.onResetSessionsCheckboxChange,checked:!!this.state.isResetSessions})}):"",this.renderMainButton=()=>{let e,t,o;const n=this.areCallResetsEnabled()?(0,u.getLang)("reg_validate_call_reset_button"):(0,u.getLang)("login_receive_code");if(this.state.phone||this.state.code)if(this.state.phone&&!this.state.code)this.state.codeSent?(e=this.checkCode,t=(0,u.getLang)("login_check_code"),o=this.renderResendCodeButton()):(e=this.sendCodeToBoundPhone,t=n,o="");else{if(!this.state.phone||!this.state.code)return"";e=this.unblock,t=(0,u.getLang)("login_blocked_unblock_page"),o=""}else e=this.sendCode,t=n,o="";return this.is2faTriesExceeded()&&(o=""),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Button,{size:"m",mode:"primary",className:"UnblockForm__mainButton",loading:this.state.mainButtonLoading,onClick:e,getRootRef:e=>{this.references.mainButton=e},disabled:this.is2faTriesExceeded(),children:t}),o]})},this.renderMessage=()=>{if(!this.state.message)return"";const e=this.state.isError?"error":"";return(0,i.jsx)("div",{id:"unblock_box_errors_block",children:(0,i.jsx)("div",{className:"msg submit_error "+e,dangerouslySetInnerHTML:{__html:this.state.message}})})},this.renderContent=()=>this.state.initialLoading?P.renderInitialLoading():this.state.delayedUnblockExplanation?this.renderDelayedWaitExplanation():this.state.delayedUnblockFinished?this.renderDelayedUnblockFinishedScreen():(0,i.jsxs)("div",{className:"UnblockForm__content__inputs",children:[this.renderPhonePrefixBlock(),this.renderPhoneBlock(),this.renderCodeBlock(),this.renderPasswordBlock(),this.renderResetSessionCheckboxBlock(),this.renderMainButton()]}),this.renderDelayedWaitExplanation=()=>{var e;return(0,i.jsxs)("div",{className:"DelayedWaitExplanation",children:[(0,i.jsx)("div",{className:"DelayedWaitExplanation__message msg submit_error ",dangerouslySetInnerHTML:{__html:(0,u.getLang)("restore_change_phone_done_wait_banned").replace("{date}",null!=(e=this.state.delayedUnblockExplanation)?e:"")}}),(0,i.jsx)("div",{className:"DelayedWaitExplanation__progressWrap",children:(0,i.jsx)(d.Button,{size:"m",mode:"tertiary",loading:this.state.resetUnblockDataButtonLoading,onClick:this.resetUnblockForm,children:(0,u.getLang)("login_delayed_its_not_me")})})]})},this.renderDelayedUnblockFinishedScreen=()=>(0,i.jsxs)("div",{id:"unblock_box_errors_block",children:[(0,i.jsx)("div",{className:"msg submit_error ",dangerouslySetInnerHTML:{__html:(0,u.getLang)("login_delayed_request_finished")}}),(0,i.jsx)("div",{className:"DelayedRequestFinished__button",children:(0,i.jsx)(d.Button,{mode:"primary",size:"m",loading:this.state.redirectToAuthButtonLoading,onClick:this.redirectToAuth,children:(0,u.getLang)("login_unblock_redirect_to_auth")})}),(0,i.jsx)("div",{className:"DelayedRequestFinished__notMeButton",children:(0,i.jsx)(d.Button,{size:"m",mode:"tertiary",loading:this.state.resetUnblockDataButtonLoading,onClick:this.resetUnblockForm,children:(0,u.getLang)("login_delayed_its_not_me")})})]}),this.render=()=>(0,i.jsx)(E.UnblockFormModal,{onClose:()=>this.props.onClose(),children:(0,i.jsx)("div",{className:"UnblockForm__content",children:(0,i.jsx)("div",{className:"login_blocked_wrap",children:(0,i.jsxs)("div",{className:"unblock_form",children:[(0,i.jsxs)("div",{className:"UnblockForm__content__header",children:[(0,i.jsx)("div",{className:"antispam_team_logo"}),(0,i.jsx)("div",{className:"reason",children:(0,u.getLang)("login_unblock_form_explanation")})]}),this.renderMessage(),this.renderContent()]})})})}),this.state={initialLoading:!0},this.references={phoneInput:null,validationCodeInput:null,passwordInput:null,mainButton:null}}}P.controller="/al_login.php",P.acts={getStatus:"get_unblock_process_status",sendCode:"send_unblock_code",sendCodeToBoundPhone:"send_unblock_code_to_bound_phone",resendCode:"resend_unblock_code",checkCode:"check_unblock_code",unblock:"unblock",resetUnblockForm:"reset_unblock_form",sendEvent:"send_event"},P.constants={finishedClass:"finished",maxCodeResentAmount:2,noCodeResentAmount:0,firstCountryIndex:0,noResetCodeTimerEnabled:0,tooltipWidth:250,tooltipMarginLeft:5,tooltipAppearance:"white",tooltipPosition:"r",statusSyncRetriesCount:10,statusSyncRetriesTimeoutMicroseconds:1e3,passwordStrengths:{none:-1,incorrectTooShort:0,weakTypical:1,good:2,veryGood:3,excellent:4,incorrectHasSpaces:5},unblockConfirmPhoneScreen:"unblock_confirm_phone",unblockConfirmNewPhoneScreen:"unblock_confirm_new_phone",unblockConfirmPhoneCodeScreen:"unblock_confirm_phone_code",unblockCodePwd:"unblock_code_pwd",eventNames:{UNBLOCK_NEW_PHONE_CODE_SENT:"UNBLOCK_NEW_PHONE_CODE_SENT",UNBLOCK_CODE_SENT:"UNBLOCK_CODE_SENT",CHANGE_PHONE_TO_UNBLOCK:"CHANGE_PHONE_TO_UNBLOCK",UNBLOCK_REPEAT_CODE_SENT:"UNBLOCK_REPEAT_CODE_SENT",NO_ACCESS_TO_PHONE:"NO_ACCESS_TO_PHONE",TOOLTIP_RESET_SESSIONS_SHOW:"TOOLTIP_RESET_SESSIONS_SHOW",TOOLTIP_RESET_SESSIONS_CLOSE:"TOOLTIP_RESET_SESSIONS_CLOSE"}},P.refreshAuthDataAndRedirectToFeed=(e,t,o,n)=>{var i;let r=window.utilsNode.appendChild((0,l.ce)("div",{innerHTML:'\n      <form id="login_block_auth_form" target="login_block_auth_frame" action="" method="POST">\n        <input type="hidden" name="_origin" id="login_server_origin" />\n        <input type="hidden" name="email" id="login_block_email" />\n        <input type="hidden" name="pass" id="login_block_pass" />\n      </form>\n      <iframe name="login_block_auth_frame" id="login_block_auth_frame"></iframe>'})),a=window.onLoginDone,_=document.querySelector("#login_block_auth_form");(null==(i=_)?void 0:i.action)&&(_.action=(0,v.getLoginDomain)()+"?act=login&ip_h="+t+"&lg_domain_h="+e+"&redirect=1&role=al_frame",(0,l.val)("login_block_email",(0,s.winToUtf)(o)),(0,l.val)("login_block_pass",(0,s.winToUtf)(n)),(0,l.val)("login_server_origin",window.cur.serverOrigin),_.submit()),(0,A.pushNavDestroy)((()=>{r.remove(),window.onLoginDone=a})),window.onLoginDone=()=>{r.remove(),window.nav.reload({force:!0})}},P.isBadPassword=e=>{const t=[P.constants.passwordStrengths.incorrectHasSpaces,P.constants.passwordStrengths.incorrectTooShort],o=P.checkPasswordStrength(e);return t.includes(o)},P.checkPasswordStrength=e=>{let t=P.constants.passwordStrengths.none;const o=["qwerty","йцукен","gfhjkm","пароль","password","abc123","fuckyou","123abc","baseball","football","soccer","monkey","liverpool","princess","jordan","slipknot","superman","iloveyou"];if(e.length<6)t=P.constants.passwordStrengths.incorrectTooShort;else if(/\s/.test(e))t=P.constants.passwordStrengths.incorrectHasSpaces;else if(e.match(/^\d+$/)||o.includes(e)||e.slice(-1).match(/\d/)&&o.includes(e.slice(0,-1)))t=P.constants.passwordStrengths.weakTypical;else{let o=[/[^a-z]/g,/[^A-Z]/g,/[^а-яё]/g,/[^А-ЯЁ]/g,/[^0-9]/g,/[a-zA-Zа-яА-ЯёЁ0-9]/g],n=[],i=0;for(let t=0,r=o.length;t<r;++t){let r=e.replace(o[t],"").length;r&&(r>1&&i++,n.push({group:t,cnt:r}))}if(n.length<3&&n[n.length-1].group!=o.length-1&&i<2&&(t=P.constants.passwordStrengths.good),(i>2||n.length>2&&n[n.length-1].group==o.length-1)&&(t=P.constants.passwordStrengths.excellent),t<0&&i>1){let n=e.replace(o[o.length-1],"");n.length>1&&n.replace(new RegExp((0,_.escapeRE)(n.charAt(0)),"g"),"").length&&(t=P.constants.passwordStrengths.excellent)}t<0&&(t=P.constants.passwordStrengths.veryGood),t&&t<3&&e.length>13&&t++}return t},P.renderInitialLoading=()=>(0,i.jsx)("div",{className:"InitialLoading",children:(0,i.jsx)(g.default,{})});const I=P},72507:(e,t,o)=>{"use strict";o.d(t,{UnblockFormModal:()=>a});var n=o(85893),i=o(3895),r=o(12865),s=o(6758);function a({onClose:e,children:t}){return(0,n.jsxs)(r.ModalBox,{children:[(0,n.jsx)(s.ModalHeader,{onClose:e,closeAriaLabel:(0,i.getLang)("global_close"),children:(0,i.getLang)("login_blocked_call_title")}),t]})}},61311:(e,t,o)=>{"use strict";o.d(t,{MARKET_EVENT_COUNTER_SECTION_ID:()=>i,updateMarketMenuEventCounter:()=>r});var n=o(89700);const i="page_menu_group_market";function r(e,t){const o=document.querySelector(e);o&&n.PageActionCell.setCounter(o,t)}},46594:(e,t,o)=>{"use strict";function n(e){return console.error(e),Promise.reject(e)}o.d(t,{dummyCatch:()=>n})},77859:(e,t,o)=>{"use strict";o.d(t,{isPhotoUnblurred:()=>n});o(17733);function n(e){const{unblurredPhotos:t}=window.cur;return!!t&&t.photoIds.has(e)}},25263:(e,t,o)=>{"use strict";o.d(t,{isVKCOMProfileRedesignedEnabled:()=>i});o(34788),o(44734),o(23434),o(46460),o(57458);var n=o(48041);o(91324);function i(){return(0,n.partConfigEnabled)("redesign_web_profile_feature")}},75579:(e,t,o)=>{"use strict";o.d(t,{showAskQuestionBox:()=>u,showMyQuestionsBox:()=>c});var n=o(82753),i=o(23434),r=o(83399),s=o(17601),a=o(48041),_=o(18714),l=o(13781);function c(e){var t,o;if(!(0,a.partConfigEnabled)("profile_questions_enabled"))return;if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(null==(t=window.MyQuestionsBox)?void 0:t.isMounted())return;(null==(o=e)?void 0:o.ref)&&(0,l.logQuestionsOpeningEvent)(window.vk.id,e.ref,_.QuestionAnalyticBoxName.myQuestions);const c=document.querySelector("#box_layer_wrap"),u=document.querySelector("#box_loader");(0,n.show)(c),(0,n.show)(u),(0,i.refreshBoxLoaderCoords)(),Promise.all([(0,r.getQuestions)(),window.stManager.add([window.jsc("web/my_questions.js")]),new Promise(((e,t)=>{window.ajax.post("al_questions.php",{act:"load_ask_my_questions_box_lang_keys"},{onDone:()=>{e()},onFail:()=>(t(),!0)})}))]).then((([t])=>{var o,i;window.boxQueue.count()||(0,n.hide)(c),(0,n.hide)(u),window.MyQuestionsBox.init(t.count,t.items,t.profiles,t.next_from,{onClose:null==(o=e)?void 0:o.onClose,fromElement:null==(i=e)?void 0:i.fromElement})})).catch((e=>{(0,n.hide)(c),(0,n.hide)(u),(0,s.logQuestionError)({error:e,additionalText:"An error occurred while loading data for my_questions.js"})}))}function u(e,t){var o,u,d,p;if(!(0,a.partConfigEnabled)("profile_questions_enabled"))return;if(e===window.vk.id)return void c({ref:null==(d=t)?void 0:d.ref,fromElement:null==(p=t)?void 0:p.fromElement});if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(null==(o=window.AskQuestionBox)?void 0:o.isMounted())return;if(!e)return void(0,s.logQuestionError)({error:"Empty toUserId has been passed to showAskQuestionBox"});(null==(u=t)?void 0:u.ref)&&(0,l.logQuestionsOpeningEvent)(e,t.ref,_.QuestionAnalyticBoxName.askQuestion);const h=document.querySelector("#box_layer_wrap"),m=document.querySelector("#box_loader");(0,n.show)(h),(0,n.show)(m),(0,i.refreshBoxLoaderCoords)(),Promise.all([(0,r.getUsers)([e]),window.stManager.add([window.jsc("web/ask_question.js")]),new Promise(((e,t)=>{window.ajax.post("al_questions.php",{act:"load_ask_question_box_lang_keys"},{onDone:()=>{e()},onFail:()=>(t(),!0)})}))]).then((([e])=>{var o;(0,n.hide)(h),(0,n.hide)(m);const i=e[0];i&&window.AskQuestionBox.init(i,null==(o=t)?void 0:o.fromElement)})).catch((e=>{(0,n.hide)(h),(0,n.hide)(m),(0,s.logQuestionError)({error:e,additionalText:"An error occurred while loading data for ask_question.js"})}))}},91324:(e,t,o)=>{"use strict";o.d(t,{showSilentModeEnabledFormBox:()=>a,showSilentModeEndFormBox:()=>_});var n=o(34788),i=o(85893),r=o(11672),s=o(66623);function a(e){const t=(0,r.asyncComponent)((()=>Promise.all([o.e(4322),o.e(3513),o.e(7468)]).then(o.bind(o,56038))),(({SilentModeEnabledForm:e})=>e));(0,s.showMessageBoxModalSuspense)((o=>(0,i.jsx)(t,(0,n._)({},o,e))),{width:400})}function _(e,t){const a=(0,r.asyncComponent)((()=>Promise.all([o.e(4322),o.e(3513),o.e(7468)]).then(o.bind(o,61074))),(({SilentModeEndForm:e})=>e));(0,s.showMessageBoxModalSuspense)((t=>(0,i.jsx)(a,(0,n._)({},t,e))),{width:400,onDestroy:t})}},88446:(e,t,o)=>{"use strict";o.d(t,{SearchClickActionMap:()=>i.SearchClickActionMap,logSearchAudioClick:()=>r});var n=o(68312),i=o(56525);const r=(e,t="")=>{var o;(o={action:e,track_code:t,type:i.EventItemType.MUSIC_AUDIO}).track_code&&n.searchStatsCollector.logEvent(o)}},4375:(e,t,o)=>{"use strict";o.d(t,{initColorSchemeDropdowns:()=>r});var n=o(43844),i=o(11288);function r(){document.querySelectorAll(".SettingsColorSchemeDropdown").forEach((e=>{!function(e){if(e.dataset.inited)return;e.dataset.inited="1";let t=e.dataset.value,o=JSON.parse(e.dataset.items||"[]");n.ColorScheme.isSchemesAutoSwitchingSupported()||(t===n.ColorSchemeMode.Auto&&(t=n.ColorSchemeMode.Light),o=o.filter((([e])=>e!==n.ColorSchemeMode.Auto)));const r=new window.InlineDropdown(e,{selected:t,items:o,onSelect(t){n.colorScheme.setMode(t),(0,i.logTopNavElements)("theme");const o=e.dataset.hash;window.ajax.post("al_settings.php?act=a_save_color_scheme_mode",{mode:t,hash:o})}}),s=n.colorScheme.subscribe((()=>{e&&r?r.val(n.colorScheme.getMode(),!0):s()}))}(e)}))}},34625:(e,t,o)=>{"use strict";o(20224),o(85893),o(73935),o(47679),o(82930),o(69096),o(67294),o(49957),o(74096),o(59397),o(83793),o(27714),o(9351),o(13996),o(57458),o(68817),o(3559),o(3895),o(70956);Date.now()},96823:(e,t,o)=>{"use strict";o(74096),o(9351)},68817:(e,t,o)=>{"use strict";o.d(t,{LeftMenuLegacySkeleton:()=>r});var n=o(85893),i=(o(67294),o(24100));const r=()=>(0,n.jsx)("div",{className:"LeftMenuLegacySkeleton",children:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18].map((e=>(0,n.jsxs)("div",{className:"LeftMenuLegacySkeleton__item",children:[(0,n.jsx)(i.Skeleton,{className:"LeftMenuLegacySkeleton__icon",width:20,height:20,colorFrom:"var(--vkui--color_skeleton_to)",noAnimation:!0,circle:!0}),(0,n.jsx)(i.Skeleton,{className:"LeftMenuLegacySkeleton__label",height:12,colorFrom:"var(--vkui--color_skeleton_to)",noAnimation:!0})]},e)))})},66925:(e,t,o)=>{"use strict";o.d(t,{getLeftMenuHeight:()=>i.getLeftMenuHeight,setLeftMenu:()=>n.setLeftMenu,updateItemCount:()=>n.updateItemCount});o(96823);var n=o(74096),i=o(9351);o(34625)},74096:(e,t,o)=>{"use strict";o.d(t,{closeTooltip:()=>v,setBadge:()=>f,setItemHidden:()=>g,setLeftMenu:()=>h,updateItemCount:()=>m,useLeftMenuStore:()=>y});var n=o(90426),i=o(98116),r=o(53934),s=o(9351),a=o(4190),_=o(13996),l=o(59397);function c(e){return t=>t.id===e||t.id===(0,s.prefixId)(e)}function u(e,t,o){return(0,r.produce)(e,(e=>{e.some((({items:e})=>e.some((e=>{if(t(e))return o(e),!0}))))}))}const d=(0,n.makeSharedState)("left-menu-store",(()=>function(){const e=(0,i.createStore)([]),t=(0,i.combine)({sections:e}),o=(0,i.createEvent)("setLeftMenu"),n=(0,i.createEvent)("updateItemCount"),r=(0,i.createEvent)("setBadge"),a=(0,i.createEvent)("setHidden"),d=(0,i.createEvent)("closeTooltip");e.on(o,((e,t)=>{var o;return"internal.getWebLeftMenu"===t.method&&(null==(o=t.response)?void 0:o.sections)?(0,l.decodeHTMLEntitiesDeep)(t.response.sections):[]})).on(n,((e,{id:t,count:o,href:n})=>u(e,c(t),(e=>{e.count=Math.max(o,0),e.is_hidden=o<0,n&&(e.href=n),t===_.PAGE_ID_MARKET_ORDERS&&(e.is_hidden=!1)})))).on(r,((e,{id:t,badge:o})=>u(e,c(t),(e=>{e.badge=o})))).on(a,((e,{id:t,isHidden:o})=>u(e,c(t),(e=>{e.is_hidden=o})))).on(d,((e,{hint_id:t})=>{return u(e,(o=t,e=>{var t;return(null==(t=e.tooltip)?void 0:t.hint_id)===o}),(e=>{delete e.tooltip}));var o}));const p=(0,i.createEffect)((({hint_id:e,hint_hash:t})=>{(0,s.turnOffTooltip)(e,t)}));return(0,i.sample)({source:d,target:p}),{$leftMenu:t,setLeftMenu:o,updateItemCount:n,setBadge:r,setItemHidden:a,closeTooltip:d}}()),{version:0}),{$leftMenu:p,setLeftMenu:h,updateItemCount:m,setBadge:f,setItemHidden:g,closeTooltip:v}=d(),y=()=>(0,a.useStore)(p)},9351:(e,t,o)=>{"use strict";o.d(t,{getLeftMenuHeight:()=>_,getLegacyLeftMenuItemEl:()=>a,prefixId:()=>i,prepareHref:()=>s,turnOffTooltip:()=>l,unPrefixId:()=>r});var n=o(47679);function i(e){return`l_${e}`}function r(e){return e.replace(/^l_/,"")}function s(e){return e.startsWith("/")?e:`/${e}`}function a(e){var t;const o=(0,n.getReactRootElId)("LeftMenuRoot"),r=document.querySelector(`#${i(e)}`);return(null==(t=r)?void 0:t.closest(`#${o}`))?null:r}function _(){var e,t;return(null==(t=document.querySelector(".side_bar_nav_wrap"))||null==(e=t.getBoundingClientRect())?void 0:e.height)||0}function l(e,t){return new Promise(((o,n)=>{window.ajax.post("al_index.php",{act:"help_hints_hide",hash:t,hint_id:e},{onDone:o,onFail:e=>(n(e),!0)})}))}},89700:(e,t,o)=>{"use strict";o.d(t,{PageActionCell:()=>a});var n=o(82753),i=o(76810);function r(e){return null!=e&&e.classList.contains("PageActionCell")}const s="PageActionCell--locked";const a={isPageActionCell:r,isLocked:function(e){return r(e)&&e.classList.contains(s)},lock:function(e){e&&(e.classList.contains(s)||(e.lockTimeout&&clearTimeout(e.lockTimeout),e.resetLockTimeout=!1,e.lockTimeout=window.setTimeout((()=>{if(!e.resetLockTimeout){const t=(0,n.ce)("div",{className:"PageActionCell__spinner"});t.innerHTML=(0,i.getIcon16Spinner)().icon,e.prepend(t),e.classList.add(s)}}),500)))},unlock:function(e){if(e&&(e.resetLockTimeout=!0,e.classList.contains(s))){e.classList.remove(s);const t=e.querySelector(".PageActionCell__spinner");t&&t.remove()}},update:function(e,t){const{icon:o,label:n,counter:i}=t,r=e.querySelector(".PageActionCell__label");if(r&&(r.innerHTML=n),void 0!==o){const t=e.querySelector(".PageActionCell__icon");t&&(t.innerHTML=o)}if(void 0!==i){const t=e.querySelector(".PageActionCell__counter");t&&(t.innerHTML=i)}},setDescription:function(e,t){let o=e.querySelector(".PageActionCell__description");if(o||t){var n;if(!o)o=document.createElement("span"),o.className="PageActionCell__description",null==(n=e.querySelector(".PageActionCell__in"))||n.append(o);t?o.innerHTML=t:o.remove(),e.classList.toggle("PageActionCell--with-desc",Boolean(t))}},getLabelElement:function(e){return e.querySelector(".PageActionCell__label")},getCounter:function(e){let t=e.querySelector(".PageActionCell__counter");return t&&Number(t.innerHTML)||0},setCounter:function(e,t){let o=e.querySelector(".PageActionCell__counter");!o&&t<=0||(o||(o=document.createElement("div"),o.classList.add("PageActionCell__counter"),e.appendChild(o)),t<=0?o.remove():o.innerHTML=String(t))}}},78697:(e,t,o)=>{"use strict";o.d(t,{ModalBoxExample:()=>a});var n=o(85893),i=o(80541),r=o(86940),s=o(86894);function a({header:e,children:t,onDestroy:o}){return(0,n.jsx)(i.MessageBoxModal,{onDestroy:o,children:({onClose:o})=>(0,n.jsx)(r.ModalBoxFast,{header:null!=e?e:null,closeAriaLabel:"Закрыть",onClose:o,bodyInsetLevel:2,children:(0,n.jsx)(s.Text,{children:t})})})}},21911:(e,t,o)=>{"use strict";o.d(t,{wikiModalExampleInitiator:()=>m});var n=o(34788),i=o(85893),r=o(60063),s=o(67294),a=o(12865),_=o(58739),l=o(4047),c=o(60126),u=o(36671),d=o(80541),p=o(78697);function h({onClose:e,userId:t}){const[o,n]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(console.info("[Wiki1] mount"),()=>{console.info("[Wiki1] unmount")})),[]),(0,i.jsxs)(a.ModalBox,{children:[(0,i.jsx)(d.MessageBoxDismissButton,{onClick:e}),(0,i.jsxs)(_.ModalBody,{insetLevel:1,children:[(0,i.jsxs)(l.ModalTextLayout,{subheader:"Я слой, открытый с изменением URL",children:["Привет, VK ID ",t,"!"]}),(0,i.jsx)(c.ButtonLayout,{children:(0,i.jsx)(u.Button,{size:"m",mode:"primary",onClick:()=>n(!0),children:"Показать бокс"})})]}),o&&(0,i.jsx)(p.ModalBoxExample,{header:"Пример бокса",onDestroy:()=>n(!1),children:"Я бокс, показанный из слоя и поверх слоя!"})]})}const m=(0,r.createWikiModalInitiator)({wLayer:"wiki-modal-example-param",width:720,renderFn:e=>(0,i.jsx)(h,(0,n._)({},e))})},48521:(e,t,o)=>{"use strict";o.d(t,{UnauthActionBox:()=>u});var n=o(34788),i=o(68312),r=o(56525),s=o(16652),a=o(44734),_=o(59397),l=o(2620),c=o(8668);const u={show:function(e,t={}){var o,u,d;const{onHide:p,onLogin:h}=t,m=e.withForm,f=new a.MessageBox({title:"",width:m?796:450,hideButtons:!0,containerClass:(0,_.classNames)("UnauthActionBoxContainer",{"UnauthActionBoxContainer--form":m}),onHide:()=>{p&&p()}});f.content(e.html),f.changed=!0;const g=f.bodyNode.querySelector(".UnauthActionBox__close"),v=f.bodyNode.querySelector(".UnauthActionBox__join"),y=f.bodyNode.querySelector(".UnauthActionBox__login"),E=t=>{i.marketingTransitionItemStat.logEvent(r.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,e.action,window.location.href)};null==(o=g)||o.addEventListener("click",(()=>{E(r.MarketingTransitionItemEventType.CLOSE),f.hide()})),null==(u=v)||u.addEventListener("click",(()=>{E(r.MarketingTransitionItemEventType.CLICK_SIGN_UP),(0,s.showJoinBox)(e.action)})),null==(d=y)||d.addEventListener("click",(()=>{E(r.MarketingTransitionItemEventType.CLICK_SIGN_IN),h?h():(0,s.showQuickLoginBox)(e.action)})),E(r.MarketingTransitionItemEventType.OPEN),f.show();const w=f.bodyNode.querySelector(".LoginCombinedBox"),b=f.bodyNode.querySelector(".JoinForm"),A=e=>{e.preventDefault(),E(r.MarketingTransitionItemEventType.CLOSE),f.hide()};return f.bodyNode.querySelectorAll(".LoginBox").forEach((e=>{(0,l.initLoginBoxForm)(e)})),f.bodyNode.querySelectorAll(".LoginBox__notNow").forEach((e=>{e.addEventListener("click",A)})),f.bodyNode.querySelectorAll(".JoinForm__signIn, .LoginRecentBox__alternative").forEach((e=>{e.addEventListener("click",(()=>{E(r.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),f.bodyNode.querySelectorAll(".LoginBox__buttonSignUp").forEach((e=>{e.addEventListener("click",(()=>{E(r.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),w?(0,l.initLoginCombinedBoxForm)(w,e.formOptions):b&&(0,c.initJoinForm)(b,(0,n._)({},e.formOptions,{onSignInClick:()=>{(0,s.showQuickLoginBox)()},onNotNowClick:A,ref:"box"})),requestAnimationFrame((()=>window.tooltips&&window.tooltips.hideAll())),f}}},10524:(e,t,o)=>{"use strict";o.d(t,{Unauthorized:()=>c,UnauthorizedSourceType:()=>r.UnauthorizedSourceType,isUnauthorizedMediaLayerBoxAvailable:()=>a});var n=o(48521),i=o(48041),r=o(28612),s=o(50722);function a(){return!s.Ranges.isUserId(window.vk.id)&&!window.layers.visible&&(0,i.partConfigEnabled)("unauthorized_media_layer_box")&&!!document.querySelector(".PageBottomBanner--unauth")}let _,l=!1;const c={initScrollMoreBox:function(e){var t;const o=()=>{l=!1,window.removeEventListener("scroll",_)};o(),_=()=>{var t;if(l)return;if(null==(t=window.layers)?void 0:t.visible)return;if(window.cur.unauthScrollMoreBox)return;window.pageYOffset>=2*window.innerHeight&&(l=!0,n.UnauthActionBox.show(e))},e.showOnLoad&&(l=!0,n.UnauthActionBox.show(e)),window.addEventListener("scroll",_),null==(t=window.cur.beforeNavigateRequestHandlers)||t.push((()=>o()))},showMoreBox:function(e,t,o,i){e&&e.preventDefault(),window.ajax.post("/al_index.php?act=a_unauthorized_box",{action:"more",owner_id:t,source:o},{loader:!0,onDone:e=>{e.unauth_action_box?n.UnauthActionBox.show(e.unauth_action_box,{onHide:i}):i&&i()}})}}},62444:(e,t,o)=>{"use strict";function n(){return window.stManager.add([window.jsc("web/video.js")])}function i(){return window.VideoUpload?Promise.resolve():Promise.all([o.e(9808),o.e(4322),o.e(9727)]).then(o.bind(o,38281)).then((({initVideoUpload:e,VideoUpload:t,VideoUploadSubtitles:o,VideoInlineUpload:n})=>{!window.VideoUpload&&t&&(window.VideoUpload=t),!window.VideoUploadSubtitles&&o&&(window.VideoUploadSubtitles=o),!window.VideoInlineUpload&&n&&(window.VideoInlineUpload=n),e()}))}o.d(t,{getVideoModule:()=>n,getVideoUploadModule:()=>i})},37817:(e,t,o)=>{"use strict";o.d(t,{getFormattedPostponePublishDateTime:()=>n.getFormattedPostponePublishDateTime,idlizeCall:()=>i});o(11010),o(62444),o(56525),o(68312);var n=o(78729);const i=(e,t=1e3)=>{const o=()=>{setTimeout((()=>e()),t)};return"function"==typeof window.requestIdleCallback?window.requestIdleCallback(o,{timeout:5e3}):o()}},64705:(e,t,o)=>{"use strict";o.d(t,{isValidVmojiAvatarUrlPath:()=>s,parseVmojiAvatarUrlPath:()=>r,showVmojiAvatar:()=>_});var n=o(23434);const i=RegExp("^vmoji(?<ownerId>[0-9]+)_(?<characterId>[A-Za-z0-9_-]+?)(_(?<packId>[0-9]+))?$");function r(e){var t;const o=e.replace(/^\//,"").match(i);return(null==(t=o)?void 0:t.groups)?{ownerId:Number(o.groups.ownerId),characterId:String(o.groups.characterId),packId:void 0===o.groups.packId?void 0:Number(o.groups.packId)}:null}function s(e){return null!==r(e)}function a(){const e=(0,n.showBoxLoader)();return window.stManager.add([window.jsc("web/vmoji.js")]).then((()=>{if((0,n.isBoxLoadingCancelled)(e))throw new Error("loading cancelled");(0,n.hideBoxLoader)()}))}function _(e,t,o){a().then((()=>{window.Vmoji.showAvatar(e,t,o)})).catch((()=>{}))}},16288:(e,t,o)=>{"use strict";o.d(t,{WEB_WALL_POST_WITH_TRACK_CODE_SELECTOR:()=>n,replyUserImageLinkClosest:()=>r});const n="._post[data-post-track-code], .wl_post[data-post-track-code]";var i;const r=e=>null!=(i=e.closest(".reply_image, ._reply_image"))?i:void 0},50921:(e,t,o)=>{"use strict";o.d(t,{getWkViewNodes:()=>n});o(85793);function n(){const e=window.wkcur.wkBox,t=window.wkcur.wkContent;return{wkBox:e,wkContent:t,wkContentText:t.firstElementChild,wkRight:window.wkcur.wkRight}}},52781:(e,t,o)=>{"use strict";function n(){return window.wkcur&&Array.isArray(window.wkcur._hide)?window.wkcur._hide:[]}function i(e){"function"==typeof e&&n().push(e)}function r(e){var t;t=n().filter((t=>t!==e)),window.wkcur&&(window.wkcur._hide=t)}o.d(t,{addWkViewHideQueue:()=>i,removeWkViewHideQueue:()=>r})},51126:(e,t,o)=>{"use strict";o.d(t,{Routes:()=>i});var n=o(35700);const i=Object.fromEntries(Object.entries(n).map((([e,{path:t}])=>[e,t])))},53250:(e,t,o)=>{"use strict";var n=o(67294);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useState,s=n.useEffect,a=n.useLayoutEffect,_=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!i(e,o)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),n=r({inst:{value:o,getSnapshot:t}}),i=n[0].inst,c=n[1];return a((function(){i.value=o,i.getSnapshot=t,l(i)&&c({inst:i})}),[e,o,t]),s((function(){return l(i)&&c({inst:i}),e((function(){l(i)&&c({inst:i})}))}),[e]),_(o),o};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},50139:(e,t,o)=>{"use strict";var n=o(67294),i=o(61688);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,a=n.useRef,_=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,o,n,i){var u=a(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=l((function(){function e(e){if(!_){if(_=!0,s=e,e=n(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,r(s,e))return t;var o=n(e);return void 0!==i&&i(t,o)?t:(s=e,a=o)}var s,a,_=!1,l=void 0===o?null:o;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,o,n,i]);var p=s(e,u[0],u[1]);return _((function(){d.hasValue=!0,d.value=p}),[p]),c(p),p}},61688:(e,t,o)=>{"use strict";e.exports=o(53250)},52798:(e,t,o)=>{"use strict";e.exports=o(50139)},93744:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},18893:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},13653:(e,t,o)=>{"use strict";let n;o.d(t,{default:()=>r});const i=new Uint8Array(16);function r(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},3958:(e,t,o)=>{"use strict";o.d(t,{unsafeStringify:()=>i});o(97283);const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function i(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}},72045:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(93744),i=o(13653),r=o(3958);const s=function(e,t,o){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const s=(e=e||{}).random||(e.rng||i.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=s[e];return t}return(0,r.unsafeStringify)(s)}},97283:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(18893);const i=function(e){return"string"==typeof e&&n.default.test(e)}},94795:function(e,t,o){var n;!function(t){"use strict";function i(){}var r=i.prototype,s=t.EventEmitter;function a(e,t){for(var o=e.length;o--;)if(e[o].listener===t)return o;return-1}function _(e){return function(){return this[e].apply(this,arguments)}}function l(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&l(e.listener)}r.getListeners=function(e){var t,o,n=this._getEvents();if(e instanceof RegExp)for(o in t={},n)n.hasOwnProperty(o)&&e.test(o)&&(t[o]=n[o]);else t=n[e]||(n[e]=[]);return t},r.flattenListeners=function(e){var t,o=[];for(t=0;t<e.length;t+=1)o.push(e[t].listener);return o},r.getListenersAsObject=function(e){var t,o=this.getListeners(e);return o instanceof Array&&((t={})[e]=o),t||o},r.addListener=function(e,t){if(!l(t))throw new TypeError("listener must be a function");var o,n=this.getListenersAsObject(e),i="object"==typeof t;for(o in n)n.hasOwnProperty(o)&&-1===a(n[o],t)&&n[o].push(i?t:{listener:t,once:!1});return this},r.on=_("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=_("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var o,n,i=this.getListenersAsObject(e);for(n in i)i.hasOwnProperty(n)&&-1!==(o=a(i[n],t))&&i[n].splice(o,1);return this},r.off=_("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,o){var n,i,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=o.length;n--;)r.call(this,t,o[n]);else for(n in t)t.hasOwnProperty(n)&&(i=t[n])&&("function"==typeof i?r.call(this,n,i):s.call(this,n,i));return this},r.removeEvent=function(e){var t,o=typeof e,n=this._getEvents();if("string"===o)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},r.removeAllListeners=_("removeEvent"),r.emitEvent=function(e,t){var o,n,i,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(o=s[r].slice(0),i=0;i<o.length;i++)!0===(n=o[i]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=_("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=s,i},void 0===(n=function(){return i}.call(t,o,t,e))||(e.exports=n)}("undefined"!=typeof window?window:this||{})},60592:(e,t,o)=>{"use strict";function n(e,t){void 0===t&&(t={});for(var o=function(e){for(var t=[],o=0;o<e.length;){var n=e[o];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:o,value:e[o++]});else{var i=1,r="";if("?"===e[a=o+1])throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<e.length;)if("\\"!==e[a]){if(")"===e[a]){if(0==--i){a++;break}}else if("("===e[a]&&(i++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at ".concat(a));r+=e[a++]}else r+=e[a++]+e[a++];if(i)throw new TypeError("Unbalanced pattern at ".concat(o));if(!r)throw new TypeError("Missing pattern at ".concat(o));t.push({type:"PATTERN",index:o,value:r}),o=a}else{for(var s="",a=o+1;a<e.length;){var _=e.charCodeAt(a);if(!(_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||95===_))break;s+=e[a++]}if(!s)throw new TypeError("Missing parameter name at ".concat(o));t.push({type:"NAME",index:o,value:s}),o=a}else t.push({type:"CLOSE",index:o,value:e[o++]});else t.push({type:"OPEN",index:o,value:e[o++]});else t.push({type:"ESCAPED_CHAR",index:o++,value:e[o++]});else t.push({type:"MODIFIER",index:o,value:e[o++]})}return t.push({type:"END",index:o,value:""}),t}(e),n=t.prefixes,r=void 0===n?"./":n,s="[^".concat(i(t.delimiter||"/#?"),"]+?"),a=[],_=0,l=0,c="",u=function(e){if(l<o.length&&o[l].type===e)return o[l++].value},d=function(e){var t=u(e);if(void 0!==t)return t;var n=o[l],i=n.type,r=n.index;throw new TypeError("Unexpected ".concat(i," at ").concat(r,", expected ").concat(e))},p=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};l<o.length;){var h=u("CHAR"),m=u("NAME"),f=u("PATTERN");if(m||f){var g=h||"";-1===r.indexOf(g)&&(c+=g,g=""),c&&(a.push(c),c=""),a.push({name:m||_++,prefix:g,suffix:"",pattern:f||s,modifier:u("MODIFIER")||""})}else{var v=h||u("ESCAPED_CHAR");if(v)c+=v;else if(c&&(a.push(c),c=""),u("OPEN")){g=p();var y=u("NAME")||"",E=u("PATTERN")||"",w=p();d("CLOSE"),a.push({name:y||(E?_++:""),pattern:y&&!E?s:E,prefix:g,suffix:w,modifier:u("MODIFIER")||""})}else d("END")}}return a}function i(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function r(e){return e&&e.sensitive?"":"i"}function s(e,t,o){return function(e,t,o){void 0===o&&(o={});for(var n=o.strict,s=void 0!==n&&n,a=o.start,_=void 0===a||a,l=o.end,c=void 0===l||l,u=o.encode,d=void 0===u?function(e){return e}:u,p=o.delimiter,h=void 0===p?"/#?":p,m=o.endsWith,f="[".concat(i(void 0===m?"":m),"]|$"),g="[".concat(i(h),"]"),v=_?"^":"",y=0,E=e;y<E.length;y++){var w=E[y];if("string"==typeof w)v+=i(d(w));else{var b=i(d(w.prefix)),A=i(d(w.suffix));if(w.pattern)if(t&&t.push(w),b||A)if("+"===w.modifier||"*"===w.modifier){var P="*"===w.modifier?"?":"";v+="(?:".concat(b,"((?:").concat(w.pattern,")(?:").concat(A).concat(b,"(?:").concat(w.pattern,"))*)").concat(A,")").concat(P)}else v+="(?:".concat(b,"(").concat(w.pattern,")").concat(A,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?v+="((?:".concat(w.pattern,")").concat(w.modifier,")"):v+="(".concat(w.pattern,")").concat(w.modifier);else v+="(?:".concat(b).concat(A,")").concat(w.modifier)}}if(c)s||(v+="".concat(g,"?")),v+=o.endsWith?"(?=".concat(f,")"):"$";else{var I=e[e.length-1],T="string"==typeof I?g.indexOf(I[I.length-1])>-1:void 0===I;s||(v+="(?:".concat(g,"(?=").concat(f,"))?")),T||(v+="(?=".concat(g,"|").concat(f,")"))}return new RegExp(v,r(o))}(n(e,o),t,o)}function a(e,t,o){return e instanceof RegExp?function(e,t){if(!t)return e;for(var o=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,i=o.exec(e.source);i;)t.push({name:i[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),i=o.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,o){var n=e.map((function(e){return a(e,t,o).source}));return new RegExp("(?:".concat(n.join("|"),")"),r(o))}(e,t,o):s(e,t,o)}o.d(t,{pathToRegexp:()=>a})},74185:(e,t)=>{"use strict";t._=t._type_of=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}},21769:(e,t,o)=>{"use strict";function n(e){if(Array.isArray(e))return e}o.d(t,{_array_with_holes:()=>n})},75649:(e,t,o)=>{"use strict";function n(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,i,r=[],s=!0,a=!1;try{for(o=o.call(e);!(s=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return r}}o.d(t,{_iterable_to_array_limit:()=>n})},14276:(e,t,o)=>{"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}o.d(t,{_non_iterable_rest:()=>n})},14932:(e,t,o)=>{"use strict";function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}o.d(t,{_:()=>n})},58339:(e,t,o)=>{"use strict";o.d(t,{_:()=>i});var n=o(20224);function i(e,t){if(null==e)return{};var o,i,r=(0,n._object_without_properties_loose)(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}},91963:(e,t,o)=>{"use strict";o.d(t,{_:()=>a});var n=o(21769),i=o(75649),r=o(14276),s=o(73270);function a(e,t){return(0,n._array_with_holes)(e)||(0,i._iterable_to_array_limit)(e,t)||(0,s._unsupported_iterable_to_array)(e,t)||(0,r._non_iterable_rest)()}},41903:(e,t,o)=>{"use strict";o.d(t,{_to_primitive:()=>i});var n=o(88421);function i(e,t){if("object"!==(0,n._type_of)(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!==(0,n._type_of)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},58662:(e,t,o)=>{"use strict";o.d(t,{_:()=>r});var n=o(41903),i=o(88421);function r(e){var t=(0,n._to_primitive)(e,"string");return"symbol"===(0,i._type_of)(t)?t:String(t)}},5872:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(19522),i=o(66092);const r=(0,n.default)(i.default,"DataView")},33651:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(78767),i=o(79290),r=o(39399),s=o(42533),a=o(5);function _(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=n.default,_.prototype.delete=i.default,_.prototype.get=r.default,_.prototype.has=s.default,_.prototype.set=a.default;const l=_},60591:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(76871),i=o(39594),r=o(41441),s=o(42190),a=o(93290);function _(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=n.default,_.prototype.delete=i.default,_.prototype.get=r.default,_.prototype.has=s.default,_.prototype.set=a.default;const l=_},86183:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(19522),i=o(66092);const r=(0,n.default)(i.default,"Map")},81062:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(18146),i=o(53607),r=o(49363),s=o(38075),a=o(4910);function _(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=n.default,_.prototype.delete=i.default,_.prototype.get=r.default,_.prototype.has=s.default,_.prototype.set=a.default;const l=_},62778:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(19522),i=o(66092);const r=(0,n.default)(i.default,"Promise")},93203:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(19522),i=o(66092);const r=(0,n.default)(i.default,"Set")},16399:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(81062),i=o(34096),r=o(66914);function s(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new n.default;++t<o;)this.add(e[t])}s.prototype.add=s.prototype.push=i.default,s.prototype.has=r.default;const a=s},60277:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(60591),i=o(30457),r=o(27262),s=o(2347),a=o(65194),_=o(82340);function l(e){var t=this.__data__=new n.default(e);this.size=t.size}l.prototype.clear=i.default,l.prototype.delete=r.default,l.prototype.get=s.default,l.prototype.has=a.default,l.prototype.set=_.default;const c=l},84073:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(66092).default.Uint8Array},13840:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(19522),i=o(66092);const r=(0,n.default)(i.default,"WeakMap")},68774:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=null==e?0:e.length,i=0,r=[];++o<n;){var s=e[o];t(s,o,e)&&(r[i++]=s)}return r}},63771:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(52889),i=o(91438),r=o(27771),s=o(65763),a=o(56009),_=o(18314),l=Object.prototype.hasOwnProperty;const c=function(e,t){var o=(0,r.default)(e),c=!o&&(0,i.default)(e),u=!o&&!c&&(0,s.default)(e),d=!o&&!c&&!u&&(0,_.default)(e),p=o||c||u||d,h=p?(0,n.default)(e.length,String):[],m=h.length;for(var f in e)!t&&!l.call(e,f)||p&&("length"==f||u&&("offset"==f||"parent"==f)||d&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||(0,a.default)(f,m))||h.push(f);return h}},58694:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=t.length,i=e.length;++o<n;)e[i+o]=t[o];return e}},2338:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=null==e?0:e.length;++o<n;)if(t(e[o],o,e))return!0;return!1}},72954:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(80943),i=o(79651),r=Object.prototype.hasOwnProperty;const s=function(e,t,o){var s=e[t];r.call(e,t)&&(0,i.default)(s,o)&&(void 0!==o||t in e)||(0,n.default)(e,t,o)}},83900:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(79651);const i=function(e,t){for(var o=e.length;o--;)if((0,n.default)(e[o][0],t))return o;return-1}},80943:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(77904);const i=function(e,t,o){"__proto__"==t&&n.default?(0,n.default)(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}},13317:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(27449),i=o(62281);const r=function(e,t){for(var o=0,r=(t=(0,n.default)(t,e)).length;null!=e&&o<r;)e=e[(0,i.default)(t[o++])];return o&&o==r?e:void 0}},63327:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(58694),i=o(27771);const r=function(e,t,o){var r=t(e);return(0,i.default)(e)?r:(0,n.default)(r,o(e))}},78493:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return null!=e&&t in Object(e)}},24160:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(34492),i=o(18533);const r=function(e){return(0,i.default)(e)&&"[object Arguments]"==(0,n.default)(e)}},20546:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(1604),i=o(18533);const r=function e(t,o,r,s,a){return t===o||(null==t||null==o||!(0,i.default)(t)&&!(0,i.default)(o)?t!=t&&o!=o:(0,n.default)(t,o,r,s,e,a))}},1604:(e,t,o)=>{"use strict";o.d(t,{default:()=>m});var n=o(60277),i=o(12845),r=o(1860),s=o(42852),a=o(86608),_=o(27771),l=o(65763),c=o(18314),u="[object Arguments]",d="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;const m=function(e,t,o,m,f,g){var v=(0,_.default)(e),y=(0,_.default)(t),E=v?d:(0,a.default)(e),w=y?d:(0,a.default)(t),b=(E=E==u?p:E)==p,A=(w=w==u?p:w)==p,P=E==w;if(P&&(0,l.default)(e)){if(!(0,l.default)(t))return!1;v=!0,b=!1}if(P&&!b)return g||(g=new n.default),v||(0,c.default)(e)?(0,i.default)(e,t,o,m,f,g):(0,r.default)(e,t,E,o,m,f,g);if(!(1&o)){var I=b&&h.call(e,"__wrapped__"),T=A&&h.call(t,"__wrapped__");if(I||T){var O=I?e.value():e,C=T?t.value():t;return g||(g=new n.default),f(O,C,o,m,g)}}return!!P&&(g||(g=new n.default),(0,s.default)(e,t,o,m,f,g))}},18175:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(60277),i=o(20546);const r=function(e,t,o,r){var s=o.length,a=s,_=!r;if(null==e)return!a;for(e=Object(e);s--;){var l=o[s];if(_&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var c=(l=o[s])[0],u=e[c],d=l[1];if(_&&l[2]){if(void 0===u&&!(c in e))return!1}else{var p=new n.default;if(r)var h=r(u,d,c,e,t,p);if(!(void 0===h?(0,i.default)(d,u,3,r,p):h))return!1}}return!0}},89573:(e,t,o)=>{"use strict";o.d(t,{default:()=>p});var n=o(73234),i=o(84133),r=o(77226),s=o(90019),a=/^\[object .+?Constructor\]$/,_=Function.prototype,l=Object.prototype,c=_.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const p=function(e){return!(!(0,r.default)(e)||(0,i.default)(e))&&((0,n.default)(e)?d:a).test((0,s.default)(e))}},91502:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(34492),i=o(1656),r=o(18533),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;const a=function(e){return(0,r.default)(e)&&(0,i.default)(e.length)&&!!s[(0,n.default)(e)]}},69162:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(85490),i=o(59749),r=o(69203),s=o(27771),a=o(52349);const _=function(e){return"function"==typeof e?e:null==e?r.default:"object"==typeof e?(0,s.default)(e)?(0,i.default)(e[0],e[1]):(0,n.default)(e):(0,a.default)(e)}},48726:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(72764),i=o(47275),r=Object.prototype.hasOwnProperty;const s=function(e){if(!(0,n.default)(e))return(0,i.default)(e);var t=[];for(var o in Object(e))r.call(e,o)&&"constructor"!=o&&t.push(o);return t}},37867:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(77226),i=o(72764),r=o(36805),s=Object.prototype.hasOwnProperty;const a=function(e){if(!(0,n.default)(e))return(0,r.default)(e);var t=(0,i.default)(e),o=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&o.push(a);return o}},85490:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(18175),i=o(46272),r=o(83015);const s=function(e){var t=(0,i.default)(e);return 1==t.length&&t[0][2]?(0,r.default)(t[0][0],t[0][1]):function(o){return o===e||(0,n.default)(o,e,t)}}},59749:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(20546),i=o(16423),r=o(29388),s=o(99365),a=o(24163),_=o(83015),l=o(62281);const c=function(e,t){return(0,s.default)(e)&&(0,a.default)(t)?(0,_.default)((0,l.default)(e),t):function(o){var s=(0,i.default)(o,e);return void 0===s&&s===t?(0,r.default)(o,e):(0,n.default)(t,s,3)}}},12987:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(13317),i=o(28472),r=o(27449);const s=function(e,t,o){for(var s=-1,a=t.length,_={};++s<a;){var l=t[s],c=(0,n.default)(e,l);o(c,l)&&(0,i.default)(_,(0,r.default)(l,e),c)}return _}},24707:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(13317);const i=function(e){return function(t){return(0,n.default)(t,e)}}},28472:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(72954),i=o(27449),r=o(56009),s=o(77226),a=o(62281);const _=function(e,t,o,_){if(!(0,s.default)(e))return e;for(var l=-1,c=(t=(0,i.default)(t,e)).length,u=c-1,d=e;null!=d&&++l<c;){var p=(0,a.default)(t[l]),h=o;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=u){var m=d[p];void 0===(h=_?_(m,p,d):void 0)&&(h=(0,s.default)(m)?m:(0,r.default)(t[l+1])?[]:{})}(0,n.default)(d,p,h),d=d[p]}return e}},52889:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=Array(e);++o<e;)n[o]=t(o);return n}},59548:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return e.has(t)}},27449:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(27771),i=o(99365),r=o(52106),s=o(77338);const a=function(e,t){return(0,n.default)(e)?e:(0,i.default)(e,t)?[e]:(0,r.default)((0,s.default)(e))}},41819:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(66092).default["__core-js_shared__"]},77904:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(19522);const i=function(){try{var e=(0,n.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},12845:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(16399),i=o(2338),r=o(59548);const s=function(e,t,o,s,a,_){var l=1&o,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var d=_.get(e),p=_.get(t);if(d&&p)return d==t&&p==e;var h=-1,m=!0,f=2&o?new n.default:void 0;for(_.set(e,t),_.set(t,e);++h<c;){var g=e[h],v=t[h];if(s)var y=l?s(v,g,h,t,e,_):s(g,v,h,e,t,_);if(void 0!==y){if(y)continue;m=!1;break}if(f){if(!(0,i.default)(t,(function(e,t){if(!(0,r.default)(f,t)&&(g===e||a(g,e,o,s,_)))return f.push(t)}))){m=!1;break}}else if(g!==v&&!a(g,v,o,s,_)){m=!1;break}}return _.delete(e),_.delete(t),m}},1860:(e,t,o)=>{"use strict";o.d(t,{default:()=>u});var n=o(17685),i=o(84073),r=o(79651),s=o(12845),a=o(84910),_=o(6545),l=n.default?n.default.prototype:void 0,c=l?l.valueOf:void 0;const u=function(e,t,o,n,l,u,d){switch(o){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new i.default(e),new i.default(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,r.default)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a.default;case"[object Set]":var h=1&n;if(p||(p=_.default),e.size!=t.size&&!h)return!1;var m=d.get(e);if(m)return m==t;n|=2,d.set(e,t);var f=(0,s.default)(p(e),p(t),n,l,u,d);return d.delete(e),f;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},42852:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(1808),i=Object.prototype.hasOwnProperty;const r=function(e,t,o,r,s,a){var _=1&o,l=(0,n.default)(e),c=l.length;if(c!=(0,n.default)(t).length&&!_)return!1;for(var u=c;u--;){var d=l[u];if(!(_?d in t:i.call(t,d)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var m=!0;a.set(e,t),a.set(t,e);for(var f=_;++u<c;){var g=e[d=l[u]],v=t[d];if(r)var y=_?r(v,g,d,t,e,a):r(g,v,d,e,t,a);if(!(void 0===y?g===v||s(g,v,o,r,a):y)){m=!1;break}f||(f="constructor"==d)}if(m&&!f){var E=e.constructor,w=t.constructor;E==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},1808:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(63327),i=o(95695),r=o(17179);const s=function(e){return(0,n.default)(e,r.default,i.default)}},4403:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(63327),i=o(17502),r=o(9987);const s=function(e){return(0,n.default)(e,r.default,i.default)}},11022:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(84919);const i=function(e,t){var o=e.__data__;return(0,n.default)(t)?o["string"==typeof t?"string":"hash"]:o.map}},46272:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(24163),i=o(17179);const r=function(e){for(var t=(0,i.default)(e),o=t.length;o--;){var r=t[o],s=e[r];t[o]=[r,s,(0,n.default)(s)]}return t}},19522:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(89573),i=o(71856);const r=function(e,t){var o=(0,i.default)(e,t);return(0,n.default)(o)?o:void 0}},12513:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(1851).default)(Object.getPrototypeOf,Object)},95695:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(68774),i=o(60532),r=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(e){return null==e?[]:(e=Object(e),(0,n.default)(s(e),(function(t){return r.call(e,t)})))}:i.default},17502:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(58694),i=o(12513),r=o(95695),s=o(60532);const a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,n.default)(t,(0,r.default)(e)),e=(0,i.default)(e);return t}:s.default},86608:(e,t,o)=>{"use strict";o.d(t,{default:()=>w});var n=o(5872),i=o(86183),r=o(62778),s=o(93203),a=o(13840),_=o(34492),l=o(90019),c="[object Map]",u="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",m=(0,l.default)(n.default),f=(0,l.default)(i.default),g=(0,l.default)(r.default),v=(0,l.default)(s.default),y=(0,l.default)(a.default),E=_.default;(n.default&&E(new n.default(new ArrayBuffer(1)))!=h||i.default&&E(new i.default)!=c||r.default&&E(r.default.resolve())!=u||s.default&&E(new s.default)!=d||a.default&&E(new a.default)!=p)&&(E=function(e){var t=(0,_.default)(e),o="[object Object]"==t?e.constructor:void 0,n=o?(0,l.default)(o):"";if(n)switch(n){case m:return h;case f:return c;case g:return u;case v:return d;case y:return p}return t});const w=E},71856:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return null==e?void 0:e[t]}},16174:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(27449),i=o(91438),r=o(27771),s=o(56009),a=o(1656),_=o(62281);const l=function(e,t,o){for(var l=-1,c=(t=(0,n.default)(t,e)).length,u=!1;++l<c;){var d=(0,_.default)(t[l]);if(!(u=null!=e&&o(e,d)))break;e=e[d]}return u||++l!=c?u:!!(c=null==e?0:e.length)&&(0,a.default)(c)&&(0,s.default)(d,c)&&((0,r.default)(e)||(0,i.default)(e))}},78767:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(60028);const i=function(){this.__data__=n.default?(0,n.default)(null):{},this.size=0}},79290:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},39399:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(60028),i=Object.prototype.hasOwnProperty;const r=function(e){var t=this.__data__;if(n.default){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return i.call(t,e)?t[e]:void 0}},42533:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(60028),i=Object.prototype.hasOwnProperty;const r=function(e){var t=this.__data__;return n.default?void 0!==t[e]:i.call(t,e)}},5:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(60028);const i=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=n.default&&void 0===t?"__lodash_hash_undefined__":t,this}},56009:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=/^(?:0|[1-9]\d*)$/;const i=function(e,t){var o=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},99365:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(27771),i=o(72714),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;const a=function(e,t){if((0,n.default)(e))return!1;var o=typeof e;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=e&&!(0,i.default)(e))||(s.test(e)||!r.test(e)||null!=t&&e in Object(t))}},84919:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},84133:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n,i=o(41819),r=(n=/[^.]+$/.exec(i.default&&i.default.keys&&i.default.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";const s=function(e){return!!r&&r in e}},72764:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=Object.prototype;const i=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},24163:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(77226);const i=function(e){return e==e&&!(0,n.default)(e)}},76871:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(){this.__data__=[],this.size=0}},39594:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(83900),i=Array.prototype.splice;const r=function(e){var t=this.__data__,o=(0,n.default)(t,e);return!(o<0)&&(o==t.length-1?t.pop():i.call(t,o,1),--this.size,!0)}},41441:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(83900);const i=function(e){var t=this.__data__,o=(0,n.default)(t,e);return o<0?void 0:t[o][1]}},42190:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(83900);const i=function(e){return(0,n.default)(this.__data__,e)>-1}},93290:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(83900);const i=function(e,t){var o=this.__data__,i=(0,n.default)(o,e);return i<0?(++this.size,o.push([e,t])):o[i][1]=t,this}},18146:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(33651),i=o(60591),r=o(86183);const s=function(){this.size=0,this.__data__={hash:new n.default,map:new(r.default||i.default),string:new n.default}}},53607:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(11022);const i=function(e){var t=(0,n.default)(this,e).delete(e);return this.size-=t?1:0,t}},49363:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(11022);const i=function(e){return(0,n.default)(this,e).get(e)}},38075:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(11022);const i=function(e){return(0,n.default)(this,e).has(e)}},4910:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(11022);const i=function(e,t){var o=(0,n.default)(this,e),i=o.size;return o.set(e,t),this.size+=o.size==i?0:1,this}},84910:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=-1,o=Array(e.size);return e.forEach((function(e,n){o[++t]=[n,e]})),o}},83015:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return function(o){return null!=o&&(o[e]===t&&(void 0!==t||e in Object(o)))}}},18178:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(42454);const i=function(e){var t=(0,n.default)(e,(function(e){return 500===o.size&&o.clear(),e})),o=t.cache;return t}},60028:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(19522).default)(Object,"create")},47275:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(1851).default)(Object.keys,Object)},36805:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=[];if(null!=e)for(var o in Object(e))t.push(o);return t}},1851:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return function(o){return e(t(o))}}},34096:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},66914:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.has(e)}},6545:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=-1,o=Array(e.size);return e.forEach((function(e){o[++t]=e})),o}},30457:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(60591);const i=function(){this.__data__=new n.default,this.size=0}},27262:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}},2347:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.get(e)}},65194:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.has(e)}},82340:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(60591),i=o(86183),r=o(81062);const s=function(e,t){var o=this.__data__;if(o instanceof n.default){var s=o.__data__;if(!i.default||s.length<199)return s.push([e,t]),this.size=++o.size,this;o=this.__data__=new r.default(s)}return o.set(e,t),this.size=o.size,this}},52106:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(18178),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g;const s=(0,n.default)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,o,n,i){t.push(n?i.replace(r,"$1"):o||e)})),t}))},62281:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(72714);const i=function(e){if("string"==typeof e||(0,n.default)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},90019:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=Function.prototype.toString;const i=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},79651:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return e===t||e!=e&&t!=t}},16423:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(13317);const i=function(e,t,o){var i=null==e?void 0:(0,n.default)(e,t);return void 0===i?o:i}},29388:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(78493),i=o(16174);const r=function(e,t){return null!=e&&(0,i.default)(e,t,n.default)}},69203:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return e}},91438:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(24160),i=o(18533),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable;const _=(0,n.default)(function(){return arguments}())?n.default:function(e){return(0,i.default)(e)&&s.call(e,"callee")&&!a.call(e,"callee")}},50585:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(73234),i=o(1656);const r=function(e){return null!=e&&(0,i.default)(e.length)&&!(0,n.default)(e)}},65763:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(66092),i=o(7979),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=r&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===r?n.default.Buffer:void 0;const _=(a?a.isBuffer:void 0)||i.default},73234:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(34492),i=o(77226);const r=function(e){if(!(0,i.default)(e))return!1;var t=(0,n.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1656:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},18314:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(91502),i=o(21162),r=o(98351),s=r.default&&r.default.isTypedArray;const a=s?(0,i.default)(s):n.default},49360:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return void 0===e}},17179:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(63771),i=o(48726),r=o(50585);const s=function(e){return(0,r.default)(e)?(0,n.default)(e):(0,i.default)(e)}},9987:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(63771),i=o(37867),r=o(50585);const s=function(e){return(0,r.default)(e)?(0,n.default)(e,!0):(0,i.default)(e)}},42454:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(81062);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var o=function(){var n=arguments,i=t?t.apply(this,n):n[0],r=o.cache;if(r.has(i))return r.get(i);var s=e.apply(this,n);return o.cache=r.set(i,s)||r,s};return o.cache=new(i.Cache||n.default),o}i.Cache=n.default;const r=i},38560:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},8856:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(69162),i=o(38560),r=o(77186);const s=function(e,t){return(0,r.default)(e,(0,i.default)((0,n.default)(t)))}},77186:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(74073),i=o(69162),r=o(12987),s=o(4403);const a=function(e,t){if(null==e)return{};var o=(0,n.default)((0,s.default)(e),(function(e){return[e]}));return t=(0,i.default)(t),(0,r.default)(e,o,(function(e,o){return t(e,o[0])}))}},52349:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(54193),i=o(24707),r=o(99365),s=o(62281);const a=function(e){return(0,r.default)(e)?(0,n.default)((0,s.default)(e)):(0,i.default)(e)}},60532:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(){return[]}},7979:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(){return!1}},59391:(e,t,o)=>{"use strict";function n(e){return{all:e=e||new Map,on:function(t,o){var n=e.get(t);n?n.push(o):e.set(t,[o])},off:function(t,o){var n=e.get(t);n&&(o?n.splice(n.indexOf(o)>>>0,1):e.set(t,[]))},emit:function(t,o){var n=e.get(t);n&&n.slice().map((function(e){e(o)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,o)}))}}}o.d(t,{default:()=>n})},65740:(e,t,o)=>{"use strict";o.d(t,{condition:()=>i});var n=o(98116);function i(e){var{if:t,then:o,else:i,source:s=(0,n.createEvent)({name:"source",sid:"epke23"},{name:"source",sid:"epke23"})}=e,a=n.is.unit(t)||"function"==typeof t?t:e=>e===t;return o&&i?(0,n.split)({and:[{source:s,match:{then:a,else:r(a)},cases:{then:o,else:i}}],or:{sid:"9tug3k"}}):o?(0,n.guard)({and:[{source:s,filter:a,target:o}],or:{sid:"abznoh"}}):i&&(0,n.guard)({and:[{source:s,filter:r(a),target:i}],or:{sid:"-eb29qp"}}),s}function r(e){return n.is.unit(e)?e.map((e=>!e)):t=>!e(t)}},82097:(e,t,o)=>{"use strict";o.d(t,{equals:()=>i});var n=o(98116);function i(e,t){return(0,n.combine)({and:[e,t,(e,t)=>e===t],or:{sid:"-pqjlti"}})}},77900:(e,t,o)=>{"use strict";o.d(t,{interval:()=>i});var n=o(98116);function i(e){var{timeout:t,start:o,stop:i,leading:r=!1,trailing:s=!1}=e,a=null!=o?o:(0,n.createEvent)({name:"setup",sid:"-ajedhm"}),_=null!=i?i:(0,n.createEvent)({name:"teardown",sid:"-ryi8gr"}),l=(0,n.createEvent)({name:"tick",sid:"-cw8a02"}),c=(0,n.createStore)(!1,{name:"$isRunning",sid:"-5gspmy"}),u=function(e){if(n.is.store(e,{sid:"8i2x6t"}))return e;if("number"==typeof e)return(0,n.createStore)(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}(t),d=c.map((e=>!e)),p=(0,n.createEvent)({name:"saveTimeout",sid:"satd6r"}),h=(0,n.createStore)(null,{name:"$timeoutId",sid:"hehxq7"}).on(p,((e,t)=>{var{timeoutId:o}=t;return o})),m=(0,n.createStore)((()=>{}),{name:"$rejecter",sid:"-sc3eh9"}).on(p,((e,t)=>{var{reject:o}=t;return o})),f=(0,n.attach)({and:{source:{timeout:u,running:c},effect:e=>{var{timeout:t,running:o}=e;return o?new Promise(((e,o)=>{var n=setTimeout(e,t);p({timeoutId:n,reject:o})})):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),g=(0,n.attach)({and:{source:{timeoutId:h,rejecter:m},effect:e=>{var{timeoutId:t,rejecter:o}=e;o(),t&&clearTimeout(t)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if((0,n.guard)({and:[{clock:a,source:u,filter:d,target:f}],or:{sid:"-us95i7"}}),r){var v=(0,n.guard)({and:[{clock:a,filter:d}],or:{name:"onReady",sid:"farho0"}});(0,n.sample)({and:[{clock:v,target:l}],or:{sid:"-ubrbnn"}})}return(0,n.sample)({and:[{clock:a,fn:()=>!0,target:c}],or:{sid:"-ua3xxa"}}),(0,n.guard)({and:[{clock:f.done,source:u,filter:c,target:f}],or:{sid:"6lcmx8"}}),(0,n.guard)({and:[{clock:f.done,filter:c,target:l.prepend((()=>{}))}],or:{sid:"6p772r"}}),s&&(0,n.sample)({and:[{clock:_,target:l}],or:{sid:"75p0xb"}}),c.on(_,(()=>!1)),(0,n.sample)({and:[{clock:_,target:g}],or:{sid:"7ln232"}}),{tick:l,isRunning:c,"@@trigger":()=>({setup:a,teardown:_,fired:l})}}},38032:(e,t,o)=>{"use strict";function n(e){return e.map((e=>!e))}o.d(t,{not:()=>n})},99763:(e,t,o)=>{"use strict";o.d(t,{once:()=>i});var n=o(98116);function i(e){var t=(0,n.createStore)(!0,{name:"$canTrigger",sid:"hqg5e0"}),o=(0,n.sample)({and:[{clock:e,filter:t}],or:{name:"trigger",sid:"-cvmmt0"}});return t.on(o,(()=>!1)),(0,n.sample)({and:[{clock:o}],or:{sid:"-pw95tp"}})}},85349:(e,t,o)=>{"use strict";o.d(t,{reset:()=>i});var n=o(98116);function i(e){var{clock:t,target:o}=e,i=Array.isArray(o)?o:[o],r=Array.isArray(t)?t:[null!=t?t:(0,n.createEvent)({name:"clocks",sid:"bqmea5"})];return i.forEach((e=>{e.reset(r)})),void 0===t?r[0]:void 0}},51717:(e,t,o)=>{"use strict";function n(e){var{source:t,shape:o}=e,n={};for(var i in o)i in o&&function(){var e=o[i];n[i]=t.map((t=>{var o=e(t);return void 0===o?null:o}))}();return n}o.d(t,{reshape:()=>n})},21247:(e,t,o)=>{"use strict";o.d(t,{spread:()=>s});var n=o(98116),i={}.hasOwnProperty,r=(e,t)=>i.call(e,t);function s(e){var{targets:t,source:o=(0,n.createEvent)({name:"source",sid:"-fkbi3c"},{name:"source",sid:"-fkbi3c"})}=e,i=function(e){if(r(t,e)){var i=t[e],s=(0,n.guard)({and:[{source:o,greedy:!0,filter:t=>"object"==typeof t&&null!==t&&e in t}],or:{name:"hasTargetKey",sid:"-cov4g4"}});(0,n.sample)({and:[{greedy:!0,clock:s,fn:t=>t[e],target:i}],or:{sid:"lpn34j"}})}};for(var s in t)i(s);return o}},35700:e=>{"use strict";e.exports=JSON.parse('{"Audios":{"path":"/audios:ownerId(-?\\\\d+)","module":"audio","screen":""},"Audio":{"path":"/audio:ownerId(-?\\\\d+)_:id(\\\\d+)","module":"audio","screen":""},"Articles":{"path":"/@:screenName","module":"author_page","screen":""},"Board":{"path":"/board:groupId(\\\\d+)","module":"board","screen":""},"Topic":{"path":"/topic:ownerId(-?\\\\d+)_:id(\\\\d+)","module":"board","screen":""},"Bookmarks":{"path":"/bookmarks","module":"bookmarks","screen":""},"Bugs":{"path":"/bugs","module":"bugs","screen":""},"Clips":{"path":"/clips","module":"clips_item","screen":""},"ClipsUpload":{"path":"/clips/upload(-?\\\\d+)","module":"clips_item","screen":""},"ClipsHashtag":{"path":"/clips/hashtag/","module":"clips_item","screen":""},"ClipsMusic":{"path":"/clips/music/(-?\\\\d+_\\\\d+$)","module":"clips_item","screen":""},"ClipsCompilation":{"path":"/clips/compilation/(\\\\d+)","module":"clips_item","screen":""},"ClipsOwner":{"path":"/clips:feed(-?\\\\d+)","module":"clips_item","screen":""},"ClipsOwnerTemp":{"path":"/clips:ownerId(-?\\\\d+)","module":"clips_item","screen":""},"ClipsOwnerId":{"path":"/clips/id:feed(-?\\\\d+)","module":"clips_item","screen":""},"ClipsGroupId":{"path":"/clips/club:groupId(\\\\d+)","module":"clips_item","screen":""},"ClipsPlaylist":{"path":"/clips/:feed(playlist)/:ownerId(-?\\\\d+)_:playlistId(\\\\d+)","module":"clips_item","screen":""},"ClipsPostponed":{"path":"/clips/:feed(postponed)/:ownerId([0-9a-z_.-]+)","module":"clips_item","screen":""},"ClipsSection":{"path":"/clips/:feed([0-9a-z_.-]+)","module":"clips_item","screen":""},"CommunityApps":{"path":"/community_apps","module":"community_apps","screen":""},"CommunityAppsCategory":{"path":"/community_apps(.*)act=:section(.*)","module":"community_apps","screen":""},"Docs":{"path":"/docs:ownerId(-?\\\\d+)?","module":"docs","screen":""},"Doc":{"path":"/doc:ownerId(-?\\\\d+)_:id(\\\\d+)","module":"docs","screen":""},"Feed":{"path":"/feed","module":"feed","screen":""},"FeedPhotos":{"path":"/feed\\\\?section=photos","module":"feed","screen":""},"FeedRecommended":{"path":"/feed\\\\?section=recommended","module":"feed","screen":""},"FeedSearch":{"path":"/feed\\\\?section=search","module":"feed","screen":""},"FeedLikes":{"path":"/feed\\\\?section=likes","module":"feed","screen":""},"FeedUpdates":{"path":"/feed\\\\?section=updates","module":"feed","screen":""},"FeedComments":{"path":"/feed\\\\?section=comments","module":"feed","screen":""},"FeedGroupSections":{"path":"/feed\\\\?(.*)list=group-:groupId(\\\\d+)(.*)","module":"feed","screen":""},"Friends":{"path":"/friends","module":"friends","screen":""},"FriendsAll":{"path":"/friends\\\\?section=all","module":"friends","screen":""},"FriendsRequests":{"path":"/friends\\\\?section=requests","module":"friends","screen":""},"FriendsAllRequests":{"path":"/friends\\\\?section=all_requests","module":"friends","screen":""},"FriendsOutRequests":{"path":"/friends\\\\?section=out_requests","module":"friends","screen":""},"FriendsFollowers":{"path":"/friends\\\\?section=followers(&sort=\\\\w+)?","module":"friends","screen":""},"FriendsOnline":{"path":"/friends\\\\?section=online","module":"friends","screen":""},"FriendsCleanup":{"path":"/friends\\\\?section=cleanup","module":"friends","screen":""},"FriendsRecent":{"path":"/friends\\\\?section=recent","module":"friends","screen":""},"FriendsList":{"path":"/friends\\\\?section=list:id(\\\\d+)","module":"friends","screen":""},"Group":{"path":"/club:groupId(\\\\d+)","module":"group","screen":""},"Groups":{"path":"/groups","module":"community_catalog","screen":""},"GroupsSection":{"path":"/groups/:section","module":"community_catalog","screen":""},"GroupsCollection":{"path":"/groups/collection/:collection","module":"community_catalog","screen":""},"Im":{"path":"/im","module":"im","screen":""},"ImAct":{"path":"/al_im.php","module":"im","screen":""},"ImGroup":{"path":"/gim:groupId(\\\\d+)","module":"im","screen":""},"ImWrite":{"path":"/write:id(-?\\\\d+)","module":"im","screen":""},"ImSettings":{"path":"/im/settings","module":"im","screen":""},"Market":{"path":"/market:ownerId(-?\\\\d+)","module":"market_storefront","screen":""},"MarketItem":{"path":"/market/product/:ownerId(-?\\\\d+)-:itemId(\\\\d+)","module":"market_item","screen":""},"MarketServices":{"path":"/uslugi:ownerId(-?\\\\d+)","module":"market_services","screen":""},"Photos":{"path":"/photos:ownerId(\\\\d+)?","module":"photos","screen":""},"GroupPhotos":{"path":"/photos:ownerId(-\\\\d+)?","module":"photos","screen":""},"Albums":{"path":"/albums:ownerId(\\\\d+)?","module":"photos","screen":""},"GroupAlbums":{"path":"/albums:ownerId(-\\\\d+)?","module":"photos","screen":""},"AlbumTag":{"path":"/tag:ownerId(\\\\d+)","module":"photos","screen":""},"GroupPhotoSimple":{"path":"/photo:ownerId(-\\\\d+)_:id(\\\\d+)","module":"photos","screen":""},"AlbumSimple":{"path":"/album:ownerId(\\\\d+)_:id(\\\\d+)","module":"photos","screen":""},"GroupAlbumSimple":{"path":"/album:ownerId(-\\\\d+)_:id(\\\\d+)","module":"photos","screen":""},"PhotosArchive":{"path":"/photos_archive","module":"photos","screen":""},"Podcasts":{"path":"/podcasts:ownerId(-?\\\\d+)","module":"podcast","screen":""},"Podcast":{"path":"/podcast:ownerId(-?\\\\d+)_:id(\\\\d+)","module":"podcast","screen":""},"Search":{"path":"/search","module":"search","screen":""},"SearchPeople":{"path":"/search/people","module":"search","screen":""},"SearchCommunities":{"path":"/search/communities","module":"search","screen":""},"SearchCommunity":{"path":"/search/community","module":"search","screen":""},"SearchAudio":{"path":"/search/audio","module":"search","screen":""},"SearchVideo":{"path":"/search/video","module":"search","screen":""},"SearchStatuses":{"path":"/search/statuses","module":"search","screen":""},"SearchMiniApps":{"path":"/search/mini_apps","module":"search","screen":""},"SearchGames":{"path":"/search/games","module":"search","screen":""},"SearchMarket":{"path":"/search/market","module":"search","screen":""},"SearchClips":{"path":"/search/clips","module":"search","screen":""},"SearchSection":{"path":"/search/(.+)\\\\?(q=.+)?section_id=(.+)","module":"search","screen":""},"Settings":{"path":"/settings","module":"settings","screen":""},"Stats":{"path":"/stats\\\\?(.*)gid=:groupId(\\\\d+)(.*)","module":"","screen":""},"Strikes":{"path":"/strikes/:groupId(-\\\\d+)","module":"strikes","screen":""},"VideosScreenName":{"path":"/video/@:screenName","module":"author_page","screen":""},"Videos":{"path":"/videos:ownerId(-?\\\\d+)","module":"video","screen":""},"Video":{"path":"/video:ownerId(-?\\\\d+)_:id(\\\\d+)","module":"video","screen":""},"Wall":{"path":"/wall:ownerId(-?\\\\d+)","module":"wall","screen":""},"WallPost":{"path":"/wall:ownerId(-?\\\\d+)_:id(\\\\d+)","module":"wall","screen":""}}')}}]);try{stManager.done("dist/api/widgets/chunks/edb6ffde.55dfb3df.js")}catch(e){}