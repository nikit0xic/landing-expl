"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[38234],{146427:(e,t,r)=>{r.d(t,{FriendsFriendStatusStatusEnumNames:()=>i});const i={NOT_A_FRIEND:0,OUTCOMING_REQUEST:1,INCOMING_REQUEST:2,IS_FRIEND:3}},205942:(e,t,r)=>{r.d(t,{API_VERSION:()=>i,BRIDGE_STAT_CALL_ARGUMENTS_MAX_LENGTH:()=>y,CLOSE_STATUS:()=>_,ERROR_CODES:()=>n,ERROR_REASONS:()=>c,ERROR_TYPES:()=>l,GROUP_STATUS:()=>p,NFT_APP_ID:()=>S,ORD_APP_ID:()=>v,PERMISSION_TYPES:()=>d,PLATFORM:()=>s,PMC_PART_CONFIG_KEY_LONG_ID:()=>k,SITPOSTING_APP_ID:()=>m,TEXTLIVE_APPS:()=>f,THROTTLE_SCROLL_TIME:()=>a,VKPAY_APPS:()=>u,VKPAY_TRANSACTION_EVENT:()=>o,VK_CONNECT_EVENTS:()=>g,VK_CONNECT_SUPERAPPKIT_EVENT_TYPE:()=>h,VMOJI_CONSTRUCTOR_APP_ID:()=>E});const i="5.95",a=200,o="VKWebAppActionDone",s={WEB:"web",MOBILE_WEB:"mobile-web"},n={UNKNOWN:1,MISSING_PARAM:2,OLD_MISSING_PARAM:100,CONNECTION_LOST:3,USER_DENIED:4,INVALID_PARAMS:5,UNSUPPORTED_PLATFORM:6,REQUESTS_LIMIT_REACHED:10,ACCESS_DENIED:11,CUSTOM:13,NO_ADS:20},c={ACCESS_DENIED:"Access denied",UNSUPPORTED_PLATFORM:"Unsupported platform",UNSUPPORTED_ACTION:"Unsupported action",NATIVE_APP_IS_NOT_INSTALLED:"VK client is not installed on device",USER_NOT_A_PRIVATE_GROUP_MEMBER:"User is not a member of the given private group",UNKNOWN_ERROR:"Unknown error",CONNECTION_LOST:"Connection lost",NETWORK_ERROR:"Network error",USER_DENIED:"User denied",INVALID_PARAMS:"Invalid params",NO_ADS:"No ads",ADS_ALREADY_PLAYED:"Ads already played",VK_PAY_DISABLED:"This app can't use VK Pay",SCROLL_SUBSCRIBER_ALREADY_EXIST:"Scroll subscriber already exist",SUBSCRIPTION_IS_ALREADY_CANCELLED:"Subscription is in invalid status: subscription is already cancelled",SURVEY_INIT_IN_PROGRESS:"Survey init in progress",SURVEY_ALREADY_INIT:"Survey already init",SURVEY_NO_MATCH:"Survey no match",SURVEY_USER_CANCEL:"Survey user cancel",ALREADY_IN_PROGRESS:"Already in progress",USER_IS_NOT_GROUP_ADMIN:"Only group admins have access to group tokens",DEVICE_CANT_GET_GEODATA:"Device can't get geodata",USER_DIDNT_ALLOWED_ACTION:"User didn't allowed"},l={CLIENT:"client_error",API:"api_error",AUTH:"auth_error"},d={DENIED:"denied",PROMPT:"prompt",GRANTED:"granted"},_=["success","failed"],p={OPEN:0,CLOSED:1,PRIVATE:2},u=[6217559,7131443],f=[7512376],v=51707812,S=51459963,m=7644481,E=7929683,g={VKWebAppAddToCommunity:"add_to_community",VKWebAppAddToCommunityPreload:"get_groups_list",VKWebAppAddToFavorites:"add_to_favorites",VKWebAppAddToFavoritesPreload:"already_added_to_favorites",VKWebAppAddToMenu:"add_to_menu",VKWebAppAddToMenuPreload:"is_in_left_menu",VKWebAppGetCommunityToken:"get_community_token",VKWebAppGetCommunityTokenPreload:"get_community_preload_settings",VKWebAppGetAuthToken:"get_auth_token",VKWebAppGetAuthTokenPreload:"get_auth_token_info",VKWebAppGetPhoneNumber:"get_phone_number",VKWebAppGetPhoneNumberPreload:"already_get_phone_number",VKWebAppGetEmail:"get_email",VKWebAppGetEmailPreload:"already_get_email",VKWebAppGetFriends:"get_friends",VKWebAppAllowNotificationsPreload:"are_notifications_allowed",VKWebAppAllowNotifications:"allow_notifications",VKWebAppDenyNotifications:"deny_notifications",VKWebAppAllowMessagesFromGroup:"allow_messages_from_group",VKWebAppAllowMessagesFromGroupPreload:"can_send_messages_from_group",VKWebAppJoinGroup:"join_group",VKWebAppJoinGroupPreload:"is_group_member",VKWebAppLeaveGroup:"leave_group",VKWebAppLeaveGroupPreload:"is_group_member",VKWebAppOpenApp:"open_app",VKWebAppSendPayload:"send_payload",VKWebAppSendToClient:"send_to_client",VKWebAppSendToClientPreload:"get_open_in_native_permission",VKWebAppShowOrderBox:"order",VKWebAppShowSubscriptionBox:"subscription",VKWebAppShowLeaderBoardBox:"show_leader_board",VKWebAppShowLinkCardBox:"show_link_card",VKWebAppShowNftPaymentBox:"show_nft_pay_box",VKWebAppShowInviteBox:"invite_friends",VKWebAppShowStoryBox:"story_box",VKWebAppShowRequestBox:"send_request",VKWebAppShowRequestBoxPreload:"request_box_preload",VKWebAppStorageGetKeys:"storage_get_keys",VKWebAppStorageSet:"storage_set",VKWebAppStorageGet:"storage_get",VKWebAppOpenArticleEditor:"open_article_edit",VKWebAppSubscribeStoryApp:"subscribe_story_app",VKWebAppClose:"close",VKWebAppGetSilentToken:"get_silent_token",VKWebAppCheckAllowedScopes:"check_allowed_scopes",VKWebAppOpenPayForm:"open_pay_form",VKWebAppCheckSurvey:"check_survey",VKWebAppShowSurvey:"show_survey",VKWebAppAddToChat:"add_to_chat",VKWebAppTrackEvent:"track_event",VKWebAppCallStart:"call_start",VKWebAppCallJoin:"call_join",VKWebAppCallLeft:"call_left",VKWebAppCallFinished:"call_finished",VKWebAppCallGetStatus:"call_get_status"},h="vk-sak-sdk",k="mini_apps_long_id",y=256},22736:(e,t,r)=>{r.d(t,{saveNavigationStatEvent:()=>n,saveViewerStartTime:()=>l});r(659397);var i=r(675029),a=r(66652);function o(){const{connection:e}=navigator;if(!e)return"";const{effectiveType:t,downlink:r}=e;switch(t){case"slow-2g":return"GPRS";case"2g":return"EDGE";case"3g":return"3G";case"4g":return r>8?"wi-fi":"LTE"}return""}let s=[];function n({storyRawId:e,source:t,action:r}){let o=0,n=0;e&&([o,n]=(0,a.splitStoryRawId)(e)),"reply"===t&&(t="replies_list");const c={e:i.STATS_EVENT_TYPE_STORIES_VIEWER_NAVIGATION,owner_id:o,story_id:n,source:t,action:r};s.push(c)}let c=[];function l({storyRawId:e,source:t,time:r}){const[s,n]=(0,a.splitStoryRawId)(e),l={e:i.STATS_EVENT_TYPE_STORIES_VIEWING_START_TIME,owner_id:s,story_id:n,source:t,time:r,internet_type:o()};c.push(l)}},845679:(e,t,r)=>{r.d(t,{createFriendsAddFx:()=>c,createFriendsAddListFx:()=>u,createFriendsDeleteBulkFx:()=>d,createFriendsDeleteFx:()=>l,createFriendsDeleteListFx:()=>f,createFriendsDeleteSubscriberFx:()=>m,createFriendsEditListFx:()=>v,createFriendsGetCountersFx:()=>g,createFriendsGetFriendsDeletionSuggestionsFx:()=>s,createFriendsGetFx:()=>o,createFriendsGetListsFx:()=>a,createFriendsGetOnlineFx:()=>p,createFriendsGetRecentFx:()=>h,createFriendsGetRecommendationsFx:()=>n,createFriendsGetRequestsFx:()=>_,createFriendsRequestsToSubscribersFx:()=>E,createFriendsSearchFx:()=>S});var i=r(876354);const a=e=>(0,i.createApiEffect)("friends.getLists",e),o=e=>(0,i.createApiEffect)("friends.get",e),s=e=>(0,i.createApiEffect)("friends.getFriendsDeletionSuggestions",e),n=e=>(0,i.createApiEffect)("friends.getRecommendations",e),c=e=>(0,i.createApiEffect)("friends.add",e),l=e=>(0,i.createApiEffect)("friends.delete",e),d=e=>(0,i.createApiEffect)("friends.deleteBulk",e),_=e=>(0,i.createApiEffect)("friends.getRequests",e),p=e=>(0,i.createApiEffect)("friends.getOnline",e),u=e=>(0,i.createApiEffect)("friends.addList",e),f=e=>(0,i.createApiEffect)("friends.deleteList",e),v=e=>(0,i.createApiEffect)("friends.editList",e),S=e=>(0,i.createApiEffect)("friends.search",e),m=e=>(0,i.createApiEffect)("friends.deleteSubscriber",e),E=e=>(0,i.createApiEffect)("friends.requestsToSubscribers",e),g=e=>(0,i.createApiEffect)("friends.getCounters",e),h=e=>(0,i.createApiEffect)("friends.getRecent",e)},108538:(e,t,r)=>{r.d(t,{formatCount:()=>i});const i=(e,t)=>{var r,i,a,o,s,n,c;const l=(null==(r=t)?void 0:r.separator)||".";var d;const _=null!=(d=null==(i=t)?void 0:i.maximumFractionDigits)?d:1,p=(null==(a=t)?void 0:a.roundingMode)||void 0,u=(null==(o=t)?void 0:o.kLimit)||1e3,f=(null==(s=t)?void 0:s.mLimit)||1e6,v=(null==(n=t)?void 0:n.bLimit)||1e9,S=(null==(c=window.langConfig)?void 0:c.locale)||"ru",m=(e,t)=>{"floor"===p&&(e=Math.floor(e*Math.pow(10,_))/Math.pow(10,_));let r=e.toFixed(_);return Number(r).toLocaleString(S).replace(/\./,l)+t};if(e>-u&&e<u)return e.toLocaleString(S);const E=e/v;if(E>=1||E<=-1)return m(e/1e9,"B");const g=e/f;if(g>=1||g<=-1)return m(e/1e6,"M");const h=e/u;return h>=1||h<=-1?m(e/1e3,"K"):String(e)}},111607:(e,t,r)=>{r.d(t,{apiAudioToAudioTuple:()=>c});var i=r(902947),a=r(659397),o=r(409782),s=r(347088);const n=new WeakMap,c=(e,{useCache:t=!1}={})=>{var r,c,l,d,_,p,u,f,v,S,m,E;if(!e)return null;if(t){const t=n.get(e);if(t)return t}const g=[e.id,e.owner_id,e.url||"",(0,i.clean)(e.title),(0,i.clean)(e.artist||e.performer||""),e.duration,e.album_id||0,0,"",e.lyrics_id||0,0,"","[]",(0,o.getAudioHashesString)({addHash:e.access_key,editHash:e.access_key,actionHash:e.access_key,deleteHash:e.access_key,replaceHash:e.access_key,urlHash:e.access_key,restoreHash:e.access_key}),(null==(c=e.album)||null==(r=c.thumb)?void 0:r.sizes)?(null==(l=(0,a.getPhotoSize)((null==(_=e.album)||null==(d=_.thumb)?void 0:d.sizes)||[],(0,s.getImageMinWidth)(200)))?void 0:l.url)||"":`${null==(u=e.album)||null==(p=u.thumb)?void 0:p.photo_300},${null==(v=e.album)||null==(f=v.thumb)?void 0:f.photo_135}`||"",e.ads||{},(0,i.clean)(e.subtitle||""),e.main_artists||"",e.featured_artists||"",!!e.album&&[null==(S=e.album)?void 0:S.owner_id,null==(m=e.album)?void 0:m.id,null==(E=e.album)?void 0:E.access_key],e.track_code||"",e.content_restricted||0,e.album_part_number||0,!0,e.access_key||"",e.audio_chart_info||!1,""];return t&&n.set(e,g),g}},644970:(e,t,r)=>{r.d(t,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>i});const i="/"},409782:(e,t,r)=>{r.d(t,{getAudioHashesString:()=>a});var i=r(644970);const a=({addHash:e,editHash:t,actionHash:r,deleteHash:a,replaceHash:o,urlHash:s,restoreHash:n})=>[e||"",t||"",r||"",a||"",o||"",s||"",n||""].join(i.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},547556:(e,t,r)=>{r.d(t,{createCacheService:()=>a});var i=r(204153);const a=e=>{const t=(0,i.getEffectorServiceDomain)(e),r=Object.create(null),a=t.createStore(Object.create(null)),o=t.createEvent("add"),s=t.createEvent("delete");return a.on(o,((e,{key:t,data:r})=>(e[t]=r,e))).on(s,((e,t)=>(delete e[t],e))),{$cache:a,add:o,delete:s,get:e=>a.getState()[e]||null,isWaited:e=>void 0!==r[e],getWaited:e=>r[e],setWaited:(e,t)=>{r[e]=t},deleteWaited:e=>{delete r[e]}}}},734539:(e,t,r)=>{r.d(t,{createOwnerService:()=>a.createOwnerService,createUserService:()=>i.createUserService});var i=r(79759),a=r(926003)},926003:(e,t,r)=>{r.d(t,{createOwnerService:()=>_});var i=r(434788),a=r(798116),o=r(166695),s=r(184132),n=r(547556),c=r(204153),l=r(465451);const d=(0,n.createCacheService)(),_=e=>{const t=e.fields||[],r=(0,c.getEffectorServiceDomain)(e),n=r.createStore({id:0}),_=r.createEvent("initialize"),p=r.createEvent("reload"),u=r.createEffect({name:"initializeFx"}),f=u.pending,v=u.doneData;return u.use((({ownerId:e,useCache:r})=>{if(r){const r=d.get(e);if(r){if(t.every((e=>r.hasOwnProperty(e))))return Promise.resolve(r)}}if(d.isWaited(e)){const r=d.getWaited(e).find((e=>t.every((t=>Boolean(e.fields[t])))));if(r)return r.promise.finally((()=>{d.deleteWaited(e)})),r.promise}let i=s.Ranges.isGroupId(e)?(0,o.apiWithPrefetch)("groups.getById",{group_ids:String(e),fields:t.join(",")}).then((t=>{var r;return(null==(r=t.groups)?void 0:r[0])||{id:e}})):(0,o.apiWithPrefetch)("users.get",{user_ids:String(e),fields:t.join(",")}).then((e=>e[0]));const a={fields:t.reduce(((e,t)=>(e[t]=!0,e)),{}),promise:i},n=d.isWaited(e)?[...d.getWaited(e),a]:[a];return d.setWaited(e,n),i})),(0,a.sample)({clock:_,source:n,filter:(e,t)=>e.id!==t,fn:(t,r)=>{var i;return{ownerId:r,useCache:Boolean(null==(i=e)?void 0:i.useCache)}},target:u}),(0,a.sample)({clock:p,source:n,fn:e=>({ownerId:e.id}),target:u}),(0,a.sample)({clock:u.doneData,target:n}),(0,a.sample)({clock:u.doneData,filter:()=>{var t;return Boolean(null==(t=e)?void 0:t.useCache)},fn:e=>{const t=d.get(e.id);if(t){if((0,l.isOwnerUser)(t)&&(0,l.isOwnerUser)(e))return{key:e.id,data:(0,i._)({},t,e)};if((0,l.isOwnerGroup)(t)&&(0,l.isOwnerGroup)(e))return{key:e.id,data:(0,i._)({},t,e)}}return{key:e.id,data:e}},target:d.add}),{$isInitializing:f,$owner:n,initialize:_,onInitialized:v,reload:p}}},79759:(e,t,r)=>{r.d(t,{createUserService:()=>n});var i=r(11010),a=r(434788),o=r(798116),s=r(166695);const n=({domain:e})=>{const t=(e,t)=>!(!e||e.id!==t.userId),r=e.createStore(null),n=e.createEffect((({params:e})=>(0,s.apiWithPrefetch)("users.get",e))),c=e.createEffect((0,i._)((function*(e){return{userId:e.params.owner_id,response:yield(0,s.api)("wall.subscribe",e.params)}}))),l=e.createEffect((0,i._)((function*(e){return{userId:e.params.owner_id,response:yield(0,s.api)("wall.unsubscribe",e.params)}}))),d=e.createEffect((0,i._)((function*(e){return{userId:e.params.owner_id,response:yield(0,s.api)("video.liveSubscribe",e.params)}}))),_=e.createEffect((0,i._)((function*(e){return{userId:e.params.owner_id,response:yield(0,s.api)("video.liveUnsubscribe",e.params)}}))),p=e.createEffect((0,i._)((function*(e){return{userId:e.params.user_id,response:yield(0,s.api)("fave.addUser",e.params)}}))),u=e.createEffect((0,i._)((function*(e){return{userId:e.params.user_id,response:yield(0,s.api)("fave.removeUser",e.params)}}))),f=e.createEffect((0,i._)((function*(e){return{userId:e.params.owner_id,response:yield(0,s.api)("account.ban",e.params)}}))),v=e.createEffect((0,i._)((function*(e){return{userId:e.params.owner_id,response:yield(0,s.api)("account.unban",e.params)}}))),S=e.createEffect((0,i._)((function*(e){return{userId:e.params.user_id,response:yield(0,s.api)("bestFriends.add",e.params)}}))),m=e.createEffect((0,i._)((function*(e){return{userId:e.params.user_id,response:yield(0,s.api)("bestFriends.delete",e.params)}})));return(0,o.sample)({clock:n.doneData,fn:e=>e[0]||null,target:r}),(0,o.sample)({clock:c.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{is_subscribed:1}),target:r}),(0,o.sample)({clock:l.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{is_subscribed:0}),target:r}),(0,o.sample)({clock:d.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{video_live:e.video_live?(0,a._)({},e.video_live,{is_notifications_blocked:0}):void 0}),target:r}),(0,o.sample)({clock:_.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{video_live:e.video_live?(0,a._)({},e.video_live,{is_notifications_blocked:1}):void 0}),target:r}),(0,o.sample)({clock:p.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{is_favorite:1}),target:r}),(0,o.sample)({clock:u.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{is_favorite:0}),target:r}),(0,o.sample)({clock:f.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{blacklisted_by_me:1}),target:r}),(0,o.sample)({clock:v.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{blacklisted_by_me:0}),target:r}),(0,o.sample)({clock:S.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{is_best_friend:!0}),target:r}),(0,o.sample)({clock:m.doneData,source:r,filter:t,fn:e=>(0,a._)({},e,{is_best_friend:!1}),target:r}),{fetchUserFx:n,subscribeToPostsFx:c,unsubscribeFromPostsFx:l,subscribeToVideoLiveFx:d,unsubscribeFromVideoLiveFx:_,faveAddUserFx:p,faveRemoveUserFx:u,accountBanFx:f,accountUnbanFx:v,bestFriendAddFx:S,bestFriendDeleteFx:m,$user:r,domain:e}}},731030:(e,t,r)=>{r.d(t,{apiFaveAddNarrative:()=>a,apiFaveRemoveNarrative:()=>o});var i=r(166695);function a(e){return(0,i.api)("fave.addNarrative",e)}function o(e){return(0,i.api)("fave.removeNarrative",e)}},988961:(e,t,r)=>{r.d(t,{createFaveService:()=>i.createFaveService});r(731030);var i=r(588243)},588243:(e,t,r)=>{r.d(t,{createFaveService:()=>o});var i=r(798116),a=r(731030);const o=({domain:e})=>{const t=e.createEvent("fire/faveAddNarrative"),r=e.createEvent("fire/faveRemoveNarrative"),o=e.createEffect("fx/faveAddNarrative"),s=e.createEffect("fx/faveRemoveNarrative");return o.use(a.apiFaveAddNarrative),s.use(a.apiFaveRemoveNarrative),(0,i.sample)({clock:t,target:o}),(0,i.sample)({clock:r,target:s}),{fireAddNarrative:t,fireRemoveNarrative:r,addNarrativeFx:o,removeNarrativeFx:s}}},747767:(e,t,r)=>{r.d(t,{findOwnerById:()=>o,isGroup:()=>a});var i=r(688538);function a(e){return i.Ranges.isGroupId(e.id)}const o=(e=0,t=[],r=[])=>{if(e)return i.Ranges.isUserId(e)?t.find((t=>{var r;return(null==(r=t)?void 0:r.id)===e})):r.find((t=>{var r;return(null==(r=t)?void 0:r.id)===Math.abs(e)}))}},797235:(e,t,r)=>{var i,a,o,s,n,c,l,d;r.d(t,{StickerTypes:()=>c,StoryBlockType:()=>s,StoryEntryPoint:()=>a,StoryListName:()=>n,StoryPollBackgroundType:()=>d,StorySource:()=>o,StoryStickerSubtype:()=>l,StoryType:()=>i}),function(e){e.PHOTO="photo",e.VIDEO="video",e.LIVE="live"}(i||(i={})),function(e){e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar"}(a||(a={})),function(e){e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar",e.MY_QUESTIONS="question_story"}(o||(o={})),function(e){e.stories="stories",e.appGroupedStories="app_grouped_stories",e.promoStories="promo_stories",e.discover="discover",e.liveActive="live_active",e.liveFinished="live_finished"}(s||(s={})),function(e){e.feed="feed",e.apps="apps",e.discover="discover"}(n||(n={})),function(e){e[e.hashtag=1]="hashtag",e[e.mention=2]="mention",e[e.question=3]="question",e[e.place=4]="place",e[e.music=5]="music",e[e.storyReply=6]="storyReply",e[e.owner=7]="owner",e[e.link=8]="link",e[e.marketItem=9]="marketItem",e[e.post=10]="post",e[e.poll=11]="poll",e[e.sticker=12]="sticker",e[e.app=13]="app",e[e.situationalTheme=14]="situationalTheme",e[e.playlist=15]="playlist",e[e.videoButton=16]="videoButton",e[e.situationalTemplate=17]="situationalTemplate"}(c||(c={})),function(e){e.aliexpress="aliexpress_product",e.market="market_item"}(l||(l={})),function(e){e.photo="photo",e.gradient="gradient",e.default="default"}(d||(d={}))},680463:(e,t,r)=>{r.d(t,{apiLikesAdd:()=>a,apiLikesDelete:()=>o});var i=r(166695);function a(e){return(0,i.api)("likes.add",e)}function o(e){return(0,i.api)("likes.delete",e)}},891507:(e,t,r)=>{var i;!function(e){e.Story="story"}(i||(i={}))},290050:(e,t,r)=>{r.d(t,{createLikesService:()=>i.createLikesService});var i=r(540853);r(680463),r(891507)},540853:(e,t,r)=>{r.d(t,{createLikesService:()=>o});var i=r(798116),a=r(680463);const o=({domain:e})=>{const t=e.createEvent("fire/likesAdd"),r=e.createEvent("fire/likesDelete"),o=e.createEffect("fx/likesAdd"),s=e.createEffect("fx/likesDelete");return o.use(a.apiLikesAdd),s.use(a.apiLikesDelete),(0,i.sample)({clock:t,target:o}),(0,i.sample)({clock:r,target:s}),{fireAdd:t,fireDelete:r,addFx:o,deleteFx:s}}},974171:(e,t,r)=>{r.d(t,{apiMessagesSend:()=>a});var i=r(166695);function a(e){return(0,i.api)("messages.send",e)}},45412:(e,t,r)=>{r.d(t,{apiMessagesSend:()=>i.apiMessagesSend,createMessagesService:()=>a.createMessagesService});var i=r(974171),a=r(552948)},552948:(e,t,r)=>{r.d(t,{createMessagesService:()=>o});var i=r(798116),a=r(974171);const o=({domain:e})=>{const t=e.createEvent("fire/messageSend"),r=e.createEffect("fx/messageSend");return r.use(a.apiMessagesSend),(0,i.sample)({clock:t,target:r}),{fireMessagesSend:t,sendFx:r}}},659157:(e,t,r)=>{r.d(t,{apiNarrativesBatchEdit:()=>s,apiNarrativesCreate:()=>a,apiNarrativesDelete:()=>n,apiNarrativesEdit:()=>o,apiNarrativesGetById:()=>c,apiNarrativesGetFeedBlock:()=>l,apiNarrativesGetFromOwner:()=>d,apiNarrativesReorder:()=>p,apiNarrativesSaveCustomCover:()=>_});var i=r(166695);function a(e){return(0,i.api)("narratives.create",e)}function o(e){return(0,i.api)("narratives.edit",e)}function s(e){return(0,i.api)("narratives.batchEdit",e)}function n(e){return(0,i.api)("narratives.delete",e)}function c(e){return(0,i.api)("narratives.getById",e)}function l(e={}){return(0,i.api)("narratives.getFeedBlock",e)}function d(e){return(0,i.api)("narratives.getFromOwner",e)}function _(e){return(0,i.api)("narratives.saveCustomCover",e)}function p(e){return(0,i.api)("narratives.reorder",e)}},683849:(e,t,r)=>{r.d(t,{apiNarrativesGetById:()=>a.apiNarrativesGetById,apiNarrativesGetFeedBlock:()=>a.apiNarrativesGetFeedBlock,apiNarrativesGetFromOwner:()=>a.apiNarrativesGetFromOwner,createNarrativesService:()=>i.createNarrativesService});var i=r(97577),a=r(659157)},97577:(e,t,r)=>{r.d(t,{createNarrativesService:()=>o});var i=r(798116),a=r(659157);const o=({domain:e})=>{const t=e.createEvent("fire/narrativesGetById"),r=e.createEvent("fire/narrativesGetFromOwner"),o=e.createEvent("fire/narrativesGetFeedBlock"),s=e.createEvent("fire/narrativesCreate"),n=e.createEvent("fire/narrativesEdit"),c=e.createEvent("fire/narrativesBatchEdit"),l=e.createEvent("fire/narrativesDelete"),d=e.createEvent("fire/narrativesSaveCustomCover"),_=e.createEvent("fire/narrativesReorder"),p=e.createEffect("fx/narrativesGetById"),u=e.createEffect("fx/narrativesGetFromOwner"),f=e.createEffect("fx/narrativesGetFeedBlock"),v=e.createEffect("fx/narrativesCreate"),S=e.createEffect("fx/narrativesEdit"),m=e.createEffect("fx/narrativesBatchEdit"),E=e.createEffect("fx/narrativesDelete"),g=e.createEffect("fx/narrativesSaveCustomCover"),h=e.createEffect("fx/narrativesReorder");return p.use(a.apiNarrativesGetById),u.use(a.apiNarrativesGetFromOwner),f.use(a.apiNarrativesGetFeedBlock),v.use(a.apiNarrativesCreate),S.use(a.apiNarrativesEdit),m.use(a.apiNarrativesBatchEdit),E.use(a.apiNarrativesDelete),g.use(a.apiNarrativesSaveCustomCover),h.use(a.apiNarrativesReorder),(0,i.sample)({clock:t,target:p}),(0,i.sample)({clock:r,target:u}),(0,i.sample)({clock:o,target:f}),(0,i.sample)({clock:s,target:v}),(0,i.sample)({clock:n,target:S}),(0,i.sample)({clock:c,target:m}),(0,i.sample)({clock:l,target:E}),(0,i.sample)({clock:d,target:g}),(0,i.sample)({clock:_,target:h}),{fireGetById:t,fireGetFromOwner:r,fireGetFeedBlock:o,fireCreate:s,fireEdit:n,fireBatchEdit:c,fireDelete:l,fireSaveCustomCover:d,fireReorder:_,getByIdFx:p,getFromOwnerFx:u,getFeedBlockFx:f,createFx:v,editFx:S,batchEditFx:m,deleteFx:E,saveCustomCoverFx:g,reorderFx:h}}},558027:(e,t,r)=>{r.d(t,{PHOTO_ALBUM_COVER_MIN_WIDTH:()=>i,getPhotoSize:()=>a});const i=200;function a(e,t){var r,i,a,o;if(!(null==(i=e)||null==(r=i.sizes)?void 0:r.length))return"";const s=[...e.sizes].sort(((e,t)=>e.width-t.width));let n=s.find((e=>e.width>=t));return(null==(a=n)?void 0:a.url)?n.url:(n=s.reverse().find((e=>e.width<t)),(null==(o=n)?void 0:o.url)?n.url:"")}},435120:(e,t,r)=>{r.d(t,{apiPollsCreate:()=>o,apiPollsGetById:()=>a});var i=r(166695);function a(e){return(0,i.api)("polls.getById",e)}function o(e){return(0,i.api)("polls.create",e)}},626197:(e,t,r)=>{r.d(t,{createPollsService:()=>i.createPollsService});r(435120);var i=r(781461)},781461:(e,t,r)=>{r.d(t,{createPollsService:()=>o});var i=r(798116),a=r(435120);const o=({domain:e})=>{const t=e.createEvent("fire/pollsGetById"),r=e.createEvent("fire/pollsCreate"),o=e.createEffect("fx/pollsGetById"),s=e.createEffect("fx/pollsCreate");return o.use(a.apiPollsGetById),s.use(a.apiPollsCreate),(0,i.sample)({clock:t,target:o}),(0,i.sample)({clock:r,target:s}),{fireGetById:t,fireCreate:r,getByIdFx:o,createFx:s}}},414599:(e,t,r)=>{r.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>i,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>d,REACTION_ID_DEFAULT:()=>o,REACTION_ID_MAX:()=>s,REACTION_ID_MIN:()=>n,REACTION_ID_UNSET:()=>c,REACTION_SET_ITEMS_MIN_COUNT:()=>l,SHOW_TOOLTIP_TIMEOUT:()=>a});const i=600,a=140,o=0,s=7,n=0,c=void 0,l=2,d=o},144812:(e,t,r)=>{r.d(t,{reactionCountsBrandUnwrap:()=>a,reactionCountsBrandWrap:()=>o});var i=r(982350);const a=e=>(0,i.unwrap)(e),o=e=>(0,i.wrap)(e)},654200:(e,t,r)=>{r.d(t,{areCountersEqual:()=>w,calcCounters:()=>h,calcCountersSum:()=>k,calcCountersWeightedSum:()=>y,counterForReactionId:()=>I,getDefaultReaction:()=>l,getDefaultReactionTitle:()=>d,getReaction:()=>c,hasReactionsForCounts:()=>T,isReactionIdSet:()=>u,isReactionIdUnset:()=>f,isUnknownObject:()=>n,isValidReactionId:()=>v,parseReactionId:()=>S,parseReactionIdOrUnset:()=>m,parseReactionMenuConfig:()=>g,prepareReactionMenuSet:()=>p,validateReactionSetPayloaditems:()=>E});var i=r(414599),a=r(144812),o=r(659397);const s=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),n=e=>null!==e&&"object"==typeof e,c=(e,t)=>e.itemsById[t],l=e=>c(e,i.REACTION_ID_DEFAULT),d=e=>{var t;return null==(t=l(e))?void 0:t.title},_=(e,t)=>0===e.length?"":((e,t,r=!0)=>e.reduce(((e,i)=>{const a=t(i),o=t(e);return o===a?r?e:i:o<a?e:i})))(e,(e=>Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)),!1).url,p=(e,t,r)=>{const i=t.map((({asset:e,color_sets:t,id:i,score:a,title:o})=>{var s,n;return{animationURL:e.animation_url||void 0,backgroundColor:null==(s=t)?void 0:s.background,id:i,imageMenuURL:_(e.images,r.imageMenuSize),imagePreviewURL:"imagePreviewSize"in r?_(e.images,r.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in r?_(e.images,r.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in r?_(e.images,r.imageStoryPreviewSize):void 0,score:a,title:o,titleColor:null==(n=t)?void 0:n.foreground}})),a={};return i.forEach((e=>{a[e.id]=e})),{id:e,items:i,itemsById:a}},u=e=>e!==i.REACTION_ID_UNSET,f=e=>e===i.REACTION_ID_UNSET,v=e=>s(e)&&e>=i.REACTION_ID_MIN&&e<=i.REACTION_ID_MAX,S=e=>{const t=parseInt(e,10);return v(t)?{isValid:!0,value:t}:{isValid:!1}},m=e=>{const t=S(e);return t.isValid?t.value:i.REACTION_ID_UNSET},E=(e,t)=>{if(e.length<i.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},g=e=>{if(!n(e))return;const t={},{animationShowStaticAfterEnd:r,menuShowDelay:a,openedDefaultReactionId:o,reportJsErrors:s}=e;return"number"!=typeof a&&void 0!==a||(t.menuShowDelay=a),"boolean"==typeof r&&(t.animationShowStaticAfterEnd=r),"boolean"==typeof s&&(t.reportJsErrors=s),"number"==typeof o||null===o?null===o?t.openedDefaultReactionId=void 0:v(o)&&(t.openedDefaultReactionId=o):t.openedDefaultReactionId=i.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},h=(e,t)=>{const r=(0,a.reactionCountsBrandWrap)({});return Object.entries((0,a.reactionCountsBrandUnwrap)(e)).forEach((([e,i])=>{var a,o,s;const n=e;var c;const l=null!=(c=null==(s=t)||null==(o=s.itemsById)||null==(a=o[n])?void 0:a.score)?c:1;r[n]=l*(i||0)})),r},k=e=>Object.values((0,a.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),y=e=>k((0,a.reactionCountsBrandWrap)(e)),T=e=>k(e)>0;var A;const I=(e,t)=>null!=(A=e[t])?A:void 0,w=(e,t)=>e&&t?(0,o.isEqual)(e,t):e===t},982350:(e,t,r)=>{r.d(t,{unwrap:()=>i,wrap:()=>a});const i=e=>e,a=e=>e},674506:(e,t,r)=>{r.d(t,{apiStatsTrackEvents:()=>a});var i=r(166695);function a(e){return(0,i.api)("stats.trackEvents",e)}},675029:(e,t,r)=>{r.d(t,{STATS_EVENT_TYPE_STORIES_VIEWER_NAVIGATION:()=>i,STATS_EVENT_TYPE_STORIES_VIEWING_START_TIME:()=>a,STATS_EVENT_TYPE_STORY_LINK_VIEW:()=>o,STATS_EVENT_TYPE_VIDEO_ONBOARDING:()=>s});const i="stories_viewer_navigation",a="stories_viewing_start_time",o="story_link_view",s="video_onboarding"},195365:(e,t,r)=>{r.d(t,{STATS_EVENT_TYPE_STORY_LINK_VIEW:()=>i.STATS_EVENT_TYPE_STORY_LINK_VIEW,STATS_EVENT_TYPE_VIDEO_ONBOARDING:()=>i.STATS_EVENT_TYPE_VIDEO_ONBOARDING,apiStatsTrackEvents:()=>a.apiStatsTrackEvents,createStatsService:()=>o.createStatsService});var i=r(675029),a=r(674506),o=r(765949)},765949:(e,t,r)=>{r.d(t,{createStatsService:()=>o});var i=r(798116),a=r(674506);const o=({domain:e})=>{const t=e.createEvent("fire/statsTrackEvents"),r=e.createEffect("fx/statsTrackEvents");return r.use(a.apiStatsTrackEvents),(0,i.sample)({clock:t,target:r}),{fireTrackEvents:t,trackEventsFx:r}}},445374:(e,t,r)=>{r.d(t,{apiStoriesAskQuestion:()=>h,apiStoriesBanOwner:()=>O,apiStoriesBanQuestionAuthor:()=>y,apiStoriesDelete:()=>g,apiStoriesDeleteQuestion:()=>k,apiStoriesGet:()=>a,apiStoriesGetArchive:()=>c,apiStoriesGetById:()=>s,apiStoriesGetDetailedStats:()=>u,apiStoriesGetDiscover:()=>n,apiStoriesGetPhotoUploadServer:()=>w,apiStoriesGetQuestions:()=>_,apiStoriesGetReplies:()=>d,apiStoriesGetStats:()=>p,apiStoriesGetVideoUploadServer:()=>b,apiStoriesGetViewers:()=>l,apiStoriesGetWithPrefetch:()=>o,apiStoriesHideAllReplies:()=>D,apiStoriesHidePrivacyBlock:()=>E,apiStoriesHideReply:()=>P,apiStoriesMarkAppNotificationsSeen:()=>A,apiStoriesMarkNotInterested:()=>v,apiStoriesMarkSeen:()=>m,apiStoriesMarkSkipped:()=>f,apiStoriesSave:()=>R,apiStoriesSearch:()=>S,apiStoriesSetDiscoverVisible:()=>F,apiStoriesSubscribeUserToApp:()=>I,apiStoriesUnbanOwner:()=>N,apiStoriesUnbanQuestionAuthor:()=>T});var i=r(166695);function a(e){return(0,i.api)("stories.get",e)}function o(e){return(0,i.apiWithPrefetch)("stories.get",e)}function s(e){return(0,i.api)("stories.getById",e)}function n(e){return(0,i.api)("stories.getDiscover",e)}function c(e){return(0,i.api)("stories.getArchive",e)}function l(e){return(0,i.api)("stories.getViewers",e)}function d(e){return(0,i.api)("stories.getReplies",e)}function _(e){return(0,i.api)("stories.getQuestions",e)}function p(e){return(0,i.api)("stories.getStats",e)}function u(e){return(0,i.api)("stories.getDetailedStats",e)}function f(e){return(0,i.api)("stories.markSkipped",e)}function v(e){return(0,i.api)("stories.markNotInterested",e)}function S(e){return(0,i.api)("stories.search",e)}function m(e){return(0,i.api)("stories.markSeen",e)}function E(e){return(0,i.api)("stories.hidePrivacyBlock",e)}function g(e){return(0,i.api)("stories.delete",e)}function h(e){return(0,i.api)("stories.askQuestion",e)}function k(e){return(0,i.api)("stories.deleteQuestion",e)}function y(e){return(0,i.api)("stories.banQuestionAuthor",e)}function T(e){return(0,i.api)("stories.unbanQuestionAuthor",e)}function A(e){return(0,i.api)("stories.markAppNotificationsSeen",e)}function I(e){return(0,i.api)("stories.subscribeUserToApp",e)}function w(e){return(0,i.api)("stories.getPhotoUploadServer",e)}function b(e){return(0,i.api)("stories.getVideoUploadServer",e)}function R(e){return(0,i.api)("stories.save",e)}function O(e){return(0,i.api)("stories.banOwner",e)}function N(e){return(0,i.api)("stories.unbanOwner",e)}function F(e){return(0,i.api)("stories.setDiscoverVisible",e)}function P(e){return(0,i.api)("stories.hideReply",e)}function D(e){return(0,i.api)("stories.hideAllReplies",e)}},522398:(e,t,r)=>{r.d(t,{STORIES_ARCHIVE_START_TIME:()=>a,STORIES_MAX_COUNT_REPLIES:()=>i});const i=250,a=1559032200},172453:(e,t,r)=>{r.d(t,{StoryFeedbackLoadMethods:()=>i,fetchFeedbackFx:()=>n,getStoryFeedbackLoadParams:()=>s});var i,a=r(175898),o=r(76306);!function(e){e[e.getViewers=0]="getViewers",e[e.getReplies=1]="getReplies",e[e.getQuestions=2]="getQuestions",e[e.getDetailedStats=3]="getDetailedStats",e[e.getStats=4]="getStats"}(i||(i={}));const s=(e,t)=>({0:{owner_id:e,story_id:t,extended:1,count:100,fields:(0,o.makeOwnerFields)(["is_nft","photo_100","photo_50"])},1:{owner_id:e,story_id:t,extended:1,fields:(0,o.getStoryOwnerFields)()},2:{owner_id:e,story_id:t,extended:1,fields:(0,o.makeOwnerFields)(["domain","first_name_dat","first_name_ins","last_name_ins","last_name_dat","first_name_gen","last_name_gen"]),count:30},3:{owner_id:e,story_id:t},4:{owner_id:e,story_id:t}}),n=a.storiesDomain.createEffect({name:"fire/storiesGetFeedback",handler:({ownerId:e,storyId:t,pollId:r})=>{const i=s(e,t);return Promise.allSettled([a.storiesService.getViewersFx(i[0]),a.storiesService.getRepliesFx(i[1]),a.storiesService.getQuestionsFx(i[2]),r?a.pollsService.getByIdFx({owner_id:e,poll_id:r}):Promise.resolve(null),a.storiesService.getDetailedStatsFx(i[3]),a.storiesService.getStatsFx(i[4])]).then((e=>e.map((e=>{var t;return"fulfilled"===e.status?null==(t=e)?void 0:t.value:null}))))}})},846701:(e,t,r)=>{r.d(t,{STORIES_ARCHIVE_START_TIME:()=>n.STORIES_ARCHIVE_START_TIME,STORIES_MAX_COUNT_REPLIES:()=>n.STORIES_MAX_COUNT_REPLIES,StoryFeedbackLoadMethods:()=>l.StoryFeedbackLoadMethods,apiStoriesGet:()=>s.apiStoriesGet,apiStoriesGetArchive:()=>s.apiStoriesGetArchive,apiStoriesGetById:()=>s.apiStoriesGetById,apiStoriesGetDiscover:()=>s.apiStoriesGetDiscover,apiStoriesGetReplies:()=>s.apiStoriesGetReplies,apiStoriesGetWithPrefetch:()=>s.apiStoriesGetWithPrefetch,apiStoriesSearch:()=>s.apiStoriesSearch,createStoriesService:()=>i.createStoriesService,decodeBase64:()=>a.decodeBase64,faveService:()=>c.faveService,fetchFeedbackFx:()=>l.fetchFeedbackFx,getStoryFeedbackLoadParams:()=>l.getStoryFeedbackLoadParams,narrativesService:()=>c.narrativesService,saveNavigationStatEvent:()=>o.saveNavigationStatEvent,saveViewerStartTime:()=>o.saveViewerStartTime,splitStoryRawId:()=>a.splitStoryRawId,statsService:()=>c.statsService,storiesService:()=>c.storiesService,userService:()=>c.userService});var i=r(633863),a=r(66652),o=r(22736),s=r(445374),n=r(522398),c=r(175898),l=r(172453)},540032:(e,t,r)=>{r.d(t,{FEED_STORIES_BLOCK_OWNER_FIELDS:()=>a,FEED_STORIES_BLOCK_OWNER_MINIMIZED_FIELDS:()=>i});const i=["photo_100","is_nft","is_nft_photo"],a=["first_name","last_name","first_name_gen","last_name_gen","first_name_ins","last_name_ins","screen_name","name","is_member","is_closed","is_nft","is_nft_photo","photo_50","photo_100","photo_200","friend_status","verified","sex"]},76306:(e,t,r)=>{r.d(t,{getStoryOwnerFields:()=>a,makeOwnerFields:()=>o});var i=r(540032);function a(e=!1){return o(e?i.FEED_STORIES_BLOCK_OWNER_MINIMIZED_FIELDS:i.FEED_STORIES_BLOCK_OWNER_FIELDS)}function o(e){return e.join(",")}},98619:(e,t,r)=>{r.d(t,{transformClickableStickers:()=>S});var i=r(659397),a=r(465451),o=r(205942),s=r(111607),n=r(471828),c=r(558027),l=r(747767),d=r(665593),_=r(797235);const p={hashtag:_.StickerTypes.hashtag,mention:_.StickerTypes.mention,question:_.StickerTypes.question,place:_.StickerTypes.place,music:_.StickerTypes.music,story_reply:_.StickerTypes.storyReply,owner:_.StickerTypes.owner,link:_.StickerTypes.link,market_item:_.StickerTypes.marketItem,post:_.StickerTypes.post,poll:_.StickerTypes.poll,sticker:_.StickerTypes.sticker,app:_.StickerTypes.app,situational_theme:_.StickerTypes.situationalTheme,playlist:_.StickerTypes.playlist,clip:_.StickerTypes.videoButton,situational_template:_.StickerTypes.situationalTemplate},u={transparent:1,blue_gradient:2,red_gradient:3,underline:4,blue:5,green:6,white:7,question_reply:8,light:9,impressive:10,dark:11,accent_background:12,accent_text:13,dark_unique:14,light_unique:15,light_text:18,dark_text:19,black:20,dark_without_bg:21,light_without_bg:22},f=(e,t=6)=>isNaN(e)?NaN:Number(e.toFixed(t)),v=/^\[(id|club)(\d+)\|(.*)]$/;function S(e,t=[],r=[],S){var m,E,g;const h=null==(m=e)?void 0:m.clickable_stickers;if(!(h&&Object.values(h).length&&h.original_width&&h.original_height))return{original_width:0,original_height:0,stickers:[]};let k=h.original_width,y=h.original_height;Number((y/k).toFixed(2))>1.78&&(y=1.78*k);const T=(h.original_height-y)/2,A=k/100,I=y/100;return{original_width:k,original_height:y,stickers:(null==(g=h)||null==(E=g.clickable_stickers)?void 0:E.length)?h.clickable_stickers.reduce(((m,E)=>{if(!E)return m;const{clickable_area:g=[]}=E;if(g.length<4)return m;const h=Math.sqrt(Math.pow(g[1].x-g[0].x,2)+Math.pow(g[1].y-g[0].y,2)),k=Math.sqrt(Math.pow(g[1].x-g[2].x,2)+Math.pow(g[1].y-g[2].y,2));if(!h||!k)return m;const y=g[1].x-g[0].x;let w=180*Math.acos(y/h)/Math.PI;isNaN(w)&&(w=0),g[1].y<g[0].y&&(w=-w);const b=p[E.type],R={id:E.id,type:b,top:f((g[0].y-T)/I/100),left:f(g[0].x/A/100),width:f(h/A/100),height:f(k/I/100),rotate:f(w)};E.style&&(R.style=u[E.style]);let O=!1;switch(b){case _.StickerTypes.hashtag:E.hashtag?R.hashtag=E.hashtag:O=!0;break;case _.StickerTypes.mention:{var N,F,P;const e=null==(N=E.mention)?void 0:N.match(v),i=null==(F=e)?void 0:F[1],o=Number(null==(P=e)?void 0:P[2]);if(!o||isNaN(o)){O=!0;break}const s="id"===i&&t.find((({id:e})=>e===o)),n=!s&&"club"===i&&r.find((({id:e})=>e===o));s?(R.mentionedPhotoUrl=s.photo_100||s.photo_50||"",R.mentionedOwnerHref=(0,a.getOwnerHref)(s),R.mentionedText=(0,a.getOwnerFullName)(s)):n?(R.mentionedText=n.name||"",R.mentionedPhotoUrl=n.photo_100||n.photo_50||"",R.mentionedOwnerHref=(0,a.getOwnerHref)(n)):O=!0;break}case _.StickerTypes.question:R.question=E.question||"";break;case _.StickerTypes.place:E.place_id?R.placeId=E.place_id:O=!0;break;case _.StickerTypes.music:if(!E.audio){O=!0;break}var D,x,G;if(R.audioId=`${E.audio.owner_id}_${E.audio.id}`,R.audioData=JSON.stringify((0,s.apiAudioToAudioTuple)(E.audio)),E.audio_restrictions)R.audioRestriction={code:E.audio_restrictions.id,title:E.audio_restrictions.title,buttonText:(null==(D=E.audio_restrictions.button)?void 0:D.title)||"",buttonUrl:(null==(G=E.audio_restrictions.button)||null==(x=G.action)?void 0:x.url)||""};break;case _.StickerTypes.playlist:if(!E.playlist){O=!0;break}R.playlistOwnerId=E.playlist.owner_id,R.playlistId=E.playlist.id,R.playlistFollowed=Boolean(E.playlist.followed);break;case _.StickerTypes.storyReply:E.owner_id&&(R.ownerId=E.owner_id),R.link=(0,a.getOwnerHref)((0,l.findOwnerById)(E.owner_id,t,r)),E.story_id?R.storyId=E.story_id:R.isExpired=!0;break;case _.StickerTypes.owner:E.owner_id&&(R.ownerId=E.owner_id),R.link=(0,a.getOwnerHref)((0,l.findOwnerById)(E.owner_id,t,r));break;case _.StickerTypes.link:E.link_object?(R.link=E.link_object.url?(0,d.wrapAwayIfExternal)(E.link_object.url):"",R.tooltipText=E.tooltip_text||""):O=!0;break;case _.StickerTypes.marketItem:var C;if(E.subtype===_.StoryStickerSubtype.aliexpress)R.link=(null==(C=E.link_object)?void 0:C.url)?(0,d.wrapAwayIfExternal)(E.link_object.url):"",R.photoUrl=E.link_object&&(0,c.getPhotoSize)(E.link_object.photo,50*devicePixelRatio)||"";else if(E.subtype===_.StoryStickerSubtype.market&&E.market_item){var B;if(R.photoUrl=E.market_item.thumb&&(null==(B=(0,i.getPhotoSize)(E.market_item.thumb,50*devicePixelRatio))?void 0:B.url)||"",R.isRestricted=!1,S)R.link=`/product${E.market_item.owner_id}_${E.market_item.id}`;else{const e=(0,a.getOwnerHref)((0,l.findOwnerById)(E.market_item.owner_id,t,r));R.link=`${e}?w=product${E.market_item.owner_id}_${E.market_item.id}`}}else O=!0;break;case _.StickerTypes.post:E.post_owner_id&&(R.postOwnerId=E.post_owner_id),E.post_id?R.postId=E.post_id:O=!0;break;case _.StickerTypes.poll:E.poll?(R.pollId=E.poll.id,R.pollOwnerId=E.poll.owner_id):O=!0;break;case _.StickerTypes.app:if(E.app){R.appId=E.app.id,R.hasNewInteractions=Boolean(E.has_new_interactions);const t=[e.owner_id,e.id,"story",E.id];E.app_context&&t.push(btoa(E.app_context)),R.appRef=`story${t.join("_")}`}else O=!0;break;case _.StickerTypes.sticker:E.sticker_pack_id?(R.stickerPackId=E.sticker_pack_id,E.sticker_id&&(R.stickerId=E.sticker_id),R.tooltipText=n.getLang("stories_view_sticker_pack")):O=!0;break;case _.StickerTypes.situationalTheme:E.situational_theme_id?(R.situationalAppId=o.SITPOSTING_APP_ID,R.situationalThemeId=E.situational_theme_id):O=!0;break;case _.StickerTypes.videoButton:E.clip_id?(E.owner_id&&(R.videoOwnerId=E.owner_id),R.videoId=E.clip_id,R.videoType=E.type,R.tooltipText=n.getLang("stories_link_attach_clip")):O=!0;break;default:O=!0}return O||m.push(R),m}),[]):[]}}},96653:(e,t,r)=>{r.d(t,{transformDetailedStatsData:()=>_,transformPoll:()=>d,transformStoryQuestions:()=>l});var i=r(471828),a=r(659397),o=r(465451),s=r(797235);const n=(e="",t="")=>e&&t?`${e} ${t}`:e||t,c=(e,t=32)=>(0,a.getPhotoSize)(null!=e?e:[],t*window.devicePixelRatio),l=(e,t,r=0,i=0)=>(0,a.isArray)(e)&&(0,a.isArray)(t)?e.map((({id:e,is_anonymous:a,question:s,is_owner_blocked:c,is_published:l,owner_id:d})=>{var _,p,u,f,v,S,m;const E=!a&&window.vk.id!=d,g=!a&&window.vk.id!=d,h=null==(_=t)?void 0:_.find((e=>{var t;return(null==(t=e)?void 0:t.id)===d}));return{author:h?{link:(0,o.getOwnerHref)(h),name:(0,o.getOwnerFullName)(h),nameDat:n(null==(p=h)?void 0:p.first_name_dat,null==(u=h)?void 0:u.last_name_dat),nameGen:n(null==(f=h)?void 0:f.first_name_gen,null==(v=h)?void 0:v.last_name_gen),nameIns:n(null==(S=h)?void 0:S.first_name_ins,null==(m=h)?void 0:m.last_name_ins)}:{},canAnswer:E,canBlocked:g,id:e,isAnonymous:a,isOwnerBlocked:c,isPublished:l,ownerId:d,storyId:i,storyOwnerId:r,text:s}})):[],d=e=>{if(!e)return null;const{votes:t,id:r,owner_id:a,question:o,photo:n,background:l,can_vote:d}=e;return{ownerId:a,pollId:r,question:o,votersCountText:t?i.getLang("voting_N_voted",t):i.getLang("voting_nobody_voted"),background:n?{type:s.StoryPollBackgroundType.photo,photoUrl:(null==(p=c(null==(u=n)?void 0:u.images))?void 0:p.url)||"",backgroundColor:(null==(f=n)?void 0:f.color)||""}:"gradient"===(null==(_=l)?void 0:_.type)?{type:s.StoryPollBackgroundType.gradient,angle:l.angle||0,color:l.color||"",points:l.points||[]}:{type:s.StoryPollBackgroundType.default},needShowResults:!d};var _,p,u,f},_=e=>{var t,r;return e?{preview:e.preview||"",achievement:e.achievement||"",achievementSubtitle:e.achievement_subtitle||"",categories:(null==(t=e.categories)?void 0:t.map((e=>({title:e.header,lines:e.lines.map((e=>({name:e.name||"",counter:e.is_unavailable?i.getLang("stories_stat_off"):String(null!=(r=e.counter)?r:""),unavailable:e.is_unavailable})))}))))||[]}:null}},134064:(e,t,r)=>{r.d(t,{transformDetailedStatsData:()=>a.transformDetailedStatsData,transformNarrativeGetApiResponseToLegacyFormat:()=>i.transformNarrativeGetApiResponseToLegacyFormat,transformPoll:()=>a.transformPoll,transformStoriesToLegacy:()=>i.transformStoriesToLegacy,transformStoryGetApiResponseToLegacyFormat:()=>i.transformStoryGetApiResponseToLegacyFormat,transformStoryQuestions:()=>a.transformStoryQuestions});r(98619),r(993110),r(903864);var i=r(480966),a=r(96653)},480966:(e,t,r)=>{r.d(t,{getVideoSize:()=>O,transformNarrativeGetApiResponseToLegacyFormat:()=>m,transformStoriesToLegacy:()=>k,transformStoryGetApiResponseToLegacyFormat:()=>S});var i=r(434788),a=r(146427),o=r(172045),s=r(465451),n=r(108538),c=r(797235),l=r(471828),d=r(659397),_=r(902947),p=r(747767),u=r(98619),f=r(993110),v=r(654200);function S(e,t,r){const{items:i,profiles:a=[],groups:s=[],reaction_sets:n}=e,l=i.map((e=>{var i,l,d,_,u;const f=e.owner_id||(null==(l=e.stories)||null==(i=l[0])?void 0:i.owner_id)||0,v=(0,p.findOwnerById)(f,a,s)||{id:f},m=(null==(d=e.stories)?void 0:d.filter(Boolean))||[],k=t===c.StoryListName.feed||t===c.StoryListName.discover||t===c.StoryListName.apps,T={id:e.id||(0,o.default)(),author:g(v,a,null==(_=m[0])?void 0:_.also_subscribed),has_unseen:e.has_unseen,items:m.map((e=>h(e,v,a,s,r,t))),track_code:e.track_code,can_blacklist:k,app:e.app&&E(e.app),type:e.type,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,is_apps:e.type===c.StoryBlockType.appGroupedStories,next_from:""};if((null==(u=e.grouped)?void 0:u.length)&&(T.grouped=S({items:e.grouped,profiles:a,groups:s},t,r)),n&&(T.reaction_set=y(n)),r){const i=function(e,t,r,i,a,o){var s;const n=null==(s=e.stories)?void 0:s[0],c=e.app;if("app_grouped_stories"!==e.type||!n)return;const l=h(n,t,r,i,a,o);l.raw_id=l.raw_id+"&meta",l.is_apps_meta_story=!0,c&&(l.app=E(c));return l}(e,v,a,s,r,t);i&&T.items.push(i)}return T}));return l}function m(e,t,r){const{items:i,profiles:a=[],groups:s=[]}=e;return i.map((e=>{var i,n,l,d;const _=e.owner_id||(null==(n=e.stories)||null==(i=n[0])?void 0:i.owner_id)||0,u=(0,p.findOwnerById)(_,a,s)||{id:_},v=(null==(l=e.stories)?void 0:l.filter(Boolean))||[];return{id:(0,o.default)(),author:g(u,a,null==(d=v[0])?void 0:d.also_subscribed),items:v.map((e=>h(e,u,a,s,r,t))),can_blacklist:!1,type:c.StoryBlockType.stories,send_mask_hash:"",remove_from_blacklist_hash:"",is_apps:!1,next_from:"",is_narrative:!0,narrative:(0,f.transformNarrative)(e,u)}}))}function E(e){return{url:`/app${e.id}`,name:e.title,photoUrl:e.icon_139||e.icon_150||e.icon_75||""}}function g(e,t=[],r){const i=e.verified?'<div class="page_verified"></div>':"",a=function(e,t=[]){if(!e)return;const r=[],i=e.user_ids||[];return i.forEach((e=>{const i=t.find((t=>t.id===e));i&&r.push({photo_url:i.photo_50||i.photo_100||"",href:(0,s.getOwnerHref)(i),name:i.first_name||"",sex:i.sex||0})})),{total_count:e.count||0,owners:r}}(r,t);if((0,s.isOwnerUser)(e)){const t=e.id,r=e.first_name||"",o=e.last_name||"",n=e.first_name_gen||"",c=e.last_name_gen||"",l=e.first_name_ins||"",_=(0,s.getOwnerFullName)(e),p=o?`${n} ${c}`:n;return{id:t,name:(0,d.escape)(_),name_get:(0,d.escape)(p),firstName:(0,d.escape)(r),first_name_gen:(0,d.escape)(n),first_name_ins:(0,d.escape)(l),photo:e.photo_100||e.photo_50||"",href:(0,s.getOwnerHref)(e),verify:i,gender:e.sex||0,can_follow:A(e),nft:Boolean(e.is_nft),also_subscribed:a}}const o=-e.id,n=(0,d.escape)(e.name||"");return{id:o,name:n,name_get:n,firstName:n,first_name_gen:n,first_name_ins:n,photo:e.photo_100||e.photo_50||"",href:(0,s.getOwnerHref)(e),verify:i,gender:0,can_follow:A(e),nft:Boolean(e.is_nft_photo),also_subscribed:a}}function h(e,t,r,i,a,o){var f,v,S,m,E,g,h,k,y,A,F;let P,D;if(null==(f=e.mask)?void 0:f.owner_id){var x;const t=(0,p.findOwnerById)(null==(x=e.mask)?void 0:x.owner_id,r,i);t&&(P=t.screen_name,(0,s.isOwnerUser)(t)&&(D=t.sex))}const G=I(t,e),C=!G&&(o===c.StoryListName.feed||o===c.StoryListName.apps||o===c.StoryListName.discover);return{owner_id:e.owner_id,raw_id:`${e.owner_id}_${e.id}`,date:(0,l.getSmDate)(e.date||0),time:e.date||0,type:N(e),unread:!e.seen,canLike:Boolean(e.can_like),can_comment:w(e),can_share:Boolean(e.can_share),can_remove:b(e,t),can_delete_with_reason:Boolean(e.can_delete_with_reason),can_manage:G,can_ask:Boolean(e.can_ask),can_ask_anonymous:Boolean(e.can_ask_anonymous),canAddToNarrative:e.can_use_in_narrative,stats:{follow:{event_type:"subscribe",rhash:""},url_view:{event_type:"url_view",rhash:""}},isLiked:Boolean(e.is_liked),likeHash:"",reaction_set_id:e.reaction_set_id||"",user_reaction_id:e.user_reaction_id||0,preview_url:"",needMute:Boolean(e.need_mute),muteReply:Boolean(e.mute_reply),isPromo:Boolean(e.is_promo),isProfileQuestion:Boolean(e.is_profile_question),promoCaption:e.is_promo&&e.caption||"",track_code:e.track_code||"",video:{owner_id:e.owner_id,video_id:(null==(v=e.video)?void 0:v.id)||0},link:e.link?{text:e.link.text||"",url:e.link.url||""}:void 0,isPartOfNarrative:Boolean(e.narratives_count),report_hash:"",maskOwnerDomain:P,maskOwnerSex:D,can_hide_reply:R(e,r,i),noSound:Boolean(e.no_sound),isNewQuestions:G&&Boolean(null==(S=e.questions)?void 0:S.new),views:Boolean(e.views)?(0,n.formatCount)(e.views||0):"",needShowEmptyStats:Boolean(e.need_show_empty_stats),is_expired:Boolean(e.is_expired),is_deleted:Boolean(e.is_deleted),is_private:!Boolean(e.can_see),isAds:Boolean(e.is_ads),isOneTime:Boolean(e.is_one_time),isOneTimeSeen:Boolean(e.is_one_time)&&!Boolean(e.can_see),seenProgress:0,replies:(null==(m=e.replies)?void 0:m.count)?(0,n.formatCount)(e.replies.count):"",replies_new_counter:(null==(E=e.replies)?void 0:E.new)||0,clickable_stickers:(0,u.transformClickableStickers)(e,r,i,a),askQuestionHash:"",canMarkNotInterested:C,photo_url:(null==(g=e.photo)?void 0:g.sizes)&&(null==(h=(0,d.getPhotoSize)(e.photo.sizes,(0,_.isRetina)()?1200:600))?void 0:h.url)||"",small_preview:T(e,a),video_url:(null==(k=e.video)?void 0:k.files)?O(e.video.files):"",first_frame:(null==(y=e.video)?void 0:y.first_frame)&&(null==(A=(0,d.getPhotoSize)(null==(F=e.video)?void 0:F.first_frame,800))?void 0:A.url)||"",is_apps_meta_story:!1,repliesCountText:"",authorId:0,isMusicCover:!1,is_authors_ads:e.is_authors_ads,advertiser_info_url:e.advertiser_info_url,ad_marker:e.ad_marker,caption:e.caption,is_best_friends_privacy:e.is_best_friends_privacy}}function k(e,t,r){var i,a;const{items:s,profiles:n,groups:l,reaction_sets:d}=e,_=(null==(i=s[0])?void 0:i.owner_id)||0,u=(0,p.findOwnerById)(_,n,l)||{id:_},f=t===c.StoryListName.feed||t===c.StoryListName.discover||t===c.StoryListName.apps,v=s.some((e=>!e.seen)),S={id:(0,o.default)(),author:g(u,n,null==(a=s[0])?void 0:a.also_subscribed),has_unseen:v,items:s.map((e=>h(e,u,n,l,r,t))),track_code:"",can_blacklist:f,type:c.StoryBlockType.stories,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,is_apps:!1,next_from:""};return d&&(S.reaction_set=y(d)),[S]}function y(e){return e.map((({id:e,items:t})=>(0,v.prepareReactionMenuSet)(e,t.map((e=>(0,i._)({},e,{id:e.id}))),{imageMenuSize:{width:96,height:96},imagePreviewSize:{width:32,height:32},imageStoryPanelSize:{width:128,height:128},imageStoryPreviewSize:{width:40,height:40}})))}function T(e,t=!1){var r,i;const a=null==(r=e.photo)?void 0:r.sizes;var o;if(a)return(null==(o=(0,d.getPhotoSize)(a,t?10:(0,_.isRetina)()?600:300))?void 0:o.url)||"";const s=null==(i=e.video)?void 0:i.first_frame;var n;return s&&(null==(n=(0,d.getPhotoSize)(s,t?10:320))?void 0:n.url)||""}function A(e){return(0,s.isOwnerUser)(e)?window.vk.id!==e.id&&(e.friend_status===a.FriendsFriendStatusStatusEnumNames.NOT_A_FRIEND||e.friend_status===a.FriendsFriendStatusStatusEnumNames.INCOMING_REQUEST):!e.is_member&&!e.is_closed}function I(e,t){return(0,s.isOwnerUser)(e)?t.owner_id===e.id&&window.vk.id===e.id:t.owner_id===-e.id&&(t.is_ads?Boolean(e.is_advertiser):Boolean(e.is_admin))}function w(e){return e.can_comment?Boolean(e.can_comment):"live_active"===e.type&&Boolean(null==(t=e.video)?void 0:t.can_comment);var t}function b(e,t){return!e.is_deleted&&(!e.can_delete_with_reason&&(!!e.can_delete||I(t,e)&&("photo"===e.type||"video"===e.type)))}function R(e,t,r){if(!e.parent_story_owner_id||!e.parent_story_id)return!1;const i=window.vk.id,a=e.parent_story_owner_id;if(a===i)return!0;const o=(0,p.findOwnerById)(a,t,r);return!!(o&&(0,s.isOwnerGroup)(o)&&o.is_admin)}function O(e){const t=["mp4_2160","mp4_1440","mp4_1080","mp4_720","mp4_480","mp4_360","mp4_240","mp4_144"].find((t=>Boolean(e[t])));return t&&e[t]?String(e[t]):""}function N(e){return"photo"===e.type?c.StoryType.PHOTO:"video"===e.type?c.StoryType.VIDEO:"live_active"===e.type||"live_finished"===e.type?c.StoryType.LIVE:c.StoryType.PHOTO}},993110:(e,t,r)=>{r.d(t,{transformNarrative:()=>s});var i=r(659397),a=r(465451),o=(r(747767),r(903864));function s(e,t){var r,s;const n=`${e.owner_id}_${e.id}`,c=(0,a.isOwnerGroup)(t),l=c&&Boolean(t.is_closed),d={id:e.id,rawId:n,ownerId:e.owner_id,ownerName:(0,i.escape)((c?t.name:(0,a.getOwnerFullName)(t))||""),ownerShortName:(0,i.escape)((c?t.name:(0,a.getOwnerShortName)(t))||""),ownerUrl:(0,a.getOwnerHref)(t),ownerPath:`${c?"club":"id"}${e.owner_id}`,ownerAvatarUrl:t.photo_100||t.photo_50||"",title:(0,i.escape)(e.title),isBookmarked:e.is_favorite,bookmarkHash:"",reportHash:"",canEdit:Boolean(e.can_delete),editHash:"",canView:e.can_see,storiesCount:(null==(r=e.story_ids)?void 0:r.length)||0,isOwnerClosedGroup:l,isGroupEditor:l&&Boolean(t.is_admin),url:`${window.location.origin}/narrative${n}`,stories:(null==(s=e.stories)?void 0:s.map(o.transformStoryArchive))||[],isDeleted:e.is_delete,date:"",coverUrl:""};if(e.cover){var _;Object.assign(d,{coverUrl:e.cover.cropped_sizes&&(null==(_=(0,i.getPhotoSize)(e.cover.cropped_sizes,300))?void 0:_.url)||"",coverCrop:{x:e.cover.crop_x||0,y:e.cover.crop_y||0,width:e.cover.crop_width||0,height:e.cover.crop_height||0}}),e.cover.custom_photo&&(d.customCover=function(e,t=[]){var r,a,o,s;if(!e)return;return{photoId:e.id,originalPhotoUrl:(null==(r=e.orig_photo)?void 0:r.url)||e.sizes&&(null==(a=(0,i.getPhotoSize)(e.sizes,600))?void 0:a.url)||"",previewUrl:t&&(null==(o=(0,i.getPhotoSize)(t,300))?void 0:o.url)||e.sizes&&(null==(s=(0,i.getPhotoSize)(e.sizes,300))?void 0:s.url)||""}}(e.cover.custom_photo,e.cover.cropped_sizes));const t=e.cover.cover_story_id;if(t){var p;Object.assign(d,{coverStoryId:t,coverStoryRawId:`${e.owner_id}_${t}`});const r=null==(p=e.stories)?void 0:p.find((e=>{var r;return(null==(r=e)?void 0:r.id)===t}));r&&(d.coverStory=(0,o.transformStoryArchive)(r))}}return d}},903864:(e,t,r)=>{r.d(t,{transformStoryArchive:()=>n});var i=r(659397),a=r(846701),o=r(480966),s=r(665593);function n(e){var t,r,n,c;const l=Math.max(e.date?Math.ceil(new Date(1e3*e.date).setUTCHours(0,0,0,0)/1e3):0,a.STORIES_ARCHIVE_START_TIME),d=(null==(t=e.photo)?void 0:t.sizes)||(null==(r=e.video)?void 0:r.image),_={id:e.id,rawId:`${e.owner_id}_${e.id}`,listId:`archive${e.owner_id}_${l}`,time:Number(e.date),preview:d&&(null==(n=(0,i.getPhotoSize)(d,350))?void 0:n.url)||"",originalPreviewUrl:d&&(null==(c=(0,i.getPhotoSize)(d,600))?void 0:c.url)||""};return"video"===e.type&&e.video&&Object.assign(_,{videoUrl:e.video.files&&(0,o.getVideoSize)(e.video.files)||"",duration:e.video.duration}),e.link&&Object.assign(_,{linkUrl:(0,s.wrapAwayIfExternal)(e.link.url)||"",linkText:e.link.text||"",linkType:""}),_}},633863:(e,t,r)=>{r.d(t,{createStoriesService:()=>c});var i=r(798116),a=r(445374),o=r(845679),s=r(76927),n=r(34467);const c=({domain:e})=>{const t=e.createEvent("fire/storiesGet"),r=e.createEvent("fire/storiesGetById"),c=e.createEvent("fire/storiesGetArchive"),l=e.createEvent("fire/storiesGetViewers"),d=e.createEvent("fire/storiesGetReplies"),_=e.createEvent("fire/storiesGetQuestions"),p=e.createEvent("fire/storiesGetStats"),u=e.createEvent("fire/storiesGetDetailedStats"),f=e.createEvent("fire/storiesMarkSkipped"),v=e.createEvent("fire/storiesMarkNotInterested"),S=e.createEvent("fire/storiesMarkSeen"),m=e.createEvent("fire/storiesHidePrivacyBlock"),E=e.createEvent("fire/storiesDelete"),g=e.createEvent("fire/storiesAskQuestion"),h=e.createEvent("fire/storiesDeleteQuestion"),k=e.createEvent("fire/storiesBanQuestionAuthor"),y=e.createEvent("fire/storiesUnbanQuestionAuthor"),T=e.createEvent("fire/storiesMarkAppNotificationsSeen"),A=e.createEvent("fire/storiesSubscribeUserToApp"),I=e.createEvent("fire/storiesGetPhotoUploadServer"),w=e.createEvent("fire/storiesGetVideoUploadServer"),b=e.createEvent("fire/storiesSave"),R=e.createEvent("fire/storiesSearch"),O=e.createEvent("fire/storiesUnbanOwner"),N=e.createEvent("fire/storiesBanOwner"),F=e.createEvent("fire/storiesSetDiscoverVisible"),P=e.createEvent("fire/storiesHideReply"),D=e.createEvent("fire/storieHideAllReplies"),x=e.createEffect("fx/storiesGet"),G=e.createEffect("fx/storiesGetById"),C=e.createEffect("fx/storiesGetArchive"),B=e.createEffect("fx/storiesGetViewers"),V=e.createEffect("fx/storiesGetReplies"),L=e.createEffect("fx/storiesGetQuestions"),U=e.createEffect("fx/storiesGetStats"),M=e.createEffect("fx/storiesGetDetailedStats"),W=e.createEffect("fx/storiesMarkSkipped"),K=e.createEffect("fx/storiesMarkNotInterested"),H=e.createEffect("fx/storiesMarkSeen"),Y=e.createEffect("fx/storiesHidePrivacyBlock"),Q=e.createEffect("fx/storiesDelete"),z=e.createEffect("fx/storiesAskQuestion"),$=e.createEffect("fx/storiesDeleteQuestion"),q=e.createEffect("fx/storiesBanQuestionAuthor"),j=e.createEffect("fx/storiesUnbanQuestionAuthor"),J=e.createEffect("fx/storiesMarkAppNotificationsSeen"),X=e.createEffect("fx/storiesSubscribeUserToApp"),Z=e.createEffect("fx/storiesGetPhotoUploadServer"),ee=e.createEffect("fx/storiesGetVideoUploadServer"),te=e.createEffect("fx/storiesSave"),re=e.createEffect("fx/storiesSearch"),ie=e.createEffect("fx/storiesUnbanOwner"),ae=e.createEffect("fx/storiesBanOwner"),oe=e.createEffect("fx/storiesSetDiscoverVisible"),se=e.createEffect("fx/storiesHideReply"),ne=e.createEffect("fx/storiesHideAllReplies"),ce=(0,o.createFriendsAddFx)({domain:e}),le=(0,o.createFriendsDeleteFx)({domain:e}),de=(0,s.createGroupsJoinFx)({domain:e}),_e=(0,s.createGroupsLeaveFx)({domain:e});return x.use(a.apiStoriesGet),G.use(a.apiStoriesGetById),C.use(a.apiStoriesGetArchive),B.use(a.apiStoriesGetViewers),V.use(a.apiStoriesGetReplies),L.use(a.apiStoriesGetQuestions),U.use(a.apiStoriesGetStats),M.use(a.apiStoriesGetDetailedStats),W.use(a.apiStoriesMarkSkipped),K.use(a.apiStoriesMarkNotInterested),H.use(a.apiStoriesMarkSeen),Y.use(a.apiStoriesHidePrivacyBlock),Q.use(a.apiStoriesDelete),z.use(a.apiStoriesAskQuestion),$.use(a.apiStoriesDeleteQuestion),q.use(a.apiStoriesBanQuestionAuthor),j.use(a.apiStoriesUnbanQuestionAuthor),J.use(a.apiStoriesMarkAppNotificationsSeen),X.use(a.apiStoriesSubscribeUserToApp),Z.use(a.apiStoriesGetPhotoUploadServer),ee.use(a.apiStoriesGetVideoUploadServer),te.use(a.apiStoriesSave),re.use(a.apiStoriesSearch),ae.use(a.apiStoriesBanOwner),ie.use(a.apiStoriesUnbanOwner),oe.use(a.apiStoriesSetDiscoverVisible),se.use(a.apiStoriesHideReply),ne.use(a.apiStoriesHideAllReplies),(0,n.connectTrackTmrGroupsJoin)(de),(0,i.sample)({clock:t,target:x}),(0,i.sample)({clock:r,target:G}),(0,i.sample)({clock:c,target:C}),(0,i.sample)({clock:l,target:B}),(0,i.sample)({clock:d,target:V}),(0,i.sample)({clock:_,target:L}),(0,i.sample)({clock:p,target:U}),(0,i.sample)({clock:u,target:M}),(0,i.sample)({clock:f,target:W}),(0,i.sample)({clock:v,target:K}),(0,i.sample)({clock:S,target:H}),(0,i.sample)({clock:m,target:Y}),(0,i.sample)({clock:E,target:Q}),(0,i.sample)({clock:g,target:z}),(0,i.sample)({clock:h,target:$}),(0,i.sample)({clock:k,target:q}),(0,i.sample)({clock:y,target:j}),(0,i.sample)({clock:T,target:J}),(0,i.sample)({clock:A,target:X}),(0,i.sample)({clock:I,target:Z}),(0,i.sample)({clock:w,target:ee}),(0,i.sample)({clock:b,target:te}),(0,i.sample)({clock:R,target:re}),(0,i.sample)({clock:O,target:ie}),(0,i.sample)({clock:N,target:ae}),(0,i.sample)({clock:F,target:oe}),(0,i.sample)({clock:P,target:se}),(0,i.sample)({clock:D,target:ne}),{fireGet:t,fireGetById:r,fireGetArchive:c,fireGetViewers:l,fireGetReplies:d,fireGetQuestions:_,fireGetStats:p,fireGetDetailedStats:u,fireMarkSkipped:f,fireMarkNotInterested:v,fireMarkSeen:S,fireHidePrivacyBlock:m,fireDelete:E,fireAskQuestion:g,fireDeleteQuestion:h,fireBanQuestionAuthor:k,fireUnbanQuestionAuthor:y,fireMarkAppNotificationsSeen:T,fireSubscribeUserToApp:A,fireGetPhotoUploadServer:I,fireGetVideoUploadServer:w,fireSave:b,fireSearch:R,fireUnbanOwner:O,fireBanOwner:N,fireSetDiscoverVisible:F,fireHideReply:P,fireHideAllReplies:D,getFx:x,getByIdFx:G,getArchiveFx:C,getViewersFx:B,getRepliesFx:V,getQuestionsFx:L,getStatsFx:U,getDetailedStatsFx:M,markSkippedFx:W,markNotInterestedFx:K,markSeenFx:H,hidePrivacyBlockFx:Y,deleteFx:Q,askQuestionFx:z,deleteQuestionFx:$,banQuestionAuthorFx:q,unbanQuestionAuthorFx:j,markAppNotificationsSeenFx:J,subscribeUserToAppFx:X,getPhotoUploadServerFx:Z,getVideoUploadServerFx:ee,saveFx:te,searchFx:re,unbanOwnerFx:ie,banOwnerFx:ae,setDiscoverVisibleFx:oe,hideReplyFx:se,hideAllRepliesFx:ne,friendsAddFx:ce,friendsDeleteFx:le,groupsJoinFx:de,groupsLeaveFx:_e}}},175898:(e,t,r)=>{r.d(t,{faveService:()=>S,narrativesService:()=>v,pollsService:()=>m,statsService:()=>f,storiesDomain:()=>p,storiesService:()=>u,userService:()=>E});var i=r(798116),a=r(846701),o=r(195365),s=r(683849),n=r(290050),c=r(45412),l=r(988961),d=r(626197),_=r(734539);const p=(0,i.createDomain)("stories"),u=(0,a.createStoriesService)({domain:p}),f=(0,o.createStatsService)({domain:p}),v=(0,s.createNarrativesService)({domain:p}),S=((0,n.createLikesService)({domain:p}),(0,c.createMessagesService)({domain:p}),(0,l.createFaveService)({domain:p})),m=(0,d.createPollsService)({domain:p}),E=(0,_.createUserService)({domain:p})},66652:(e,t,r)=>{function i(e){var t,r;return(null!=(r=null==(t=e)?void 0:t.split("_"))?r:[]).map(Number)}function a(e,t="windows-1251"){return new TextDecoder(t).decode(function(e){const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)||0))}(e))}r.d(t,{decodeBase64:()=>a,splitStoryRawId:()=>i})},259844:(e,t,r)=>{r.d(t,{getStoryList:()=>o,removeStoryList:()=>s,setApiStoryList:()=>n,setStoryList:()=>a,transformApiStoryList:()=>c});var i=r(134064);function a(e,t){window.cur[`stories_list_${e}`]=t}function o(e){return window.cur[`stories_list_${e}`]}function s(e){delete window.cur[`stories_list_${e}`]}function n(e,t){a(e,c(e,t))}function c(e,t){return(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,!1)}}}]);try{stManager.done("dist/web/chunks/aee1802d.66e5c328.js")}catch(e){}